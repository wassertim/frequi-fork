import{a as v,D as F}from"./DraggableContainer-abb9d2f7.js";import{C as A,P as G,T as M}from"./TradesLog-765cfbbd.js";import{P as W,I as $}from"./InfoBox-bd34570d.js";import{d as U,u as j,i as c,C as q,g as H,n as V,o as b,j as T,w as s,a as C,h as B,t as P,c as R,f as N,E as J,r as K,F as k,av as S,z as Q,k as e,b as o,m as L}from"./index-369ec608.js";import{T as I}from"./TradeList-59f99048.js";import"./install-37e83d45.js";import"./install-94ef3642.js";const X=(a,r)=>!a.profitClosed||!r.profitClosed?-1:a.profitClosed-r.profitClosed,Y=U({name:"BotComparisonList",components:{ProfitPill:W},setup(){const a=j(),r=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],f=c(()=>{const g=[],p={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(a.allProfit).forEach(([l,i])=>{var m,h,y,_;const n=a.allOpenTrades[l].reduce((u,d)=>u+d.stake_amount,0),D=a.allOpenTrades[l].reduce((u,d)=>u+d.profit_ratio*d.stake_amount,0)/n,t=a.allOpenTrades[l].reduce((u,d)=>u+(d.profit_abs??0),0);g.push({botId:l,botName:a.availableBots[l].botName,trades:`${a.allOpenTradeCount[l]} / ${((m=a.allBotState[l])==null?void 0:m.max_open_trades)||"N/A"}`,profitClosed:i.profit_closed_coin,profitClosedRatio:i.profit_closed_ratio||0,stakeCurrency:((h=a.allBotState[l])==null?void 0:h.stake_currency)||"",profitOpenRatio:D,profitOpen:t,wins:i.winning_trades,losses:i.losing_trades,balance:(y=a.allBalance[l])==null?void 0:y.total,stakeCurrencyDecimals:((_=a.allBotState[l])==null?void 0:_.stake_currency_decimals)||3}),i.profit_closed_coin!==void 0&&(p.profitClosed+=i.profit_closed_coin,p.profitOpen+=i.profit_all_coin,p.wins+=i.winning_trades,p.losses+=i.losing_trades)}),g.push(p),g.sort(X)});return{formatPrice:q,tableFields:r,tableItems:f,botStore:a}}}),Z={class:"d-flex flex-row"},ee={key:0},te=["title"],ae={class:"text-small"},oe={key:0},se={class:"text-profit"},re={class:"text-loss"};function le(a,r,f,g,p,l){const i=V("b-form-checkbox"),n=V("profit-pill"),D=V("b-table");return b(),T(D,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:a.tableItems,fields:a.tableFields},{"cell(botName)":s(t=>[C("div",Z,[t.item.botId&&a.botStore.botCount>1?(b(),T(i,{key:0,modelValue:a.botStore.botStores[t.item.botId].isSelected,"onUpdate:modelValue":m=>a.botStore.botStores[t.item.botId].isSelected=m,title:"Show bot in Dashboard"},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),C("span",null,P(t.value),1)])]),"cell(profitOpen)":s(t=>[t.item.profitOpen&&t.item.botId!="Summary"?(b(),T(n,{key:0,"profit-ratio":t.item.profitOpenRatio,"profit-abs":t.item.profitOpen,"stake-currency":t.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):B("",!0)]),"cell(profitClosed)":s(t=>[t.item.profitClosed&&t.item.botId!="Summary"?(b(),T(n,{key:0,"profit-ratio":t.item.profitClosedRatio,"profit-abs":t.item.profitClosed,"stake-currency":t.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):B("",!0)]),"cell(balance)":s(t=>[t.item.balance?(b(),R("div",ee,[C("span",{title:t.item.stakeCurrency},P(a.formatPrice(t.item.balance,t.item.stakeCurrencyDecimals)),9,te),C("span",ae,P(t.item.stakeCurrency),1)])):B("",!0)]),"cell(winVsLoss)":s(t=>[t.item.losses!==void 0?(b(),R("div",oe,[C("span",se,P(t.item.wins),1),N(" / "),C("span",re,P(t.item.losses),1)])):B("",!0)]),_:1},8,["items","fields"])}const ie=H(Y,[["render",le]]),ne={class:"d-flex justify-content-center"},de={class:"d-flex justify-content-center"},be=U({__name:"DashboardView",setup(a){const r=j(),f=J(),g=K(""),p=O=>{g.value=O},l=c(()=>["","sm","md","lg","xl"].includes(g.value)),i=c(()=>f.layoutLocked||!l.value),n=c(()=>l.value?f.dashboardLayout:[...f.getDashboardLayoutSm]),D=O=>{l.value&&(console.log("newlayout",O),console.log("saving dashboard"),f.dashboardLayout=O)},t=c(()=>k(n.value,S.dailyChart)),m=c(()=>k(n.value,S.botComparison)),h=c(()=>k(n.value,S.allOpenTrades)),y=c(()=>k(n.value,S.allClosedTrades)),_=c(()=>k(n.value,S.cumChartChart)),u=c(()=>k(n.value,S.profitDistributionChart)),d=c(()=>k(n.value,S.tradesLogChart)),z=c(()=>({sm:f.getDashboardLayoutSm}));return Q(async()=>{await r.allGetDaily({timescale:30}),r.activeBot.getOpenTrades(),r.activeBot.getProfit()}),(O,ce)=>{const w=V("grid-item"),E=V("grid-layout");return b(),T(E,{class:"h-100 w-100","row-height":50,layout:e(n),"vertical-compact":!1,margin:[5,5],"responsive-layouts":e(z),"is-resizable":!e(i),"is-draggable":!e(i),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:D,onBreakpointChanged:p},{default:s(({gridItemProps:x})=>[o(w,L(x,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:`Daily Profit ${e(r).botCount>1?"combined":""}`},{default:s(()=>[e(r).allDailyStatsSelectedBots?(b(),T(F,{key:0,"daily-stats":e(r).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):B("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Bot comparison"},{default:s(()=>[o(ie)]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,null,{header:s(()=>[C("div",ne,[N(" Open Trades "),o($,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[o(I,{"active-trades":"",trades:e(r).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(_).i,x:e(_).x,y:e(_).y,w:e(_).w,h:e(_).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Cumulative Profit"},{default:s(()=>[o(A,{trades:e(r).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(y).i,x:e(y).x,y:e(y).y,w:e(y).w,h:e(y).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,null,{header:s(()=>[C("div",de,[N(" Closed Trades "),o($,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[o(I,{"active-trades":!1,"show-filter":"",trades:e(r).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(u).i,x:e(u).x,y:e(u).y,w:e(u).w,h:e(u).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Profit Distribution"},{default:s(()=>[o(G,{trades:e(r).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(d).i,x:e(d).x,y:e(d).y,w:e(d).w,h:e(d).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Trades Log"},{default:s(()=>[o(M,{trades:e(r).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{be as default};
//# sourceMappingURL=DashboardView-578a8a2b.js.map
