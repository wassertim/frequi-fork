import{d as I,r as y,i as P,o as c,c as h,b as t,k as s,I as F,n as p,x as v,C as W,J as G,A as z,a as u,t as V,w as o,j as x,h as R,g as D,K,f as w,u as j,z as J,l as oe,p as Q,e as X,L as ee,M as Y,G as ie,N as re,P as ne}from"./index-a26190e4.js";import{_ as ue,T as Z,a as ce}from"./StrategySelect.vue_vue_type_script_setup_true_lang-11e17579.js";import{T as te}from"./TradeList-20a3052b.js";import{T as de,C as me,P as _e}from"./TradesLog-5e271b1c.js";import{D as be,_ as fe,P as ve,I as ke}from"./InfoBox-bb0b0dfe.js";import{P as pe}from"./PairSummary-15557393.js";import{C as ge}from"./CandleChartContainer-e56c166d.js";import"./install-10b53263.js";import"./chartZoom-16ae2117.js";import"./createSeriesDataSimply-7d1d5dcf.js";const ye=I({__name:"BacktestResultPeriodBreakdown",props:{periodicBreakdown:{type:Object,required:!0}},setup(a){const e=[{value:"day",text:"Days"},{value:"week",text:"Weeks"},{value:"month",text:"Months"}],r=y("day"),b=P(()=>[{key:"date",label:"Date"},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"loses",label:"Losses"}]);return(k,_)=>{const f=p("b-form-radio-group"),g=p("b-table");return c(),h(F,null,[t(f,{id:"order-direction",modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=d=>r.value=d),options:e,name:"radios-btn-default",size:"sm",buttons:"",style:{"min-width":"10em"},"button-variant":"outline-primary"},null,8,["modelValue"]),t(g,{small:"",hover:"",stacked:"sm",items:a.periodicBreakdown[r.value],fields:s(b)},null,8,["items","fields"])],64)}}}),Re={class:"container-fluid px-0 backtestresult-container"},he={class:"row d-flex justify-content-center"},Be={class:"row text-start ms-0"},we={class:"row w-100"},xe={class:"col-12 col-xl-6 px-0 px-xl-0 pe-xl-1"},$e={class:"col-12 col-xl-6 px-0 px-xl-0 pt-2 pt-xl-0 ps-xl-1"},Ve=I({__name:"BacktestResultView",props:{backtestResult:{required:!0,type:Object}},setup(a){const e=a,r=l=>`${W(l,e.backtestResult.stake_currency_decimals)} ${e.backtestResult.stake_currency}`,b=l=>l.trades.slice().sort((S,C)=>S.profit_ratio-C.profit_ratio),k=P(()=>{const l=b(e.backtestResult);if(l.length===0)return"N/A";const $=l[l.length-1];return`${$.pair} ${v($.profit_ratio,2)}`}),_=P(()=>{const l=b(e.backtestResult);if(l.length===0)return"N/A";const $=l[0];return`${$.pair} ${v($.profit_ratio,2)}`}),f=P(()=>{var $,S;const l=($=e.backtestResult)!=null&&$.trade_count_short&&((S=e.backtestResult)==null?void 0:S.trade_count_short)>0?[{metric:"___",value:"___"},{metric:"Long / Short",value:`${e.backtestResult.trade_count_long} / ${e.backtestResult.trade_count_short}`},{metric:"Total profit Long",value:`${v(e.backtestResult.profit_total_long||0)} | ${r(e.backtestResult.profit_total_long_abs)}`},{metric:"Total profit Short",value:`${v(e.backtestResult.profit_total_short||0)} | ${r(e.backtestResult.profit_total_short_abs)}`}]:[];return[{metric:"Total Profit",value:`${v(e.backtestResult.profit_total)} | ${r(e.backtestResult.profit_total_abs)}`},{metric:"CAGR",value:`${e.backtestResult.cagr?v(e.backtestResult.cagr):"N/A"}`},{metric:"Sortino",value:`${e.backtestResult.sortino?e.backtestResult.sortino.toFixed(2):"N/A"}`},{metric:"Sharpe",value:`${e.backtestResult.sharpe?e.backtestResult.sharpe.toFixed(2):"N/A"}`},{metric:"Calmar",value:`${e.backtestResult.calmar?e.backtestResult.calmar.toFixed(2):"N/A"}`},{metric:"Expectancy",value:`${e.backtestResult.expectancy?e.backtestResult.expectancy.toFixed(2):"N/A"}`},{metric:"Profit factor",value:`${e.backtestResult.profit_factor?W(e.backtestResult.profit_factor,3):"N/A"}`},{metric:"Total trades / Daily Avg Trades",value:`${e.backtestResult.total_trades} / ${e.backtestResult.trades_per_day}`},{metric:"Best day",value:`${v(e.backtestResult.backtest_best_day,2)} | ${r(e.backtestResult.backtest_best_day_abs)}`},{metric:"Worst day",value:`${v(e.backtestResult.backtest_worst_day,2)} | ${r(e.backtestResult.backtest_worst_day_abs)}`},{metric:"Win/Draw/Loss",value:`${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].wins} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].draws} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].losses}`},{metric:"Days win/draw/loss",value:`${e.backtestResult.winning_days} / ${e.backtestResult.draw_days} / ${e.backtestResult.losing_days}`},{metric:"Avg. Duration winners",value:G(e.backtestResult.winner_holding_avg_s)},{metric:"Avg. Duration Losers",value:G(e.backtestResult.loser_holding_avg_s)},{metric:"Rejected entry signals",value:e.backtestResult.rejected_signals},{metric:"Entry/Exit timeouts",value:`${e.backtestResult.timedout_entry_orders} / ${e.backtestResult.timedout_exit_orders}`},{metric:"Canceled Trade Entries",value:e.backtestResult.canceled_trade_entries??"N/A"},{metric:"Canceled Entry Orders",value:e.backtestResult.canceled_entry_orders??"N/A"},{metric:"Replaced Entry Orders",value:e.backtestResult.replaced_entry_orders??"N/A"},...l,{metric:"___",value:"___"},{metric:"Min balance",value:r(e.backtestResult.csum_min)},{metric:"Max balance",value:r(e.backtestResult.csum_max)},{metric:"Market change",value:v(e.backtestResult.market_change)},{metric:"___",value:"___"},{metric:"Max Drawdown (Account)",value:v(e.backtestResult.max_drawdown_account)},{metric:"Max Drawdown ABS",value:r(e.backtestResult.max_drawdown_abs)},{metric:"Drawdown high | low",value:`${r(e.backtestResult.max_drawdown_high)} | ${r(e.backtestResult.max_drawdown_low)}`},{metric:"Drawdown start",value:z(e.backtestResult.drawdown_start_ts)},{metric:"Drawdown end",value:z(e.backtestResult.drawdown_end_ts)},{metric:"___",value:"___"},{metric:"Best Pair",value:`${e.backtestResult.best_pair.key} ${v(e.backtestResult.best_pair.profit_sum)}`},{metric:"Worst Pair",value:`${e.backtestResult.worst_pair.key} ${v(e.backtestResult.worst_pair.profit_sum)}`},{metric:"Best single Trade",value:k.value},{metric:"Worst single Trade",value:_.value}]}),g=P(()=>[{setting:"Backtesting from",value:z(e.backtestResult.backtest_start_ts)},{setting:"Backtesting to",value:z(e.backtestResult.backtest_end_ts)},{setting:"BT execution time",value:G(e.backtestResult.backtest_run_end_ts-e.backtestResult.backtest_run_start_ts)},{setting:"Max open trades",value:e.backtestResult.max_open_trades},{setting:"Timeframe",value:e.backtestResult.timeframe},{setting:"Timeframe Detail",value:e.backtestResult.timeframe_detail||"N/A"},{setting:"Timerange",value:e.backtestResult.timerange},{setting:"Stoploss",value:v(e.backtestResult.stoploss,2)},{setting:"Trailing Stoploss",value:e.backtestResult.trailing_stop},{setting:"Trail only when offset is reached",value:e.backtestResult.trailing_only_offset_is_reached},{setting:"Trailing Stop positive",value:e.backtestResult.trailing_stop_positive},{setting:"Trailing stop positive offset",value:e.backtestResult.trailing_stop_positive_offset},{setting:"Custom Stoploss",value:e.backtestResult.use_custom_stoploss},{setting:"ROI",value:e.backtestResult.minimal_roi},{setting:"Use Exit Signal",value:e.backtestResult.use_exit_signal!==void 0?e.backtestResult.use_exit_signal:e.backtestResult.use_sell_signal},{setting:"Exit profit only",value:e.backtestResult.exit_profit_only!==void 0?e.backtestResult.exit_profit_only:e.backtestResult.sell_profit_only},{setting:"Exit profit offset",value:e.backtestResult.exit_profit_offset!==void 0?e.backtestResult.exit_profit_offset:e.backtestResult.sell_profit_offset},{setting:"Enable protections",value:e.backtestResult.enable_protections},{setting:"Starting balance",value:r(e.backtestResult.starting_balance)},{setting:"Final balance",value:r(e.backtestResult.final_balance)},{setting:"Avg. stake amount",value:r(e.backtestResult.avg_stake_amount)},{setting:"Total trade volume",value:r(e.backtestResult.total_volume)}]),d=P(()=>[{key:"key",label:"Pair"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:l=>v(l,2)},{key:"profit_sum",label:"Cum Profit %",formatter:l=>v(l,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:l=>W(l,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:l=>v(l,2)},{key:"duration_avg",label:"Avg Duration"},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),m=P(()=>[{key:"exit_reason",label:"Exit Reason"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:l=>v(l,2)},{key:"profit_sum",label:"Cum Profit %",formatter:l=>v(l,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:l=>W(l,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:l=>v(l,2)},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),A=[{key:"metric",label:"Metric"},{key:"value",label:"Value"}],L=[{key:"setting",label:"Setting"},{key:"value",label:"Value"}];return(l,$)=>{const S=p("b-table"),C=p("b-card");return c(),h("div",Re,[u("div",he,[u("h3",null,"Backtest-result for "+V(a.backtestResult.strategy_name),1)]),u("div",Be,[u("div",we,[u("div",xe,[t(C,{header:"Strategy settings"},{default:o(()=>[t(S,{small:"",borderless:"",items:s(g),fields:L},null,8,["items"])]),_:1})]),u("div",$e,[t(C,{header:"Metrics"},{default:o(()=>[t(S,{small:"",borderless:"",items:s(f),fields:A},null,8,["items"])]),_:1})])]),t(C,{header:"Results per Exit-reason",class:"row mt-2 w-100"},{default:o(()=>[t(S,{small:"",hover:"",stacked:"sm",items:a.backtestResult.exit_reason_summary||a.backtestResult.sell_reason_summary,fields:s(m)},null,8,["items","fields"])]),_:1}),t(C,{header:"Results per pair",class:"row mt-2 w-100"},{default:o(()=>[t(S,{small:"",hover:"",stacked:"sm",items:a.backtestResult.results_per_pair,fields:s(d)},null,8,["items","fields"])]),_:1}),a.backtestResult.periodic_breakdown?(c(),x(C,{key:0,header:"Periodic breakdown",class:"row mt-2 w-100"},{default:o(()=>[t(ye,{"periodic-breakdown":a.backtestResult.periodic_breakdown},null,8,["periodic-breakdown"])]),_:1})):R("",!0),t(C,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[t(te,{class:"row trade-history mt-2 w-100",trades:a.backtestResult.trades,"show-filter":!0,"stake-currency":a.backtestResult.stake_currency},null,8,["trades","stake-currency"])]),_:1})])])}}});const Se=D(Ve,[["__scopeId","data-v-6ca8e319"]]),Ce=I({name:"BacktestResultSelect",props:{backtestHistory:{required:!0,type:Object},selectedBacktestResultKey:{required:!1,default:"",type:String}},emits:["selectionChange"],setup(a,{emit:e}){return{formatPercent:v,setBacktestResult:b=>{e("selectionChange",b)}}}}),Te={class:"container d-flex flex-column align-items-center"},Ae=u("h3",null,"Available results:",-1);function qe(a,e,r,b,k,_){const f=p("b-list-group-item"),g=p("b-list-group");return c(),h("div",Te,[Ae,t(g,{class:"ms-2"},{default:o(()=>[(c(!0),h(F,null,K(Object.entries(a.backtestHistory),([d,m])=>(c(),x(f,{key:d,button:"",active:d===a.selectedBacktestResultKey,class:"d-flex justify-content-between align-items-center py-1",onClick:A=>a.setBacktestResult(d)},{default:o(()=>[w(V(d)+" "+V(m.total_trades)+" "+V(a.formatPercent(m.profit_total)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})])}const Pe=D(Ce,[["render",qe]]),Ie={class:"w-100 d-flex"},Le={class:"ms-2"},Ne=I({__name:"FreqaiModelSelect",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(a,{emit:e}){const r=a,b=j(),k=P({get(){return r.modelValue},set(_){e("update:modelValue",_)}});return J(()=>{b.activeBot.freqaiModelList.length===0&&b.activeBot.getFreqAIModelList()}),(_,f)=>{const g=p("b-form-select"),d=p("b-button");return c(),h("div",null,[u("div",Ie,[t(g,{id:"freqaiModel-select",modelValue:s(k),"onUpdate:modelValue":f[0]||(f[0]=m=>oe(k)?k.value=m:null),options:s(b).activeBot.freqaiModelList},null,8,["modelValue","options"]),u("div",Le,[t(d,{onClick:s(b).activeBot.getFreqAIModelList},{default:o(()=>[w("↻")]),_:1},8,["onClick"])])])])}}}),Ue=I({setup(){const a=j();return J(()=>{a.activeBot.getBacktestHistory()}),{timestampms:z,botStore:a}}}),De=u("p",null," Load Historic results from disk. You can click on multiple results to load all of them into freqUI. ",-1);function Me(a,e,r,b,k,_){const f=p("b-list-group-item"),g=p("b-list-group");return c(),h("div",null,[u("button",{class:"btn btn-secondary float-end",title:"Refresh","aria-label":"Refresh",onClick:e[0]||(e[0]=(...d)=>a.botStore.activeBot.getBacktestHistory&&a.botStore.activeBot.getBacktestHistory(...d))}," ↻ "),De,a.botStore.activeBot.backtestHistoryList?(c(),x(g,{key:0,class:"ms-2"},{default:o(()=>[(c(!0),h(F,null,K(a.botStore.activeBot.backtestHistoryList,(d,m)=>(c(),x(f,{key:m,class:"d-flex justify-content-between align-items-center py-1 mb-1",button:"",onClick:A=>a.botStore.activeBot.getBacktestHistoryResult(d)},{default:o(()=>[u("strong",null,V(d.strategy),1),w(" backtested on: "+V(a.timestampms(d.backtest_start_time*1e3))+" ",1),u("small",null,V(d.filename),1)]),_:2},1032,["onClick"]))),128))]),_:1})):R("",!0)])}const ze=D(Ue,[["render",Me]]),Fe=a=>(Q("data-v-6fd492b8"),a=a(),X(),a),je={class:"text-center flex-fill mt-2 d-flex flex-column"},Ee=Fe(()=>u("hr",null,null,-1)),He=I({__name:"BacktestGraphsView",props:{trades:{required:!0,type:Array}},setup(a){return(e,r)=>(c(),h("div",je,[t(de,{trades:a.trades,class:"trades-log"},null,8,["trades"]),t(me,{trades:a.trades,"profit-column":"profit_abs",class:"cum-profit","show-title":!0},null,8,["trades"]),Ee,t(_e,{class:"mt-3",trades:a.trades,"show-title":!0},null,8,["trades"])]))}});const Oe=D(He,[["__scopeId","data-v-6fd492b8"]]),We={key:0},Ge=I({__name:"TradeListNav",props:{trades:{required:!0,type:Array},backtestMode:{required:!1,default:!1,type:Boolean}},emits:["trade-select"],setup(a,{emit:e}){const r=a,b=j(),k=y({}),_=y(!0),f=d=>{k.value=d,e("trade-select",d)},g=P(()=>r.trades.slice().sort((d,m)=>_.value?m.open_timestamp-d.open_timestamp:d.open_timestamp-m.open_timestamp));return(d,m)=>{const A=p("b-list-group-item"),L=p("b-list-group");return c(),h("div",null,[t(L,null,{default:o(()=>[t(A,{button:"",class:"d-flex flex-wrap justify-content-center align-items-center",title:"Trade Navigation",onClick:m[0]||(m[0]=l=>_.value=!_.value)},{default:o(()=>[w("Trade Navigation "+V(_.value?"↓":"↑"),1)]),_:1}),(c(!0),h(F,null,K(s(g),l=>(c(),x(A,{key:l.open_timestamp,button:"",class:"d-flex flex-wrap justify-content-between align-items-center py-1",title:`${l.pair}`,active:l.open_timestamp===k.value.open_timestamp,onClick:$=>f(l)},{default:o(()=>[u("div",null,[s(b).activeBot.botState.trading_mode!=="spot"?(c(),h("span",We,V(l.is_short?"S-":"L-"),1)):R("",!0),t(be,{date:l.open_timestamp},null,8,["date"])]),t(fe,{trade:l},null,8,["trade"]),a.backtestMode?(c(),x(ve,{key:0,"profit-ratio":l.profit_ratio,"stake-currency":s(b).activeBot.stakeCurrency},null,8,["profit-ratio","stake-currency"])):R("",!0)]),_:2},1032,["title","active","onClick"]))),128)),a.trades.length===0?(c(),x(A,{key:0},{default:o(()=>[w("No trades to show...")]),_:1})):R("",!0)]),_:1})])}}});const Ke=D(Ge,[["__scopeId","data-v-a048b989"]]),Je={class:"row"},Ye={class:"col-md-11 text-start"},Ze={class:"col-md-1 text-end"},Qe={class:"row text-center h-100 d-flex align-items-stretch"},Xe=I({__name:"BacktestResultChart",props:{timeframe:{required:!0,type:String},strategy:{required:!0,type:String},freqaiModel:{required:!1,default:void 0,type:String},timerange:{required:!0,type:String},pairlist:{required:!0,type:Array},trades:{required:!0,type:Array}},setup(a){const e=j(),r=y(!0),b=y(),k=_=>{b.value={startValue:_.open_timestamp,endValue:_.close_timestamp}};return(_,f)=>{const g=p("b-button"),d=p("b-card");return c(),h("div",null,[u("div",Je,[u("div",Ye,[u("p",null," Graph will always show the latest values for the selected strategy. Timerange: "+V(a.timerange)+" - "+V(a.strategy),1)]),u("div",Ze,[t(g,{"aria-label":"Close",title:"Trade Navigation",size:"sm",onClick:f[0]||(f[0]=m=>r.value=!r.value)},{default:o(()=>[w(V(r.value?">":"<"),1)]),_:1})])]),u("div",Qe,[t(pe,{class:"col-md-2 overflow-auto",style:{"max-height":"calc(100vh - 200px)"},pairlist:a.pairlist,trades:a.trades,"sort-method":"profit","backtest-mode":!0},null,8,["pairlist","trades"]),t(ge,{"available-pairs":a.pairlist,"historic-view":!0,timeframe:a.timeframe,timerange:a.timerange,strategy:a.strategy,trades:a.trades,class:ee(`${r.value?"col-md-8":"col-md-10"} candle-chart-container px-0 h-100 align-self-stretch`),"slider-position":b.value,"freqai-model":a.freqaiModel},null,8,["available-pairs","timeframe","timerange","strategy","trades","class","slider-position","freqai-model"]),r.value?(c(),x(Ke,{key:0,class:"overflow-auto col-md-2",style:{"max-height":"calc(100vh - 200px)"},trades:a.trades.filter(m=>m.pair===s(e).activeBot.selectedPair),onTradeSelect:k},null,8,["trades"])):R("",!0)]),t(d,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[t(te,{class:"row trade-history mt-2 w-100",trades:a.trades,"show-filter":!0},null,8,["trades"])]),_:1})])}}});const et=D(Xe,[["__scopeId","data-v-1fe46937"]]),M=a=>(Q("data-v-cbd01b9a"),a=a(),X(),a),tt={class:"container-fluid",style:{"max-height":"calc(100vh - 60px)"}},at={class:"container-fluid"},st=M(()=>u("div",{class:"row mb-2"},null,-1)),lt={key:0},ot={class:"row w-100"},it=M(()=>u("h2",{class:"col-4 col-lg-3"},"Backtesting",-1)),rt={class:"col-12 col-lg-order-last col-lg-6 mx-md-5 d-flex flex-wrap justify-content-md-center justify-content-between mb-4"},nt={class:"d-md-flex"},ut={key:0,class:"flex-fill row d-flex flex-column bt-config"},ct={key:1,class:"flex-fill row d-flex flex-column bt-config"},dt={class:"mb-2"},mt=M(()=>u("span",null,"Strategy",-1)),_t={class:"d-flex"},bt={class:"d-flex justify-content-center"},ft=M(()=>u("span",{class:"me-2"},"Enable FreqAI:",-1)),vt=M(()=>u("hr",null,null,-1)),kt=M(()=>u("h3",{class:"mt-3"},"Backtesting summary",-1)),pt={class:"d-flex flex-wrap flex-md-nowrap justify-content-between justify-content-md-center"},gt={key:0,class:"container-fluid text-center w-100 mt-2"},yt=I({__name:"BacktestingView",setup(a){const e=j(),r=P(()=>e.activeBot.backtestHistory?Object.keys(e.activeBot.backtestHistory).length!==0:!1),b=P(()=>{try{return e.activeBot.selectedBacktestResult.timeframe}catch{return""}}),k=y(""),_=y(""),f=y(""),g=y(""),d=y(!1),m=y({enabled:!1,model:"",identifier:""}),A=y(!1),L=y(!1),l=y(!0),$=y(""),S=y(""),C=y(""),B=y("run"),E=y(null),ae=()=>{k.value=e.activeBot.selectedBacktestResult.strategy_name,e.activeBot.getStrategy(k.value),_.value=e.activeBot.selectedBacktestResult.timeframe,f.value=e.activeBot.selectedBacktestResult.timeframe_detail||"",g.value=e.activeBot.selectedBacktestResult.timerange};Y(()=>e.activeBot.selectedBacktestResultKey,()=>{ae()});const se=()=>{const T={strategy:k.value,timerange:g.value,enable_protections:A.value},i=parseInt($.value,10);if(i&&(T.max_open_trades=i),L.value)T.stake_amount="unlimited";else{const U=Number(S.value);U&&(T.stake_amount=U.toString())}const N=Number(C.value);N&&(T.dry_run_wallet=N),_.value&&(T.timeframe=_.value),f.value&&(T.timeframe_detail=f.value),l.value||(T.backtest_cache="none"),m.value.enabled&&(T.freqaimodel=m.value.model,m.value.identifier!==""&&(T.freqai={identifier:m.value.identifier})),e.activeBot.startBacktest(T)};return J(()=>e.activeBot.getState()),Y(()=>e.activeBot.backtestRunning,()=>{e.activeBot.backtestRunning===!0?E.value=window.setInterval(e.activeBot.pollBacktest,1e3):E.value&&(clearInterval(E.value),E.value=null)}),(T,i)=>{const N=p("b-form-radio"),U=p("b-button"),q=p("b-form-group"),H=p("b-form-input"),O=p("b-form-checkbox"),le=p("b-card");return c(),h("div",tt,[u("div",at,[st,s(e).activeBot.canRunBacktest?R("",!0):(c(),h("p",lt," Bot must be in webserver mode to enable Backtesting. ")),u("div",ot,[it,u("div",rt,[s(e).activeBot.botApiVersion>=2.15?(c(),x(N,{key:0,modelValue:B.value,"onUpdate:modelValue":i[0]||(i[0]=n=>B.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"historicResults",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[w("Load Results")]),_:1},8,["modelValue","disabled"])):R("",!0),t(N,{modelValue:B.value,"onUpdate:modelValue":i[1]||(i[1]=n=>B.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"run",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[w("Run backtest")]),_:1},8,["modelValue","disabled"]),t(N,{id:"bt-analyze-btn",modelValue:B.value,"onUpdate:modelValue":i[2]||(i[2]=n=>B.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"results",disabled:!s(r)},{default:o(()=>[w("Analyze result")]),_:1},8,["modelValue","disabled"]),t(N,{modelValue:B.value,"onUpdate:modelValue":i[3]||(i[3]=n=>B.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize-summary",disabled:!s(r)},{default:o(()=>[w("Visualize summary")]),_:1},8,["modelValue","disabled"]),t(N,{modelValue:B.value,"onUpdate:modelValue":i[4]||(i[4]=n=>B.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize",disabled:!s(r)},{default:o(()=>[w("Visualize result")]),_:1},8,["modelValue","disabled"])]),ie(u("small",{class:"text-end bt-running-label col-8 col-lg-3"},"Backtest running: "+V(s(e).activeBot.backtestStep)+" "+V(s(v)(s(e).activeBot.backtestProgress,2)),513),[[re,s(e).activeBot.backtestRunning]])])]),u("div",nt,[u("div",{class:ee(`${d.value?"col-md-3":""} sticky-top sticky-offset me-3 d-flex flex-column`)},[B.value!=="visualize"?(c(),x(U,{key:0,class:"align-self-start","aria-label":"Close",size:"sm",onClick:i[5]||(i[5]=n=>d.value=!d.value)},{default:o(()=>[w(V(d.value?"<":">"),1)]),_:1})):R("",!0),t(ne,{name:"fade",mode:"in-out"},{default:o(()=>[B.value!=="visualize"&&d.value?(c(),x(Pe,{key:0,"backtest-history":s(e).activeBot.backtestHistory,"selected-backtest-result-key":s(e).activeBot.selectedBacktestResultKey,onSelectionChange:s(e).activeBot.setBacktestResultKey},null,8,["backtest-history","selected-backtest-result-key","onSelectionChange"])):R("",!0)]),_:1})],2),B.value=="historicResults"?(c(),h("div",ut,[t(ze)])):R("",!0),B.value=="run"?(c(),h("div",ct,[u("div",dt,[mt,t(ue,{modelValue:k.value,"onUpdate:modelValue":i[6]||(i[6]=n=>k.value=n)},null,8,["modelValue"])]),t(le,{disabled:s(e).activeBot.backtestRunning},{default:o(()=>[t(q,{"label-cols-lg":"2",label:"Backtest params","label-size":"sm","label-class":"fw-bold pt-0",class:"mb-0"},{default:o(()=>[t(q,{"label-cols-sm":"5",label:"Timeframe:","label-align-sm":"right","label-for":"timeframe-select"},{default:o(()=>[t(Z,{id:"timeframe-select",modelValue:_.value,"onUpdate:modelValue":i[7]||(i[7]=n=>_.value=n)},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Detail Timeframe:","label-align-sm":"right","label-for":"timeframe-detail-select",title:"Detail timeframe, to simulate intra-candle results. Not setting this will not use this functionality."},{default:o(()=>[t(Z,{id:"timeframe-detail-select",modelValue:f.value,"onUpdate:modelValue":i[8]||(i[8]=n=>f.value=n),"below-timeframe":_.value},null,8,["modelValue","below-timeframe"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Max open trades:","label-align-sm":"right","label-for":"max-open-trades"},{default:o(()=>[t(H,{id:"max-open-trades",modelValue:$.value,"onUpdate:modelValue":i[9]||(i[9]=n=>$.value=n),placeholder:"Use strategy default",type:"number"},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Starting capital:","label-align-sm":"right","label-for":"starting-capital"},{default:o(()=>[t(H,{id:"starting-capital",modelValue:C.value,"onUpdate:modelValue":i[10]||(i[10]=n=>C.value=n),type:"number",step:"0.001"},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Stake amount:","label-align-sm":"right","label-for":"stake-amount"},{default:o(()=>[u("div",_t,[t(O,{id:"stake-amount-bool",modelValue:L.value,"onUpdate:modelValue":i[11]||(i[11]=n=>L.value=n),class:"col-md-6"},{default:o(()=>[w("Unlimited stake")]),_:1},8,["modelValue"]),t(H,{id:"stake-amount",modelValue:S.value,"onUpdate:modelValue":i[12]||(i[12]=n=>S.value=n),type:"number",placeholder:"Use strategy default",step:"0.01",disabled:L.value},null,8,["modelValue","disabled"])])]),_:1}),t(q,{"label-cols-sm":"5",label:"Enable Protections:","label-align-sm":"right","label-for":"enable-protections"},{default:o(()=>[t(O,{id:"enable-protections",modelValue:A.value,"onUpdate:modelValue":i[13]||(i[13]=n=>A.value=n)},null,8,["modelValue"])]),_:1}),s(e).activeBot.botApiVersion>=2.22?(c(),x(q,{key:0,"label-cols-sm":"5",label:"Cache Backtest results:","label-align-sm":"right","label-for":"enable-cache"},{default:o(()=>[t(O,{id:"enable-cache",modelValue:l.value,"onUpdate:modelValue":i[14]||(i[14]=n=>l.value=n)},null,8,["modelValue"])]),_:1})):R("",!0),s(e).activeBot.botApiVersion>=2.22?(c(),h(F,{key:1},[t(q,{"label-cols-sm":"5",label:"Enable FreqAI:","label-align-sm":"right","label-for":"enable-freqai"},{label:o(()=>[u("div",bt,[ft,t(ke,{hint:"Assumes freqAI configuration is setup in the configuration, and the strategy is a freqAI strategy. Will fail if that's not the case."})])]),default:o(()=>[t(O,{id:"enable-freqai",modelValue:m.value.enabled,"onUpdate:modelValue":i[15]||(i[15]=n=>m.value.enabled=n)},null,8,["modelValue"])]),_:1}),m.value.enabled?(c(),x(q,{key:0,"label-cols-sm":"5",label:"FreqAI identifier:","label-align-sm":"right","label-for":"freqai-identifier"},{default:o(()=>[t(H,{id:"freqai-identifier",modelValue:m.value.identifier,"onUpdate:modelValue":i[16]||(i[16]=n=>m.value.identifier=n),placeholder:"Use config default"},null,8,["modelValue"])]),_:1})):R("",!0),m.value.enabled?(c(),x(q,{key:1,"label-cols-sm":"5",label:"FreqAI Model","label-align-sm":"right","label-for":"freqai-model"},{default:o(()=>[t(Ne,{id:"freqai-model",modelValue:m.value.model,"onUpdate:modelValue":i[17]||(i[17]=n=>m.value.model=n)},null,8,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),vt,t(ce,{modelValue:g.value,"onUpdate:modelValue":i[18]||(i[18]=n=>g.value=n),class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["disabled"]),kt,u("div",pt,[t(U,{id:"start-backtest",variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:se},{default:o(()=>[w(" Start backtest ")]),_:1},8,["disabled"]),t(U,{variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:s(e).activeBot.pollBacktest},{default:o(()=>[w(" Load backtest result ")]),_:1},8,["disabled","onClick"]),t(U,{variant:"primary",class:"mx-1",disabled:!s(e).activeBot.backtestRunning,onClick:s(e).activeBot.stopBacktest},{default:o(()=>[w("Stop Backtest")]),_:1},8,["disabled","onClick"]),t(U,{variant:"primary",class:"mx-1",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,onClick:s(e).activeBot.removeBacktest},{default:o(()=>[w("Reset Backtest")]),_:1},8,["disabled","onClick"])])])):R("",!0),s(r)&&B.value=="results"?(c(),x(Se,{key:2,"backtest-result":s(e).activeBot.selectedBacktestResult,class:"flex-fill"},null,8,["backtest-result"])):R("",!0),s(r)&&B.value=="visualize-summary"?(c(),x(Oe,{key:3,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["trades"])):R("",!0)]),s(r)&&B.value=="visualize"?(c(),h("div",gt,[t(et,{timeframe:s(b),strategy:k.value,timerange:g.value,pairlist:s(e).activeBot.selectedBacktestResult.pairlist,trades:s(e).activeBot.selectedBacktestResult.trades,"freqai-model":m.value.enabled?m.value.model:void 0},null,8,["timeframe","strategy","timerange","pairlist","trades","freqai-model"])])):R("",!0)])}}});const At=D(yt,[["__scopeId","data-v-cbd01b9a"]]);export{At as default};
//# sourceMappingURL=BacktestingView-c9add414.js.map
