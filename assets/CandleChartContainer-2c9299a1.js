import{o as k,c as E,aP as An,ay as ee,az as te,aA as ne,a as B,F as Ca,S as wa,e as ie,v as re,x as J,aC as mt,y as j,M as Aa,aQ as Pn,P as tt,aa as zt,b as O,w as N,A as Pa,a6 as Ta,Y as Ao,g as Be,r as U,q as ea,R as X,h as z,N as ta,aR as Tn,j as st,l as G,aS as Dn,a3 as aa,I as In,aT as Ln,aU as On,aV as kn,a4 as Mn,u as Po,s as Da,a8 as Bn,p as To,d as Do,_ as oa,n as Io,z as Lo,aW as Ia,aL as Vn,aX as Nn,aY as We,a5 as En,E as zn,i as Rn,aZ as $n}from"./index-20bfe6b3.js";import{_ as Oo}from"./EditValue.vue_vue_type_script_setup_true_lang-29b1fd9b.js";import{_ as M,S as ko,B as na,P as lt,G as we,c as ia,g as ot,C as Mo,u as ra,L as Rt,a as Fn,n as Bo,i as Vo,e as P,b as No,d as Eo,f as La,s as Wn,r as Gn,h as F,t as Un,j as $t,l as Ft,k as Zn,m as sa,o as la,p as zo,q as se,v as le,w as ue,x as Z,D as Ro,E as Hn,y as $o,z as jn,A as H,R as Wt,F as Ve,H as qn,I as Fo,J as Kn,K as ce,M as Oa,N as Yn,O as Xn,Q as Jn,T as ua,U as He,V as Wo,W as yt,X as Qn,Y as Ie,Z as be,$ as ei,a0 as ut,a1 as ti,a2 as ai,a3 as fe,a4 as oi,a5 as je,a6 as Le,a7 as Oe,a8 as ka,a9 as ct,aa as ni,ab as Go,ac as ii,ad as ri,ae as Uo,af as si,ag as li,ah as ui,ai as ci,aj as Zo,ak as Se,al as ca,am as di,an as pi,ao as Ma,ap as Ho,aq as Ke,ar as jo,as as qo,at as hi,au as fi,av as vi,aw as gi,ax as at,ay as mi,az as Ko,aA as Gt,aB as Ba,aC as yi,aD as _t,aE as _i,aF as bi,aG as Si,aH as xi,aI as Ci,aJ as wi,aK as Ai,aL as Pi,aM as Va,aN as Ti,aO as Di,aP as Ii,aQ as Li,aR as Oi,aS as ki,aT as Mi,aU as Bi,aV as Vi,aW as Ni,aX as Ei,aY as zi,aZ as Ri,a_ as $i,a$ as Fi}from"./installCanvasRenderer-3885c599.js";import{c as Wi,p as Yo,S as Gi,i as Ui,t as Zi,r as Hi,a as ji,D as qi,b as Ki,d as Yi,s as Xi,A as Ji,e as Qi,f as er,g as tr,h as ar,j as or,k as nr,l as ir,m as rr}from"./install-e19e7d48.js";import{c as sr}from"./createSeriesDataSimply-7390802e.js";var he=(a=>(a.line="line",a.bar="bar",a.scatter="scatter",a))(he||{});const Ye={main_plot:{},subplots:{}};function lr(a){if(!a)return{baseCurrency:"",quoteCurrency:""};const[t,e]=a.split("/");if(e!==void 0){const o=e.split(":");return{baseCurrency:t,quoteCurrency:o[0]||e}}return{baseCurrency:e??"",quoteCurrency:t??""}}var ur=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,Na=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,Ea=(a,t,e)=>t in a?ur(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,Te=(a,t)=>{for(var e in t||(t={}))pr.call(t,e)&&Ea(a,e,t[e]);if(Na)for(var e of Na(t))hr.call(t,e)&&Ea(a,e,t[e]);return a},za=(a,t)=>cr(a,dr(t));const fr={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(a){this.autoscroll&&a&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var a;const t=((a=this.$refs.dropdownMenu)==null?void 0:a.children[this.typeAheadPointer])||!1;if(t){const e=this.getDropdownViewport(),{top:o,bottom:n,height:i}=t.getBoundingClientRect();if(o<e.top)return this.$refs.dropdownMenu.scrollTop=t.offsetTop;if(n>e.bottom)return this.$refs.dropdownMenu.scrollTop=t.offsetTop-(e.height-i)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},vr={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let a=0;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},open(a){a&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let a=this.typeAheadPointer-1;a>=0;a--)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadDown(){for(let a=this.typeAheadPointer+1;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadSelect(){const a=this.filteredOptions[this.typeAheadPointer];a&&this.selectable(a)&&this.select(a)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},gr={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(a){this.mutableLoading=a}},methods:{toggleLoading(a=null){return a==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=a}}},da=(a,t)=>{const e=a.__vccOpts||a;for(const[o,n]of t)e[o]=n;return e},mr={},yr={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},_r=B("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),br=[_r];function Sr(a,t){return k(),E("svg",yr,br)}const xr=da(mr,[["render",Sr]]),Cr={},wr={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},Ar=B("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Pr=[Ar];function Tr(a,t){return k(),E("svg",wr,Pr)}const Dr=da(Cr,[["render",Tr]]),Ra={Deselect:xr,OpenIndicator:Dr},Ir={mounted(a,{instance:t}){if(t.appendToBody){const{height:e,top:o,left:n,width:i}=t.$refs.toggle.getBoundingClientRect();let r=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;a.unbindPosition=t.calculatePosition(a,t,{width:i+"px",left:r+n+"px",top:s+o+e+"px"}),document.body.appendChild(a)}},unmounted(a,{instance:t}){t.appendToBody&&(a.unbindPosition&&typeof a.unbindPosition=="function"&&a.unbindPosition(),a.parentNode&&a.parentNode.removeChild(a))}};function Lr(a){const t={};return Object.keys(a).sort().forEach(e=>{t[e]=a[e]}),JSON.stringify(t)}let Or=0;function kr(){return++Or}const Mr={components:Te({},Ra),directives:{appendToBody:Ir},mixins:[fr,vr,gr],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:a=>a},selectable:{type:Function,default:a=>!0},getOptionLabel:{type:Function,default(a){return typeof a=="object"?a.hasOwnProperty(this.label)?a[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(a)}.
https://vue-select.org/api/props.html#getoptionlabel`):a}},getOptionKey:{type:Function,default(a){if(typeof a!="object")return a;try{return a.hasOwnProperty("id")?a.id:Lr(a)}catch(t){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,a,t)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(a,t,e){return(t||"").toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},filter:{type:Function,default(a,t){return a.filter(e=>{let o=this.getOptionLabel(e);return typeof o=="number"&&(o=o.toString()),this.filterBy(e,o,t)})}},createOption:{type:Function,default(a){return typeof this.optionList[0]=="object"?{[this.label]:a}:a}},resetOnOptionsChange:{default:!1,validator:a=>["function","boolean"].includes(typeof a)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:a,multiple:t}){return a&&!t}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(a,t)=>a},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(a,t,{width:e,top:o,left:n}){a.style.top=o,a.style.left=n,a.style.width=e}},dropdownShouldOpen:{type:Function,default({noDrop:a,open:t,mutableLoading:e}){return a?!1:t&&!e}},uid:{type:[String,Number],default:()=>kr()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let a=this.modelValue;return this.isTrackingValues&&(a=this.$data._value),a!=null&&a!==""?[].concat(a):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const a={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:Te({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:t=>this.search=t.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:a,listFooter:a,header:za(Te({},a),{deselect:this.deselect}),footer:za(Te({},a),{deselect:this.deselect})}},childComponents(){return Te(Te({},Ra),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const a=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return a;const t=this.search.length?this.filter(a,this.search,this):a;if(this.taggable&&this.search.length){const e=this.createOption(this.search);this.optionExists(e)||t.unshift(e)}return t},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(a,t){const e=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(a,t,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&e()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(a){this.isTrackingValues&&this.setInternalValueFromOptions(a)}},multiple(){this.clearSelection()},open(a){this.$emit(a?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(a){Array.isArray(a)?this.$data._value=a.map(t=>this.findOptionFromReducedValue(t)):this.$data._value=this.findOptionFromReducedValue(a)},select(a){this.$emit("option:selecting",a),this.isOptionSelected(a)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(a):(this.taggable&&!this.optionExists(a)&&(this.$emit("option:created",a),this.pushTag(a)),this.multiple&&(a=this.selectedValue.concat(a)),this.updateValue(a),this.$emit("option:selected",a)),this.onAfterSelect(a)},deselect(a){this.$emit("option:deselecting",a),this.updateValue(this.selectedValue.filter(t=>!this.optionComparator(t,a))),this.$emit("option:deselected",a)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(a){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(a){typeof this.modelValue>"u"&&(this.$data._value=a),a!==null&&(Array.isArray(a)?a=a.map(t=>this.reduce(t)):a=this.reduce(a)),this.$emit("update:modelValue",a)},toggleDropdown(a){const t=a.target!==this.searchEl;t&&a.preventDefault();const e=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||e.filter(Boolean).some(o=>o.contains(a.target)||o===a.target)){a.preventDefault();return}this.open&&t?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(a){return this.selectedValue.some(t=>this.optionComparator(t,a))},isOptionDeselectable(a){return this.isOptionSelected(a)&&this.deselectFromDropdown},optionComparator(a,t){return this.getOptionKey(a)===this.getOptionKey(t)},findOptionFromReducedValue(a){const t=o=>JSON.stringify(this.reduce(o))===JSON.stringify(a),e=[...this.options,...this.pushedTags].filter(t);return e.length===1?e[0]:e.find(o=>this.optionComparator(o,this.$data._value))||a},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let a=null;this.multiple&&(a=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(a)}},optionExists(a){return this.optionList.some(t=>this.optionComparator(t,a))},normalizeOptionForSlot(a){return typeof a=="object"?a:{[this.label]:a}},pushTag(a){this.pushedTags.push(a)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:a,multiple:t}=this;this.clearSearchOnBlur({clearSearchOnSelect:a,multiple:t})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(a){const t=n=>(n.preventDefault(),!this.isComposing&&this.typeAheadSelect()),e={8:n=>this.maybeDeleteValue(),9:n=>this.onTab(),27:n=>this.onEscape(),38:n=>(n.preventDefault(),this.typeAheadUp()),40:n=>(n.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(n=>e[n]=t);const o=this.mapKeydown(e,this);if(typeof o[a.keyCode]=="function")return o[a.keyCode](a)}}},Br=["dir"],Vr=["id","aria-expanded","aria-owns"],Nr={ref:"selectedOptions",class:"vs__selected-options"},Er=["disabled","title","aria-label","onClick"],zr={ref:"actions",class:"vs__actions"},Rr=["disabled"],$r={class:"vs__spinner"},Fr=["id"],Wr=["id","aria-selected","onMouseover","onClick"],Gr={key:0,class:"vs__no-options"},Ur=ie(" Sorry, no matching options. "),Zr=["id"];function Hr(a,t,e,o,n,i){const r=An("append-to-body");return k(),E("div",{dir:e.dir,class:Ta(["v-select",i.stateClasses])},[ee(a.$slots,"header",te(ne(i.scope.header))),B("div",{id:`vs${e.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":i.dropdownOpen.toString(),"aria-owns":`vs${e.uid}__listbox`,"aria-label":"Search for option",onMousedown:t[1]||(t[1]=s=>i.toggleDropdown(s))},[B("div",Nr,[(k(!0),E(Ca,null,wa(i.selectedValue,(s,l)=>ee(a.$slots,"selected-option-container",{option:i.normalizeOptionForSlot(s),deselect:i.deselect,multiple:e.multiple,disabled:e.disabled},()=>[(k(),E("span",{key:e.getOptionKey(s),class:"vs__selected"},[ee(a.$slots,"selected-option",te(ne(i.normalizeOptionForSlot(s))),()=>[ie(re(e.getOptionLabel(s)),1)]),e.multiple?(k(),E("button",{key:0,ref_for:!0,ref:u=>n.deselectButtons[l]=u,disabled:e.disabled,type:"button",class:"vs__deselect",title:`Deselect ${e.getOptionLabel(s)}`,"aria-label":`Deselect ${e.getOptionLabel(s)}`,onClick:u=>i.deselect(s)},[(k(),J(mt(i.childComponents.Deselect)))],8,Er)):j("",!0)]))])),256)),ee(a.$slots,"search",te(ne(i.scope.search)),()=>[B("input",Aa({class:"vs__search"},i.scope.search.attributes,Pn(i.scope.search.events)),null,16)])],512),B("div",zr,[tt(B("button",{ref:"clearButton",disabled:e.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:t[0]||(t[0]=(...s)=>i.clearSelection&&i.clearSelection(...s))},[(k(),J(mt(i.childComponents.Deselect)))],8,Rr),[[zt,i.showClearButton]]),ee(a.$slots,"open-indicator",te(ne(i.scope.openIndicator)),()=>[e.noDrop?j("",!0):(k(),J(mt(i.childComponents.OpenIndicator),te(Aa({key:0},i.scope.openIndicator.attributes)),null,16))]),ee(a.$slots,"spinner",te(ne(i.scope.spinner)),()=>[tt(B("div",$r,"Loading...",512),[[zt,a.mutableLoading]])])],512)],40,Vr),O(Ao,{name:e.transition},{default:N(()=>[i.dropdownOpen?tt((k(),E("ul",{id:`vs${e.uid}__listbox`,ref:"dropdownMenu",key:`vs${e.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:t[2]||(t[2]=Pa((...s)=>i.onMousedown&&i.onMousedown(...s),["prevent"])),onMouseup:t[3]||(t[3]=(...s)=>i.onMouseUp&&i.onMouseUp(...s))},[ee(a.$slots,"list-header",te(ne(i.scope.listHeader))),(k(!0),E(Ca,null,wa(i.filteredOptions,(s,l)=>(k(),E("li",{id:`vs${e.uid}__option-${l}`,key:e.getOptionKey(s),role:"option",class:Ta(["vs__dropdown-option",{"vs__dropdown-option--deselect":i.isOptionDeselectable(s)&&l===a.typeAheadPointer,"vs__dropdown-option--selected":i.isOptionSelected(s),"vs__dropdown-option--highlight":l===a.typeAheadPointer,"vs__dropdown-option--disabled":!e.selectable(s)}]),"aria-selected":l===a.typeAheadPointer?!0:null,onMouseover:u=>e.selectable(s)?a.typeAheadPointer=l:null,onClick:Pa(u=>e.selectable(s)?i.select(s):null,["prevent","stop"])},[ee(a.$slots,"option",te(ne(i.normalizeOptionForSlot(s))),()=>[ie(re(e.getOptionLabel(s)),1)])],42,Wr))),128)),i.filteredOptions.length===0?(k(),E("li",Gr,[ee(a.$slots,"no-options",te(ne(i.scope.noOptions)),()=>[Ur])])):j("",!0),ee(a.$slots,"list-footer",te(ne(i.scope.listFooter)))],40,Fr)),[[r]]):(k(),E("ul",{key:1,id:`vs${e.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Zr))]),_:3},8,["name"]),ee(a.$slots,"footer",te(ne(i.scope.footer)))],10,Br)}const Xo=da(Mr,[["render",Hr]]),jr={class:"d-flex flex-row"},Jo=Be({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(a,{emit:t}){const e=a,o=t,n=U("");function i(){o("indicatorSelected",n.value),o("update:modelValue",n.value)}function r(){n.value="",i()}return ea(()=>{n.value=e.modelValue}),X(()=>e.modelValue,s=>{n.value=s}),(s,l)=>{const u=ta,c=Tn,d=st;return k(),E("div",jr,[O(u,{class:"flex-grow-1",label:a.label,"label-for":"indicatorSelector"},{default:N(()=>[O(z(Xo),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=p=>n.value=p),options:a.columns,size:"sm",clearable:!1,"onOption:selected":i},null,8,["modelValue","options"])]),_:1},8,["label"]),O(d,{size:"sm",title:"Abort",class:"ms-1 mt-auto",variant:"secondary",onClick:r},{default:N(()=>[O(c)]),_:1})])}}}),qr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Kr=B("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22c.67 0 1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22c0-.67-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22h-.01Z"},null,-1),Yr=[Kr];function Xr(a,t){return k(),E("svg",qr,[...Yr])}const Jr={name:"mdi-dice-multiple",render:Xr};function Ze(){return`#${(Math.random()*16777215<<0).toString(16)}`}const Qr={class:"d-flex flex-col flex-xl-row justify-content-between mt-1"},es=Be({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(a,{emit:t}){const e=a,o=t,n=U(Ze()),i=U(he.line),r=U(Object.keys(he)),s=U(""),l=U(!1),u=U("");function c(){n.value=Ze()}const d=G(()=>{if(l.value||!s.value)return{};const v={color:n.value,type:i.value};return u.value&&i.value===he.line&&(v.fill_to=u.value),{[s.value]:v}});function p(){o("update:modelValue",d.value)}return X(()=>e.modelValue,()=>{if([s.value]=Object.keys(e.modelValue),l.value=!1,s.value&&e.modelValue){const v=e.modelValue[s.value];n.value=v.color||Ze(),i.value=v.type||he.line,u.value=v.fill_to||""}},{immediate:!0}),Dn([n,i,u],()=>{p()},{debounce:200}),(v,f)=>{const y=aa,g=ta,m=In,_=Ln,b=Jr,h=st,S=On,x=kn,C=Jo;return k(),E("div",null,[B("div",Qr,[O(g,{class:"col flex-grow-1",label:"Type","label-for":"plotTypeSelector"},{default:N(()=>[O(y,{id:"plotTypeSelector",modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=A=>i.value=A),size:"sm",options:r.value},null,8,["modelValue","options"])]),_:1}),O(g,{label:"Color","label-for":"colsel",size:"sm",class:"ms-xl-1 col"},{default:N(()=>[O(x,null,{default:N(()=>[O(_,null,{default:N(()=>[O(m,{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=A=>n.value=A),type:"color",size:"sm",class:"p-0",style:{"max-width":"29px"}},null,8,["modelValue"])]),_:1}),O(m,{id:"colsel",modelValue:n.value,"onUpdate:modelValue":f[2]||(f[2]=A=>n.value=A),size:"sm",class:"flex-grow-1"},null,8,["modelValue"]),O(S,null,{default:N(()=>[O(h,{variant:"primary",size:"sm",onClick:c},{default:N(()=>[O(b)]),_:1})]),_:1})]),_:1})]),_:1})]),i.value===z(he).line?(k(),J(C,{key:0,modelValue:u.value,"onUpdate:modelValue":f[3]||(f[3]=A=>u.value=A),columns:a.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):j("",!0)])}}});function ye(a){return JSON.parse(JSON.stringify(a))}const Qo="ftPlotConfig";function ts(){const a="ft_custom_plot_config",t="ft_selected_plot_config",e=JSON.parse(localStorage.getItem(a)||"{}");if(Object.keys(e).length>0){console.log("migrating plot configs");const o={customPlotConfigs:e,plotConfigName:localStorage.getItem(t)||"default"};localStorage.setItem(Qo,JSON.stringify(o)),localStorage.removeItem(a),localStorage.removeItem(t)}}ts();const pa=Mn("plotConfig",{state:()=>({customPlotConfigs:{},plotConfigName:"default",isEditing:!1,editablePlotConfig:{...Ye}}),getters:{availablePlotConfigNames:a=>Object.keys(a.customPlotConfigs),plotConfig:a=>(a.isEditing?a.editablePlotConfig:a.customPlotConfigs[a.plotConfigName])||ye(Ye)},actions:{saveCustomPlotConfig(a,t){this.customPlotConfigs[a]=t},deletePlotConfig(a){delete this.customPlotConfigs[a],this.plotConfigName===a&&(this.plotConfigName=this.availablePlotConfigNames[this.availablePlotConfigNames.length-1])},renamePlotConfig(a,t){this.customPlotConfigs[t]=this.customPlotConfigs[a],delete this.customPlotConfigs[a],this.plotConfigName=t},newPlotConfig(a){this.editablePlotConfig=ye(Ye),this.saveCustomPlotConfig(a,this.editablePlotConfig),this.plotConfigName=a},plotConfigChanged(a=""){a&&(this.plotConfigName=a),console.log("plotConfigChanged",this.plotConfigName),this.isEditing&&(this.editablePlotConfig=ye(this.customPlotConfigs[this.plotConfigName]))},duplicatePlotConfig(a,t){console.log(a,t),this.customPlotConfigs[t]=ye(this.customPlotConfigs[a]),this.plotConfigChanged(t)}},persist:{key:Qo,paths:["plotConfigName","customPlotConfigs"],afterRestore:a=>{Object.keys(a.store.customPlotConfigs).length===0&&(console.log("Initialized plotconfig"),a.store.customPlotConfigs={default:ye(Ye)})}}}),en=Be({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(a){const t=pa();return(e,o)=>{const n=aa,i=Oo;return k(),J(i,{modelValue:z(t).plotConfigName,"onUpdate:modelValue":o[1]||(o[1]=r=>z(t).plotConfigName=r),"allow-edit":a.allowEdit,"allow-add":a.allowEdit,"allow-duplicate":a.allowEdit,"editable-name":"plot configuration",onRename:z(t).renamePlotConfig,onDelete:z(t).deletePlotConfig,onNew:z(t).newPlotConfig,onDuplicate:z(t).duplicatePlotConfig},{default:N(()=>[O(n,{modelValue:z(t).plotConfigName,"onUpdate:modelValue":o[0]||(o[0]=r=>z(t).plotConfigName=r),options:z(t).availablePlotConfigNames,size:"sm",onChange:z(t).plotConfigChanged},null,8,["modelValue","options","onChange"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),ha=a=>(To("data-v-47307b82"),a=a(),Do(),a),as={key:0},os={class:"col-mb-3"},ns=ha(()=>B("hr",null,null,-1)),is=ha(()=>B("hr",null,null,-1)),rs={class:"d-flex flex-row mt-1"},ss=ha(()=>B("hr",null,null,-1)),ls={class:"d-flex flex-row"},us={key:3,class:"col-mb-5 ms-1 mt-2"},cs=Be({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},isVisible:{required:!0,default:!1,type:Boolean}},setup(a){const t=a,e=pa(),o=Po(),n=U("default"),i=U(""),r=U(!1),s=U(!1),l=U("main_plot"),u=U(),c=U(!0),d=G(()=>l.value==="main_plot"),p=G(()=>d.value?e.editablePlotConfig.main_plot:e.editablePlotConfig.subplots[l.value]),v=G(()=>["main_plot",...Object.keys(e.editablePlotConfig.subplots)]),f=G(()=>d.value?Object.keys(e.editablePlotConfig.main_plot):l.value in e.editablePlotConfig.subplots?Object.keys(e.editablePlotConfig.subplots[l.value]):[]);function y(I){const D=Object.keys(I)[0],R=I[D];d.value?e.editablePlotConfig.main_plot[D]={...R}:e.editablePlotConfig.subplots[l.value][D]={...R},e.editablePlotConfig={...e.editablePlotConfig},r.value=!1}const g=G({get(){return r.value?{}:i.value?{[i.value]:p.value[i.value]}:{}},set(I){Object.keys(I)[0]&&I?y(I):r.value=!1}}),m=G({get(){return JSON.stringify(e.editablePlotConfig,null,2)},set(I){try{u.value=JSON.parse(I),c.value=!0}catch{c.value=!1}}});function _(){d.value?(console.log(`Removing ${i.value} from MainPlot`),delete e.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${l.value}`),delete e.editablePlotConfig.subplots[l.value][i.value]),e.editablePlotConfig={...e.editablePlotConfig},i.value=""}function b(I){e.editablePlotConfig.subplots={...e.editablePlotConfig.subplots,[I]:{}},l.value=I}function h(I){delete e.editablePlotConfig.subplots[I],l.value=v.value[v.value.length-1]}function S(I,D){e.editablePlotConfig.subplots[D]=e.editablePlotConfig.subplots[I],delete e.editablePlotConfig.subplots[I],l.value=D}function x(){e.editablePlotConfig=ye(e.customPlotConfigs[e.plotConfigName])}function C(){u.value!==void 0&&c.value&&(e.editablePlotConfig=u.value)}async function A(){if(o.activeBot.isWebserverMode&&!o.activeBot.strategy.strategy){Da("No strategy selected, can't load plot config.");return}try{await o.activeBot.getStrategyPlotConfig(),o.activeBot.strategyPlotConfig&&(e.editablePlotConfig=o.activeBot.strategyPlotConfig)}catch{Da("Failed to load Plot configuration from Strategy.")}}function T(){e.saveCustomPlotConfig(n.value,e.editablePlotConfig)}function L(I){r.value=!1,I&&(y({[I]:{color:Ze()}}),i.value=I)}return X(l,()=>{i.value=""}),X(()=>e.plotConfigName,()=>{i.value="",n.value=e.plotConfigName}),X(()=>t.isVisible,()=>{t.isVisible?(e.editablePlotConfig=ye(e.plotConfig),e.isEditing=!0,n.value=e.plotConfigName):e.isEditing=!1}),(I,D)=>{const R=en,q=ta,K=aa,Ae=Oo,$=st,ve=Jo,Ne=es,de=Bn;return a.columns?(k(),E("div",as,[O(q,{label:"Plot config name","label-for":"idPlotConfigName"},{default:N(()=>[O(R,{"allow-edit":""})]),_:1}),B("div",os,[ns,O(q,{label:"Target Plot","label-for":"FieldSel"},{default:N(()=>[O(Ae,{modelValue:l.value,"onUpdate:modelValue":D[1]||(D[1]=V=>l.value=V),"allow-edit":!d.value,"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:b,onDelete:h,onRename:S},{default:N(()=>[O(K,{id:"FieldSel",modelValue:l.value,"onUpdate:modelValue":D[0]||(D[0]=V=>l.value=V),options:v.value,"select-size":5},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"])]),_:1})]),is,B("div",null,[O(q,{label:"Indicators in this plot","label-for":"selectedIndicators"},{default:N(()=>[O(K,{id:"selectedIndicators",modelValue:i.value,"onUpdate:modelValue":D[2]||(D[2]=V=>i.value=V),disabled:r.value,options:f.value,"select-size":4},null,8,["modelValue","disabled","options"])]),_:1})]),B("div",rs,[O($,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!i.value,class:"col",onClick:_},{default:N(()=>[ie(" Remove indicator ")]),_:1},8,["disabled"]),O($,{variant:"primary",title:"Add indicator to plot",size:"sm",class:"ms-1 col",disabled:r.value,onClick:D[3]||(D[3]=V=>{r.value=!r.value,i.value=""})},{default:N(()=>[ie(" Add new indicator ")]),_:1},8,["disabled"])]),r.value?(k(),J(ve,{key:0,columns:a.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:L},null,8,["columns"])):j("",!0),i.value?(k(),J(Ne,{key:1,modelValue:g.value,"onUpdate:modelValue":D[4]||(D[4]=V=>g.value=V),class:"mt-1",columns:a.columns},null,8,["modelValue","columns"])):j("",!0),ss,B("div",ls,[O($,{class:"ms-1 col",variant:"secondary",size:"sm",disabled:r.value,title:"Reset to last saved configuration",onClick:x},{default:N(()=>[ie("Reset")]),_:1},8,["disabled"]),O($,{disabled:z(o).activeBot.isWebserverMode&&z(o).activeBot.botApiVersion<2.23||!z(o).activeBot.isBotOnline||r.value,class:"ms-1 col",variant:"secondary",size:"sm",onClick:A},{default:N(()=>[ie(" From strategy ")]),_:1},8,["disabled"]),O($,{id:"showButton",class:"ms-1 col",variant:"secondary",size:"sm",disabled:r.value,title:"Show configuration for easy transfer to a strategy",onClick:D[5]||(D[5]=V=>s.value=!s.value)},{default:N(()=>[ie(re(s.value?"Hide":"Show"),1)]),_:1},8,["disabled"]),O($,{class:"ms-1 col",variant:"primary",size:"sm","data-toggle":"tooltip",disabled:r.value,title:"Save configuration",onClick:T},{default:N(()=>[ie("Save")]),_:1},8,["disabled"])]),s.value?(k(),J($,{key:2,class:"ms-1 mt-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:C},{default:N(()=>[ie("Load from String")]),_:1})):j("",!0),s.value?(k(),E("div",us,[O(de,{id:"TextArea",modelValue:m.value,"onUpdate:modelValue":D[6]||(D[6]=V=>m.value=V),class:"textArea",size:"sm",state:c.value},null,8,["modelValue","state"])])):j("",!0)])):j("",!0)}}});const ds=oa(cs,[["__scopeId","data-v-47307b82"]]);function Ut(a,t,e,o,n=0){return{name:e,type:o.type||"line",xAxisIndex:n,yAxisIndex:n,itemStyle:{color:o.color||Ze()},encode:{x:a,y:t},showSymbol:!1}}function $a(a,t,e,o,n=0){const i={type:he.line},r=Ut(a,t,e,i,n),s={stack:e,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:o.color,opacity:.1},tooltip:{show:!1}};return Object.assign(r,s),r}function ps(a,t){const e=a.indexOf("open"),o=a.indexOf("close"),n=a.indexOf("high"),i=a.indexOf("low");let r;return t.map((s,l)=>{const u=s.slice(),c=l===0?(u[e]+u[o])/2:(r[e]+r[o])/2,d=(u[e]+u[n]+u[i]+u[o])/4,p=Math.max(u[n],u[e],u[o]),v=Math.min(u[i],u[e],u[o]);return u[e]=c,u[o]=d,u[n]=p,u[i]=v,r=u.slice(),u})}const hs=2,fs=3;function De(a,t,e=fs){const o=t%a;return t-o+(e===hs?a:0)}function tn(a,t){return`${a.ft_order_side==="buy"?"+":"-"}${Lo("cost"in a?a.cost:a.amount*a.safe_price,t)}`}function Fa(a,t,e,o){return`${a.is_short?"Short":"Long"} ${e}
  ${Io(a.profit_ratio)} ${a.profit_abs?"("+Lo(a.profit_abs,o)+")":""}
  ${tn(t,o)}
  Enter-tag: ${a.enter_tag??""}
  Exit-Tag: ${a.exit_reason??""}`}function vs(a,t,e){return`${a.is_short?"Short":"Long"} adjustment
  ${tn(t,e)}
  Enter-tag: ${a.enter_tag??""}`}const gs="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Wa="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",bt="#AD00FF",St="#0066FF";function ms(a,t){const e=[],o=a.data_stop_ts+a.timeframe_ms;for(let n=0,i=t.length;n<i;n+=1){const r=t[n];if((De(a.timeframe_ms??0,r.open_timestamp)<=o||!r.close_timestamp||r.close_timestamp&&r.close_timestamp>=a.data_start_ts)&&r.orders)for(let s=0;s<r.orders.length;s++){const l=r.orders[s],{quoteCurrency:u}=lr(r.quote_currency??r.pair??"");l.order_filled_timestamp&&De(a.timeframe_ms??0,l.order_filled_timestamp)<=o&&l.order_filled_timestamp>a.data_start_ts&&(s===0?e.push([De(a.timeframe_ms??0,r.open_timestamp),l.safe_price,Wa,l.ft_order_side=="sell"?180:0,r.is_short?bt:St,r.is_short?"Short":"Long",Fa(r,l,"entry",u)]):s===r.orders.length-1&&r.close_timestamp?De(a.timeframe_ms??0,r.close_timestamp)<=o&&r.close_timestamp>a.data_start_ts&&r.is_open===!1&&e.push([De(a.timeframe_ms??0,r.close_timestamp),l.safe_price,Wa,r.is_short?0:180,r.is_short?bt:St,Io(r.profit_ratio,2),Fa(r,l,"exit",u)]):e.push([De(a.timeframe_ms??0,l.order_filled_timestamp),l.safe_price,gs,l.ft_order_side=="sell"?180:0,r.is_short?bt:St,"",vs(r,l,u)]))}}return{tradeData:e}}function ys(a,t,e,o){const{tradeData:n}=ms(e,o),i=o.filter(s=>s.is_open),r={name:a,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:t!=="dark"?"#fff":"#000",padding:2,color:t==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:s=>s.data[4],opacity:.9},symbol:s=>s[2],symbolRotate:s=>s[3],symbolSize:13,data:n};if(i.length>0){const s=e.timeframe_ms*10;r.markLine={symbol:"none",itemStyle:{color:"#ff0000AA"},label:{show:!0,position:"middle"},lineStyle:{type:"solid"},data:i.map(l=>[{name:"Stoploss",yAxis:l.stop_loss_abs,xAxis:e.data_stop_ts-s>l.open_timestamp?l.open_timestamp:e.data_stop_ts-s},{yAxis:l.stop_loss_abs,xAxis:l.close_timestamp??e.data_stop_ts+e.timeframe_ms}])}}return r}function _s(a,t,e,o){const n=a.indexOf(e),i=a.indexOf(o),r=n>0&&i>0;return r&&a.push(`${e}-${o}`),t.map(s=>{const l=s.slice();if(r){const u=l===null||l[i]===null||l[n]===null?null:l[i]-l[n];l.push(u)}return l})}function bs(a){const t=[];return"main_plot"in a&&Object.entries(a.main_plot).forEach(([e,o])=>{o.fill_to&&t.push([e,o.fill_to])}),"subplots"in a&&Object.values(a.subplots).forEach(e=>{Object.entries(e).forEach(([o,n])=>{n.fill_to&&t.push([o,n.fill_to])})}),t}var Ss=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,o){return Wi(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,o,n){return n.point(o.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ko);const xs=Ss;var an=4,Cs=function(){function a(){}return a}(),ws=function(a){M(t,a);function t(e){var o=a.call(this,e)||this;return o._off=0,o.hoverDataIdx=-1,o}return t.prototype.getDefaultShape=function(){return new Cs},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,o){var n=o.points,i=o.size,r=this.symbolProxy,s=r.shape,l=e.getContext?e.getContext():e,u=l&&i[0]<an,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<n.length;){var p=n[d++],v=n[d++];isNaN(p)||isNaN(v)||c&&!c.contain(p,v)||(s.x=p-i[0]/2,s.y=v-i[1]/2,s.width=i[0],s.height=i[1],r.buildPath(e,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,o=e.points,n=e.size,i=this._ctx,r=this.softClipShape,s;if(i){for(s=this._off;s<o.length;){var l=o[s++],u=o[s++];isNaN(l)||isNaN(u)||r&&!r.contain(l,u)||i.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(e,o){for(var n=this.shape,i=n.points,r=n.size,s=Math.max(r[0],4),l=Math.max(r[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,p=i[c+1]-l/2;if(e>=d&&o>=p&&e<=d+s&&o<=p+l)return u}return-1},t.prototype.contain=function(e,o){var n=this.transformCoordToLocal(e,o),i=this.getBoundingRect();if(e=n[0],o=n[1],i.contain(e,o)){var r=this.hoverDataIdx=this.findDataIndex(e,o);return r>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var o=this.shape,n=o.points,i=o.size,r=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,p=0;p<n.length;){var v=n[p++],f=n[p++];l=Math.min(v,l),c=Math.max(v,c),u=Math.min(f,u),d=Math.max(f,d)}e=this._rect=new na(l-r/2,u-s/2,c-l+r,d-u+s)}return e},t}(lt),As=function(){function a(){this.group=new we}return a.prototype.updateData=function(t,e){this._clear();var o=this._create();o.setShape({points:t.getLayout("points")}),this._setCommon(o,t,e)},a.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var n=(o.endIndex-o.startIndex)*2,i=o.startIndex*4*2;e=new Float32Array(e.buffer,i,n)}o.setShape("points",e),o.reset()})},a.prototype.incrementalPrepareUpdate=function(t){this._clear()},a.prototype.incrementalUpdate=function(t,e,o){var n=this._newAdded[0],i=e.getLayout("points"),r=n&&n.shape.points;if(r&&r.length<2e4){var s=r.length,l=new Float32Array(s+i.length);l.set(r),l.set(i,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,e,o)}},a.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},a.prototype._create=function(){var t=new ws({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},a.prototype._setCommon=function(t,e,o){var n=e.hostModel;o=o||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=o.clipShape||null,t.symbolProxy=ia(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var r=t.shape.size[0]<an;t.useStyle(n.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ot(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var d=t.hoverDataIdx;d>=0&&(u.dataIndex=d+(t.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}();const Ps=As;var Ts=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){var i=e.getData(),r=this._updateSymbolDraw(i,e);r.updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,o,n){var i=e.getData(),r=this._updateSymbolDraw(i,e);r.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,o,n){this._symbolDraw.incrementalUpdate(e,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=e.end===o.getData().count()},t.prototype.updateTransform=function(e,o,n){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=Yo("").reset(e,o,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var o=e.coordinateSystem,n=o&&o.getArea&&o.getArea();return e.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(e,o){var n=this._symbolDraw,i=o.pipelineContext,r=i.large;return(!n||r!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=r?new Ps:new Gi,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Mo);const Ds=Ts;function Is(a){ra(Ui),a.registerSeriesModel(xs),a.registerChartView(Ds),a.registerLayout(Yo("scatter"))}var Ls={axisPointer:1,tooltip:1,brush:1};function Os(a,t,e){var o=t.getComponentByElement(a.topTarget),n=o&&o.coordinateSystem;return o&&o!==e&&!Ls.hasOwnProperty(o.mainType)&&n&&n.model!==e}var Ga=Rt.prototype,xt=Fn.prototype,on=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t})(on);function Ct(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ks=function(a){M(t,a);function t(e){var o=a.call(this,e)||this;return o.type="ec-line",o}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new on},t.prototype.buildPath=function(e,o){Ct(o)?Ga.buildPath.call(this,e,o):xt.buildPath.call(this,e,o)},t.prototype.pointAt=function(e){return Ct(this.shape)?Ga.pointAt.call(this,e):xt.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var o=this.shape,n=Ct(o)?[o.x2-o.x1,o.y2-o.y1]:xt.tangentAt.call(this,e);return Bo(n,n)},t}(lt);const Ms=ks;var wt=["fromSymbol","toSymbol"];function Ua(a){return"_"+a+"Type"}function Za(a,t,e){var o=t.getItemVisual(e,a);if(!o||o==="none")return o;var n=t.getItemVisual(e,a+"Size"),i=t.getItemVisual(e,a+"Rotate"),r=t.getItemVisual(e,a+"Offset"),s=t.getItemVisual(e,a+"KeepAspect"),l=sa(n),u=la(r||0,l);return o+l+u+(i||"")+(s||"")}function Ha(a,t,e){var o=t.getItemVisual(e,a);if(!(!o||o==="none")){var n=t.getItemVisual(e,a+"Size"),i=t.getItemVisual(e,a+"Rotate"),r=t.getItemVisual(e,a+"Offset"),s=t.getItemVisual(e,a+"KeepAspect"),l=sa(n),u=la(r||0,l),c=ia(o,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=a,c}}function Bs(a){var t=new Ms({name:"line",subPixelOptimize:!0});return Zt(t.shape,a),t}function Zt(a,t){a.x1=t[0][0],a.y1=t[0][1],a.x2=t[1][0],a.y2=t[1][1],a.percent=1;var e=t[2];e?(a.cpx1=e[0],a.cpy1=e[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Vs=function(a){M(t,a);function t(e,o,n){var i=a.call(this)||this;return i._createLine(e,o,n),i}return t.prototype._createLine=function(e,o,n){var i=e.hostModel,r=e.getItemLayout(o),s=Bs(r);s.shape.percent=0,Vo(s,{shape:{percent:1}},i,o),this.add(s),P(wt,function(l){var u=Ha(l,e,o);this.add(u),this[Ua(l)]=Za(l,e,o)},this),this._updateCommonStl(e,o,n)},t.prototype.updateData=function(e,o,n){var i=e.hostModel,r=this.childOfName("line"),s=e.getItemLayout(o),l={shape:{}};Zt(l.shape,s),No(r,l,i,o),P(wt,function(u){var c=Za(u,e,o),d=Ua(u);if(this[d]!==c){this.remove(this.childOfName(u));var p=Ha(u,e,o);this.add(p)}this[d]=c},this),this._updateCommonStl(e,o,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,o,n){var i=e.hostModel,r=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,u=n&&n.selectLineStyle,c=n&&n.labelStatesModels,d=n&&n.emphasisDisabled,p=n&&n.focus,v=n&&n.blurScope;if(!n||e.hasItemOption){var f=e.getItemModel(o),y=f.getModel("emphasis");s=y.getModel("lineStyle").getLineStyle(),l=f.getModel(["blur","lineStyle"]).getLineStyle(),u=f.getModel(["select","lineStyle"]).getLineStyle(),d=y.get("disabled"),p=y.get("focus"),v=y.get("blurScope"),c=Eo(f)}var g=e.getItemVisual(o,"style"),m=g.stroke;r.useStyle(g),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=s,r.ensureState("blur").style=l,r.ensureState("select").style=u,P(wt,function(x){var C=this.childOfName(x);if(C){C.setColor(m),C.style.opacity=g.opacity;for(var A=0;A<La.length;A++){var T=La[A],L=r.getState(T);if(L){var I=L.style||{},D=C.ensureState(T),R=D.style||(D.style={});I.stroke!=null&&(R[C.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(R.opacity=I.opacity)}}C.markRedraw()}},this);var _=i.getRawValue(o);Wn(this,c,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(x,C){return i.getFormattedLabel(x,C,e.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(_==null?e.getName(o):isFinite(_)?Gn(_):_)+""});var b=this.getTextContent();if(b){var h=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=h.get("position")||"middle";var S=h.get("distance");F(S)||(S=[S,S]),b.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),Un(this,p,v,d)},t.prototype.highlight=function(){$t(this)},t.prototype.downplay=function(){Ft(this)},t.prototype.updateLayout=function(e,o){this.setLinePoints(e.getItemLayout(o))},t.prototype.setLinePoints=function(e){var o=this.childOfName("line");Zt(o.shape,e),o.dirty()},t.prototype.beforeUpdate=function(){var e=this,o=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),i=e.getTextContent();if(!o&&!n&&(!i||i.ignore))return;for(var r=1,s=this.parent;s;)s.scaleX&&(r/=s.scaleX),s=s.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),p=Zn([],d,c);Bo(p,p);function v(L,I){var D=L.__specifiedRotation;if(D==null){var R=l.tangentAt(I);L.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else L.attr("rotation",D)}if(o&&(o.setPosition(c),v(o,0),o.scaleX=o.scaleY=r*u,o.markRedraw()),n&&(n.setPosition(d),v(n,1),n.scaleX=n.scaleY=r*u,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var f=void 0,y=void 0,g=i.__labelDistance,m=g[0]*r,_=g[1]*r,b=u/2,h=l.tangentAt(b),S=[h[1],-h[0]],x=l.pointAt(b);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var C=h[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var A=-Math.atan2(h[1],h[0]);d[0]<c[0]&&(A=Math.PI+A),i.rotation=A}var T=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":T=-_,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":T=_,y="top";break;default:T=0,y="middle"}switch(i.__position){case"end":i.x=p[0]*m+d[0],i.y=p[1]*_+d[1],f=p[0]>.8?"left":p[0]<-.8?"right":"center",y=p[1]>.8?"top":p[1]<-.8?"bottom":"middle";break;case"start":i.x=-p[0]*m+c[0],i.y=-p[1]*_+c[1],f=p[0]>.8?"right":p[0]<-.8?"left":"center",y=p[1]>.8?"bottom":p[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=m*C+c[0],i.y=c[1]+T,f=h[0]<0?"right":"left",i.originX=-m*C,i.originY=-T;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=x[0],i.y=x[1]+T,f="center",i.originY=-T;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-m*C+d[0],i.y=d[1]+T,f=h[0]>=0?"right":"left",i.originX=m*C,i.originY=-T;break}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||y,align:i.__align||f})}},t}(we);const Ns=Vs;var Es=function(){function a(t){this.group=new we,this._LineCtor=t||Ns}return a.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var o=this,n=o.group,i=o._lineData;o._lineData=t,i||n.removeAll();var r=ja(t);t.diff(i).add(function(s){e._doAdd(t,s,r)}).update(function(s,l){e._doUpdate(i,t,l,s,r)}).remove(function(s){n.remove(i.getItemGraphicEl(s))}).execute()},a.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,o){e.updateLayout(t,o)},this)},a.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=ja(t),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function o(s){!s.isGroup&&!zs(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var i=e.getItemLayout(n);if(At(i)){var r=new this._LineCtor(e,n,this._seriesScope);r.traverse(o),this.group.add(r),e.setItemGraphicEl(n,r),this._progressiveEls.push(r)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(t){zo(this._progressiveEls||this.group,t)},a.prototype._doAdd=function(t,e,o){var n=t.getItemLayout(e);if(At(n)){var i=new this._LineCtor(t,e,o);t.setItemGraphicEl(e,i),this.group.add(i)}},a.prototype._doUpdate=function(t,e,o,n,i){var r=t.getItemGraphicEl(o);if(!At(e.getItemLayout(n))){this.group.remove(r);return}r?r.updateData(e,n,i):r=new this._LineCtor(e,n,i),e.setItemGraphicEl(n,r),this.group.add(r)},a}();function zs(a){return a.animators&&a.animators.length>0}function ja(a){var t=a.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:Eo(t)}}function qa(a){return isNaN(a[0])||isNaN(a[1])}function At(a){return a&&!qa(a[0])&&!qa(a[1])}const Rs=Es;var xe=!0,qe=Math.min,ke=Math.max,$s=Math.pow,Fs=1e4,Ws=6,Gs=6,Ka="globalPan",Us={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Zs={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ya={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Hs=0,js=function(a){M(t,a);function t(e){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=e,o.group=new we,o._uid="brushController_"+Hs++,P(el,function(n,i){this._handlers[i]=se(n,this)},o),o}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var o=this._zr;this._enableGlobalPan||Zi(o,Ka,this._uid),P(this._handlers,function(n,i){o.on(i,n)}),this._brushType=e.brushType,this._brushOption=le(ue(Ya),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Hi(e,Ka,this._uid),P(this._handlers,function(o,n){e.off(n,o)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var o=this._panels={};P(e,function(n){o[n.panelId]=ue(n)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=o.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=Z(e,function(p){return le(ue(Ya),p,!0)});var o="\0-brush-index-",n=this._covers,i=this._covers=[],r=this,s=this._creatingCover;return new Ro(n,e,u,l).add(c).update(c).remove(d).execute(),this;function l(p,v){return(p.id!=null?p.id:o+v)+"-"+p.brushType}function u(p,v){return l(p.__brushOption,v)}function c(p,v){var f=e[p];if(v!=null&&n[v]===s)i[p]=n[v];else{var y=i[p]=v!=null?(n[v].__brushOption=f,n[v]):rn(r,nn(r,f));fa(r,y)}}function d(p){n[p]!==s&&r.group.remove(n[p])}},t.prototype.unmount=function(){return this.enableBrush(!1),Ht(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Hn);function nn(a,t){var e=dt[t.brushType].createCover(a,t);return e.__brushOption=t,ln(e,t),a.group.add(e),e}function rn(a,t){var e=va(t);return e.endCreating&&(e.endCreating(a,t),ln(t,t.__brushOption)),t}function sn(a,t){var e=t.__brushOption;va(t).updateCoverShape(a,t,e.range,e)}function ln(a,t){var e=t.z;e==null&&(e=Fs),a.traverse(function(o){o.z=e,o.z2=e})}function fa(a,t){va(t).updateCommon(a,t),sn(a,t)}function va(a){return dt[a.__brushOption.brushType]}function ga(a,t,e){var o=a._panels;if(!o)return xe;var n,i=a._transform;return P(o,function(r){r.isTargetByCursor(t,e,i)&&(n=r)}),n}function un(a,t){var e=a._panels;if(!e)return xe;var o=t.__brushOption.panelId;return o!=null?e[o]:xe}function Ht(a){var t=a._covers,e=t.length;return P(t,function(o){a.group.remove(o)},a),t.length=0,!!e}function Ce(a,t){var e=Z(a._covers,function(o){var n=o.__brushOption,i=ue(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});a.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function qs(a){var t=a._track;if(!t.length)return!1;var e=t[t.length-1],o=t[0],n=e[0]-o[0],i=e[1]-o[1],r=$s(n*n+i*i,.5);return r>Ws}function cn(a){var t=a.length-1;return t<0&&(t=0),[a[0],a[t]]}function dn(a,t,e,o){var n=new we;return n.add(new Wt({name:"main",style:ma(e),silent:!0,draggable:!0,cursor:"move",drift:H(Xa,a,t,n,["n","s","w","e"]),ondragend:H(Ce,t,{isEnd:!0})})),P(o,function(i){n.add(new Wt({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:H(Xa,a,t,n,i),ondragend:H(Ce,t,{isEnd:!0})}))}),n}function pn(a,t,e,o){var n=o.brushStyle.lineWidth||0,i=ke(n,Gs),r=e[0][0],s=e[1][0],l=r-n/2,u=s-n/2,c=e[0][1],d=e[1][1],p=c-i+n/2,v=d-i+n/2,f=c-r,y=d-s,g=f+n,m=y+n;pe(a,t,"main",r,s,f,y),o.transformable&&(pe(a,t,"w",l,u,i,m),pe(a,t,"e",p,u,i,m),pe(a,t,"n",l,u,g,i),pe(a,t,"s",l,v,g,i),pe(a,t,"nw",l,u,i,i),pe(a,t,"ne",p,u,i,i),pe(a,t,"sw",l,v,i,i),pe(a,t,"se",p,v,i,i))}function jt(a,t){var e=t.__brushOption,o=e.transformable,n=t.childAt(0);n.useStyle(ma(e)),n.attr({silent:!o,cursor:o?"move":"default"}),P([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r=t.childOfName(i.join("")),s=i.length===1?qt(a,i[0]):Ys(a,i);r&&r.attr({silent:!o,invisible:!o,cursor:o?Zs[s]+"-resize":null})})}function pe(a,t,e,o,n,i,r){var s=t.childOfName(e);s&&s.setShape(Js(ya(a,t,[[o,n],[o+i,n+r]])))}function ma(a){return Ve({strokeNoScale:!0},a.brushStyle)}function hn(a,t,e,o){var n=[qe(a,e),qe(t,o)],i=[ke(a,e),ke(t,o)];return[[n[0],i[0]],[n[1],i[1]]]}function Ks(a){return Fo(a.group)}function qt(a,t){var e={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},n=qn(e[t],Ks(a));return o[n]}function Ys(a,t){var e=[qt(a,t[0]),qt(a,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function Xa(a,t,e,o,n,i){var r=e.__brushOption,s=a.toRectRange(r.range),l=fn(t,n,i);P(o,function(u){var c=Us[u];s[c[0]][c[1]]+=l[c[0]]}),r.range=a.fromRectRange(hn(s[0][0],s[1][0],s[0][1],s[1][1])),fa(t,e),Ce(t,{isEnd:!1})}function Xs(a,t,e,o){var n=t.__brushOption.range,i=fn(a,e,o);P(n,function(r){r[0]+=i[0],r[1]+=i[1]}),fa(a,t),Ce(a,{isEnd:!1})}function fn(a,t,e){var o=a.group,n=o.transformCoordToLocal(t,e),i=o.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function ya(a,t,e){var o=un(a,t);return o&&o!==xe?o.clipPath(e,a._transform):ue(e)}function Js(a){var t=qe(a[0][0],a[1][0]),e=qe(a[0][1],a[1][1]),o=ke(a[0][0],a[1][0]),n=ke(a[0][1],a[1][1]);return{x:t,y:e,width:o-t,height:n-e}}function Qs(a,t,e){if(!(!a._brushType||tl(a,t.offsetX,t.offsetY))){var o=a._zr,n=a._covers,i=ga(a,t,e);if(!a._dragging)for(var r=0;r<n.length;r++){var s=n[r].__brushOption;if(i&&(i===xe||s.panelId===i.panelId)&&dt[s.brushType].contain(n[r],e[0],e[1]))return}i&&o.setCursorStyle("crosshair")}}function Kt(a){var t=a.event;t.preventDefault&&t.preventDefault()}function Yt(a,t,e){return a.childOfName("main").contain(t,e)}function vn(a,t,e,o){var n=a._creatingCover,i=a._creatingPanel,r=a._brushOption,s;if(a._track.push(e.slice()),qs(a)||n){if(i&&!n){r.brushMode==="single"&&Ht(a);var l=ue(r);l.brushType=Ja(l.brushType,i),l.panelId=i===xe?null:i.panelId,n=a._creatingCover=nn(a,l),a._covers.push(n)}if(n){var u=dt[Ja(a._brushType,i)],c=n.__brushOption;c.range=u.getCreatingRange(ya(a,n,a._track)),o&&(rn(a,n),u.updateCommon(a,n)),sn(a,n),s={isEnd:o}}}else o&&r.brushMode==="single"&&r.removeOnClick&&ga(a,t,e)&&Ht(a)&&(s={isEnd:o,removeOnClick:!0});return s}function Ja(a,t){return a==="auto"?t.defaultBrushType:a}var el={mousedown:function(a){if(this._dragging)Qa(this,a);else if(!a.target||!a.target.draggable){Kt(a);var t=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var e=this._creatingPanel=ga(this,a,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(a){var t=a.offsetX,e=a.offsetY,o=this.group.transformCoordToLocal(t,e);if(Qs(this,a,o),this._dragging){Kt(a);var n=vn(this,a,o,!1);n&&Ce(this,n)}},mouseup:function(a){Qa(this,a)}};function Qa(a,t){if(a._dragging){Kt(t);var e=t.offsetX,o=t.offsetY,n=a.group.transformCoordToLocal(e,o),i=vn(a,t,n,!0);a._dragging=!1,a._track=[],a._creatingCover=null,i&&Ce(a,i)}}function tl(a,t,e){var o=a._zr;return t<0||t>o.getWidth()||e<0||e>o.getHeight()}var dt={lineX:eo(0),lineY:eo(1),rect:{createCover:function(a,t){function e(o){return o}return dn({toRectRange:e,fromRectRange:e},a,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var t=cn(a);return hn(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(a,t,e,o){pn(a,t,e,o)},updateCommon:jt,contain:Yt},polygon:{createCover:function(a,t){var e=new we;return e.add(new $o({name:"main",style:ma(t),silent:!0})),e},getCreatingRange:function(a){return a},endCreating:function(a,t){t.remove(t.childAt(0)),t.add(new jn({name:"main",draggable:!0,drift:H(Xs,a,t),ondragend:H(Ce,a,{isEnd:!0})}))},updateCoverShape:function(a,t,e,o){t.childAt(0).setShape({points:ya(a,t,e)})},updateCommon:jt,contain:Yt}};function eo(a){return{createCover:function(t,e){return dn({toRectRange:function(o){var n=[o,[0,100]];return a&&n.reverse(),n},fromRectRange:function(o){return o[a]}},t,e,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(t){var e=cn(t),o=qe(e[0][a],e[1][a]),n=ke(e[0][a],e[1][a]);return[o,n]},updateCoverShape:function(t,e,o,n){var i,r=un(t,e);if(r!==xe&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(a);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-a]]}var l=[o,i];a&&l.reverse(),pn(t,e,l,n)},updateCommon:jt,contain:Yt}}const al=js;function ol(a){return a=_a(a),function(t){return Kn(t,a)}}function nl(a,t){return a=_a(a),function(e){var o=t??e,n=o?a.width:a.height,i=o?a.x:a.y;return[i,i+(n||0)]}}function il(a,t,e){var o=_a(a);return function(n,i){return o.contain(i[0],i[1])&&!Os(n,t,e)}}function _a(a){return na.create(a)}var rl=function(){function a(){}return a.prototype.getInitialData=function(t,e){var o,n=e.getComponent("xAxis",this.get("xAxisIndex")),i=e.getComponent("yAxis",this.get("yAxisIndex")),r=n.get("type"),s=i.get("type"),l;r==="category"?(t.layout="horizontal",o=n.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",o=i.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],c=t.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],p=u[1-c],v=[n,i],f=v[c].get("type"),y=v[1-c].get("type"),g=t.data;if(g&&l){var m=[];P(g,function(h,S){var x;F(h)?(x=h.slice(),h.unshift(S)):F(h.value)?(x=ce({},h),x.value=x.value.slice(),h.value.unshift(S)):x=h,m.push(x)}),t.data=m}var _=this.defaultValueDimensions,b=[{name:d,type:Oa(f),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:p,type:Oa(y),dimsDef:_.slice()}];return sr(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:H(Yn,b,this)})},a.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},a}(),sl=["color","borderColor"],ll=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,o,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,o,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,o):this._incrementalRenderNormal(e,o)},t.prototype.eachRendered=function(e){zo(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var o=e.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},t.prototype._renderNormal=function(e){var o=e.getData(),n=this._data,i=this.group,r=o.getLayout("isSimpleBox"),s=e.get("clip",!0),l=e.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),o.diff(n).add(function(c){if(o.hasValue(c)){var d=o.getItemLayout(c);if(s&&to(u,d))return;var p=Pt(d,c,!0);Vo(p,{shape:{points:d.ends}},e,c),Tt(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}}).update(function(c,d){var p=n.getItemGraphicEl(d);if(!o.hasValue(c)){i.remove(p);return}var v=o.getItemLayout(c);if(s&&to(u,v)){i.remove(p);return}p?(No(p,{shape:{points:v.ends}},e,c),Xn(p)):p=Pt(v),Tt(p,o,c,r),i.add(p),o.setItemGraphicEl(c,p)}).remove(function(c){var d=n.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=o},t.prototype._renderLarge=function(e){this._clear(),ao(e,this.group);var o=e.get("clip",!0)?ji(e.coordinateSystem,!1,e):null;o?this.group.setClipPath(o):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,o){for(var n=o.getData(),i=n.getLayout("isSimpleBox"),r;(r=e.next())!=null;){var s=n.getItemLayout(r),l=Pt(s);Tt(l,n,r,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,o){ao(o,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(Mo),ul=function(){function a(){}return a}(),cl=function(a){M(t,a);function t(e){var o=a.call(this,e)||this;return o.type="normalCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new ul},t.prototype.buildPath=function(e,o){var n=o.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(lt);function Pt(a,t,e){var o=a.ends;return new cl({shape:{points:e?dl(o,a):o},z2:100})}function to(a,t){for(var e=!0,o=0;o<t.ends.length;o++)if(a.contain(t.ends[o][0],t.ends[o][1])){e=!1;break}return e}function Tt(a,t,e,o){var n=t.getItemModel(e);a.useStyle(t.getItemVisual(e,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,Jn(a,n)}function dl(a,t){return Z(a,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var pl=function(){function a(){}return a}(),Dt=function(a){M(t,a);function t(e){var o=a.call(this,e)||this;return o.type="largeCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new pl},t.prototype.buildPath=function(e,o){for(var n=o.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];e.moveTo(r,n[i++]),e.lineTo(r,n[i++])}else i+=3},t}(lt);function ao(a,t,e,o){var n=a.getData(),i=n.getLayout("largePoints"),r=new Dt({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});t.add(r);var s=new Dt({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new Dt({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});t.add(l),It(1,r,a),It(-1,s,a),It(0,l,a),o&&(r.incremental=!0,s.incremental=!0),e&&e.push(r,s)}function It(a,t,e,o){var n=e.get(["itemStyle",a>0?"borderColor":"borderColor0"])||e.get(["itemStyle",a>0?"color":"color0"]);a===0&&(n=e.get(["itemStyle","borderColorDoji"]));var i=e.getModel("itemStyle").getItemStyle(sl);t.useStyle(i),t.style.fill=null,t.style.stroke=n}const hl=ll;var gn=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,o,n){var i=o.getItemLayout(e);return i&&n.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(ko);ua(gn,rl,!0);const fl=gn;function vl(a){!a||!F(a.series)||P(a.series,function(t){He(t)&&t.type==="k"&&(t.type="candlestick")})}var gl=["itemStyle","borderColor"],ml=["itemStyle","borderColor0"],yl=["itemStyle","borderColorDoji"],_l=["itemStyle","color"],bl=["itemStyle","color0"],Sl={seriesType:"candlestick",plan:Wo(),performRawSeries:!0,reset:function(a,t){function e(i,r){return r.get(i>0?_l:bl)}function o(i,r){return r.get(i===0?yl:i>0?gl:ml)}if(!t.isSeriesFiltered(a)){var n=a.pipelineContext.large;return!n&&{progress:function(i,r){for(var s;(s=i.next())!=null;){var l=r.getItemModel(s),u=r.getItemLayout(s).sign,c=l.getItemStyle();c.fill=e(u,l),c.stroke=o(u,l)||c.fill;var d=r.ensureUniqueItemVisual(s,"style");ce(d,c)}}}}}};const xl=Sl;var Cl={seriesType:"candlestick",plan:Wo(),reset:function(a){var t=a.coordinateSystem,e=a.getData(),o=wl(a,e),n=0,i=1,r=["x","y"],s=e.getDimensionIndex(e.mapDimension(r[n])),l=Z(e.mapDimensionsAll(r[i]),e.getDimensionIndex,e),u=l[0],c=l[1],d=l[2],p=l[3];if(e.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),s<0||l.length<4)return;return{progress:a.pipelineContext.large?f:v};function v(y,g){for(var m,_=g.getStore();(m=y.next())!=null;){var b=_.get(s,m),h=_.get(u,m),S=_.get(c,m),x=_.get(d,m),C=_.get(p,m),A=Math.min(h,S),T=Math.max(h,S),L=$(A,b),I=$(T,b),D=$(x,b),R=$(C,b),q=[];ve(q,I,0),ve(q,L,1),q.push(de(R),de(I),de(D),de(L));var K=g.getItemModel(m),Ae=!!K.get(["itemStyle","borderColorDoji"]);g.setItemLayout(m,{sign:oo(_,m,h,S,c,Ae),initBaseline:h>S?I[i]:L[i],ends:q,brushRect:Ne(x,C,b)})}function $(V,oe){var Q=[];return Q[n]=oe,Q[i]=V,isNaN(oe)||isNaN(V)?[NaN,NaN]:t.dataToPoint(Q)}function ve(V,oe,Q){var w=oe.slice(),W=oe.slice();w[n]=yt(w[n]+o/2,1,!1),W[n]=yt(W[n]-o/2,1,!0),Q?V.push(w,W):V.push(W,w)}function Ne(V,oe,Q){var w=$(V,Q),W=$(oe,Q);return w[n]-=o/2,W[n]-=o/2,{x:w[0],y:w[1],width:o,height:W[1]-w[1]}}function de(V){return V[n]=yt(V[n],1),V}}function f(y,g){for(var m=Qn(y.count*4),_=0,b,h=[],S=[],x,C=g.getStore(),A=!!a.get(["itemStyle","borderColorDoji"]);(x=y.next())!=null;){var T=C.get(s,x),L=C.get(u,x),I=C.get(c,x),D=C.get(d,x),R=C.get(p,x);if(isNaN(T)||isNaN(D)||isNaN(R)){m[_++]=NaN,_+=3;continue}m[_++]=oo(C,x,L,I,c,A),h[n]=T,h[i]=D,b=t.dataToPoint(h,null,S),m[_++]=b?b[0]:NaN,m[_++]=b?b[1]:NaN,h[i]=R,b=t.dataToPoint(h,null,S),m[_++]=b?b[1]:NaN}g.setLayout("largePoints",m)}}};function oo(a,t,e,o,n,i){var r;return e>o?r=-1:e<o?r=1:r=i?0:t>0?a.get(n,t-1)<=o?1:-1:1,r}function wl(a,t){var e=a.getBaseAxis(),o,n=e.type==="category"?e.getBandWidth():(o=e.getExtent(),Math.abs(o[1]-o[0])/t.count()),i=Ie(be(a.get("barMaxWidth"),n),n),r=Ie(be(a.get("barMinWidth"),1),n),s=a.get("barWidth");return s!=null?Ie(s,n):Math.max(Math.min(n/2,i),r)}const Al=Cl;function Pl(a){a.registerChartView(hl),a.registerSeriesModel(fl),a.registerPreprocessor(vl),a.registerVisual(xl),a.registerLayout(Al)}var Tl=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,o,n){var i=ei(e);a.prototype.init.apply(this,arguments),no(e,i)},t.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),no(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(ut);function no(a,t){var e=a.cellSize,o;F(e)?o=e:o=a.cellSize=[e,e],o.length===1&&(o[1]=o[0]);var n=Z([0,1],function(i){return ti(t,i)&&(o[i]="auto"),o[i]!=null&&o[i]!=="auto"});ai(a,t,{type:"box",ignoreSize:n})}const Dl=Tl;var Il=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){var i=this.group;i.removeAll();var r=e.coordinateSystem,s=r.getRangeInfo(),l=r.getOrient(),u=o.getLocaleModel();this._renderDayRect(e,s,i),this._renderLines(e,s,l,i),this._renderYearText(e,s,l,i),this._renderMonthText(e,u,l,i),this._renderWeekText(e,u,s,l,i)},t.prototype._renderDayRect=function(e,o,n){for(var i=e.coordinateSystem,r=e.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=o.start.time;u<=o.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new Wt({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:r});n.add(d)}},t.prototype._renderLines=function(e,o,n,i){var r=this,s=e.coordinateSystem,l=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=o.start,p=0;d.time<=o.end.time;p++){f(d.formatedDate),p===0&&(d=s.getDateInfo(o.start.y+"-"+o.start.m));var v=d.date;v.setMonth(v.getMonth()+1),d=s.getDateInfo(v)}f(s.getNextNDay(o.end.time,1).formatedDate);function f(y){r._firstDayOfMonth.push(s.getDateInfo(y)),r._firstDayPoints.push(s.dataToRect([y],!1).tl);var g=r._getLinePointsOfOneWeek(e,y,n);r._tlpoints.push(g[0]),r._blpoints.push(g[g.length-1]),u&&r._drawSplitline(g,l,i)}u&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,c,n),l,i),u&&this._drawSplitline(r._getEdgesPoints(r._blpoints,c,n),l,i)},t.prototype._getEdgesPoints=function(e,o,n){var i=[e[0].slice(),e[e.length-1].slice()],r=n==="horizontal"?0:1;return i[0][r]=i[0][r]-o/2,i[1][r]=i[1][r]+o/2,i},t.prototype._drawSplitline=function(e,o,n){var i=new $o({z2:20,shape:{points:e},style:o});n.add(i)},t.prototype._getLinePointsOfOneWeek=function(e,o,n){for(var i=e.coordinateSystem,r=i.getDateInfo(o),s=[],l=0;l<7;l++){var u=i.getNextNDay(r.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(e,o){return fe(e)&&e?oi(e,o):je(e)?e(o):o.nameMap},t.prototype._yearTextPositionControl=function(e,o,n,i,r){var s=o[0],l=o[1],u=["center","bottom"];i==="bottom"?(l+=r,u=["center","top"]):i==="left"?s-=r:i==="right"?(s+=r,u=["center","top"]):l-=r;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,o,n,i){var r=e.getModel("yearLabel");if(r.get("show")){var s=r.get("margin"),l=r.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,p=n==="horizontal"?0:1,v={top:[c,u[p][1]],bottom:[c,u[1-p][1]],left:[u[1-p][0],d],right:[u[p][0],d]},f=o.start.y;+o.end.y>+o.start.y&&(f=f+"-"+o.end.y);var y=r.get("formatter"),g={start:o.start.y,end:o.end.y,nameMap:f},m=this._formatterLabel(y,g),_=new Le({z2:30,style:Oe(r,{text:m})});_.attr(this._yearTextPositionControl(_,v[l],n,l,s)),i.add(_)}},t.prototype._monthTextPositionControl=function(e,o,n,i,r){var s="left",l="top",u=e[0],c=e[1];return n==="horizontal"?(c=c+r,o&&(s="center"),i==="start"&&(l="bottom")):(u=u+r,o&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(e,o,n,i){var r=e.getModel("monthLabel");if(r.get("show")){var s=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),c=r.get("align"),d=[this._tlpoints,this._blpoints];(!s||fe(s))&&(s&&(o=ka(s)||o),s=o.get(["time","monthAbbr"])||[]);var p=u==="start"?0:1,v=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var f=c==="center",y=0;y<d[p].length-1;y++){var g=d[p][y].slice(),m=this._firstDayOfMonth[y];if(f){var _=this._firstDayPoints[y];g[v]=(_[v]+d[0][y+1][v])/2}var b=r.get("formatter"),h=s[+m.m-1],S={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:h},x=this._formatterLabel(b,S),C=new Le({z2:30,style:ce(Oe(r,{text:x}),this._monthTextPositionControl(g,f,n,u,l))});i.add(C)}}},t.prototype._weekTextPositionControl=function(e,o,n,i,r){var s="center",l="middle",u=e[0],c=e[1],d=n==="start";return o==="horizontal"?(u=u+i+(d?1:-1)*r[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*r[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(e,o,n,i,r){var s=e.getModel("dayLabel");if(s.get("show")){var l=e.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),p=l.getFirstDayOfWeek();if(!c||fe(c)){c&&(o=ka(c)||o);var v=o.get(["time","dayOfWeekShort"]);c=v||Z(o.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var f=l.getNextNDay(n.end.time,7-n.lweek).time,y=[l.getCellWidth(),l.getCellHeight()];d=Ie(d,Math.min(y[1],y[0])),u==="start"&&(f=l.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var g=0;g<7;g++){var m=l.getNextNDay(f,g),_=l.dataToRect([m.time],!1).center,b=g;b=Math.abs((g+p)%7);var h=new Le({z2:30,style:ce(Oe(s,{text:c[b]}),this._weekTextPositionControl(_,i,u,d,y))});r.add(h)}}},t.type="calendar",t}(ct);const Ll=Il;var Lt=864e5,Ol=function(){function a(t,e,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=t}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(t){t=ni(t);var e=t.getFullYear(),o=t.getMonth()+1,n=o<10?"0"+o:""+o,i=t.getDate(),r=i<10?"0"+i:""+i,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:r,day:s,time:t.getTime(),formatedDate:e+"-"+n+"-"+r,date:t}},a.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},a.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[o,7]:[7,o];P([0,1],function(d){c(i,d)&&(r[n[d]]=i[d]*s[d])});var l={width:e.getWidth(),height:e.getHeight()},u=this._rect=Go(r,l);P([0,1],function(d){c(i,d)||(i[d]=u[n[d]]/s[d])});function c(d,p){return d[p]!=null&&d[p]!=="auto"}this._sw=i[0],this._sh=i[1]},a.prototype.dataToPoint=function(t,e){F(t)&&(t=t[0]),e==null&&(e=!0);var o=this.getDateInfo(t),n=this._rangeInfo,i=o.formatedDate;if(e&&!(o.time>=n.start.time&&o.time<n.end.time+Lt))return[NaN,NaN];var r=o.day,s=this._getRangeInfo([n.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},a.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},a.prototype.dataToRect=function(t,e){var o=this.dataToPoint(t,e);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,o=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,e-1,n):this._getDateByWeeksAndDay(e,o-1,n)},a.prototype.convertToPixel=function(t,e,o){var n=io(e);return n===this?n.dataToPoint(o):null},a.prototype.convertFromPixel=function(t,e,o){var n=io(e);return n===this?n.pointToData(o):null},a.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(F(t)&&t.length===1&&(t=t[0]),F(t))e=t;else{var o=t.toString();if(/^\d{4}$/.test(o)&&(e=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var n=this.getDateInfo(o),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);e=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(e=[o,o])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},a.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],o;e[0].time>e[1].time&&(o=!0,e.reverse());var n=Math.floor(e[1].time/Lt)-Math.floor(e[0].time/Lt)+1,i=new Date(e[0].time),r=i.getDate(),s=e[1].date.getDate();i.setDate(r+n-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-e[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-e[1].time)*u>0;)n-=u,i.setDate(l-u);var c=Math.floor((n+e[0].day+6)/7),d=o?-c+1:c-1;return o&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:c,nthWeek:d,fweek:e[0].day,lweek:e[1].day}},a.prototype._getDateByWeeksAndDay=function(t,e,o){var n=this._getRangeInfo(o);if(t>n.weeks||t===0&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var i=(t-1)*7-n.fweek+e,r=new Date(n.start.time);return r.setDate(+n.start.d+i),this.getDateInfo(r)},a.create=function(t,e){var o=[];return t.eachComponent("calendar",function(n){var i=new a(n);o.push(i),n.coordinateSystem=i}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=o[n.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function io(a){var t=a.calendarModel,e=a.seriesModel,o=t?t.coordinateSystem:e?e.coordinateSystem:null;return o}const kl=Ol;function Ml(a){a.registerComponentModel(Dl),a.registerComponentView(Ll),a.registerCoordinateSystem("calendar",kl)}var Bl=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(qi);const Vl=Bl;var Nl=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Ki);const El=Nl;function zl(a){a.registerComponentModel(Vl),a.registerComponentView(El),Yi(a)}var ae=function(){function a(){}return a}(),mn={};function Ge(a,t){mn[a]=t}function yn(a){return mn[a]}var Rl=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;P(this.option.feature,function(o,n){var i=yn(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),le(o,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(ut);const $l=Rl;var Fl=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(e,o,n,i){var r=this.group;if(r.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("orient")==="vertical",u=e.get("feature")||{},c=this._features||(this._features={}),d=[];P(u,function(f,y){d.push(y)}),new Ro(this._featureNames||[],d).add(p).update(p).remove(H(p,null)).execute(),this._featureNames=d;function p(f,y){var g=d[f],m=d[y],_=u[g],b=new ii(_,e,e.ecModel),h;if(i&&i.newTitle!=null&&i.featureName===g&&(_.title=i.newTitle),g&&!m){if(Wl(g))h={onclick:b.option.onclick,featureName:g};else{var S=yn(g);if(!S)return;h=new S}c[g]=h}else if(h=c[m],!h)return;h.uid=ri("toolbox-feature"),h.model=b,h.ecModel=o,h.api=n;var x=h instanceof ae;if(!g&&m){x&&h.dispose&&h.dispose(o,n);return}if(!b.get("show")||x&&h.unusable){x&&h.remove&&h.remove(o,n);return}v(b,h,g),b.setIconStatus=function(C,A){var T=this.option,L=this.iconPaths;T.iconStatus=T.iconStatus||{},T.iconStatus[C]=A,L[C]&&(A==="emphasis"?$t:Ft)(L[C])},h instanceof ae&&h.render&&h.render(b,o,n,i)}function v(f,y,g){var m=f.getModel("iconStyle"),_=f.getModel(["emphasis","iconStyle"]),b=y instanceof ae&&y.getIcons?y.getIcons():f.get("icon"),h=f.get("title")||{},S,x;fe(b)?(S={},S[g]=b):S=b,fe(h)?(x={},x[g]=h):x=h;var C=f.iconPaths={};P(S,function(A,T){var L=Uo(A,{},{x:-s/2,y:-s/2,width:s,height:s});L.setStyle(m.getItemStyle());var I=L.ensureState("emphasis");I.style=_.getItemStyle();var D=new Le({style:{text:x[T],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});L.setTextContent(D),si({el:L,componentModel:e,itemName:T,formatterParamsExtra:{title:x[T]}}),L.__title=x[T],L.on("mouseover",function(){var R=_.getItemStyle(),q=l?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";D.setStyle({fill:_.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),L.setTextConfig({position:_.get("textPosition")||q}),D.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){f.get(["iconStatus",T])!=="emphasis"&&n.leaveEmphasis(this),D.hide()}),(f.get(["iconStatus",T])==="emphasis"?$t:Ft)(L),r.add(L),L.on("click",se(y.onclick,y,o,n,T)),C[T]=L})}li(r,e,n),r.add(ui(r.getBoundingRect(),e)),l||r.eachChild(function(f){var y=f.__title,g=f.ensureState("emphasis"),m=g.textConfig||(g.textConfig={}),_=f.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!je(b)&&y){var h=b.style||(b.style={}),S=ci(y,Le.makeFont(h)),x=f.x+r.x,C=f.y+r.y+s,A=!1;C+S.height>n.getHeight()&&(m.position="top",A=!0);var T=A?-5-S.height:s+10;x+S.width/2>n.getWidth()?(m.position=["100%",T],h.align="right"):x-S.width/2<0&&(m.position=[0,T],h.align="left")}})},t.prototype.updateView=function(e,o,n,i){P(this._features,function(r){r instanceof ae&&r.updateView&&r.updateView(r.model,o,n,i)})},t.prototype.remove=function(e,o){P(this._features,function(n){n instanceof ae&&n.remove&&n.remove(e,o)}),this.group.removeAll()},t.prototype.dispose=function(e,o){P(this._features,function(n){n instanceof ae&&n.dispose&&n.dispose(e,o)})},t.type="toolbox",t}(ct);function Wl(a){return a.indexOf("my")===0}const Gl=Fl;var Ul=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){var n=this.model,i=n.get("name")||e.get("title.0.text")||"echarts",r=o.getZr().painter.getType()==="svg",s=r?"svg":n.get("type",!0)||"png",l=o.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=Zo.browser;if(je(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||r){var p=l.split(","),v=p[0].indexOf("base64")>-1,f=r?decodeURIComponent(p[1]):p[1];v&&(f=window.atob(f));var y=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=f.length,m=new Uint8Array(g);g--;)m[g]=f.charCodeAt(g);var _=new Blob([m]);window.navigator.msSaveOrOpenBlob(_,y)}else{var b=document.createElement("iframe");document.body.appendChild(b);var h=b.contentWindow,S=h.document;S.open("image/svg+xml","replace"),S.write(f),S.close(),h.focus(),S.execCommand("SaveAs",!0,y),document.body.removeChild(b)}}else{var x=n.get("lang"),C='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',A=window.open();A.document.write(C),A.document.title=i}},t.getDefaultOption=function(e){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},t}(ae);const Zl=Ul;var ro="__ec_magicType_stack__",Hl=[["line","bar"],["stack"]],jl=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,o=e.get("icon"),n={};return P(e.get("type"),function(i){o[i]&&(n[i]=o[i])}),n},t.getDefaultOption=function(e){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},t.prototype.onclick=function(e,o,n){var i=this.model,r=i.get(["seriesIndex",n]);if(so[n]){var s={series:[]},l=function(d){var p=d.subType,v=d.id,f=so[n](p,v,d,i);f&&(Ve(f,d.option),s.series.push(f));var y=d.coordinateSystem;if(y&&y.type==="cartesian2d"&&(n==="line"||n==="bar")){var g=y.getAxesByScale("ordinal")[0];if(g){var m=g.dim,_=m+"Axis",b=d.getReferringComponents(_,di).models[0],h=b.componentIndex;s[_]=s[_]||[];for(var S=0;S<=h;S++)s[_][h]=s[_][h]||{};s[_][h].boundaryGap=n==="bar"}}};P(Hl,function(d){Se(d,n)>=0&&P(d,function(p){i.setIconStatus(p,"normal")})}),i.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:r==null?null:{seriesIndex:r}},l);var u,c=n;n==="stack"&&(u=le({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),o.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},t}(ae),so={line:function(a,t,e,o){if(a==="bar")return le({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,t,e,o){if(a==="line")return le({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,t,e,o){var n=e.get("stack")===ro;if(a==="line"||a==="bar")return o.setIconStatus("stack",n?"normal":"emphasis"),le({id:t,stack:n?"":ro},o.get(["option","stack"])||{},!0)}};ca({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,t){t.mergeOption(a.newOption)});const ql=jl;var pt=new Array(60).join("-"),Me="	";function Kl(a){var t={},e=[],o=[];return a.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var r=i.getBaseAxis();if(r.type==="category"){var s=r.dim+"_"+r.index;t[s]||(t[s]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},o.push({axisDim:r.dim,axisIndex:r.index})),t[s].series.push(n)}else e.push(n)}else e.push(n)}),{seriesGroupByCategoryAxis:t,other:e,meta:o}}function Yl(a){var t=[];return P(a,function(e,o){var n=e.categoryAxis,i=e.valueAxis,r=i.dim,s=[" "].concat(Z(e.series,function(v){return v.name})),l=[n.model.getCategories()];P(e.series,function(v){var f=v.getRawData();l.push(v.getRawData().mapArray(f.mapDimension(r),function(y){return y}))});for(var u=[s.join(Me)],c=0;c<l[0].length;c++){for(var d=[],p=0;p<l.length;p++)d.push(l[p][c]);u.push(d.join(Me))}t.push(u.join(`
`))}),t.join(`

`+pt+`

`)}function Xl(a){return Z(a,function(t){var e=t.getRawData(),o=[t.name],n=[];return e.each(e.dimensions,function(){for(var i=arguments.length,r=arguments[i-1],s=e.getName(r),l=0;l<i-1;l++)n[l]=arguments[l];o.push((s?s+Me:"")+n.join(Me))}),o.join(`
`)}).join(`

`+pt+`

`)}function Jl(a){var t=Kl(a);return{value:Ho([Yl(t.seriesGroupByCategoryAxis),Xl(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+pt+`

`),meta:t.meta}}function nt(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ql(a){var t=a.slice(0,a.indexOf(`
`));if(t.indexOf(Me)>=0)return!0}var Xt=new RegExp("["+Me+"]+","g");function eu(a){for(var t=a.split(/\n+/g),e=nt(t.shift()).split(Xt),o=[],n=Z(e,function(l){return{name:l,data:[]}}),i=0;i<t.length;i++){var r=nt(t[i]).split(Xt);o.push(r.shift());for(var s=0;s<r.length;s++)n[s]&&(n[s].data[i]=r[s])}return{series:n,categories:o}}function tu(a){for(var t=a.split(/\n+/g),e=nt(t.shift()),o=[],n=0;n<t.length;n++){var i=nt(t[n]);if(i){var r=i.split(Xt),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),o[n]={name:s,value:[]},l=o[n].value):l=o[n]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);l.length===1&&(u?o[n].value=l[0]:o[n]=l[0])}}return{name:e,data:o}}function au(a,t){var e=a.split(new RegExp(`
*`+pt+`
*`,"g")),o={series:[]};return P(e,function(n,i){if(Ql(n)){var r=eu(n),s=t[i],l=s.axisDim+"Axis";s&&(o[l]=o[l]||[],o[l][s.axisIndex]={data:r.categories},o.series=o.series.concat(r.series))}else{var r=tu(n);o.series.push(r)}}),o}var ou=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var n=o.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),p=i.get("contentToOption"),v=Jl(e);if(je(d)){var f=d(o.getOption());fe(f)?u.innerHTML=f:pi(f)&&u.appendChild(f)}else{c.readOnly=i.get("readOnly");var y=c.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=i.get("textColor"),y.borderColor=i.get("textareaBorderColor"),y.backgroundColor=i.get("textareaColor"),c.value=v.value,u.appendChild(c)}var g=v.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),h=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var S=this;function x(){n.removeChild(r),S._dom=null}Ma(b,"click",x),Ma(h,"click",function(){if(p==null&&d!=null||p!=null&&d==null){x();return}var C;try{je(p)?C=p(u,o.getOption()):C=au(c.value,g)}catch(A){throw x(),new Error("Data view format error "+A)}C&&o.dispatchAction({type:"changeDataView",newOption:C}),x()}),b.innerHTML=l[1],h.innerHTML=l[2],h.style.cssText=b.style.cssText=_,!i.get("readOnly")&&m.appendChild(h),m.appendChild(b),r.appendChild(s),r.appendChild(u),r.appendChild(m),u.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},t.prototype.remove=function(e,o){this._dom&&o.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,o){this.remove(e,o)},t.getDefaultOption=function(e){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},t}(ae);function nu(a,t){return Z(a,function(e,o){var n=t&&t[o];if(He(n)&&!F(n)){var i=He(e)&&!F(e);i||(e={value:e});var r=n.name!=null&&e.name==null;return e=Ve(e,n),r&&delete e.name,e}else return e})}ca({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,t){var e=[];P(a.newOption.series,function(o){var n=t.getSeriesByName(o.name)[0];if(!n)e.push(ce({type:"scatter"},o));else{var i=n.get("data");e.push({name:o.name,data:nu(o.data,i)})}}),t.mergeOption(Ve({series:e},a.newOption))});const iu=ou;var _n=P,bn=Ke();function ru(a,t){var e=ba(a);_n(t,function(o,n){for(var i=e.length-1;i>=0;i--){var r=e[i];if(r[n])break}if(i<0){var s=a.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();e[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),e.push(t)}function su(a){var t=ba(a),e=t[t.length-1];t.length>1&&t.pop();var o={};return _n(e,function(n,i){for(var r=t.length-1;r>=0;r--)if(n=t[r][i],n){o[i]=n;break}}),o}function lu(a){bn(a).snapshots=null}function uu(a){return ba(a).length}function ba(a){var t=bn(a);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var cu=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){lu(e),o.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return o},t}(ae);ca({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,t){t.resetOption("recreate")});const du=cu;var pu=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],hu=function(){function a(t,e,o){var n=this;this._targetInfoList=[];var i=lo(e,t);P(fu,function(r,s){(!o||!o.include||Se(o.include,s)>=0)&&r(i,n._targetInfoList)})}return a.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(o,n,i){if((o.coordRanges||(o.coordRanges=[])).push(n),!o.coordRange){o.coordRange=n;var r=Ot[o.brushType](0,i,n);o.__rangeOffset={offset:ho[o.brushType](r.values,o.range,[1,1]),xyMinMax:r.xyMinMax}}}),t},a.prototype.matchOutputRanges=function(t,e,o){P(t,function(n){var i=this.findTargetInfo(n,e);i&&i!==!0&&P(i.coordSyses,function(r){var s=Ot[n.brushType](1,r,n.range,!0);o(n,s.values,r,e)})},this)},a.prototype.setInputRanges=function(t,e){P(t,function(o){var n=this.findTargetInfo(o,e);if(o.range=o.range||[],n&&n!==!0){o.panelId=n.panelId;var i=Ot[o.brushType](0,n.coordSys,o.coordRange),r=o.__rangeOffset;o.range=r?ho[o.brushType](i.values,r.offset,vu(i.xyMinMax,r.xyMinMax)):i.values}},this)},a.prototype.makePanelOpts=function(t,e){return Z(this._targetInfoList,function(o){var n=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:e?e(o):null,clipPath:ol(n),isTargetByCursor:il(n,t,o.coordSysModel),getLinearBrushOtherExtent:nl(n)}})},a.prototype.controlSeries=function(t,e,o){var n=this.findTargetInfo(t,o);return n===!0||n&&Se(n.coordSyses,e.coordinateSystem)>=0},a.prototype.findTargetInfo=function(t,e){for(var o=this._targetInfoList,n=lo(e,t),i=0;i<o.length;i++){var r=o[i],s=t.panelId;if(s){if(r.panelId===s)return r}else for(var l=0;l<uo.length;l++)if(uo[l](n,r))return r}return!0},a}();function Jt(a){return a[0]>a[1]&&a.reverse(),a}function lo(a,t){return jo(a,t,{includeMainTypes:pu})}var fu={grid:function(a,t){var e=a.xAxisModels,o=a.yAxisModels,n=a.gridModels,i=qo(),r={},s={};!e&&!o&&!n||(P(e,function(l){var u=l.axis.grid.model;i.set(u.id,u),r[u.id]=!0}),P(o,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),P(n,function(l){i.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];P(u.getCartesians(),function(d,p){(Se(e,d.getAxis("x").model)>=0||Se(o,d.getAxis("y").model)>=0)&&c.push(d)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:co.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(a,t){P(a.geoModels,function(e){var o=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:o,coordSyses:[o],getPanelRect:co.geo})})}},uo=[function(a,t){var e=a.xAxisModel,o=a.yAxisModel,n=a.gridModel;return!n&&e&&(n=e.axis.grid.model),!n&&o&&(n=o.axis.grid.model),n&&n===t.gridModel},function(a,t){var e=a.geoModel;return e&&e===t.geoModel}],co={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,t=a.getBoundingRect().clone();return t.applyTransform(Fo(a)),t}},Ot={lineX:H(po,0),lineY:H(po,1),rect:function(a,t,e,o){var n=a?t.pointToData([e[0][0],e[1][0]],o):t.dataToPoint([e[0][0],e[1][0]],o),i=a?t.pointToData([e[0][1],e[1][1]],o):t.dataToPoint([e[0][1],e[1][1]],o),r=[Jt([n[0],i[0]]),Jt([n[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(a,t,e,o){var n=[[1/0,-1/0],[1/0,-1/0]],i=Z(e,function(r){var s=a?t.pointToData(r,o):t.dataToPoint(r,o);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function po(a,t,e,o){var n=e.getAxis(["x","y"][a]),i=Jt(Z([0,1],function(s){return t?n.coordToData(n.toLocalCoord(o[s]),!0):n.toGlobalCoord(n.dataToCoord(o[s]))})),r=[];return r[a]=i,r[1-a]=[NaN,NaN],{values:i,xyMinMax:r}}var ho={lineX:H(fo,0),lineY:H(fo,1),rect:function(a,t,e){return[[a[0][0]-e[0]*t[0][0],a[0][1]-e[0]*t[0][1]],[a[1][0]-e[1]*t[1][0],a[1][1]-e[1]*t[1][1]]]},polygon:function(a,t,e){return Z(a,function(o,n){return[o[0]-e[0]*t[n][0],o[1]-e[1]*t[n][1]]})}};function fo(a,t,e,o){return[t[0]-o[a]*e[0],t[1]-o[a]*e[1]]}function vu(a,t){var e=vo(a),o=vo(t),n=[e[0]/o[0],e[1]/o[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function vo(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}const Sn=hu;var Qt=P,gu=fi("toolbox-dataZoom_"),mu=function(a){M(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(e,o,n,i){this._brushController||(this._brushController=new al(n.getZr()),this._brushController.on("brush",se(this._onBrush,this)).mount()),bu(e,o,this,i,n),_u(e,o)},t.prototype.onclick=function(e,o,n){yu[n].call(this)},t.prototype.remove=function(e,o){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,o){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var o=e.areas;if(!e.isEnd||!o.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var r=new Sn(Sa(this.model),i,{include:["grid"]});r.matchOutputRanges(o,i,function(u,c,d){if(d.type==="cartesian2d"){var p=u.brushType;p==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[p],d,c)}}),ru(i,n),this._dispatchZoomAction(n);function s(u,c,d){var p=c.getAxis(u),v=p.model,f=l(u,v,i),y=f.findRepresentativeAxisProxy(v).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(d=Xi(0,d.slice(),p.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),f&&(n[f.id]={dataZoomId:f.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var p;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(v){var f=v.getAxisModel(u,c.componentIndex);f&&(p=v)}),p}},t.prototype._dispatchZoomAction=function(e){var o=[];Qt(e,function(n,i){o.push(ue(n))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},t.getDefaultOption=function(e){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},t}(ae),yu={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(su(this.ecModel))}};function Sa(a){var t={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function _u(a,t){a.setIconStatus("back",uu(t)>1?"emphasis":"normal")}function bu(a,t,e,o,n){var i=e._isZoomActive;o&&o.type==="takeGlobalCursor"&&(i=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),e._isZoomActive=i,a.setIconStatus("zoom",i?"emphasis":"normal");var r=new Sn(Sa(a),t,{include:["grid"]}),s=r.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}hi("dataZoom",function(a){var t=a.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var o=t.getModel(e),n=[],i=Sa(o),r=jo(a,i);Qt(r.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Qt(r.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,p={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:gu+u+d};p[c]=d,n.push(p)}return n});const Su=mu;function xu(a){a.registerComponentModel($l),a.registerComponentView(Gl),Ge("saveAsImage",Zl),Ge("magicType",ql),Ge("dataView",iu),Ge("dataZoom",Su),Ge("restore",du),ra(zl)}var Cu=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,o,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var o=this._data.count();this.option.loop?e=(e%o+o)%o:(e>=o&&(e=o-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,o=e.data||[],n=e.axisType,i=this._names=[],r;n==="category"?(r=[],P(o,function(u,c){var d=vi(gi(u),""),p;He(u)?(p=ue(u),p.value=c):p=c,r.push(p),i.push(d)})):r=o;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new at([{name:"value",type:s}],this);l.initData(r,i)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(ut);const go=Cu;var xn=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=mi(go.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(go);ua(xn,Ko.prototype);const wu=xn;var Au=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t}(ct);const Pu=Au;var Tu=function(a){M(t,a);function t(e,o,n,i){var r=a.call(this,e,o,n)||this;return r.type=i||"value",r}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Ji);const Du=Tu;var kt=Math.PI,mo=Ke(),Iu=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,o){this.api=o},t.prototype.render=function(e,o,n){if(this.model=e,this.api=n,this.ecModel=o,this.group.removeAll(),e.get("show",!0)){var i=this._layout(e,n),r=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,e);e.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return Gt("nameValue",{noName:!0,value:c})},P(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,r,l,e)},this),this._renderAxisLabel(i,s,l,e),this._position(i,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,o){var n=e.get(["label","position"]),i=e.get("orient"),r=Ou(e,o),s;n==null||n==="auto"?s=i==="horizontal"?r.y+r.height/2<o.getHeight()/2?"-":"+":r.x+r.width/2<o.getWidth()/2?"+":"-":fe(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:kt/2},d=i==="vertical"?r.height:r.width,p=e.getModel("controlStyle"),v=p.get("show",!0),f=v?p.get("itemSize"):0,y=v?p.get("itemGap"):0,g=f+y,m=e.get(["label","rotate"])||0;m=m*kt/180;var _,b,h,S=p.get("position",!0),x=v&&p.get("showPlayBtn",!0),C=v&&p.get("showPrevBtn",!0),A=v&&p.get("showNextBtn",!0),T=0,L=d;S==="left"||S==="bottom"?(x&&(_=[0,0],T+=g),C&&(b=[T,0],T+=g),A&&(h=[L-f,0],L-=g)):(x&&(_=[L-f,0],L-=g),C&&(b=[0,0],T+=g),A&&(h=[L-f,0],L-=g));var I=[T,L];return e.get("inverse")&&I.reverse(),{viewRect:r,mainLength:d,orient:i,rotation:c[i],labelRotation:m,labelPosOpt:s,labelAlign:e.get(["label","align"])||l[i],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[i],playPosition:_,prevBtnPosition:b,nextBtnPosition:h,axisExtent:I,controlSize:f,controlGap:y}},t.prototype._position=function(e,o){var n=this._mainGroup,i=this._labelGroup,r=e.viewRect;if(e.orient==="vertical"){var s=Ai(),l=r.x,u=r.y+r.height;Ba(s,s,[-l,-u]),yi(s,s,-kt/2),Ba(s,s,[l,u]),r=r.clone(),r.applyTransform(s)}var c=_(r),d=_(n.getBoundingRect()),p=_(i.getBoundingRect()),v=[n.x,n.y],f=[i.x,i.y];f[0]=v[0]=c[0][0];var y=e.labelPosOpt;if(y==null||fe(y)){var g=y==="+"?0:1;b(v,d,c,1,g),b(f,p,c,1,1-g)}else{var g=y>=0?0:1;b(v,d,c,1,g),f[1]=v[1]+y}n.setPosition(v),i.setPosition(f),n.rotation=i.rotation=e.rotation,m(n),m(i);function m(h){h.originX=c[0][0]-h.x,h.originY=c[1][0]-h.y}function _(h){return[[h.x,h.x+h.width],[h.y,h.y+h.height]]}function b(h,S,x,C,A){h[C]+=x[C][A]-S[C][A]}},t.prototype._createAxis=function(e,o){var n=o.getData(),i=o.get("axisType"),r=Lu(o,i);r.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");r.setExtent(s[0],s[1]),r.calcNiceTicks();var l=new Du("value",r,e.axisExtent,i);return l.model=o,l},t.prototype._createGroup=function(e){var o=this[e]=new we;return this.group.add(o),o},t.prototype._renderAxisLine=function(e,o,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var s=new Rt({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:ce({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(s);var l=this._progressLine=new Rt({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Ve({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(l)}},t.prototype._renderAxisTick=function(e,o,n,i){var r=this,s=i.getData(),l=n.scale.getTicks();this._tickSymbols=[],P(l,function(u){var c=n.dataToCoord(u.value),d=s.getItemModel(u.value),p=d.getModel("itemStyle"),v=d.getModel(["emphasis","itemStyle"]),f=d.getModel(["progress","itemStyle"]),y={x:c,y:0,onclick:se(r._changeTimeline,r,u.value)},g=yo(d,p,o,y);g.ensureState("emphasis").style=v.getItemStyle(),g.ensureState("progress").style=f.getItemStyle(),_t(g);var m=ot(g);d.get("tooltip")?(m.dataIndex=u.value,m.dataModel=i):m.dataIndex=m.dataModel=null,r._tickSymbols.push(g)})},t.prototype._renderAxisLabel=function(e,o,n,i){var r=this,s=n.getLabelModel();if(s.get("show")){var l=i.getData(),u=n.getViewLabels();this._tickLabels=[],P(u,function(c){var d=c.tickValue,p=l.getItemModel(d),v=p.getModel("label"),f=p.getModel(["emphasis","label"]),y=p.getModel(["progress","label"]),g=n.dataToCoord(c.tickValue),m=new Le({x:g,y:0,rotation:e.labelRotation-e.rotation,onclick:se(r._changeTimeline,r,d),silent:!1,style:Oe(v,{text:c.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});m.ensureState("emphasis").style=Oe(f),m.ensureState("progress").style=Oe(y),o.add(m),_t(m),mo(m).dataIndex=d,r._tickLabels.push(m)})}},t.prototype._renderControl=function(e,o,n,i){var r=e.controlSize,s=e.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);p(e.nextBtnPosition,"next",se(this._changeTimeline,this,d?"-":"+")),p(e.prevBtnPosition,"prev",se(this._changeTimeline,this,d?"+":"-")),p(e.playPosition,c?"stop":"play",se(this._handlePlayClick,this,!c),!0);function p(v,f,y,g){if(v){var m=_i(be(i.get(["controlStyle",f+"BtnSize"]),r),r),_=[0,-m/2,m,m],b=ku(i,f+"Icon",_,{x:v[0],y:v[1],originX:r/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:y});b.ensureState("emphasis").style=u,o.add(b),_t(b)}}},t.prototype._renderCurrentPointer=function(e,o,n,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=se(u._handlePointerDrag,u),d.ondragend=se(u._handlePointerDragend,u),_o(d,u._progressLine,s,n,i,!0)},onUpdate:function(d){_o(d,u._progressLine,s,n,i)}};this._currentPointer=yo(l,l,this._mainGroup,{},this._currentPointer,c)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,o,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,o){var n=this._toAxisCoord(e)[0],i=this._axis,r=bi(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(o||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=e.model;e._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var o=this._mainGroup.getLocalTransform();return Si(e,o,!0)},t.prototype._findNearestTick=function(e){var o=this.model.getData(),n=1/0,i,r=this._axis;return o.each(["value"],function(s,l){var u=r.dataToCoord(s),c=Math.abs(u-e);c<n&&(n=c,i=l)}),i},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var o=this.model.getCurrentIndex();e==="+"?e=o+1:e==="-"&&(e=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),o=this._tickSymbols,n=this._tickLabels;if(o)for(var i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",i<e);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",mo(n[i]).dataIndex<=e)},t.type="timeline.slider",t}(Pu);function Lu(a,t){if(t=t||a.get("type"),t)switch(t){case"category":return new wi({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new Ci({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new xi}}function Ou(a,t){return Go(a.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},a.get("padding"))}function ku(a,t,e,o){var n=o.style,i=Uo(a.get(["controlStyle",t]),o||{},new na(e[0],e[1],e[2],e[3]));return n&&i.setStyle(n),i}function yo(a,t,e,o,n,i){var r=t.get("color");if(n)n.setColor(r),e.add(n),i&&i.onUpdate(n);else{var s=a.get("symbol");n=ia(s,-1,-1,2,2,r),n.setStyle("strokeNoScale",!0),e.add(n),i&&i.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),o=le({rectHover:!0,z2:100},o,!0);var u=sa(a.get("symbolSize"));o.scaleX=u[0]/2,o.scaleY=u[1]/2;var c=la(a.get("symbolOffset"),u);c&&(o.x=(o.x||0)+c[0],o.y=(o.y||0)+c[1]);var d=a.get("symbolRotate");return o.rotation=(d||0)*Math.PI/180||0,n.attr(o),n.updateTransform(),n}function _o(a,t,e,o,n,i){if(!a.dragging){var r=n.getModel("checkpointStyle"),s=o.dataToCoord(n.getData().get("value",e));if(i||!r.get("animation",!0))a.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}const Mu=Iu;function Bu(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,o){var n=e.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ve({currentIndex:n.option.currentIndex},t)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var o=e.getComponent("timeline");o&&t.playState!=null&&o.setPlayState(t.playState)})}function Vu(a){var t=a&&a.timeline;F(t)||(t=t?[t]:[]),P(t,function(e){e&&Nu(e)})}function Nu(a){var t=a.type,e={number:"value",time:"time"};if(e[t]&&(a.axisType=e[t],delete a.type),bo(a),_e(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});_e(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!_e(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}P(a.data||[],function(n){He(n)&&!F(n)&&(!_e(n,"value")&&_e(n,"name")&&(n.value=n.name),bo(n))})}function bo(a){var t=a.itemStyle||(a.itemStyle={}),e=t.emphasis||(t.emphasis={}),o=a.label||a.label||{},n=o.normal||(o.normal={}),i={normal:1,emphasis:1};P(o,function(r,s){!i[s]&&!_e(n,s)&&(n[s]=r)}),e.label&&!_e(o,"emphasis")&&(o.emphasis=e.label,delete e.label)}function _e(a,t){return a.hasOwnProperty(t)}function Eu(a){a.registerComponentModel(wu),a.registerComponentView(Mu),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),Bu(a),a.registerPreprocessor(Vu)}function zu(a,t){if(!a)return!1;for(var e=F(a)?a:[a],o=0;o<e.length;o++)if(e[o]&&e[o][t])return!0;return!1}function Xe(a){Pi(a,"label",["show"])}var Je=Ke(),Cn=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return t.prototype.init=function(e,o,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Zo.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,o){this._mergeOption(e,o,!1,!1)},t.prototype._mergeOption=function(e,o,n,i){var r=this.mainType;n||o.eachSeries(function(s){var l=s.get(this.mainType,!0),u=Je(s)[r];if(!l||!l.data){Je(s)[r]=null;return}u?u._mergeOption(l,o,!0):(i&&Xe(l),P(l.data,function(c){c instanceof Array?(Xe(c[0]),Xe(c[1])):Xe(c)}),u=this.createMarkerModelFromSeries(l,this,o),ce(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),Je(s)[r]=u},this)},t.prototype.formatTooltip=function(e,o,n){var i=this.getData(),r=this.getRawValue(e),s=i.getName(e);return Gt("section",{header:this.name,blocks:[Gt("nameValue",{name:s,value:r,noName:!s,noValue:r==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,o){return Je(e)[o]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ut);ua(Cn,Ko.prototype);const it=Cn;function Ru(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function $u(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Qe(a,t,e,o,n,i){var r=[],s=Ti(t,o),l=s?t.getCalculationInfo("stackResultDimension"):o,u=xa(t,l,a),c=t.indicesOfNearest(l,u)[0];r[n]=t.get(e,c),r[i]=t.get(l,c);var d=t.get(o,c),p=Di(t.get(o,c));return p=Math.min(p,20),p>=0&&(r[i]=+r[i].toFixed(p)),[r,d]}var Mt={min:H(Qe,"min"),max:H(Qe,"max"),average:H(Qe,"average"),median:H(Qe,"median")};function So(a,t){if(t){var e=a.getData(),o=a.coordinateSystem,n=o&&o.dimensions;if(!$u(t)&&!F(t.coord)&&F(n)){var i=wn(t,e,o,a);if(t=ue(t),t.type&&Mt[t.type]&&i.baseAxis&&i.valueAxis){var r=Se(n,i.baseAxis.dim),s=Se(n,i.valueAxis.dim),l=Mt[t.type](e,i.baseDataDim,i.valueDataDim,r,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!F(n))t.coord=[];else for(var u=t.coord,c=0;c<2;c++)Mt[u[c]]&&(u[c]=xa(e,e.mapDimension(n[c]),u[c]));return t}}function wn(a,t,e,o){var n={};return a.valueIndex!=null||a.valueDim!=null?(n.valueDataDim=a.valueIndex!=null?t.getDimension(a.valueIndex):a.valueDim,n.valueAxis=e.getAxis(Fu(o,n.valueDataDim)),n.baseAxis=e.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=o.getBaseAxis(),n.valueAxis=e.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function Fu(a,t){var e=a.getData().getDimensionInfo(t);return e&&e.coordDim}function xo(a,t){return a&&a.containData&&t.coord&&!Ru(t)?a.containData(t.coord):!0}function Wu(a,t){return a?function(e,o,n,i){var r=i<2?e.coord&&e.coord[i]:e.value;return Va(r,t[i])}:function(e,o,n,i){return Va(e.value,t[i])}}function xa(a,t,e){if(e==="average"){var o=0,n=0;return a.each(t,function(i,r){isNaN(i)||(o+=i,n++)}),o/n}else return e==="median"?a.getMedian(t):a.getDataExtent(t)[e==="max"?1:0]}var Bt=Ke(),Gu=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(){this.markerGroupMap=qo()},t.prototype.render=function(e,o,n){var i=this,r=this.markerGroupMap;r.each(function(s){Bt(s).keep=!1}),o.eachSeries(function(s){var l=it.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,o,n)}),r.each(function(s){!Bt(s).keep&&i.group.remove(s.group)})},t.prototype.markKeep=function(e){Bt(e).keep=!0},t.prototype.toggleBlurSeries=function(e,o){var n=this;P(e,function(i){var r=it.getMarkerModelFromSeries(i,n.type);if(r){var s=r.getData();s.eachItemGraphicEl(function(l){l&&(o?Ii(l):Li(l))})}})},t.type="marker",t}(ct);const Uu=Gu;var Zu=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.createMarkerModelFromSeries=function(e,o,n){return new t(e,o,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(it);const Hu=Zu;var et=Ke(),ju=function(a,t,e,o){var n=a.getData(),i;if(F(o))i=o;else{var r=o.type;if(r==="min"||r==="max"||r==="average"||r==="median"||o.xAxis!=null||o.yAxis!=null){var s=void 0,l=void 0;if(o.yAxis!=null||o.xAxis!=null)s=t.getAxis(o.yAxis!=null?"y":"x"),l=ki(o.yAxis,o.xAxis);else{var u=wn(o,n,t,a);s=u.valueAxis;var c=Mi(n,u.valueDataDim);l=xa(n,c,r)}var d=s.dim==="x"?0:1,p=1-d,v=ue(o),f={coord:[]};v.type=null,v.coord=[],v.coord[p]=-1/0,f.coord[p]=1/0;var y=e.get("precision");y>=0&&Bi(l)&&(l=+l.toFixed(Math.min(y,20))),v.coord[d]=f.coord[d]=l,i=[v,f,{type:r,valueIndex:o.valueIndex,value:l}]}else i=[]}var g=[So(a,i[0]),So(a,i[1]),ce({},i[2])];return g[2].type=g[2].type||null,le(g[2],g[0]),le(g[2],g[1]),g};function rt(a){return!isNaN(a)&&!isFinite(a)}function Co(a,t,e,o){var n=1-a,i=o.dimensions[a];return rt(t[n])&&rt(e[n])&&t[a]===e[a]&&o.getAxis(i).containData(t[a])}function qu(a,t){if(a.type==="cartesian2d"){var e=t[0].coord,o=t[1].coord;if(e&&o&&(Co(1,e,o,a)||Co(0,e,o,a)))return!0}return xo(a,t[0])&&xo(a,t[1])}function Vt(a,t,e,o,n){var i=o.coordinateSystem,r=a.getItemModel(t),s,l=Ie(r.get("x"),n.getWidth()),u=Ie(r.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(o.getMarkerPosition)s=o.getMarkerPosition(a.getValues(a.dimensions,t));else{var c=i.dimensions,d=a.get(c[0],t),p=a.get(c[1],t);s=i.dataToPoint([d,p])}if(Qi(i,"cartesian2d")){var v=i.getAxis("x"),f=i.getAxis("y"),c=i.dimensions;rt(a.get(c[0],t))?s[0]=v.toGlobalCoord(v.getExtent()[e?0:1]):rt(a.get(c[1],t))&&(s[1]=f.toGlobalCoord(f.getExtent()[e?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}a.setItemLayout(t,s)}var Ku=function(a){M(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.updateTransform=function(e,o,n){o.eachSeries(function(i){var r=it.getMarkerModelFromSeries(i,"markLine");if(r){var s=r.getData(),l=et(r).from,u=et(r).to;l.each(function(c){Vt(l,c,!0,i,n),Vt(u,c,!1,i,n)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,o,n,i){var r=e.coordinateSystem,s=e.id,l=e.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Rs);this.group.add(c.group);var d=Yu(r,e,o),p=d.from,v=d.to,f=d.line;et(o).from=p,et(o).to=v,o.setData(f);var y=o.get("symbol"),g=o.get("symbolSize"),m=o.get("symbolRotate"),_=o.get("symbolOffset");F(y)||(y=[y,y]),F(g)||(g=[g,g]),F(m)||(m=[m,m]),F(_)||(_=[_,_]),d.from.each(function(h){b(p,h,!0),b(v,h,!1)}),f.each(function(h){var S=f.getItemModel(h).getModel("lineStyle").getLineStyle();f.setItemLayout(h,[p.getItemLayout(h),v.getItemLayout(h)]),S.stroke==null&&(S.stroke=p.getItemVisual(h,"style").fill),f.setItemVisual(h,{fromSymbolKeepAspect:p.getItemVisual(h,"symbolKeepAspect"),fromSymbolOffset:p.getItemVisual(h,"symbolOffset"),fromSymbolRotate:p.getItemVisual(h,"symbolRotate"),fromSymbolSize:p.getItemVisual(h,"symbolSize"),fromSymbol:p.getItemVisual(h,"symbol"),toSymbolKeepAspect:v.getItemVisual(h,"symbolKeepAspect"),toSymbolOffset:v.getItemVisual(h,"symbolOffset"),toSymbolRotate:v.getItemVisual(h,"symbolRotate"),toSymbolSize:v.getItemVisual(h,"symbolSize"),toSymbol:v.getItemVisual(h,"symbol"),style:S})}),c.updateData(f),d.line.eachItemGraphicEl(function(h){ot(h).dataModel=o,h.traverse(function(S){ot(S).dataModel=o})});function b(h,S,x){var C=h.getItemModel(S);Vt(h,S,x,e,i);var A=C.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=Oi(l,"color")),h.setItemVisual(S,{symbolKeepAspect:C.get("symbolKeepAspect"),symbolOffset:be(C.get("symbolOffset",!0),_[x?0:1]),symbolRotate:be(C.get("symbolRotate",!0),m[x?0:1]),symbolSize:be(C.get("symbolSize"),g[x?0:1]),symbol:be(C.get("symbol",!0),y[x?0:1]),style:A})}this.markKeep(c),c.group.silent=o.get("silent")||e.get("silent")},t.type="markLine",t}(Uu);function Yu(a,t,e){var o;a?o=Z(a&&a.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ce(ce({},c),{name:u,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var n=new at(o,e),i=new at(o,e),r=new at([],e),s=Z(e.get("data"),H(ju,t,a,e));a&&(s=Ho(s,H(qu,a)));var l=Wu(!!a,o);return n.initData(Z(s,function(u){return u[0]}),null,l),i.initData(Z(s,function(u){return u[1]}),null,l),r.initData(Z(s,function(u){return u[2]})),r.hasItemOption=!0,{from:n,to:i,line:r}}const Xu=Ku;function Ju(a){a.registerComponentModel(Hu),a.registerComponentView(Xu),a.registerPreprocessor(function(t){zu(t.series,"markLine")&&(t.markLine=t.markLine||{})})}const Qu={class:"d-flex flex-grow-1 chart-wrapper"},Nt="5.5%",Et="1%",wo=55,Ue=8,ec="#00ff26",tc="#00ff26",ac="#faba25",oc="#faba25",nc=Be({__name:"CandleChart",props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}},colorUp:{required:!1,type:String,default:"#12bb7b"},colorDown:{required:!1,type:String,default:"#ef5350"}},setup(a){ra([Vi,Ml,Ni,er,tr,Ei,Eu,zi,xu,Ri,ar,or,Ju,Pl,nr,ir,Is,$i]);const t=a,e=t.colorUp,o=t.colorUp,n=t.colorDown,i=t.colorDown,r=U(),s=U({}),l=G(()=>t.dataset?t.dataset.strategy:""),u=G(()=>t.dataset?t.dataset.pair:""),c=G(()=>t.dataset?t.dataset.timeframe:""),d=G(()=>t.dataset!==null&&typeof t.dataset=="object"),p=G(()=>t.trades.filter(_=>_.pair===u.value)),v=G(()=>`${l.value} - ${u.value} - ${c.value}`),f=G(()=>bs(t.plotConfig));function y(_=!1){var de,V,oe,Q;if(!d.value)return;(de=s.value)!=null&&de.title&&(s.value.title[0].text=v.value);const b=t.dataset.columns.slice(),h=b.findIndex(w=>w==="__date_ts"),S=b.findIndex(w=>w==="open"),x=b.findIndex(w=>w==="high"),C=b.findIndex(w=>w==="low"),A=b.findIndex(w=>w==="close"),T=b.findIndex(w=>w==="volume"),L=b.findIndex(w=>w==="_buy_signal_close"||w==="_enter_long_signal_close"),I=b.findIndex(w=>w==="_sell_signal_close"||w==="_exit_long_signal_close"),D=b.findIndex(w=>w==="_enter_short_signal_close"),R=b.findIndex(w=>w==="_exit_short_signal_close"),q="subplots"in t.plotConfig?Object.keys(t.plotConfig.subplots).length+1:1;if(Array.isArray((V=s.value)==null?void 0:V.dataZoom))if(_){const w=(1-250/t.dataset.length)*100;s.value.dataZoom.forEach((W,Pe)=>{s.value&&s.value.dataZoom&&(s.value.dataZoom[Pe].start=w)})}else s.value.dataZoom.forEach((w,W)=>{s.value&&s.value.dataZoom&&(delete s.value.dataZoom[W].start,delete s.value.dataZoom[W].end)});let K=t.heikinAshi?ps(b,t.dataset.data):t.dataset.data.slice();f.value.forEach(([w,W])=>{K=_s(b,K,w,W)});const Ae=Array(K.length>0?K[K.length-2].length:0);Ae[h]=K[K.length-1][h]+t.dataset.timeframe_ms*3,K.push(Ae);const $={dataset:{source:K},grid:[{left:Nt,right:Et,bottom:`${q*Ue+2}%`},{left:Nt,right:Et,bottom:`${q*Ue}%`,height:`${Ue}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:e,color0:n,borderColor:o,borderColor0:i},encode:{x:h,y:[S,A,C,x]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:h,y:T}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ec},encode:{x:h,y:L}}]};if(I>=0&&Array.isArray($.series)&&$.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ac},encode:{x:h,y:I}}),Array.isArray($.series)&&(D>=0&&$.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:tc},tooltip:{},encode:{x:h,y:D}}),R>=0&&$.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:oc},tooltip:{},encode:{x:h,y:R}})),Object.assign(s.value,$),"main_plot"in t.plotConfig&&Object.entries(t.plotConfig.main_plot).forEach(([w,W])=>{var Ee,Y,ge,ze,Re,$e,Fe;const Pe=b.findIndex(me=>me===w);if(Pe>0){if(!Array.isArray((Ee=s.value)==null?void 0:Ee.legend)&&((ge=(Y=s.value)==null?void 0:Y.legend)!=null&&ge.data)&&s.value.legend.data.push(w),Array.isArray((ze=s.value)==null?void 0:ze.series)){if((Re=s.value)==null||Re.series.push(Ut(h,Pe,w,W)),W.fill_to){const me=`${w}-${W.fill_to}`,ht=b.findIndex(gt=>gt===me),ft={color:W.color,type:he.line},vt=$a(h,ht,w,ft,0);s.value.series[s.value.series.length-1].stack=w,s.value.series.push(vt)}(Fe=s.value)==null||Fe.series.splice((($e=s.value)==null?void 0:$e.series.length)-1,0)}}else console.log(`element ${w} for main plot not found in columns.`)}),"subplots"in t.plotConfig){let w=2;Object.entries(t.plotConfig.subplots).forEach(([W,Pe])=>{const Ee=w;Array.isArray(s.value.yAxis)&&s.value.yAxis.length<=w&&s.value.yAxis.push({scale:!0,gridIndex:Ee,name:W,nameLocation:"middle",nameGap:wo,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(s.value.xAxis)&&s.value.xAxis.length<=w&&s.value.xAxis.push({type:"time",gridIndex:Ee,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(s.value.dataZoom)&&s.value.dataZoom.forEach(Y=>Y.xAxisIndex&&Array.isArray(Y.xAxisIndex)?Y.xAxisIndex.push(w):null),s.value.grid&&Array.isArray(s.value.grid)&&s.value.grid.push({left:Nt,right:Et,bottom:`${(q-w+1)*Ue}%`,height:`${Ue}%`}),Object.entries(Pe).forEach(([Y,ge])=>{var Re,$e,Fe;const ze=b.findIndex(me=>me===Y);if(ze>0){if(!Array.isArray(s.value.legend)&&((Re=s.value.legend)!=null&&Re.data)&&s.value.legend.data.push(Y),s.value.series&&Array.isArray(s.value.series)){if(s.value.series.push(Ut(h,ze,Y,ge,w)),ge.fill_to){const me=`${Y}-${ge.fill_to}`,ht=b.findIndex(gt=>gt===me),ft={color:ge.color,type:he.line},vt=$a(h,ht,Y,ft,w);s.value.series[s.value.series.length-1].stack=Y,s.value.series.push(vt)}(Fe=s.value)==null||Fe.series.splice((($e=s.value)==null?void 0:$e.series.length)-1,0)}}else console.log(`element ${Y} was not found in the columns.`)}),w+=1})}Array.isArray(s.value.grid)&&(s.value.grid[s.value.grid.length-1].bottom="50px",delete s.value.grid[s.value.grid.length-1].top);const ve="Trades";!Array.isArray(s.value.legend)&&((oe=s.value.legend)!=null&&oe.data)&&s.value.legend.data.push(ve);const Ne=ys(ve,t.theme,t.dataset,p.value);Array.isArray(s.value.series)&&s.value.series.push(Ne),(Q=r.value)==null||Q.setOption(s.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!_})}function g(){var _;(_=r.value)==null||_.setOption({},{noMerge:!0}),s.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:t.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(b,h,S,x,C){const A={top:60},T=b[0]<C.viewSize[0]/2;return A[["left","right"][+T]]=T?5:60,A}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:wo,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...rr}]},console.log("Initialized"),y(!0)}function m(){if(!t.sliderPosition)return;const _=Ia(t.sliderPosition.startValue-t.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),b=Ia(t.sliderPosition.endValue?t.sliderPosition.endValue+t.dataset.timeframe_ms*40:t.sliderPosition.startValue+t.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");r.value&&r.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:_,endValue:b})}return ea(()=>{g()}),X(()=>t.useUTC,()=>g()),X(()=>t.dataset,()=>y()),X(()=>t.plotConfig,()=>g()),X(()=>t.heikinAshi,()=>y()),X(()=>t.sliderPosition,()=>m()),(_,b)=>(k(),E("div",Qu,[d.value?(k(),J(z(Fi),{key:0,ref_key:"candleChart",ref:r,theme:a.theme,autoresize:"","manual-update":""},null,8,["theme"])):j("",!0)]))}});const ic=oa(nc,[["__scopeId","data-v-187573fe"]]),rc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},sc=B("path",{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"},null,-1),lc=[sc];function uc(a,t){return k(),E("svg",rc,[...lc])}const cc={name:"mdi-cog",render:uc},dc=a=>(To("data-v-d356497a"),a=a(),Do(),a),pc={class:"d-flex h-100"},hc={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},fc={class:"d-flex me-0"},vc={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},gc={class:"ms-2 text-nowrap"},mc={class:"d-flex flex-column"},yc={class:"d-flex flex-row flex-wrap"},_c={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},bc={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Sc={class:"d-flex flex-row flex-wrap"},xc={key:0,class:"ms-2 text-nowrap"},Cc={key:1,class:"ms-2 text-nowrap"},wc={class:"ms-auto d-flex align-items-center w-auto"},Ac=dc(()=>B("span",{class:"text-nowrap"},"Heikin Ashi",-1)),Pc={class:"ms-2"},Tc={class:"ms-2 me-0 me-md-1"},Dc={class:"me-1 ms-1 h-100"},Ic={key:1,class:"m-auto"},Lc={key:1,style:{"font-size":"1.5rem"}},Oc={key:0,class:"w-25"},kc=Be({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(a){const t=a,e=Vn(),o=Nn(),n=Po(),i=pa(),r=U(""),s=U(),l=G(()=>{var m,_;return t.historicView?(m=n.activeBot.history[`${r.value}__${t.timeframe}`])==null?void 0:m.data:(_=n.activeBot.candleData[`${r.value}__${t.timeframe}`])==null?void 0:_.data}),u=G(()=>{var m;return t.strategy||((m=l.value)==null?void 0:m.strategy)||""}),c=G(()=>l.value?l.value.columns:[]),d=G(()=>l.value&&l.value.data.length>0),p=G(()=>t.historicView?n.activeBot.historyStatus===We.loading:n.activeBot.candleDataStatus===We.loading),v=G(()=>{switch(t.historicView?n.activeBot.historyStatus:n.activeBot.candleDataStatus){case We.loading:return"Loading...";case We.success:return"No data available";case We.error:return"Failed to load data";default:return"Unknown"}}),f=U(!1);function y(){t.plotConfigModal?f.value=!f.value:s.value=!s.value}function g(){console.log("refresh",r.value,t.timeframe),r.value&&t.timeframe&&(t.historicView?n.activeBot.getPairHistory({pair:r.value,timeframe:t.timeframe,timerange:t.timerange,strategy:t.strategy,freqaimodel:t.freqaiModel}):n.activeBot.getPairCandles({pair:r.value,timeframe:t.timeframe}))}return X(()=>t.availablePairs,()=>{t.availablePairs.find(m=>m===r.value)||([r.value]=t.availablePairs,g())}),X(()=>n.activeBot.selectedPair,()=>{r.value=n.activeBot.selectedPair,g()}),ea(()=>{s.value=t.plotConfigModal,n.activeBot.selectedPair?r.value=n.activeBot.selectedPair:t.availablePairs.length>0&&([r.value]=t.availablePairs),i.plotConfigChanged(),d.value||g()}),(m,_)=>{const b=Rn,h=st,S=En,x=en,C=cc,A=ic,T=$n,L=ds,I=zn;return k(),E("div",pc,[B("div",hc,[B("div",fc,[B("div",vc,[B("span",gc,re(u.value)+" | "+re(a.timeframe||""),1),O(z(Xo),{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=D=>r.value=D),class:"ms-2",options:a.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:g},null,8,["modelValue","options"]),O(h,{title:"Refresh chart",class:"ms-2",disabled:!r.value,size:"sm",onClick:g},{default:N(()=>[O(b)]),_:1},8,["disabled"]),B("div",mc,[B("div",yc,[l.value?(k(),E("small",_c,"Long entries: "+re(l.value.enter_long_signals||l.value.buy_signals),1)):j("",!0),l.value?(k(),E("small",bc,"Long exit: "+re(l.value.exit_long_signals||l.value.sell_signals),1)):j("",!0)]),B("div",Sc,[l.value&&l.value.enter_short_signals?(k(),E("small",xc,"Short entries: "+re(l.value.enter_short_signals),1)):j("",!0),l.value&&l.value.exit_short_signals?(k(),E("small",Cc,"Short exits: "+re(l.value.exit_short_signals),1)):j("",!0)])])]),B("div",wc,[O(S,{modelValue:z(e).useHeikinAshiCandles,"onUpdate:modelValue":_[1]||(_[1]=D=>z(e).useHeikinAshiCandles=D)},{default:N(()=>[Ac]),_:1},8,["modelValue"]),B("div",Pc,[O(x)]),B("div",Tc,[O(h,{size:"sm",title:"Plot configurator",onClick:y},{default:N(()=>[O(C,{width:"12",height:"12"})]),_:1})])])]),B("div",Dc,[d.value?(k(),J(A,{key:0,dataset:l.value,trades:a.trades,"plot-config":z(i).plotConfig,"heikin-ashi":z(e).useHeikinAshiCandles,"use-u-t-c":z(e).timezone==="UTC",theme:z(e).chartTheme,"slider-position":a.sliderPosition,"color-up":z(o).colorUp,"color-down":z(o).colorDown},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position","color-up","color-down"])):(k(),E("div",Ic,[p.value?(k(),J(T,{key:0,label:"Spinning"})):(k(),E("div",Lc,re(v.value),1))]))])]),O(Ao,{name:"fade"},{default:N(()=>[a.plotConfigModal?j("",!0):tt((k(),E("div",Oc,[O(L,{columns:c.value,"is-visible":s.value??!1},null,8,["columns","is-visible"])],512)),[[zt,s.value]])]),_:1}),a.plotConfigModal?(k(),J(I,{key:0,id:"plotConfiguratorModal",modelValue:f.value,"onUpdate:modelValue":_[2]||(_[2]=D=>f.value=D),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:N(()=>[O(L,{"is-visible":f.value,columns:c.value},null,8,["is-visible","columns"])]),_:1},8,["modelValue"])):j("",!0)])}}});const zc=oa(kc,[["__scopeId","data-v-d356497a"]]);export{zc as _};
//# sourceMappingURL=CandleChartContainer-2c9299a1.js.map
