import{_ as K,a as W}from"./CumProfitChart-bf907110.js";import{a as J}from"./TradeList-3bbdd605.js";import{b as Q,c as X}from"./InfoBox.vue_vue_type_script_setup_true_lang-8afe27e2.js";import{g as G,u as z,l as _,o as m,x as B,w as o,a as L,h as d,e as D,v as w,y as g,c as I,m as Y,a5 as Z,L as ee,G as te,r as ae,H as x,a_ as S,q as oe,K as P,b as s,M as k}from"./index-20bfe6b3.js";import{_ as se,a as le}from"./TimePeriodChart-a9b60856.js";import"./installCanvasRenderer-3885c599.js";import"./install-e19e7d48.js";const re={class:"d-flex flex-row"},ne={key:2},ie={key:0},de=["title"],ue={class:"text-small"},ce={key:0},_e={class:"text-profit"},pe={class:"text-loss"},fe=G({__name:"BotComparisonList",setup(A){const u=(i,a)=>!i.profitClosed||!a.profitClosed?-1:i.profitClosed-a.profitClosed,t=z(),T=_({get:()=>Object.values(t.botStores).every(i=>i.isSelected),set:i=>{for(const a in t.botStores)t.botStores[a].isSelected=i}}),$=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],O=_(()=>{const i=[],a={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(t.allProfit).forEach(([l,r])=>{var f,h,b,V,v,R,N;const y=t.allOpenTrades[l].reduce((c,n)=>c+n.stake_amount,0),e=t.allOpenTrades[l].reduce((c,n)=>c+(n.total_profit_ratio??n.profit_ratio)*n.stake_amount,0)/y,p=t.allOpenTrades[l].reduce((c,n)=>c+(n.total_profit_abs??n.profit_abs??0),0);i.push({botId:l,botName:t.availableBots[l].botName||t.availableBots[l].botId,trades:`${t.allOpenTradeCount[l]} / ${((f=t.allBotState[l])==null?void 0:f.max_open_trades)||"N/A"}`,profitClosed:r.profit_closed_coin,profitClosedRatio:r.profit_closed_ratio||0,stakeCurrency:((h=t.allBotState[l])==null?void 0:h.stake_currency)||"",profitOpenRatio:e,profitOpen:p,wins:r.winning_trades,losses:r.losing_trades,balance:((b=t.allBalance[l])==null?void 0:b.total_bot)??((V=t.allBalance[l])==null?void 0:V.total),stakeCurrencyDecimals:((v=t.allBotState[l])==null?void 0:v.stake_currency_decimals)||3,isDryRun:(R=t.allBotState[l])==null?void 0:R.dry_run}),r.profit_closed_coin!==void 0&&t.botStores[l].isSelected&&(a.profitClosed+=r.profit_closed_coin,a.profitOpen+=p,a.wins+=r.winning_trades,a.losses+=r.losing_trades,a.stakeCurrency=((N=t.allBotState[l])==null?void 0:N.stake_currency)||a.stakeCurrency)}),i.sort(u),i.push(a),i});return(i,a)=>{const l=Z,r=Q,y=ee;return m(),B(y,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:O.value,fields:$},{"cell(botName)":o(({item:e,value:p})=>[L("div",re,[e.botId&&d(t).botCount>1?(m(),B(l,{key:0,modelValue:d(t).botStores[e.botId??""].isSelected,"onUpdate:modelValue":f=>d(t).botStores[e.botId??""].isSelected=f,title:"Show this bot in Dashboard"},{default:o(()=>[D(w(p),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):g("",!0),!e.botId&&d(t).botCount>1?(m(),B(l,{key:1,modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=f=>T.value=f),title:"Toggle all bots"},{default:o(()=>[D(w(p),1)]),_:2},1032,["modelValue"])):g("",!0),d(t).botCount<=1?(m(),I("span",ne,w(p),1)):g("",!0)])]),"cell(profitOpen)":o(({item:e})=>[e.profitOpen&&e.botId!="Summary"?(m(),B(r,{key:0,"profit-ratio":e.profitOpenRatio,"profit-abs":e.profitOpen,"stake-currency":e.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):g("",!0)]),"cell(profitClosed)":o(({item:e})=>[e.profitClosed&&e.botId!="Summary"?(m(),B(r,{key:0,"profit-ratio":e.profitClosedRatio,"profit-abs":e.profitClosed,"stake-currency":e.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):g("",!0)]),"cell(balance)":o(({item:e})=>[e.balance?(m(),I("div",ie,[L("span",{title:e.stakeCurrency},w(d(Y)(e.balance??0,e.stakeCurrencyDecimals)),9,de),L("span",ue,w(` ${e.stakeCurrency}${e.isDryRun?" (dry)":""}`),1)])):g("",!0)]),"cell(winVsLoss)":o(({item:e})=>[e.losses!==void 0?(m(),I("div",ce,[L("span",_e,w(e.wins),1),D(" / "),L("span",pe,w(e.losses),1)])):g("",!0)]),_:1},8,["items"])}}}),me={class:"d-flex justify-content-center"},ye={class:"d-flex justify-content-center"},Se=G({__name:"DashboardView",setup(A){const u=z(),t=te(),T=ae(""),$=v=>{T.value=v},O=_(()=>["","sm","md","lg","xl"].includes(T.value)),i=_(()=>t.layoutLocked||!O.value),a=_(()=>O.value?t.dashboardLayout:[...t.getDashboardLayoutSm]),l=v=>{O.value&&(console.log("newlayout",v),console.log("saving dashboard"),t.dashboardLayout=v)},r=_(()=>x(a.value,S.dailyChart)),y=_(()=>x(a.value,S.botComparison)),e=_(()=>x(a.value,S.allOpenTrades)),p=_(()=>x(a.value,S.allClosedTrades)),f=_(()=>x(a.value,S.cumChartChart)),h=_(()=>x(a.value,S.profitDistributionChart)),b=_(()=>x(a.value,S.tradesLogChart)),V=_(()=>({sm:t.getDashboardLayoutSm}));return oe(async()=>{u.allGetDaily({timescale:30}),u.activeBot.getOpenTrades(),u.activeBot.getProfit()}),(v,R)=>{const N=se,c=le,n=P("grid-item"),E=fe,U=X,j=J,F=K,M=W,q=P("TradesLogChart"),H=P("grid-layout");return m(),B(H,{class:"h-100 w-100","row-height":50,layout:a.value,"vertical-compact":!1,margin:[5,5],"responsive-layouts":V.value,"is-resizable":!i.value,"is-draggable":!i.value,responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:l,"onUpdate:breakpoint":$},{default:o(({gridItemProps:C})=>[s(n,k(C,{i:r.value.i,x:r.value.x,y:r.value.y,w:r.value.w,h:r.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,{header:`Daily Profit ${d(u).botCount>1?"combined":""}`},{default:o(()=>[d(u).allDailyStatsSelectedBots?(m(),B(N,{key:0,"daily-stats":d(u).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):g("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:y.value.i,x:y.value.x,y:y.value.y,w:y.value.w,h:y.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,{header:"Bot comparison"},{default:o(()=>[s(E)]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:e.value.i,x:e.value.x,y:e.value.y,w:e.value.w,h:e.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,null,{header:o(()=>[L("div",me,[D(" Open Trades "),s(U,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[s(j,{"active-trades":"",trades:d(u).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:f.value.i,x:f.value.x,y:f.value.y,w:f.value.w,h:f.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,{header:"Cumulative Profit"},{default:o(()=>[s(F,{trades:d(u).allTradesSelectedBots,"open-trades":d(u).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:p.value.i,x:p.value.x,y:p.value.y,w:p.value.w,h:p.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,null,{header:o(()=>[L("div",ye,[D(" Closed Trades "),s(U,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[s(j,{"active-trades":!1,"show-filter":"",trades:d(u).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:h.value.i,x:h.value.x,y:h.value.y,w:h.value.w,h:h.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,{header:"Profit Distribution"},{default:o(()=>[s(M,{trades:d(u).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),s(n,k(C,{i:b.value.i,x:b.value.x,y:b.value.y,w:b.value.w,h:b.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[s(c,{header:"Trades Log"},{default:o(()=>[s(q,{trades:d(u).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Se as default};
//# sourceMappingURL=DashboardView-4c875411.js.map
