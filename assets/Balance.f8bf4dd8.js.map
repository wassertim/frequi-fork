{"version":3,"file":"Balance.f8bf4dd8.js","sources":["../../node_modules/vue-material-design-icons/EyeOff.vue","../../node_modules/vue-material-design-icons/Eye.vue","../../node_modules/echarts/lib/label/labelGuideHelper.js","../../node_modules/echarts/lib/label/LabelManager.js","../../node_modules/echarts/lib/label/installLabelLayout.js","../../node_modules/echarts/lib/chart/pie/pieLayout.js","../../node_modules/echarts/lib/processor/dataFilter.js","../../node_modules/echarts/lib/chart/pie/labelLayout.js","../../node_modules/echarts/lib/chart/helper/pieHelper.js","../../node_modules/echarts/lib/chart/pie/PieView.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/chart/pie/PieSeries.js","../../node_modules/echarts/lib/processor/negativeDataFilter.js","../../node_modules/echarts/lib/chart/pie/install.js","../../src/components/charts/BalanceChart.vue","../../src/components/ftbot/Balance.vue"],"sourcesContent":["<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon eye-off-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"EyeOffIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon eye-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"EyeIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { Point, Path, Polyline } from '../util/graphic.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { normalizeRadian } from 'zrender/lib/contain/util.js';\nimport { cubicProjectPoint, quadraticProjectPoint } from 'zrender/lib/core/curve.js';\nimport { defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport { DISPLAY_STATES, SPECIAL_STATES } from '../util/states.js';\nvar PI2 = Math.PI * 2;\nvar CMD = PathProxy.CMD;\nvar DEFAULT_SEARCH_SPACE = ['top', 'right', 'bottom', 'left'];\n\nfunction getCandidateAnchor(pos, distance, rect, outPt, outDir) {\n  var width = rect.width;\n  var height = rect.height;\n\n  switch (pos) {\n    case 'top':\n      outPt.set(rect.x + width / 2, rect.y - distance);\n      outDir.set(0, -1);\n      break;\n\n    case 'bottom':\n      outPt.set(rect.x + width / 2, rect.y + height + distance);\n      outDir.set(0, 1);\n      break;\n\n    case 'left':\n      outPt.set(rect.x - distance, rect.y + height / 2);\n      outDir.set(-1, 0);\n      break;\n\n    case 'right':\n      outPt.set(rect.x + width + distance, rect.y + height / 2);\n      outDir.set(1, 0);\n      break;\n  }\n}\n\nfunction projectPointToArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y, out) {\n  x -= cx;\n  y -= cy;\n  var d = Math.sqrt(x * x + y * y);\n  x /= d;\n  y /= d; // Intersect point.\n\n  var ox = x * r + cx;\n  var oy = y * r + cy;\n\n  if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n    // Is a circle\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n\n  if (anticlockwise) {\n    var tmp = startAngle;\n    startAngle = normalizeRadian(endAngle);\n    endAngle = normalizeRadian(tmp);\n  } else {\n    startAngle = normalizeRadian(startAngle);\n    endAngle = normalizeRadian(endAngle);\n  }\n\n  if (startAngle > endAngle) {\n    endAngle += PI2;\n  }\n\n  var angle = Math.atan2(y, x);\n\n  if (angle < 0) {\n    angle += PI2;\n  }\n\n  if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {\n    // Project point is on the arc.\n    out[0] = ox;\n    out[1] = oy;\n    return d - r;\n  }\n\n  var x1 = r * Math.cos(startAngle) + cx;\n  var y1 = r * Math.sin(startAngle) + cy;\n  var x2 = r * Math.cos(endAngle) + cx;\n  var y2 = r * Math.sin(endAngle) + cy;\n  var d1 = (x1 - x) * (x1 - x) + (y1 - y) * (y1 - y);\n  var d2 = (x2 - x) * (x2 - x) + (y2 - y) * (y2 - y);\n\n  if (d1 < d2) {\n    out[0] = x1;\n    out[1] = y1;\n    return Math.sqrt(d1);\n  } else {\n    out[0] = x2;\n    out[1] = y2;\n    return Math.sqrt(d2);\n  }\n}\n\nfunction projectPointToLine(x1, y1, x2, y2, x, y, out, limitToEnds) {\n  var dx = x - x1;\n  var dy = y - y1;\n  var dx1 = x2 - x1;\n  var dy1 = y2 - y1;\n  var lineLen = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  dx1 /= lineLen;\n  dy1 /= lineLen; // dot product\n\n  var projectedLen = dx * dx1 + dy * dy1;\n  var t = projectedLen / lineLen;\n\n  if (limitToEnds) {\n    t = Math.min(Math.max(t, 0), 1);\n  }\n\n  t *= lineLen;\n  var ox = out[0] = x1 + t * dx1;\n  var oy = out[1] = y1 + t * dy1;\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\n\nfunction projectPointToRect(x1, y1, width, height, x, y, out) {\n  if (width < 0) {\n    x1 = x1 + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y1 = y1 + height;\n    height = -height;\n  }\n\n  var x2 = x1 + width;\n  var y2 = y1 + height;\n  var ox = out[0] = Math.min(Math.max(x, x1), x2);\n  var oy = out[1] = Math.min(Math.max(y, y1), y2);\n  return Math.sqrt((ox - x) * (ox - x) + (oy - y) * (oy - y));\n}\n\nvar tmpPt = [];\n\nfunction nearestPointOnRect(pt, rect, out) {\n  var dist = projectPointToRect(rect.x, rect.y, rect.width, rect.height, pt.x, pt.y, tmpPt);\n  out.set(tmpPt[0], tmpPt[1]);\n  return dist;\n}\n/**\n * Calculate min distance corresponding point.\n * This method won't evaluate if point is in the path.\n */\n\n\nfunction nearestPointOnPath(pt, path, out) {\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n  var x1;\n  var y1;\n  var minDist = Infinity;\n  var data = path.data;\n  var x = pt.x;\n  var y = pt.y;\n\n  for (var i = 0; i < data.length;) {\n    var cmd = data[i++];\n\n    if (i === 1) {\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n    }\n\n    var d = minDist;\n\n    switch (cmd) {\n      case CMD.M:\n        // moveTo 命令重新创建一个新的 subpath, 并且更新新的起点\n        // 在 closePath 的时候使用\n        x0 = data[i++];\n        y0 = data[i++];\n        xi = x0;\n        yi = y0;\n        break;\n\n      case CMD.L:\n        d = projectPointToLine(xi, yi, data[i], data[i + 1], x, y, tmpPt, true);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.C:\n        d = cubicProjectPoint(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.Q:\n        d = quadraticProjectPoint(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y, tmpPt);\n        xi = data[i++];\n        yi = data[i++];\n        break;\n\n      case CMD.A:\n        // TODO Arc 判断的开销比较大\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++]; // TODO Arc 旋转\n\n        i += 1;\n        var anticlockwise = !!(1 - data[i++]);\n        x1 = Math.cos(theta) * rx + cx;\n        y1 = Math.sin(theta) * ry + cy; // 不是直接使用 arc 命令\n\n        if (i <= 1) {\n          // 第一个命令起点还未定义\n          x0 = x1;\n          y0 = y1;\n        } // zr 使用scale来模拟椭圆, 这里也对x做一定的缩放\n\n\n        var _x = (x - cx) * ry / rx + cx;\n\n        d = projectPointToArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y, tmpPt);\n        xi = Math.cos(theta + dTheta) * rx + cx;\n        yi = Math.sin(theta + dTheta) * ry + cy;\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        var width = data[i++];\n        var height = data[i++];\n        d = projectPointToRect(x0, y0, width, height, x, y, tmpPt);\n        break;\n\n      case CMD.Z:\n        d = projectPointToLine(xi, yi, x0, y0, x, y, tmpPt, true);\n        xi = x0;\n        yi = y0;\n        break;\n    }\n\n    if (d < minDist) {\n      minDist = d;\n      out.set(tmpPt[0], tmpPt[1]);\n    }\n  }\n\n  return minDist;\n} // Temporal varible for intermediate usage.\n\n\nvar pt0 = new Point();\nvar pt1 = new Point();\nvar pt2 = new Point();\nvar dir = new Point();\nvar dir2 = new Point();\n/**\n * Calculate a proper guide line based on the label position and graphic element definition\n * @param label\n * @param labelRect\n * @param target\n * @param targetRect\n */\n\nexport function updateLabelLinePoints(target, labelLineModel) {\n  if (!target) {\n    return;\n  }\n\n  var labelLine = target.getTextGuideLine();\n  var label = target.getTextContent(); // Needs to create text guide in each charts.\n\n  if (!(label && labelLine)) {\n    return;\n  }\n\n  var labelGuideConfig = target.textGuideLineConfig || {};\n  var points = [[0, 0], [0, 0], [0, 0]];\n  var searchSpace = labelGuideConfig.candidates || DEFAULT_SEARCH_SPACE;\n  var labelRect = label.getBoundingRect().clone();\n  labelRect.applyTransform(label.getComputedTransform());\n  var minDist = Infinity;\n  var anchorPoint = labelGuideConfig.anchor;\n  var targetTransform = target.getComputedTransform();\n  var targetInversedTransform = targetTransform && invert([], targetTransform);\n  var len = labelLineModel.get('length2') || 0;\n\n  if (anchorPoint) {\n    pt2.copy(anchorPoint);\n  }\n\n  for (var i = 0; i < searchSpace.length; i++) {\n    var candidate = searchSpace[i];\n    getCandidateAnchor(candidate, 0, labelRect, pt0, dir);\n    Point.scaleAndAdd(pt1, pt0, dir, len); // Transform to target coord space.\n\n    pt1.transform(targetInversedTransform); // Note: getBoundingRect will ensure the `path` being created.\n\n    var boundingRect = target.getBoundingRect();\n    var dist = anchorPoint ? anchorPoint.distance(pt1) : target instanceof Path ? nearestPointOnPath(pt1, target.path, pt2) : nearestPointOnRect(pt1, boundingRect, pt2); // TODO pt2 is in the path\n\n    if (dist < minDist) {\n      minDist = dist; // Transform back to global space.\n\n      pt1.transform(targetTransform);\n      pt2.transform(targetTransform);\n      pt2.toArray(points[0]);\n      pt1.toArray(points[1]);\n      pt0.toArray(points[2]);\n    }\n  }\n\n  limitTurnAngle(points, labelLineModel.get('minTurnAngle'));\n  labelLine.setShape({\n    points: points\n  });\n} // Temporal variable for the limitTurnAngle function\n\nvar tmpArr = [];\nvar tmpProjPoint = new Point();\n/**\n * Reduce the line segment attached to the label to limit the turn angle between two segments.\n * @param linePoints\n * @param minTurnAngle Radian of minimum turn angle. 0 - 180\n */\n\nexport function limitTurnAngle(linePoints, minTurnAngle) {\n  if (!(minTurnAngle <= 180 && minTurnAngle > 0)) {\n    return;\n  }\n\n  minTurnAngle = minTurnAngle / 180 * Math.PI; // The line points can be\n  //      /pt1----pt2 (label)\n  //     /\n  // pt0/\n\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt0, pt1);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(dir2);\n  var minTurnAngleCos = Math.cos(minTurnAngle);\n\n  if (minTurnAngleCos < angleCos) {\n    // Smaller than minTurnAngle\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr); // Calculate new projected length with limited minTurnAngle and get the new connect point\n\n    tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI - minTurnAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n    var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n    if (isNaN(t)) {\n      return;\n    }\n\n    if (t < 0) {\n      Point.copy(tmpProjPoint, pt1);\n    } else if (t > 1) {\n      Point.copy(tmpProjPoint, pt2);\n    }\n\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n/**\n * Limit the angle of line and the surface\n * @param maxSurfaceAngle Radian of minimum turn angle. 0 - 180. 0 is same direction to normal. 180 is opposite\n */\n\nexport function limitSurfaceAngle(linePoints, surfaceNormal, maxSurfaceAngle) {\n  if (!(maxSurfaceAngle <= 180 && maxSurfaceAngle > 0)) {\n    return;\n  }\n\n  maxSurfaceAngle = maxSurfaceAngle / 180 * Math.PI;\n  pt0.fromArray(linePoints[0]);\n  pt1.fromArray(linePoints[1]);\n  pt2.fromArray(linePoints[2]);\n  Point.sub(dir, pt1, pt0);\n  Point.sub(dir2, pt2, pt1);\n  var len1 = dir.len();\n  var len2 = dir2.len();\n\n  if (len1 < 1e-3 || len2 < 1e-3) {\n    return;\n  }\n\n  dir.scale(1 / len1);\n  dir2.scale(1 / len2);\n  var angleCos = dir.dot(surfaceNormal);\n  var maxSurfaceAngleCos = Math.cos(maxSurfaceAngle);\n\n  if (angleCos < maxSurfaceAngleCos) {\n    // Calculate project point of pt0 on pt1-pt2\n    var d = projectPointToLine(pt1.x, pt1.y, pt2.x, pt2.y, pt0.x, pt0.y, tmpArr, false);\n    tmpProjPoint.fromArray(tmpArr);\n    var HALF_PI = Math.PI / 2;\n    var angle2 = Math.acos(dir2.dot(surfaceNormal));\n    var newAngle = HALF_PI + angle2 - maxSurfaceAngle;\n\n    if (newAngle >= HALF_PI) {\n      // parallel\n      Point.copy(tmpProjPoint, pt2);\n    } else {\n      // Calculate new projected length with limited minTurnAngle and get the new connect point\n      tmpProjPoint.scaleAndAdd(dir2, d / Math.tan(Math.PI / 2 - newAngle)); // Limit the new calculated connect point between pt1 and pt2.\n\n      var t = pt2.x !== pt1.x ? (tmpProjPoint.x - pt1.x) / (pt2.x - pt1.x) : (tmpProjPoint.y - pt1.y) / (pt2.y - pt1.y);\n\n      if (isNaN(t)) {\n        return;\n      }\n\n      if (t < 0) {\n        Point.copy(tmpProjPoint, pt1);\n      } else if (t > 1) {\n        Point.copy(tmpProjPoint, pt2);\n      }\n    }\n\n    tmpProjPoint.toArray(linePoints[1]);\n  }\n}\n\nfunction setLabelLineState(labelLine, ignore, stateName, stateModel) {\n  var isNormal = stateName === 'normal';\n  var stateObj = isNormal ? labelLine : labelLine.ensureState(stateName); // Make sure display.\n\n  stateObj.ignore = ignore; // Set smooth\n\n  var smooth = stateModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.3;\n  }\n\n  stateObj.shape = stateObj.shape || {};\n\n  if (smooth > 0) {\n    stateObj.shape.smooth = smooth;\n  }\n\n  var styleObj = stateModel.getModel('lineStyle').getLineStyle();\n  isNormal ? labelLine.useStyle(styleObj) : stateObj.style = styleObj;\n}\n\nfunction buildLabelLinePath(path, shape) {\n  var smooth = shape.smooth;\n  var points = shape.points;\n\n  if (!points) {\n    return;\n  }\n\n  path.moveTo(points[0][0], points[0][1]);\n\n  if (smooth > 0 && points.length >= 3) {\n    var len1 = vector.dist(points[0], points[1]);\n    var len2 = vector.dist(points[1], points[2]);\n\n    if (!len1 || !len2) {\n      path.lineTo(points[1][0], points[1][1]);\n      path.lineTo(points[2][0], points[2][1]);\n      return;\n    }\n\n    var moveLen = Math.min(len1, len2) * smooth;\n    var midPoint0 = vector.lerp([], points[1], points[0], moveLen / len1);\n    var midPoint2 = vector.lerp([], points[1], points[2], moveLen / len2);\n    var midPoint1 = vector.lerp([], midPoint0, midPoint2, 0.5);\n    path.bezierCurveTo(midPoint0[0], midPoint0[1], midPoint0[0], midPoint0[1], midPoint1[0], midPoint1[1]);\n    path.bezierCurveTo(midPoint2[0], midPoint2[1], midPoint2[0], midPoint2[1], points[2][0], points[2][1]);\n  } else {\n    for (var i = 1; i < points.length; i++) {\n      path.lineTo(points[i][0], points[i][1]);\n    }\n  }\n}\n/**\n * Create a label line if necessary and set it's style.\n */\n\n\nexport function setLabelLineStyle(targetEl, statesModels, defaultStyle) {\n  var labelLine = targetEl.getTextGuideLine();\n  var label = targetEl.getTextContent();\n\n  if (!label) {\n    // Not show label line if there is no label.\n    if (labelLine) {\n      targetEl.removeTextGuideLine();\n    }\n\n    return;\n  }\n\n  var normalModel = statesModels.normal;\n  var showNormal = normalModel.get('show');\n  var labelIgnoreNormal = label.ignore;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateName = DISPLAY_STATES[i];\n    var stateModel = statesModels[stateName];\n    var isNormal = stateName === 'normal';\n\n    if (stateModel) {\n      var stateShow = stateModel.get('show');\n      var isLabelIgnored = isNormal ? labelIgnoreNormal : retrieve2(label.states[stateName] && label.states[stateName].ignore, labelIgnoreNormal);\n\n      if (isLabelIgnored // Not show when label is not shown in this state.\n      || !retrieve2(stateShow, showNormal) // Use normal state by default if not set.\n      ) {\n          var stateObj = isNormal ? labelLine : labelLine && labelLine.states[stateName];\n\n          if (stateObj) {\n            stateObj.ignore = true;\n          }\n\n          continue;\n        } // Create labelLine if not exists\n\n\n      if (!labelLine) {\n        labelLine = new Polyline();\n        targetEl.setTextGuideLine(labelLine); // Reset state of normal because it's new created.\n        // NOTE: NORMAL should always been the first!\n\n        if (!isNormal && (labelIgnoreNormal || !showNormal)) {\n          setLabelLineState(labelLine, true, 'normal', statesModels.normal);\n        } // Use same state proxy.\n\n\n        if (targetEl.stateProxy) {\n          labelLine.stateProxy = targetEl.stateProxy;\n        }\n      }\n\n      setLabelLineState(labelLine, false, stateName, stateModel);\n    }\n  }\n\n  if (labelLine) {\n    defaults(labelLine.style, defaultStyle); // Not fill.\n\n    labelLine.style.fill = null;\n    var showAbove = normalModel.get('showAbove');\n    var labelLineConfig = targetEl.textGuideLineConfig = targetEl.textGuideLineConfig || {};\n    labelLineConfig.showAbove = showAbove || false; // Custom the buildPath.\n\n    labelLine.buildPath = buildLabelLinePath;\n  }\n}\nexport function getLabelLineStatesModels(itemModel, labelLineName) {\n  labelLineName = labelLineName || 'labelLine';\n  var statesModels = {\n    normal: itemModel.getModel(labelLineName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelLineName]);\n  }\n\n  return statesModels;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO: move labels out of viewport.\nimport { BoundingRect, updateProps, initProps, isElementRemoved } from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { parsePercent } from '../util/number.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { updateLabelLinePoints, setLabelLineStyle, getLabelLineStatesModels } from './labelGuideHelper.js';\nimport { makeInner } from '../util/model.js';\nimport { retrieve2, each, keys, isFunction, filter, indexOf } from 'zrender/lib/core/util.js';\nimport { prepareLayoutList, hideOverlap, shiftLayoutOnX, shiftLayoutOnY } from './labelLayoutHelper.js';\nimport { labelInner, animateLabelValue } from './labelStyle.js';\n\nfunction cloneArr(points) {\n  if (points) {\n    var newPoints = [];\n\n    for (var i = 0; i < points.length; i++) {\n      newPoints.push(points[i].slice());\n    }\n\n    return newPoints;\n  }\n}\n\nfunction prepareLayoutCallbackParams(labelItem, hostEl) {\n  var label = labelItem.label;\n  var labelLine = hostEl && hostEl.getTextGuideLine();\n  return {\n    dataIndex: labelItem.dataIndex,\n    dataType: labelItem.dataType,\n    seriesIndex: labelItem.seriesModel.seriesIndex,\n    text: labelItem.label.style.text,\n    rect: labelItem.hostRect,\n    labelRect: labelItem.rect,\n    // x: labelAttr.x,\n    // y: labelAttr.y,\n    align: label.style.align,\n    verticalAlign: label.style.verticalAlign,\n    labelLinePoints: cloneArr(labelLine && labelLine.shape.points)\n  };\n}\n\nvar LABEL_OPTION_TO_STYLE_KEYS = ['align', 'verticalAlign', 'width', 'height', 'fontSize'];\nvar dummyTransformable = new Transformable();\nvar labelLayoutInnerStore = makeInner();\nvar labelLineAnimationStore = makeInner();\n\nfunction extendWithKeys(target, source, keys) {\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n\n    if (source[key] != null) {\n      target[key] = source[key];\n    }\n  }\n}\n\nvar LABEL_LAYOUT_PROPS = ['x', 'y', 'rotation'];\n\nvar LabelManager =\n/** @class */\nfunction () {\n  function LabelManager() {\n    this._labelList = [];\n    this._chartViewList = [];\n  }\n\n  LabelManager.prototype.clearLabels = function () {\n    this._labelList = [];\n    this._chartViewList = [];\n  };\n  /**\n   * Add label to manager\n   */\n\n\n  LabelManager.prototype._addLabel = function (dataIndex, dataType, seriesModel, label, layoutOption) {\n    var labelStyle = label.style;\n    var hostEl = label.__hostTarget;\n    var textConfig = hostEl.textConfig || {}; // TODO: If label is in other state.\n\n    var labelTransform = label.getComputedTransform();\n    var labelRect = label.getBoundingRect().plain();\n    BoundingRect.applyTransform(labelRect, labelRect, labelTransform);\n\n    if (labelTransform) {\n      dummyTransformable.setLocalTransform(labelTransform);\n    } else {\n      // Identity transform.\n      dummyTransformable.x = dummyTransformable.y = dummyTransformable.rotation = dummyTransformable.originX = dummyTransformable.originY = 0;\n      dummyTransformable.scaleX = dummyTransformable.scaleY = 1;\n    }\n\n    var host = label.__hostTarget;\n    var hostRect;\n\n    if (host) {\n      hostRect = host.getBoundingRect().plain();\n      var transform = host.getComputedTransform();\n      BoundingRect.applyTransform(hostRect, hostRect, transform);\n    }\n\n    var labelGuide = hostRect && host.getTextGuideLine();\n\n    this._labelList.push({\n      label: label,\n      labelLine: labelGuide,\n      seriesModel: seriesModel,\n      dataIndex: dataIndex,\n      dataType: dataType,\n      layoutOption: layoutOption,\n      computedLayoutOption: null,\n      rect: labelRect,\n      hostRect: hostRect,\n      // Label with lower priority will be hidden when overlapped\n      // Use rect size as default priority\n      priority: hostRect ? hostRect.width * hostRect.height : 0,\n      // Save default label attributes.\n      // For restore if developers want get back to default value in callback.\n      defaultAttr: {\n        ignore: label.ignore,\n        labelGuideIgnore: labelGuide && labelGuide.ignore,\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY,\n        rotation: dummyTransformable.rotation,\n        style: {\n          x: labelStyle.x,\n          y: labelStyle.y,\n          align: labelStyle.align,\n          verticalAlign: labelStyle.verticalAlign,\n          width: labelStyle.width,\n          height: labelStyle.height,\n          fontSize: labelStyle.fontSize\n        },\n        cursor: label.cursor,\n        attachedPos: textConfig.position,\n        attachedRot: textConfig.rotation\n      }\n    });\n  };\n\n  LabelManager.prototype.addLabelsOfSeries = function (chartView) {\n    var _this = this;\n\n    this._chartViewList.push(chartView);\n\n    var seriesModel = chartView.__model;\n    var layoutOption = seriesModel.get('labelLayout');\n    /**\n     * Ignore layouting if it's not specified anything.\n     */\n\n    if (!(isFunction(layoutOption) || keys(layoutOption).length)) {\n      return;\n    }\n\n    chartView.group.traverse(function (child) {\n      if (child.ignore) {\n        return true; // Stop traverse descendants.\n      } // Only support label being hosted on graphic elements.\n\n\n      var textEl = child.getTextContent();\n      var ecData = getECData(child); // Can only attach the text on the element with dataIndex\n\n      if (textEl && !textEl.disableLabelLayout) {\n        _this._addLabel(ecData.dataIndex, ecData.dataType, seriesModel, textEl, layoutOption);\n      }\n    });\n  };\n\n  LabelManager.prototype.updateLayoutConfig = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n\n    function createDragHandler(el, labelLineModel) {\n      return function () {\n        updateLabelLinePoints(el, labelLineModel);\n      };\n    }\n\n    for (var i = 0; i < this._labelList.length; i++) {\n      var labelItem = this._labelList[i];\n      var label = labelItem.label;\n      var hostEl = label.__hostTarget;\n      var defaultLabelAttr = labelItem.defaultAttr;\n      var layoutOption = void 0; // TODO A global layout option?\n\n      if (isFunction(labelItem.layoutOption)) {\n        layoutOption = labelItem.layoutOption(prepareLayoutCallbackParams(labelItem, hostEl));\n      } else {\n        layoutOption = labelItem.layoutOption;\n      }\n\n      layoutOption = layoutOption || {};\n      labelItem.computedLayoutOption = layoutOption;\n      var degreeToRadian = Math.PI / 180; // TODO hostEl should always exists.\n      // Or label should not have parent because the x, y is all in global space.\n\n      if (hostEl) {\n        hostEl.setTextConfig({\n          // Force to set local false.\n          local: false,\n          // Ignore position and rotation config on the host el if x or y is changed.\n          position: layoutOption.x != null || layoutOption.y != null ? null : defaultLabelAttr.attachedPos,\n          // Ignore rotation config on the host el if rotation is changed.\n          rotation: layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.attachedRot,\n          offset: [layoutOption.dx || 0, layoutOption.dy || 0]\n        });\n      }\n\n      var needsUpdateLabelLine = false;\n\n      if (layoutOption.x != null) {\n        // TODO width of chart view.\n        label.x = parsePercent(layoutOption.x, width);\n        label.setStyle('x', 0); // Ignore movement in style. TODO: origin.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.x = defaultLabelAttr.x;\n        label.setStyle('x', defaultLabelAttr.style.x);\n      }\n\n      if (layoutOption.y != null) {\n        // TODO height of chart view.\n        label.y = parsePercent(layoutOption.y, height);\n        label.setStyle('y', 0); // Ignore movement in style.\n\n        needsUpdateLabelLine = true;\n      } else {\n        label.y = defaultLabelAttr.y;\n        label.setStyle('y', defaultLabelAttr.style.y);\n      }\n\n      if (layoutOption.labelLinePoints) {\n        var guideLine = hostEl.getTextGuideLine();\n\n        if (guideLine) {\n          guideLine.setShape({\n            points: layoutOption.labelLinePoints\n          }); // Not update\n\n          needsUpdateLabelLine = false;\n        }\n      }\n\n      var labelLayoutStore = labelLayoutInnerStore(label);\n      labelLayoutStore.needsUpdateLabelLine = needsUpdateLabelLine;\n      label.rotation = layoutOption.rotate != null ? layoutOption.rotate * degreeToRadian : defaultLabelAttr.rotation;\n      label.scaleX = defaultLabelAttr.scaleX;\n      label.scaleY = defaultLabelAttr.scaleY;\n\n      for (var k = 0; k < LABEL_OPTION_TO_STYLE_KEYS.length; k++) {\n        var key = LABEL_OPTION_TO_STYLE_KEYS[k];\n        label.setStyle(key, layoutOption[key] != null ? layoutOption[key] : defaultLabelAttr.style[key]);\n      }\n\n      if (layoutOption.draggable) {\n        label.draggable = true;\n        label.cursor = 'move';\n\n        if (hostEl) {\n          var hostModel = labelItem.seriesModel;\n\n          if (labelItem.dataIndex != null) {\n            var data = labelItem.seriesModel.getData(labelItem.dataType);\n            hostModel = data.getItemModel(labelItem.dataIndex);\n          }\n\n          label.on('drag', createDragHandler(hostEl, hostModel.getModel('labelLine')));\n        }\n      } else {\n        // TODO Other drag functions?\n        label.off('drag');\n        label.cursor = defaultLabelAttr.cursor;\n      }\n    }\n  };\n\n  LabelManager.prototype.layout = function (api) {\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var labelList = prepareLayoutList(this._labelList);\n    var labelsNeedsAdjustOnX = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftX';\n    });\n    var labelsNeedsAdjustOnY = filter(labelList, function (item) {\n      return item.layoutOption.moveOverlap === 'shiftY';\n    });\n    shiftLayoutOnX(labelsNeedsAdjustOnX, 0, width);\n    shiftLayoutOnY(labelsNeedsAdjustOnY, 0, height);\n    var labelsNeedsHideOverlap = filter(labelList, function (item) {\n      return item.layoutOption.hideOverlap;\n    });\n    hideOverlap(labelsNeedsHideOverlap);\n  };\n  /**\n   * Process all labels. Not only labels with layoutOption.\n   */\n\n\n  LabelManager.prototype.processLabelsOverall = function () {\n    var _this = this;\n\n    each(this._chartViewList, function (chartView) {\n      var seriesModel = chartView.__model;\n      var ignoreLabelLineUpdate = chartView.ignoreLabelLineUpdate;\n      var animationEnabled = seriesModel.isAnimationEnabled();\n      chartView.group.traverse(function (child) {\n        if (child.ignore && !child.forceLabelAnimation) {\n          return true; // Stop traverse descendants.\n        }\n\n        var needsUpdateLabelLine = !ignoreLabelLineUpdate;\n        var label = child.getTextContent();\n\n        if (!needsUpdateLabelLine && label) {\n          needsUpdateLabelLine = labelLayoutInnerStore(label).needsUpdateLabelLine;\n        }\n\n        if (needsUpdateLabelLine) {\n          _this._updateLabelLine(child, seriesModel);\n        }\n\n        if (animationEnabled) {\n          _this._animateLabels(child, seriesModel);\n        }\n      });\n    });\n  };\n\n  LabelManager.prototype._updateLabelLine = function (el, seriesModel) {\n    // Only support label being hosted on graphic elements.\n    var textEl = el.getTextContent(); // Update label line style.\n\n    var ecData = getECData(el);\n    var dataIndex = ecData.dataIndex; // Only support labelLine on the labels represent data.\n\n    if (textEl && dataIndex != null) {\n      var data = seriesModel.getData(ecData.dataType);\n      var itemModel = data.getItemModel(dataIndex);\n      var defaultStyle = {};\n      var visualStyle = data.getItemVisual(dataIndex, 'style');\n      var visualType = data.getVisual('drawType'); // Default to be same with main color\n\n      defaultStyle.stroke = visualStyle[visualType];\n      var labelLineModel = itemModel.getModel('labelLine');\n      setLabelLineStyle(el, getLabelLineStatesModels(itemModel), defaultStyle);\n      updateLabelLinePoints(el, labelLineModel);\n    }\n  };\n\n  LabelManager.prototype._animateLabels = function (el, seriesModel) {\n    var textEl = el.getTextContent();\n    var guideLine = el.getTextGuideLine(); // Animate\n\n    if (textEl // `forceLabelAnimation` has the highest priority\n    && (el.forceLabelAnimation || !textEl.ignore && !textEl.invisible && !el.disableLabelAnimation && !isElementRemoved(el))) {\n      var layoutStore = labelLayoutInnerStore(textEl);\n      var oldLayout = layoutStore.oldLayout;\n      var ecData = getECData(el);\n      var dataIndex = ecData.dataIndex;\n      var newProps = {\n        x: textEl.x,\n        y: textEl.y,\n        rotation: textEl.rotation\n      };\n      var data = seriesModel.getData(ecData.dataType);\n\n      if (!oldLayout) {\n        textEl.attr(newProps); // Disable fade in animation if value animation is enabled.\n\n        if (!labelInner(textEl).valueAnimation) {\n          var oldOpacity = retrieve2(textEl.style.opacity, 1); // Fade in animation\n\n          textEl.style.opacity = 0;\n          initProps(textEl, {\n            style: {\n              opacity: oldOpacity\n            }\n          }, seriesModel, dataIndex);\n        }\n      } else {\n        textEl.attr(oldLayout); // Make sure the animation from is in the right status.\n\n        var prevStates = el.prevStates;\n\n        if (prevStates) {\n          if (indexOf(prevStates, 'select') >= 0) {\n            textEl.attr(layoutStore.oldLayoutSelect);\n          }\n\n          if (indexOf(prevStates, 'emphasis') >= 0) {\n            textEl.attr(layoutStore.oldLayoutEmphasis);\n          }\n        }\n\n        updateProps(textEl, newProps, seriesModel, dataIndex);\n      }\n\n      layoutStore.oldLayout = newProps;\n\n      if (textEl.states.select) {\n        var layoutSelect = layoutStore.oldLayoutSelect = {};\n        extendWithKeys(layoutSelect, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutSelect, textEl.states.select, LABEL_LAYOUT_PROPS);\n      }\n\n      if (textEl.states.emphasis) {\n        var layoutEmphasis = layoutStore.oldLayoutEmphasis = {};\n        extendWithKeys(layoutEmphasis, newProps, LABEL_LAYOUT_PROPS);\n        extendWithKeys(layoutEmphasis, textEl.states.emphasis, LABEL_LAYOUT_PROPS);\n      }\n\n      animateLabelValue(textEl, dataIndex, data, seriesModel, seriesModel);\n    }\n\n    if (guideLine && !guideLine.ignore && !guideLine.invisible) {\n      var layoutStore = labelLineAnimationStore(guideLine);\n      var oldLayout = layoutStore.oldLayout;\n      var newLayout = {\n        points: guideLine.shape.points\n      };\n\n      if (!oldLayout) {\n        guideLine.setShape(newLayout);\n        guideLine.style.strokePercent = 0;\n        initProps(guideLine, {\n          style: {\n            strokePercent: 1\n          }\n        }, seriesModel);\n      } else {\n        guideLine.attr({\n          shape: oldLayout\n        });\n        updateProps(guideLine, {\n          shape: newLayout\n        }, seriesModel);\n      }\n\n      layoutStore.oldLayout = newLayout;\n    }\n  };\n\n  return LabelManager;\n}();\n\nexport default LabelManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../util/model.js';\nimport LabelManager from './LabelManager.js';\nvar getLabelManager = makeInner();\nexport function installLabelLayout(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var labelManager = getLabelManager(api).labelManager;\n\n    if (!labelManager) {\n      labelManager = getLabelManager(api).labelManager = new LabelManager();\n    }\n\n    labelManager.clearLabels();\n  });\n  registers.registerUpdateLifecycle('series:layoutlabels', function (ecModel, api, params) {\n    var labelManager = getLabelManager(api).labelManager;\n    params.updatedSeries.forEach(function (series) {\n      labelManager.addLabelsOfSeries(api.getViewOfSeriesModel(series));\n    });\n    labelManager.updateLayoutConfig(api);\n    labelManager.layout(api);\n    labelManager.processLabelsOverall();\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api);\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n\n  if (!zrUtil.isArray(center)) {\n    center = [center, center];\n  }\n\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  var cx;\n  var cy;\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys) {\n    // percentage is not allowed when coordinate system is specified\n    var point = coordSys.dataToPoint(center);\n    cx = point[0] || 0;\n    cy = point[1] || 0;\n  } else {\n    cx = parsePercent(center[0], width) + viewRect.x;\n    cy = parsePercent(center[1], height) + viewRect.y;\n  }\n\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n\n    var _a = getBasicPieLayout(seriesModel, api),\n        cx = _a.cx,\n        cy = _a.cy,\n        r = _a.r,\n        r0 = _a.r0;\n\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number.js';\nimport { Point } from '../../util/graphic.js';\nimport { each, isNumber } from 'zrender/lib/core/util.js';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      var newX = cx + (dx + item.len2) * dir;\n      var deltaX = newX - item.label.x;\n      var newTargetWidth = item.targetTextWidth - deltaX * dir; // text x is changed, so need to recalculate width.\n\n      constrainTextWidth(item, newTargetWidth, true);\n      item.label.x = newX;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy >= semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      if (layout.labelStyleWidth != null) {\n        continue;\n      }\n\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var targetTextWidth = void 0;\n\n      if (layout.labelAlignTo === 'edge') {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else if (layout.labelAlignTo === 'labelLine') {\n        if (label.x < cx) {\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      layout.targetTextWidth = targetTextWidth;\n      constrainTextWidth(layout, targetTextWidth);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var padding = label.style.padding;\n      var paddingH = padding ? padding[1] + padding[3] : 0; // textRect.width already contains paddingH if bgColor is set\n\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n      var realTextWidth = layout.rect.width + extraPaddingH;\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n/**\n * Set max width of each label, and then wrap each label to the max width.\n *\n * @param layout label layout\n * @param availableWidth max width for the label to display\n * @param forceRecalculate recaculate the text layout even if the current width\n * is smaller than `availableWidth`. This is useful when the text was previously\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\n * which case, previous wrapping should be redo.\n */\n\n\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\n  if (forceRecalculate === void 0) {\n    forceRecalculate = false;\n  }\n\n  if (layout.labelStyleWidth != null) {\n    // User-defined style.width has the highest priority.\n    return;\n  }\n\n  var label = layout.label;\n  var style = label.style;\n  var textRect = layout.rect;\n  var bgColor = style.backgroundColor;\n  var padding = style.padding;\n  var paddingH = padding ? padding[1] + padding[3] : 0;\n  var overflow = style.overflow; // textRect.width already contains paddingH if bgColor is set\n\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\n    var oldHeight = textRect.height;\n\n    if (overflow && overflow.match('break')) {\n      // Temporarily set background to be null to calculate\n      // the bounding box without backgroud.\n      label.setStyle('backgroundColor', null); // Set constraining width\n\n      label.setStyle('width', availableWidth - paddingH); // This is the real bounding box of the text without padding\n\n      var innerRect = label.getBoundingRect();\n      label.setStyle('width', Math.ceil(innerRect.width));\n      label.setStyle('backgroundColor', bgColor);\n    } else {\n      var availableInnerWidth = availableWidth - paddingH;\n      var newWidth = availableWidth < oldOuterWidth // Current text is too wide, use `availableWidth` as max width.\n      ? availableInnerWidth : // Current available width is enough, but the text may have\n      // already been wrapped with a smaller available width.\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth // Current available is larger than text width,\n      // so don't constrain width (otherwise it may have\n      // empty space in the background).\n      ? null // Current available is smaller than text width, so\n      // use the current available width as constraining\n      // width.\n      : availableInnerWidth : // Current available width is enough, so no need to\n      // constrain.\n      null;\n      label.setStyle('width', newWidth);\n    }\n\n    var newRect = label.getBoundingRect();\n    textRect.width = newRect.width;\n    var margin = (label.style.margin || 0) + 2.1;\n    textRect.height = newRect.height + margin;\n    textRect.y -= (textRect.height - oldHeight) / 2;\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      each(labelLine.states, setNotShow);\n      label.ignore = labelLine.ignore = true;\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var PI = Math.PI;\n    var labelRotate = 0;\n    var rotate = labelModel.get('rotate');\n\n    if (isNumber(rotate)) {\n      labelRotate = rotate * (PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else if (rotate === 'radial' || rotate === true) {\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n      labelRotate = radialAngle;\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n      var rad = Math.atan2(nx, ny);\n\n      if (rad < 0) {\n        rad = PI * 2 + rad;\n      }\n\n      var isDown = ny > 0;\n\n      if (isDown) {\n        rad = PI + rad;\n      }\n\n      labelRotate = rad - PI;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect,\n        unconstrainedWidth: textRect.width,\n        labelStyleWidth: label.style.width\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport labelLayout from './labelLayout.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getSectorCornerRadius } from '../helper/pieHelper.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBasicPieLayout } from './pieLayout.js';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (seriesModel.ecModel.ssr) {\n        // Use scale animation in SSR mode(opacity?)\n        // Because CSS SVG animation doesn't support very customized shape animation.\n        graphic.initProps(sector, {\n          scaleX: 0,\n          scaleY: 0\n        }, seriesModel, {\n          dataIndex: idx,\n          isFrom: true\n        });\n        sector.originX = sectorShape.cx;\n        sector.originY = sectorShape.cy;\n      } else if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n          if (startAngle != null) {\n            sector.setShape({\n              startAngle: startAngle,\n              endAngle: startAngle\n            });\n            graphic.initProps(sector, {\n              shape: {\n                startAngle: layout.startAngle,\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          } else {\n            sector.shape.endAngle = layout.startAngle;\n            graphic.updateProps(sector, {\n              shape: {\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          }\n        }\n    } else {\n      saveOldStyle(sector); // Transition animation from the old shape\n\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = extend({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    } // remove empty-circle if it exists\n\n\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    } // when all data are filtered, show lightgray empty circle\n\n\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var sector = new graphic.Sector({\n        shape: getBasicPieLayout(seriesModel, api)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { getPercentSeats } from '../../util/number.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    var data = createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    this.seats = getPercentSeats(valueList, data.hostModel.get('percentPrecision'));\n    return data;\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    params.percent = this.seats[dataIndex];\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport pieLayout from '../pie/pieLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport PieView from './PieView.js';\nimport PieSeriesModel from './PieSeries.js';\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}","<template>\n  <v-chart\n    v-if=\"currencies\"\n    :option=\"balanceChartOptions\"\n    :theme=\"settingsStore.chartTheme\"\n    autoresize\n  />\n</template>\n\n<script lang=\"ts\">\nimport ECharts from 'vue-echarts';\nimport { EChartsOption } from 'echarts';\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { PieChart } from 'echarts/charts';\nimport { LabelLayout } from 'echarts/features';\nimport {\n  DatasetComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n} from 'echarts/components';\n\nimport { BalanceRecords } from '@/types';\nimport { formatPriceCurrency } from '@/shared/formatters';\nimport { defineComponent, computed } from 'vue';\nimport { useSettingsStore } from '@/stores/settings';\n\nuse([\n  PieChart,\n  CanvasRenderer,\n  DatasetComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  LabelLayout,\n]);\n\nexport default defineComponent({\n  name: 'BalanceChart',\n  components: {\n    'v-chart': ECharts,\n  },\n  props: {\n    currencies: { required: true, type: Array as () => BalanceRecords[] },\n    showTitle: { required: false, type: Boolean },\n  },\n  setup(props) {\n    const settingsStore = useSettingsStore();\n\n    const balanceChartOptions = computed((): EChartsOption => {\n      return {\n        title: {\n          text: 'Balance',\n          show: props.showTitle,\n        },\n        center: ['50%', '50%'],\n        backgroundColor: 'rgba(0, 0, 0, 0)',\n        dataset: {\n          dimensions: ['balance', 'currency', 'est_stake', 'free', 'used', 'stake'],\n          source: props.currencies,\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: (params) => {\n            return `${formatPriceCurrency(params.value.balance, params.value.currency, 8)}<br />${\n              params.percent\n            }% (${formatPriceCurrency(params.value.est_stake, params.value.stake)})`;\n          },\n        },\n        // legend: {\n        //   orient: 'vertical',\n        //   right: 10,\n        //   top: 20,\n        //   bottom: 20,\n        // },\n        series: [\n          {\n            type: 'pie',\n            radius: ['40%', '70%'],\n\n            encode: {\n              value: 'est_stake',\n              itemName: 'currency',\n              tooltip: ['balance', 'currency'],\n            },\n            label: {\n              formatter: '{b} - {d}%',\n            },\n            tooltip: {\n              show: true,\n            },\n          },\n        ],\n      };\n    });\n\n    return { balanceChartOptions, settingsStore };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 240px;\n}\n</style>\n","<template>\n  <div>\n    <div class=\"mb-2\">\n      <label class=\"me-auto h3\">Balance</label>\n      <b-button class=\"float-end\" size=\"sm\" @click=\"botStore.activeBot.getBalance\"\n        >&#x21bb;</b-button\n      >\n      <b-form-checkbox\n        v-model=\"hideSmallBalances\"\n        class=\"float-end\"\n        size=\"sm\"\n        title=\"Hide small balances\"\n        button\n      >\n        <HideIcon v-if=\"hideSmallBalances\" :size=\"16\" />\n        <ShowIcon v-else :size=\"16\" />\n      </b-form-checkbox>\n    </div>\n    <BalanceChart v-if=\"balanceCurrencies\" :currencies=\"balanceCurrencies\" />\n    <div>\n      <p v-if=\"botStore.activeBot.balance.note\">\n        <strong>{{ botStore.activeBot.balance.note }}</strong>\n      </p>\n      <b-table class=\"table-sm\" :items=\"balanceCurrencies\" :fields=\"tableFields\">\n        <template slot=\"bottom-row\">\n          <td><strong>Total</strong></td>\n          <td>\n            <span\n              class=\"font-italic\"\n              :title=\"`Increase over initial capital of ${formatCurrency(\n                botStore.activeBot.balance.starting_capital,\n              )} ${botStore.activeBot.balance.stake}`\"\n              >{{ formatPercent(botStore.activeBot.balance.starting_capital_ratio) }}</span\n            >\n          </td>\n          <!-- this is a computed prop that adds up all the expenses in the visible rows -->\n          <td>\n            <strong>{{ formatCurrency(botStore.activeBot.balance.total) }}</strong>\n          </td>\n        </template>\n      </b-table>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport HideIcon from 'vue-material-design-icons/EyeOff.vue';\nimport ShowIcon from 'vue-material-design-icons/Eye.vue';\nimport BalanceChart from '@/components/charts/BalanceChart.vue';\nimport { formatPercent } from '@/shared/formatters';\nimport { defineComponent, computed, ref } from 'vue';\nimport { useBotStore } from '@/stores/ftbotwrapper';\n\nexport default defineComponent({\n  name: 'Balance',\n  components: { HideIcon, ShowIcon, BalanceChart },\n  setup() {\n    const botStore = useBotStore();\n    const hideSmallBalances = ref(true);\n\n    const smallBalance = computed((): number => {\n      return Number((0.1 ** botStore.activeBot.stakeCurrencyDecimals).toFixed(8));\n    });\n\n    const balanceCurrencies = computed(() => {\n      if (!hideSmallBalances.value) {\n        return botStore.activeBot.balance.currencies;\n      }\n\n      return botStore.activeBot.balance.currencies?.filter(\n        (v) => v.est_stake >= smallBalance.value,\n      );\n    });\n\n    const tableFields = computed(() => {\n      return [\n        { key: 'currency', label: 'Currency' },\n        { key: 'free', label: 'Available', formatter: 'formatCurrency' },\n        {\n          key: 'est_stake',\n          label: `in ${botStore.activeBot.balance.stake}`,\n          formatter: 'formatCurrency',\n        },\n      ];\n    });\n\n    const formatCurrency = (value) => {\n      return value ? value.toFixed(5) : '';\n    };\n\n    return {\n      botStore,\n      hideSmallBalances,\n      formatPercent,\n      smallBalance,\n      balanceCurrencies,\n      tableFields,\n      formatCurrency,\n    };\n  },\n});\n</script>\n"],"names":["_sfc_main","_hoisted_3","_createElementBlock","_mergeProps","_ctx","$props","_cache","$event","_createElementVNode","_openBlock","PI2","CMD","PathProxy","DEFAULT_SEARCH_SPACE","getCandidateAnchor","pos","distance","rect","outPt","outDir","width","height","projectPointToArc","cx","cy","r","startAngle","endAngle","anticlockwise","x","y","out","d","ox","oy","tmp","normalizeRadian","angle","x1","y1","x2","y2","d1","d2","projectPointToLine","limitToEnds","dx","dy","dx1","dy1","lineLen","projectedLen","t","projectPointToRect","tmpPt","nearestPointOnRect","pt","dist","nearestPointOnPath","path","xi","yi","x0","y0","minDist","data","i","cmd","cubicProjectPoint","quadraticProjectPoint","rx","ry","theta","dTheta","_x","pt0","Point","pt1","pt2","dir","dir2","updateLabelLinePoints","target","labelLineModel","labelLine","label","labelGuideConfig","points","searchSpace","labelRect","anchorPoint","targetTransform","targetInversedTransform","invert","len","candidate","boundingRect","Path","limitTurnAngle","tmpArr","tmpProjPoint","linePoints","minTurnAngle","len1","len2","angleCos","minTurnAngleCos","limitSurfaceAngle","surfaceNormal","maxSurfaceAngle","maxSurfaceAngleCos","HALF_PI","angle2","newAngle","setLabelLineState","ignore","stateName","stateModel","isNormal","stateObj","smooth","styleObj","buildLabelLinePath","shape","vector.dist","moveLen","midPoint0","vector.lerp","midPoint2","midPoint1","setLabelLineStyle","targetEl","statesModels","defaultStyle","normalModel","showNormal","labelIgnoreNormal","DISPLAY_STATES","stateShow","isLabelIgnored","retrieve2","Polyline","defaults","showAbove","labelLineConfig","getLabelLineStatesModels","itemModel","labelLineName","SPECIAL_STATES","cloneArr","newPoints","prepareLayoutCallbackParams","labelItem","hostEl","LABEL_OPTION_TO_STYLE_KEYS","dummyTransformable","Transformable","labelLayoutInnerStore","makeInner","labelLineAnimationStore","extendWithKeys","source","keys","key","LABEL_LAYOUT_PROPS","LabelManager","dataIndex","dataType","seriesModel","layoutOption","labelStyle","textConfig","labelTransform","BoundingRect","host","hostRect","transform","labelGuide","chartView","_this","isFunction","child","textEl","ecData","getECData","api","createDragHandler","el","defaultLabelAttr","degreeToRadian","needsUpdateLabelLine","parsePercent","guideLine","labelLayoutStore","k","hostModel","labelList","prepareLayoutList","labelsNeedsAdjustOnX","filter","item","labelsNeedsAdjustOnY","shiftLayoutOnX","shiftLayoutOnY","labelsNeedsHideOverlap","hideOverlap","each","ignoreLabelLineUpdate","animationEnabled","visualStyle","visualType","isElementRemoved","layoutStore","oldLayout","newProps","prevStates","indexOf","updateProps","labelInner","oldOpacity","initProps","layoutSelect","layoutEmphasis","animateLabelValue","newLayout","LabelManager$1","getLabelManager","installLabelLayout","registers","ecModel","params","labelManager","series","RADIAN","getViewRect","layout.getLayoutRect","getBasicPieLayout","viewRect","center","radius","zrUtil.isArray","size","r0","coordSys","point","pieLayout","seriesType","valueDim","_a","minAngle","validDataCount","value","sum","unitRadian","clockwise","roseType","stillShowZeroSum","extent","restAngle","valueSumLargerThanMinAngle","currentAngle","idx","linearMap","angle_1","layout_1","layout_2","dataFilter","legendModels","name","adjustSingleSide","list","viewWidth","viewHeight","viewLeft","viewTop","farthestX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","rA","rA2","newX","deltaX","newTargetWidth","constrainTextWidth","recalculateX","items","topSemi","bottomSemi","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","layout","targetTextWidth","isAlignToEdge","padding","paddingH","extraPaddingH","realTextWidth","availableWidth","forceRecalculate","style","textRect","bgColor","overflow","oldOuterWidth","oldHeight","innerRect","availableInnerWidth","newWidth","newRect","margin","sectorShape","pieLabelLayout","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","sector","labelModel","labelPosition","labelDistance","labelAlignTo","edgeDistance","bleedMargin","labelLineLen","labelLineLen2","midAngle","nx","ny","textX","textY","textAlign","isLabelInside","x3","y3","PI","labelRotate","rotate","isNumber","radialAngle","rad","isDown","selectState","notShowLabel","getSectorCornerRadius","model","zeroIfNull","cornerRadius","isArray","dr","map","cr","PiePiece","_super","__extends","text","graphic.Text","firstCreate","emphasisModel","extend","animationType","graphic.initProps","graphic.updateProps","saveOldStyle","setStatesStylesFromModel","offset","cursorStyle","labelText","toggleHoverEmphasis","visualColor","visualOpacity","setLabelStyle","getLabelStatesModels","polyline","graphic.Polyline","retrieve3","graphic.Sector","PieView","payload","oldData","group","s","piePiece","newIdx","oldIdx","graphic.removeElementWithFadeOut","labelLayout","itemLayout","ChartView","PieView$1","LegendVisualProvider","getDataWithEncodedVisual","getRawData","rawData","dataWithEncodedVisual","LegendVisualProvider$1","PieSeriesModel","option","zrUtil.bind","createSeriesDataSimply","zrUtil.curry","makeSeriesEncodeForNameBased","valueList","getPercentSeats","modelUtil.defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","SeriesModel","PieSeriesModel$1","negativeDataFilter","curValue","install","createLegacyDataSelectAction","curry","use","PieChart","CanvasRenderer","DatasetComponent","LegendComponent","TitleComponent","TooltipComponent","LabelLayout","defineComponent","ECharts","props","settingsStore","useSettingsStore","computed","formatPriceCurrency","_createBlock","_component_v_chart","_createCommentVNode","HideIcon","ShowIcon","BalanceChart","botStore","useBotStore","hideSmallBalances","ref","smallBalance","balanceCurrencies","v","tableFields","formatPercent","_hoisted_1","_hoisted_2","_hoisted_4","_createVNode","_component_b_button","_createTextVNode","_component_b_form_checkbox","_component_HideIcon","_component_ShowIcon","_component_BalanceChart","_toDisplayString","_component_b_table","_hoisted_5","_hoisted_6"],"mappings":"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"}