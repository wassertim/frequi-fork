import{o as M,c as $,aF as ri,ar as oe,aq as ie,ap as de,a as N,C as Ga,Q as Ua,e as pe,v as he,x as ae,aw as It,z as q,M as Za,aG as si,ah as vt,ai as Qt,b as O,w as R,D as Ha,S as ja,Z as eo,g as Ue,r as W,q as ma,U as Q,h as w,y as te,V as ya,aH as li,B as Ct,l as Z,aI as ui,a3 as _a,H as ci,aJ as di,aK as fi,aL as pi,a4 as hi,u as to,s as Ya,af as vi,p as ao,d as no,_ as ba,n as oo,A as io,aM as gi,aN as mi,an as Ka,aO as qa,aA as yi,aP as _i,aQ as Ee,a5 as bi,R as xi,i as Si,aR as Ci,aS as wi}from"./index-dzevJiyr.js";import{_ as ro}from"./EditValue.vue_vue_type_script_setup_true_lang-P4SWPKkQ.js";import{_ as V,S as so,B as xa,P as rt,G as we,c as Sa,g as Re,C as lo,u as Ca,L as ea,a as Ai,n as uo,i as co,e as D,b as wa,d as fo,f as Xa,s as Ti,r as Pi,h as G,t as Di,j as ta,l as aa,k as Li,m as Aa,o as Ta,p as po,q as re,v as le,w as ve,x as Y,D as ho,E as ki,y as vo,z as Ii,A as K,R as na,F as Ze,H as Oi,I as go,J as Mi,K as X,M as Ja,N as Bi,O as Vi,Q as Ei,T as Pa,U as nt,V as mo,W as Ot,X as Ni,Y as Se,Z as xe,$ as B,a0 as He,a1 as zi,a2 as ot,a3 as yo,a4 as ue,a5 as Ri,a6 as $i,a7 as Ae,a8 as _o,a9 as Da,aa as wt,ab as Fi,ac as st,ad as Wi,ae as bo,af as Ce,ag as Gi,ah as $e,ai as be,aj as ze,ak as Qa,al as lt,am as Ui,an as xo,ao as Zi,ap as Hi,aq as yt,ar as tt,as as So,at as ji,au as Yi,av as Ki,aw as qi,ax as Xi,ay as Ji,az as Co,aA as Qi,aB as er,aC as tr,aD as ar,aE as wo,aF as La,aG as nr,aH as or,aI as en,aJ as Ao,aK as ir,aL as rr,aM as sr,aN as gt,aO as lr,aP as To,aQ as oa,aR as tn,aS as ur,aT as Mt,aU as cr,aV as dr,aW as fr,aX as pr,aY as hr,aZ as vr,a_ as gr,a$ as mr,b0 as an,b1 as yr,b2 as _r,b3 as br,b4 as xr,b5 as Sr,b6 as Cr,b7 as wr,b8 as Ar,b9 as Tr,ba as Pr,bb as Dr,bc as Lr,bd as kr,be as Ir,bf as Or}from"./installCanvasRenderer-epB0g-7F.js";import{c as Mr,p as Po,S as Br,i as Vr,t as Er,r as Nr,a as zr,D as Rr,b as $r,d as Fr,s as Wr,A as Gr,e as Ur,f as Zr,g as Hr,h as jr,j as Yr,k as Kr,l as qr,m as Xr}from"./install-7fFfEIUu.js";import{c as Jr}from"./createSeriesDataSimply-LT46mab5.js";var _e=(t=>(t.line="line",t.bar="bar",t.scatter="scatter",t))(_e||{});const ut={main_plot:{},subplots:{}};function Qr(t){if(!t)return{baseCurrency:"",quoteCurrency:""};const[e,a]=t.split("/");if(a!==void 0){const n=a.split(":");return{baseCurrency:e,quoteCurrency:n[0]||a}}return{baseCurrency:a??"",quoteCurrency:e??""}}var es=Object.defineProperty,ts=Object.defineProperties,as=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,ns=Object.prototype.hasOwnProperty,os=Object.prototype.propertyIsEnumerable,on=(t,e,a)=>e in t?es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Ne=(t,e)=>{for(var a in e||(e={}))ns.call(e,a)&&on(t,a,e[a]);if(nn)for(var a of nn(e))os.call(e,a)&&on(t,a,e[a]);return t},rn=(t,e)=>ts(t,as(e));const is={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(t){this.autoscroll&&t&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var t;const e=((t=this.$refs.dropdownMenu)==null?void 0:t.children[this.typeAheadPointer])||!1;if(e){const a=this.getDropdownViewport(),{top:n,bottom:o,height:i}=e.getBoundingClientRect();if(n<a.top)return this.$refs.dropdownMenu.scrollTop=e.offsetTop;if(o>a.bottom)return this.$refs.dropdownMenu.scrollTop=e.offsetTop-(a.height-i)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},rs={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let t=0;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},open(t){t&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let t=this.typeAheadPointer-1;t>=0;t--)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadDown(){for(let t=this.typeAheadPointer+1;t<this.filteredOptions.length;t++)if(this.selectable(this.filteredOptions[t])){this.typeAheadPointer=t;break}},typeAheadSelect(){const t=this.filteredOptions[this.typeAheadPointer];t&&this.selectable(t)&&this.select(t)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},ss={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(t){this.mutableLoading=t}},methods:{toggleLoading(t=null){return t==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=t}}},ka=(t,e)=>{const a=t.__vccOpts||t;for(const[n,o]of e)a[n]=o;return a},ls={},us={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},cs=N("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),ds=[cs];function fs(t,e){return M(),$("svg",us,ds)}const ps=ka(ls,[["render",fs]]),hs={},vs={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},gs=N("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),ms=[gs];function ys(t,e){return M(),$("svg",vs,ms)}const _s=ka(hs,[["render",ys]]),sn={Deselect:ps,OpenIndicator:_s},bs={mounted(t,{instance:e}){if(e.appendToBody){const{height:a,top:n,left:o,width:i}=e.$refs.toggle.getBoundingClientRect();let r=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;t.unbindPosition=e.calculatePosition(t,e,{width:i+"px",left:r+o+"px",top:s+n+a+"px"}),document.body.appendChild(t)}},unmounted(t,{instance:e}){e.appendToBody&&(t.unbindPosition&&typeof t.unbindPosition=="function"&&t.unbindPosition(),t.parentNode&&t.parentNode.removeChild(t))}};function xs(t){const e={};return Object.keys(t).sort().forEach(a=>{e[a]=t[a]}),JSON.stringify(e)}let Ss=0;function Cs(){return++Ss}const ws={components:Ne({},sn),directives:{appendToBody:bs},mixins:[is,rs,ss],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:t=>t},selectable:{type:Function,default:t=>!0},getOptionLabel:{type:Function,default(t){return typeof t=="object"?t.hasOwnProperty(this.label)?t[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(t)}.
https://vue-select.org/api/props.html#getoptionlabel`):t}},getOptionKey:{type:Function,default(t){if(typeof t!="object")return t;try{return t.hasOwnProperty("id")?t.id:xs(t)}catch(e){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,t,e)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(t,e,a){return(e||"").toLocaleLowerCase().indexOf(a.toLocaleLowerCase())>-1}},filter:{type:Function,default(t,e){return t.filter(a=>{let n=this.getOptionLabel(a);return typeof n=="number"&&(n=n.toString()),this.filterBy(a,n,e)})}},createOption:{type:Function,default(t){return typeof this.optionList[0]=="object"?{[this.label]:t}:t}},resetOnOptionsChange:{default:!1,validator:t=>["function","boolean"].includes(typeof t)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:t,multiple:e}){return t&&!e}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(t,e)=>t},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(t,e,{width:a,top:n,left:o}){t.style.top=n,t.style.left=o,t.style.width=a}},dropdownShouldOpen:{type:Function,default({noDrop:t,open:e,mutableLoading:a}){return t?!1:e&&!a}},uid:{type:[String,Number],default:()=>Cs()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let t=this.modelValue;return this.isTrackingValues&&(t=this.$data._value),t!=null&&t!==""?[].concat(t):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const t={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:Ne({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:t,listFooter:t,header:rn(Ne({},t),{deselect:this.deselect}),footer:rn(Ne({},t),{deselect:this.deselect})}},childComponents(){return Ne(Ne({},sn),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const t=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return t;const e=this.search.length?this.filter(t,this.search,this):t;if(this.taggable&&this.search.length){const a=this.createOption(this.search);this.optionExists(a)||e.unshift(a)}return e},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(t,e){const a=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(t,e,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&a()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(t){this.isTrackingValues&&this.setInternalValueFromOptions(t)}},multiple(){this.clearSelection()},open(t){this.$emit(t?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(t){Array.isArray(t)?this.$data._value=t.map(e=>this.findOptionFromReducedValue(e)):this.$data._value=this.findOptionFromReducedValue(t)},select(t){this.$emit("option:selecting",t),this.isOptionSelected(t)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(t):(this.taggable&&!this.optionExists(t)&&(this.$emit("option:created",t),this.pushTag(t)),this.multiple&&(t=this.selectedValue.concat(t)),this.updateValue(t),this.$emit("option:selected",t)),this.onAfterSelect(t)},deselect(t){this.$emit("option:deselecting",t),this.updateValue(this.selectedValue.filter(e=>!this.optionComparator(e,t))),this.$emit("option:deselected",t)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(t){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(t){typeof this.modelValue>"u"&&(this.$data._value=t),t!==null&&(Array.isArray(t)?t=t.map(e=>this.reduce(e)):t=this.reduce(t)),this.$emit("update:modelValue",t)},toggleDropdown(t){const e=t.target!==this.searchEl;e&&t.preventDefault();const a=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||a.filter(Boolean).some(n=>n.contains(t.target)||n===t.target)){t.preventDefault();return}this.open&&e?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(t){return this.selectedValue.some(e=>this.optionComparator(e,t))},isOptionDeselectable(t){return this.isOptionSelected(t)&&this.deselectFromDropdown},optionComparator(t,e){return this.getOptionKey(t)===this.getOptionKey(e)},findOptionFromReducedValue(t){const e=n=>JSON.stringify(this.reduce(n))===JSON.stringify(t),a=[...this.options,...this.pushedTags].filter(e);return a.length===1?a[0]:a.find(n=>this.optionComparator(n,this.$data._value))||t},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let t=null;this.multiple&&(t=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(t)}},optionExists(t){return this.optionList.some(e=>this.optionComparator(e,t))},normalizeOptionForSlot(t){return typeof t=="object"?t:{[this.label]:t}},pushTag(t){this.pushedTags.push(t)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:t,multiple:e}=this;this.clearSearchOnBlur({clearSearchOnSelect:t,multiple:e})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(t){const e=o=>(o.preventDefault(),!this.isComposing&&this.typeAheadSelect()),a={8:o=>this.maybeDeleteValue(),9:o=>this.onTab(),27:o=>this.onEscape(),38:o=>(o.preventDefault(),this.typeAheadUp()),40:o=>(o.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(o=>a[o]=e);const n=this.mapKeydown(a,this);if(typeof n[t.keyCode]=="function")return n[t.keyCode](t)}}},As=["dir"],Ts=["id","aria-expanded","aria-owns"],Ps={ref:"selectedOptions",class:"vs__selected-options"},Ds=["disabled","title","aria-label","onClick"],Ls={ref:"actions",class:"vs__actions"},ks=["disabled"],Is={class:"vs__spinner"},Os=["id"],Ms=["id","aria-selected","onMouseover","onClick"],Bs={key:0,class:"vs__no-options"},Vs=pe(" Sorry, no matching options. "),Es=["id"];function Ns(t,e,a,n,o,i){const r=ri("append-to-body");return M(),$("div",{dir:a.dir,class:ja(["v-select",i.stateClasses])},[oe(t.$slots,"header",ie(de(i.scope.header))),N("div",{id:`vs${a.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":i.dropdownOpen.toString(),"aria-owns":`vs${a.uid}__listbox`,"aria-label":"Search for option",onMousedown:e[1]||(e[1]=s=>i.toggleDropdown(s))},[N("div",Ps,[(M(!0),$(Ga,null,Ua(i.selectedValue,(s,l)=>oe(t.$slots,"selected-option-container",{option:i.normalizeOptionForSlot(s),deselect:i.deselect,multiple:a.multiple,disabled:a.disabled},()=>[(M(),$("span",{key:a.getOptionKey(s),class:"vs__selected"},[oe(t.$slots,"selected-option",ie(de(i.normalizeOptionForSlot(s))),()=>[pe(he(a.getOptionLabel(s)),1)]),a.multiple?(M(),$("button",{key:0,ref_for:!0,ref:u=>o.deselectButtons[l]=u,disabled:a.disabled,type:"button",class:"vs__deselect",title:`Deselect ${a.getOptionLabel(s)}`,"aria-label":`Deselect ${a.getOptionLabel(s)}`,onClick:u=>i.deselect(s)},[(M(),ae(It(i.childComponents.Deselect)))],8,Ds)):q("",!0)]))])),256)),oe(t.$slots,"search",ie(de(i.scope.search)),()=>[N("input",Za({class:"vs__search"},i.scope.search.attributes,si(i.scope.search.events)),null,16)])],512),N("div",Ls,[vt(N("button",{ref:"clearButton",disabled:a.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:e[0]||(e[0]=(...s)=>i.clearSelection&&i.clearSelection(...s))},[(M(),ae(It(i.childComponents.Deselect)))],8,ks),[[Qt,i.showClearButton]]),oe(t.$slots,"open-indicator",ie(de(i.scope.openIndicator)),()=>[a.noDrop?q("",!0):(M(),ae(It(i.childComponents.OpenIndicator),ie(Za({key:0},i.scope.openIndicator.attributes)),null,16))]),oe(t.$slots,"spinner",ie(de(i.scope.spinner)),()=>[vt(N("div",Is,"Loading...",512),[[Qt,t.mutableLoading]])])],512)],40,Ts),O(eo,{name:a.transition},{default:R(()=>[i.dropdownOpen?vt((M(),$("ul",{id:`vs${a.uid}__listbox`,ref:"dropdownMenu",key:`vs${a.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:e[2]||(e[2]=Ha((...s)=>i.onMousedown&&i.onMousedown(...s),["prevent"])),onMouseup:e[3]||(e[3]=(...s)=>i.onMouseUp&&i.onMouseUp(...s))},[oe(t.$slots,"list-header",ie(de(i.scope.listHeader))),(M(!0),$(Ga,null,Ua(i.filteredOptions,(s,l)=>(M(),$("li",{id:`vs${a.uid}__option-${l}`,key:a.getOptionKey(s),role:"option",class:ja(["vs__dropdown-option",{"vs__dropdown-option--deselect":i.isOptionDeselectable(s)&&l===t.typeAheadPointer,"vs__dropdown-option--selected":i.isOptionSelected(s),"vs__dropdown-option--highlight":l===t.typeAheadPointer,"vs__dropdown-option--disabled":!a.selectable(s)}]),"aria-selected":l===t.typeAheadPointer?!0:null,onMouseover:u=>a.selectable(s)?t.typeAheadPointer=l:null,onClick:Ha(u=>a.selectable(s)?i.select(s):null,["prevent","stop"])},[oe(t.$slots,"option",ie(de(i.normalizeOptionForSlot(s))),()=>[pe(he(a.getOptionLabel(s)),1)])],42,Ms))),128)),i.filteredOptions.length===0?(M(),$("li",Bs,[oe(t.$slots,"no-options",ie(de(i.scope.noOptions)),()=>[Vs])])):q("",!0),oe(t.$slots,"list-footer",ie(de(i.scope.listFooter)))],40,Os)),[[r]]):(M(),$("ul",{key:1,id:`vs${a.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Es))]),_:3},8,["name"]),oe(t.$slots,"footer",ie(de(i.scope.footer)))],10,As)}const Do=ka(ws,[["render",Ns]]),zs={class:"d-flex flex-row"},Lo=Ue({__name:"PlotIndicatorSelect",props:{modelValue:{required:!1,default:"",type:String},columns:{required:!0,type:Array},label:{required:!0,type:String}},emits:["update:modelValue","indicatorSelected"],setup(t,{emit:e}){const a=t,n=e,o=W("");function i(){n("indicatorSelected",o.value),n("update:modelValue",o.value)}function r(){o.value="",i()}return ma(()=>{o.value=a.modelValue}),Q(()=>a.modelValue,s=>{o.value=s}),(s,l)=>{const u=ya,c=li,d=Ct;return M(),$("div",zs,[O(u,{class:"flex-grow-1",label:t.label,"label-for":"indicatorSelector"},{default:R(()=>[O(w(Do),{modelValue:w(o),"onUpdate:modelValue":l[0]||(l[0]=f=>te(o)?o.value=f:null),options:t.columns,size:"sm",clearable:!1,"onOption:selected":i},null,8,["modelValue","options"])]),_:1},8,["label"]),O(d,{size:"sm",title:"Abort",class:"ms-1 mt-auto",variant:"secondary",onClick:r},{default:R(()=>[O(c)]),_:1})])}}}),Rs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$s=N("path",{fill:"currentColor",d:"M19.78 3h-8.56C10.55 3 10 3.55 10 4.22V8h6v6h3.78c.67 0 1.22-.55 1.22-1.22V4.22C21 3.55 20.45 3 19.78 3m-7.34 3.67a1.23 1.23 0 1 1 0-2.46a1.23 1.23 0 0 1 1.23 1.23c0 .68-.55 1.23-1.23 1.23m6.12 6.11a1.23 1.23 0 1 1-.02-2.46c.68-.01 1.23.54 1.24 1.24c-.01.67-.55 1.21-1.22 1.22m0-6.11a1.23 1.23 0 1 1-.02-2.46a1.231 1.231 0 0 1 .02 2.46M4.22 10h8.56A1.22 1.22 0 0 1 14 11.22v8.56c0 .67-.55 1.22-1.22 1.22H4.22C3.55 21 3 20.45 3 19.78v-8.56c0-.67.55-1.22 1.22-1.22m4.28 4.28c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22c.67 0 1.22-.55 1.22-1.22a1.22 1.22 0 0 0-1.22-1.22m-3.06-3.06c-.67 0-1.22.55-1.22 1.22a1.22 1.22 0 0 0 1.22 1.22c.67 0 1.22-.55 1.22-1.22c0-.67-.55-1.22-1.22-1.22m6.11 6.11c-.67 0-1.22.55-1.22 1.22c0 .67.55 1.22 1.22 1.22a1.22 1.22 0 0 0 1.22-1.22c0-.67-.54-1.21-1.21-1.22z"},null,-1),Fs=[$s];function Ws(t,e){return M(),$("svg",Rs,[...Fs])}const Gs={name:"mdi-dice-multiple",render:Ws};function at(){return`#${(Math.random()*16777215<<0).toString(16)}`}const Us={class:"d-flex flex-col flex-xl-row justify-content-between mt-1"},Zs=Ue({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,o=W(at()),i=W(_e.line),r=W(Object.keys(_e)),s=W(""),l=W(!1),u=W("");function c(){o.value=at()}const d=Z(()=>{if(l.value||!s.value)return{};const h={color:o.value,type:i.value};return u.value&&i.value===_e.line&&(h.fill_to=u.value),{[s.value]:h}});function f(){n("update:modelValue",d.value)}return Q(()=>a.modelValue,()=>{if([s.value]=Object.keys(a.modelValue),l.value=!1,s.value&&a.modelValue){const h=a.modelValue[s.value];o.value=h.color||at(),i.value=h.type||_e.line,u.value=h.fill_to||""}},{immediate:!0}),ui([o,i,u],()=>{f()},{debounce:200}),(h,p)=>{const y=_a,_=ya,b=ci,m=di,g=Gs,v=Ct,x=fi,S=pi,C=Lo;return M(),$("div",null,[N("div",Us,[O(_,{class:"col flex-grow-1",label:"Type","label-for":"plotTypeSelector"},{default:R(()=>[O(y,{id:"plotTypeSelector",modelValue:w(i),"onUpdate:modelValue":p[0]||(p[0]=T=>te(i)?i.value=T:null),size:"sm",options:w(r)},null,8,["modelValue","options"])]),_:1}),O(_,{label:"Color","label-for":"colsel",size:"sm",class:"ms-xl-1 col"},{default:R(()=>[O(S,null,{default:R(()=>[O(m,null,{default:R(()=>[O(b,{modelValue:w(o),"onUpdate:modelValue":p[1]||(p[1]=T=>te(o)?o.value=T:null),type:"color",size:"sm",class:"p-0",style:{"max-width":"29px"}},null,8,["modelValue"])]),_:1}),O(b,{id:"colsel",modelValue:w(o),"onUpdate:modelValue":p[2]||(p[2]=T=>te(o)?o.value=T:null),size:"sm",class:"flex-grow-1"},null,8,["modelValue"]),O(x,null,{default:R(()=>[O(v,{variant:"primary",size:"sm",onClick:c},{default:R(()=>[O(g)]),_:1})]),_:1})]),_:1})]),_:1})]),w(i)===w(_e).line?(M(),ae(C,{key:0,modelValue:w(u),"onUpdate:modelValue":p[3]||(p[3]=T=>te(u)?u.value=T:null),columns:t.columns,class:"mt-1",label:"Area chart - Fill to (leave empty for line chart)"},null,8,["modelValue","columns"])):q("",!0)])}}});function ke(t){return JSON.parse(JSON.stringify(t))}const ko="ftPlotConfig";function Hs(){const t="ft_custom_plot_config",e="ft_selected_plot_config",a=JSON.parse(localStorage.getItem(t)||"{}");if(Object.keys(a).length>0){console.log("migrating plot configs");const n={customPlotConfigs:a,plotConfigName:localStorage.getItem(e)||"default"};localStorage.setItem(ko,JSON.stringify(n)),localStorage.removeItem(t),localStorage.removeItem(e)}}Hs();const Ia=hi("plotConfig",{state:()=>({customPlotConfigs:{},plotConfigName:"default",isEditing:!1,editablePlotConfig:{...ut}}),getters:{availablePlotConfigNames:t=>Object.keys(t.customPlotConfigs),plotConfig:t=>(t.isEditing?t.editablePlotConfig:t.customPlotConfigs[t.plotConfigName])||ke(ut)},actions:{saveCustomPlotConfig(t,e){this.customPlotConfigs[t]=e},deletePlotConfig(t){delete this.customPlotConfigs[t],this.plotConfigName===t&&(this.plotConfigName=this.availablePlotConfigNames[this.availablePlotConfigNames.length-1])},renamePlotConfig(t,e){this.customPlotConfigs[e]=this.customPlotConfigs[t],delete this.customPlotConfigs[t],this.plotConfigName=e},newPlotConfig(t){this.editablePlotConfig=ke(ut),this.saveCustomPlotConfig(t,this.editablePlotConfig),this.plotConfigName=t},plotConfigChanged(t=""){t&&(this.plotConfigName=t),console.log("plotConfigChanged",this.plotConfigName),this.isEditing&&(this.editablePlotConfig=ke(this.customPlotConfigs[this.plotConfigName]))},duplicatePlotConfig(t,e){console.log(t,e),this.customPlotConfigs[e]=ke(this.customPlotConfigs[t]),this.plotConfigChanged(e)}},persist:{key:ko,paths:["plotConfigName","customPlotConfigs"],afterRestore:t=>{Object.keys(t.store.customPlotConfigs).length===0&&(console.log("Initialized plotconfig"),t.store.customPlotConfigs={default:ke(ut)})}}}),Io=Ue({__name:"PlotConfigSelect",props:{allowEdit:{type:Boolean,default:!1},editableName:{type:String,default:"plot configuration"}},setup(t){const e=Ia();return(a,n)=>{const o=_a,i=ro;return M(),ae(i,{modelValue:w(e).plotConfigName,"onUpdate:modelValue":n[1]||(n[1]=r=>w(e).plotConfigName=r),"allow-edit":t.allowEdit,"allow-add":t.allowEdit,"allow-duplicate":t.allowEdit,"editable-name":"plot configuration",onRename:w(e).renamePlotConfig,onDelete:w(e).deletePlotConfig,onNew:w(e).newPlotConfig,onDuplicate:w(e).duplicatePlotConfig},{default:R(()=>[O(o,{modelValue:w(e).plotConfigName,"onUpdate:modelValue":n[0]||(n[0]=r=>w(e).plotConfigName=r),options:w(e).availablePlotConfigNames,size:"sm",onChange:w(e).plotConfigChanged},null,8,["modelValue","options","onChange"])]),_:1},8,["modelValue","allow-edit","allow-add","allow-duplicate","onRename","onDelete","onNew","onDuplicate"])}}}),Oa=t=>(ao("data-v-79de00fa"),t=t(),no(),t),js={key:0},Ys={class:"col-mb-3"},Ks=Oa(()=>N("hr",null,null,-1)),qs=Oa(()=>N("hr",null,null,-1)),Xs={class:"d-flex flex-row mt-1"},Js=Oa(()=>N("hr",null,null,-1)),Qs={class:"d-flex flex-row"},el={key:3,class:"col-mb-5 ms-1 mt-2"},tl=Ue({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},isVisible:{required:!0,default:!1,type:Boolean}},setup(t){const e=t,a=Ia(),n=to(),o=W("default"),i=W(""),r=W(!1),s=W(!1),l=W("main_plot"),u=W(),c=W(!0),d=Z(()=>l.value==="main_plot"),f=Z(()=>d.value?a.editablePlotConfig.main_plot:a.editablePlotConfig.subplots[l.value]),h=Z(()=>["main_plot",...Object.keys(a.editablePlotConfig.subplots)]),p=Z(()=>{let P=[];return d.value&&(P=Object.keys(a.editablePlotConfig.main_plot)),l.value in a.editablePlotConfig.subplots&&(P=Object.keys(a.editablePlotConfig.subplots[l.value])),P.map(L=>({value:L,html:e.columns.includes(L)?L:`<span title="Column not available">${L} <-- not available in this chart</span>`}))});function y(P){const L=Object.keys(P)[0],E=P[L];d.value?a.editablePlotConfig.main_plot[L]={...E}:a.editablePlotConfig.subplots[l.value][L]={...E},a.editablePlotConfig={...a.editablePlotConfig},r.value=!1}const _=Z({get(){return r.value?{}:i.value?{[i.value]:f.value[i.value]}:{}},set(P){Object.keys(P)[0]&&P?y(P):r.value=!1}}),b=Z({get(){return JSON.stringify(a.editablePlotConfig,null,2)},set(P){try{u.value=JSON.parse(P),c.value=!0}catch{c.value=!1}}});function m(){d.value?(console.log(`Removing ${i.value} from MainPlot`),delete a.editablePlotConfig.main_plot[i.value]):(console.log(`Removing ${i.value} from ${l.value}`),delete a.editablePlotConfig.subplots[l.value][i.value]),a.editablePlotConfig={...a.editablePlotConfig},i.value=""}function g(P){a.editablePlotConfig.subplots={...a.editablePlotConfig.subplots,[P]:{}},l.value=P}function v(P){delete a.editablePlotConfig.subplots[P],l.value=h.value[h.value.length-1]}function x(P,L){a.editablePlotConfig.subplots[L]=a.editablePlotConfig.subplots[P],delete a.editablePlotConfig.subplots[P],l.value=L}function S(){a.editablePlotConfig=ke(a.customPlotConfigs[a.plotConfigName])}function C(){u.value!==void 0&&c.value&&(a.editablePlotConfig=u.value)}async function T(){if(n.activeBot.isWebserverMode&&!n.activeBot.strategy.strategy){Ya("No strategy selected, can't load plot config.");return}try{await n.activeBot.getStrategyPlotConfig(),n.activeBot.strategyPlotConfig&&(a.editablePlotConfig=n.activeBot.strategyPlotConfig)}catch{Ya("Failed to load Plot configuration from Strategy.")}}function A(){a.saveCustomPlotConfig(o.value,a.editablePlotConfig)}function I(P){r.value=!1,P&&(y({[P]:{color:at()}}),i.value=P)}return Q(l,()=>{i.value=""}),Q(()=>a.plotConfigName,()=>{i.value="",o.value=a.plotConfigName}),Q(()=>e.isVisible,()=>{e.isVisible?(a.editablePlotConfig=ke(a.plotConfig),a.isEditing=!0,o.value=a.plotConfigName):a.isEditing=!1}),(P,L)=>{const E=Io,U=ya,j=_a,ge=ro,F=Ct,Te=Lo,je=Zs,me=vi;return t.columns?(M(),$("div",js,[O(U,{label:"Plot config name","label-for":"idPlotConfigName"},{default:R(()=>[O(E,{"allow-edit":""})]),_:1}),N("div",Ys,[Ks,O(U,{label:"Target Plot","label-for":"FieldSel"},{default:R(()=>[O(ge,{modelValue:w(l),"onUpdate:modelValue":L[1]||(L[1]=z=>te(l)?l.value=z:null),"allow-edit":!w(d),"allow-add":"","editable-name":"plot configuration","align-vertical":"",onNew:g,onDelete:v,onRename:x},{default:R(()=>[O(j,{id:"FieldSel",modelValue:w(l),"onUpdate:modelValue":L[0]||(L[0]=z=>te(l)?l.value=z:null),options:w(h),"select-size":5},null,8,["modelValue","options"])]),_:1},8,["modelValue","allow-edit"])]),_:1})]),qs,N("div",null,[O(U,{label:"Indicators in this plot","label-for":"selectedIndicators"},{default:R(()=>[O(j,{id:"selectedIndicators",modelValue:w(i),"onUpdate:modelValue":L[2]||(L[2]=z=>te(i)?i.value=z:null),disabled:w(r),options:w(p),"select-size":4},null,8,["modelValue","disabled","options"])]),_:1})]),N("div",Xs,[O(F,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!w(i),class:"col",onClick:m},{default:R(()=>[pe(" Remove indicator ")]),_:1},8,["disabled"]),O(F,{variant:"primary",title:"Add indicator to plot",size:"sm",class:"ms-1 col",disabled:w(r),onClick:L[3]||(L[3]=z=>{r.value=!w(r),i.value=""})},{default:R(()=>[pe(" Add new indicator ")]),_:1},8,["disabled"])]),w(r)?(M(),ae(Te,{key:0,columns:t.columns,class:"mt-1",label:"Select indicator to add",onIndicatorSelected:I},null,8,["columns"])):q("",!0),w(i)?(M(),ae(je,{key:1,modelValue:w(_),"onUpdate:modelValue":L[4]||(L[4]=z=>te(_)?_.value=z:null),class:"mt-1",columns:t.columns},null,8,["modelValue","columns"])):q("",!0),Js,N("div",Qs,[O(F,{class:"ms-1 col",variant:"secondary",size:"sm",disabled:w(r),title:"Reset to last saved configuration",onClick:S},{default:R(()=>[pe("Reset")]),_:1},8,["disabled"]),O(F,{disabled:w(n).activeBot.isWebserverMode&&w(n).activeBot.botApiVersion<2.23||!w(n).activeBot.isBotOnline||w(r),class:"ms-1 col",variant:"secondary",size:"sm",onClick:T},{default:R(()=>[pe(" From strategy ")]),_:1},8,["disabled"]),O(F,{id:"showButton",class:"ms-1 col",variant:"secondary",size:"sm",disabled:w(r),title:"Show configuration for easy transfer to a strategy",onClick:L[5]||(L[5]=z=>s.value=!w(s))},{default:R(()=>[pe(he(w(s)?"Hide":"Show"),1)]),_:1},8,["disabled"]),O(F,{class:"ms-1 col",variant:"primary",size:"sm","data-toggle":"tooltip",disabled:w(r),title:"Save configuration",onClick:A},{default:R(()=>[pe("Save")]),_:1},8,["disabled"])]),w(s)?(M(),ae(F,{key:2,class:"ms-1 mt-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:C},{default:R(()=>[pe("Load from String")]),_:1})):q("",!0),w(s)?(M(),$("div",el,[O(me,{id:"TextArea",modelValue:w(b),"onUpdate:modelValue":L[6]||(L[6]=z=>te(b)?b.value=z:null),class:"textArea",size:"sm",state:w(c)},null,8,["modelValue","state"])])):q("",!0)])):q("",!0)}}}),al=ba(tl,[["__scopeId","data-v-79de00fa"]]);function ia(t,e,a,n,o=0){return{name:a,type:n.type||"line",xAxisIndex:o,yAxisIndex:o,itemStyle:{color:n.color||at()},encode:{x:t,y:e},showSymbol:!1}}function ln(t,e,a,n,o=0){const i={type:_e.line},r=ia(t,e,a,i,o),s={stack:a,stackStrategy:"all",lineStyle:{opacity:0},showSymbol:!1,areaStyle:{color:n.color,opacity:.1},tooltip:{show:!1}};return Object.assign(r,s),r}function nl(t,e){const a=t.indexOf("open"),n=t.indexOf("close"),o=t.indexOf("high"),i=t.indexOf("low");let r;return e.map((s,l)=>{const u=s.slice(),c=l===0?(u[a]+u[n])/2:(r[a]+r[n])/2,d=(u[a]+u[o]+u[i]+u[n])/4,f=Math.max(u[o],u[a],u[n]),h=Math.min(u[i],u[a],u[n]);return u[a]=c,u[n]=d,u[o]=f,u[i]=h,r=u.slice(),u})}const ol=2,il=3,Oo=4;function Le(t,e,a=il){const n=e%t;let o=a===ol;return a===Oo&&(o=n>t/2),e-n+(o?t:0)}function Mo(t,e){return`${t.ft_order_side==="buy"?"+":"-"}${io("cost"in t?t.cost:t.amount*t.safe_price,e)}`}function un(t,e,a,n){return`${t.is_short?"Short":"Long"} ${a}
  ${oo(t.profit_ratio)} ${t.profit_abs?"("+io(t.profit_abs,n)+")":""}
  ${Mo(e,n)}
  Enter-tag: ${t.enter_tag??""}
  Exit-Tag: ${t.exit_reason??""}`}function rl(t,e,a){return`${t.is_short?"Short":"Long"} adjustment
  ${Mo(e,a)}
  Enter-tag: ${t.enter_tag??""}`}const sl="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",cn="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",Bt="#AD00FF",Vt="#0066FF";function ll(t,e){const a=[],n=t.data_stop_ts+t.timeframe_ms;for(let o=0,i=e.length;o<i;o+=1){const r=e[o],s=r.open_fill_timestamp??r.open_timestamp;if((Le(t.timeframe_ms??0,r.open_timestamp)<=n||!r.close_timestamp||r.close_timestamp&&r.close_timestamp>=t.data_start_ts)&&r.orders)for(let l=0;l<r.orders.length;l++){const u=r.orders[l],c=u.order_filled_timestamp??("order_timestamp"in u?u.order_timestamp:r.open_timestamp),{quoteCurrency:d}=Qr(r.quote_currency??r.pair??"");c&&Le(t.timeframe_ms??0,c)<=n&&c>t.data_start_ts&&(l===0?a.push([Le(t.timeframe_ms??0,s),u.safe_price,cn,u.ft_order_side=="sell"?180:0,r.is_short?Bt:Vt,(r.is_short?"Short":"Long")+(u.order_filled_timestamp?"":" (open)"),un(r,u,"entry",d)]):l===r.orders.length-1&&r.close_timestamp?Le(t.timeframe_ms??0,r.close_timestamp)<=n&&r.close_timestamp>t.data_start_ts&&r.is_open===!1&&a.push([Le(t.timeframe_ms??0,r.close_timestamp),u.safe_price,cn,r.is_short?0:180,r.is_short?Bt:Vt,oo(r.profit_ratio,2),un(r,u,"exit",d)]):a.push([Le(t.timeframe_ms??0,c),u.safe_price,sl,u.ft_order_side=="sell"?180:0,r.is_short?Bt:Vt,"",rl(r,u,d)]))}}return{tradeData:a}}function ul(t,e,a,n){const{tradeData:o}=ll(a,n),i=n.filter(s=>s.is_open),r={name:t,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e!=="dark"?"#fff":"#000",padding:2,color:e==="dark"?"#fff":"#000",rotate:75,offset:[10,0],align:"left"},itemStyle:{color:s=>s.data?s.data[4]:"#000",opacity:.9},symbol:s=>s[2],symbolRotate:s=>s[3],symbolSize:13,data:o};if(i.length>0){const s=a.timeframe_ms*10;r.markLine={symbol:"none",itemStyle:{color:"#ff0000AA"},label:{show:!0,position:"middle"},lineStyle:{type:"solid"},data:i.map(l=>[{name:"Stoploss",yAxis:l.stop_loss_abs,xAxis:a.data_stop_ts-s>l.open_timestamp?l.open_timestamp:a.data_stop_ts-s},{yAxis:l.stop_loss_abs,xAxis:l.close_timestamp??a.data_stop_ts+a.timeframe_ms}])}}return r}function cl(t,e,a,n){const o=t.indexOf(a),i=t.indexOf(n),r=o>0&&i>0;return r&&t.push(`${a}-${n}`),e.map(s=>{const l=s.slice();if(r){const u=l===null||l[i]===null||l[o]===null?null:l[i]-l[o];l.push(u)}return l})}function dl(t){const e=[];return"main_plot"in t&&Object.entries(t.main_plot).forEach(([a,n])=>{n.fill_to&&e.push([a,n.fill_to])}),"subplots"in t&&Object.values(t.subplots).forEach(a=>{Object.entries(a).forEach(([n,o])=>{o.fill_to&&e.push([n,o.fill_to])})}),e}var fl=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.hasSymbolVisual=!0,a}return e.prototype.getInitialData=function(a,n){return Mr(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(a,n,o){return o.point(n.getItemLayout(a))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(so);const pl=fl;var Bo=4,hl=function(){function t(){}return t}(),vl=function(t){V(e,t);function e(a){var n=t.call(this,a)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.getDefaultShape=function(){return new hl},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(a,n){var o=n.points,i=n.size,r=this.symbolProxy,s=r.shape,l=a.getContext?a.getContext():a,u=l&&i[0]<Bo,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<o.length;){var f=o[d++],h=o[d++];isNaN(f)||isNaN(h)||c&&!c.contain(f,h)||(s.x=f-i[0]/2,s.y=h-i[1]/2,s.width=i[0],s.height=i[1],r.buildPath(a,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var a=this.shape,n=a.points,o=a.size,i=this._ctx,r=this.softClipShape,s;if(i){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||r&&!r.contain(l,u)||i.fillRect(l-o[0]/2,u-o[1]/2,o[0],o[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(a,n){for(var o=this.shape,i=o.points,r=o.size,s=Math.max(r[0],4),l=Math.max(r[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,f=i[c+1]-l/2;if(a>=d&&n>=f&&a<=d+s&&n<=f+l)return u}return-1},e.prototype.contain=function(a,n){var o=this.transformCoordToLocal(a,n),i=this.getBoundingRect();if(a=o[0],n=o[1],i.contain(a,n)){var r=this.hoverDataIdx=this.findDataIndex(a,n);return r>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var n=this.shape,o=n.points,i=n.size,r=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,f=0;f<o.length;){var h=o[f++],p=o[f++];l=Math.min(h,l),c=Math.max(h,c),u=Math.min(p,u),d=Math.max(p,d)}a=this._rect=new xa(l-r/2,u-s/2,c-l+r,d-u+s)}return a},e}(rt),gl=function(){function t(){this.group=new we}return t.prototype.updateData=function(e,a){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,a)},t.prototype.updateLayout=function(e){var a=e.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,i=n.startIndex*4*2;a=new Float32Array(a.buffer,i,o)}n.setShape("points",a),n.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,a,n){var o=this._newAdded[0],i=a.getLayout("points"),r=o&&o.shape.points;if(r&&r.length<2e4){var s=r.length,l=new Float32Array(s+i.length);l.set(r),l.set(i,s),o.endIndex=e.end,o.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,a,n)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new vl({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,a,n){var o=a.hostModel;n=n||{};var i=a.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=n.clipShape||null,e.symbolProxy=Sa(a.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var r=e.shape.size[0]<Bo;e.useStyle(o.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=a.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Re(e);u.seriesIndex=o.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(u.dataIndex=d+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}();const ml=gl;var yl=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){var i=a.getData(),r=this._updateSymbolDraw(i,a);r.updateData(i,{clipShape:this._getClipShape(a)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(a,n,o){var i=a.getData(),r=this._updateSymbolDraw(i,a);r.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(a,n,o){this._symbolDraw.incrementalUpdate(a,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=a.end===n.getData().count()},e.prototype.updateTransform=function(a,n,o){var i=a.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=Po("").reset(a,n,o);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},e.prototype._getClipShape=function(a){if(a.get("clip",!0)){var n=a.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},e.prototype._updateSymbolDraw=function(a,n){var o=this._symbolDraw,i=n.pipelineContext,r=i.large;return(!o||r!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=r?new ml:new Br,this._isLargeDraw=r,this.group.removeAll()),this.group.add(o.group),o},e.prototype.remove=function(a,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(lo);const _l=yl;function bl(t){Ca(Vr),t.registerSeriesModel(pl),t.registerChartView(_l),t.registerLayout(Po("scatter"))}var xl={axisPointer:1,tooltip:1,brush:1};function Sl(t,e,a){var n=e.getComponentByElement(t.topTarget),o=n&&n.coordinateSystem;return n&&n!==a&&!xl.hasOwnProperty(n.mainType)&&o&&o.model!==a}var dn=ea.prototype,Et=Ai.prototype,Vo=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Vo);function Nt(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Cl=function(t){V(e,t);function e(a){var n=t.call(this,a)||this;return n.type="ec-line",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Vo},e.prototype.buildPath=function(a,n){Nt(n)?dn.buildPath.call(this,a,n):Et.buildPath.call(this,a,n)},e.prototype.pointAt=function(a){return Nt(this.shape)?dn.pointAt.call(this,a):Et.pointAt.call(this,a)},e.prototype.tangentAt=function(a){var n=this.shape,o=Nt(n)?[n.x2-n.x1,n.y2-n.y1]:Et.tangentAt.call(this,a);return uo(o,o)},e}(rt);const wl=Cl;var zt=["fromSymbol","toSymbol"];function fn(t){return"_"+t+"Type"}function pn(t,e,a){var n=e.getItemVisual(a,t);if(!n||n==="none")return n;var o=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),r=e.getItemVisual(a,t+"Offset"),s=e.getItemVisual(a,t+"KeepAspect"),l=Aa(o),u=Ta(r||0,l);return n+l+u+(i||"")+(s||"")}function hn(t,e,a){var n=e.getItemVisual(a,t);if(!(!n||n==="none")){var o=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),r=e.getItemVisual(a,t+"Offset"),s=e.getItemVisual(a,t+"KeepAspect"),l=Aa(o),u=Ta(r||0,l),c=Sa(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=t,c}}function Al(t){var e=new wl({name:"line",subPixelOptimize:!0});return ra(e.shape,t),e}function ra(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var a=e[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Tl=function(t){V(e,t);function e(a,n,o){var i=t.call(this)||this;return i._createLine(a,n,o),i}return e.prototype._createLine=function(a,n,o){var i=a.hostModel,r=a.getItemLayout(n),s=Al(r);s.shape.percent=0,co(s,{shape:{percent:1}},i,n),this.add(s),D(zt,function(l){var u=hn(l,a,n);this.add(u),this[fn(l)]=pn(l,a,n)},this),this._updateCommonStl(a,n,o)},e.prototype.updateData=function(a,n,o){var i=a.hostModel,r=this.childOfName("line"),s=a.getItemLayout(n),l={shape:{}};ra(l.shape,s),wa(r,l,i,n),D(zt,function(u){var c=pn(u,a,n),d=fn(u);if(this[d]!==c){this.remove(this.childOfName(u));var f=hn(u,a,n);this.add(f)}this[d]=c},this),this._updateCommonStl(a,n,o)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(a,n,o){var i=a.hostModel,r=this.childOfName("line"),s=o&&o.emphasisLineStyle,l=o&&o.blurLineStyle,u=o&&o.selectLineStyle,c=o&&o.labelStatesModels,d=o&&o.emphasisDisabled,f=o&&o.focus,h=o&&o.blurScope;if(!o||a.hasItemOption){var p=a.getItemModel(n),y=p.getModel("emphasis");s=y.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),d=y.get("disabled"),f=y.get("focus"),h=y.get("blurScope"),c=fo(p)}var _=a.getItemVisual(n,"style"),b=_.stroke;r.useStyle(_),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=s,r.ensureState("blur").style=l,r.ensureState("select").style=u,D(zt,function(S){var C=this.childOfName(S);if(C){C.setColor(b),C.style.opacity=_.opacity;for(var T=0;T<Xa.length;T++){var A=Xa[T],I=r.getState(A);if(I){var P=I.style||{},L=C.ensureState(A),E=L.style||(L.style={});P.stroke!=null&&(E[C.__isEmptyBrush?"stroke":"fill"]=P.stroke),P.opacity!=null&&(E.opacity=P.opacity)}}C.markRedraw()}},this);var m=i.getRawValue(n);Ti(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,C){return i.getFormattedLabel(S,C,a.dataType)}},inheritColor:b||"#000",defaultOpacity:_.opacity,defaultText:(m==null?a.getName(n):isFinite(m)?Pi(m):m)+""});var g=this.getTextContent();if(g){var v=c.normal;g.__align=g.style.align,g.__verticalAlign=g.style.verticalAlign,g.__position=v.get("position")||"middle";var x=v.get("distance");G(x)||(x=[x,x]),g.__labelDistance=x}this.setTextConfig({position:null,local:!0,inside:!1}),Di(this,f,h,d)},e.prototype.highlight=function(){ta(this)},e.prototype.downplay=function(){aa(this)},e.prototype.updateLayout=function(a,n){this.setLinePoints(a.getItemLayout(n))},e.prototype.setLinePoints=function(a){var n=this.childOfName("line");ra(n.shape,a),n.dirty()},e.prototype.beforeUpdate=function(){var a=this,n=a.childOfName("fromSymbol"),o=a.childOfName("toSymbol"),i=a.getTextContent();if(!n&&!o&&(!i||i.ignore))return;for(var r=1,s=this.parent;s;)s.scaleX&&(r/=s.scaleX),s=s.parent;var l=a.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),d=l.pointAt(u),f=Li([],d,c);uo(f,f);function h(I,P){var L=I.__specifiedRotation;if(L==null){var E=l.tangentAt(P);I.attr("rotation",(P===1?-1:1)*Math.PI/2-Math.atan2(E[1],E[0]))}else I.attr("rotation",L)}if(n&&(n.setPosition(c),h(n,0),n.scaleX=n.scaleY=r*u,n.markRedraw()),o&&(o.setPosition(d),h(o,1),o.scaleX=o.scaleY=r*u,o.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var p=void 0,y=void 0,_=i.__labelDistance,b=_[0]*r,m=_[1]*r,g=u/2,v=l.tangentAt(g),x=[v[1],-v[0]],S=l.pointAt(g);x[1]>0&&(x[0]=-x[0],x[1]=-x[1]);var C=v[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var T=-Math.atan2(v[1],v[0]);d[0]<c[0]&&(T=Math.PI+T),i.rotation=T}var A=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-m,y="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=m,y="top";break;default:A=0,y="middle"}switch(i.__position){case"end":i.x=f[0]*b+d[0],i.y=f[1]*m+d[1],p=f[0]>.8?"left":f[0]<-.8?"right":"center",y=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":i.x=-f[0]*b+c[0],i.y=-f[1]*m+c[1],p=f[0]>.8?"right":f[0]<-.8?"left":"center",y=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=b*C+c[0],i.y=c[1]+A,p=v[0]<0?"right":"left",i.originX=-b*C,i.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=S[0],i.y=S[1]+A,p="center",i.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-b*C+d[0],i.y=d[1]+A,p=v[0]>=0?"right":"left",i.originX=b*C,i.originY=-A;break}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||y,align:i.__align||p})}},e}(we);const Pl=Tl;var Dl=function(){function t(e){this.group=new we,this._LineCtor=e||Pl}return t.prototype.updateData=function(e){var a=this;this._progressiveEls=null;var n=this,o=n.group,i=n._lineData;n._lineData=e,i||o.removeAll();var r=vn(e);e.diff(i).add(function(s){a._doAdd(e,s,r)}).update(function(s,l){a._doUpdate(i,e,l,s,r)}).remove(function(s){o.remove(i.getItemGraphicEl(s))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(a,n){a.updateLayout(e,n)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=vn(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,a){this._progressiveEls=[];function n(s){!s.isGroup&&!Ll(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var o=e.start;o<e.end;o++){var i=a.getItemLayout(o);if(Rt(i)){var r=new this._LineCtor(a,o,this._seriesScope);r.traverse(n),this.group.add(r),a.setItemGraphicEl(o,r),this._progressiveEls.push(r)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){po(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,a,n){var o=e.getItemLayout(a);if(Rt(o)){var i=new this._LineCtor(e,a,n);e.setItemGraphicEl(a,i),this.group.add(i)}},t.prototype._doUpdate=function(e,a,n,o,i){var r=e.getItemGraphicEl(n);if(!Rt(a.getItemLayout(o))){this.group.remove(r);return}r?r.updateData(a,o,i):r=new this._LineCtor(a,o,i),a.setItemGraphicEl(o,r),this.group.add(r)},t}();function Ll(t){return t.animators&&t.animators.length>0}function vn(t){var e=t.hostModel,a=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:fo(e)}}function gn(t){return isNaN(t[0])||isNaN(t[1])}function Rt(t){return t&&!gn(t[0])&&!gn(t[1])}const kl=Dl;var Me=!0,it=Math.min,Fe=Math.max,Il=Math.pow,Ol=1e4,Ml=6,Bl=6,mn="globalPan",Vl={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},El={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},yn={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Nl=0,zl=function(t){V(e,t);function e(a){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=a,n.group=new we,n._uid="brushController_"+Nl++,D(Zl,function(o,i){this._handlers[i]=re(o,this)},n),n}return e.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},e.prototype._doEnableBrush=function(a){var n=this._zr;this._enableGlobalPan||Er(n,mn,this._uid),D(this._handlers,function(o,i){n.on(i,o)}),this._brushType=a.brushType,this._brushOption=le(ve(yn),a,!0)},e.prototype._doDisableBrush=function(){var a=this._zr;Nr(a,mn,this._uid),D(this._handlers,function(n,o){a.off(o,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(a){if(a&&a.length){var n=this._panels={};D(a,function(o){n[o.panelId]=ve(o)})}else this._panels=null;return this},e.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(a){a=Y(a,function(f){return le(ve(yn),f,!0)});var n="\0-brush-index-",o=this._covers,i=this._covers=[],r=this,s=this._creatingCover;return new ho(o,a,u,l).add(c).update(c).remove(d).execute(),this;function l(f,h){return(f.id!=null?f.id:n+h)+"-"+f.brushType}function u(f,h){return l(f.__brushOption,h)}function c(f,h){var p=a[f];if(h!=null&&o[h]===s)i[f]=o[h];else{var y=i[f]=h!=null?(o[h].__brushOption=p,o[h]):No(r,Eo(r,p));Ma(r,y)}}function d(f){o[f]!==s&&r.group.remove(o[f])}},e.prototype.unmount=function(){return this.enableBrush(!1),sa(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(ki);function Eo(t,e){var a=At[e.brushType].createCover(t,e);return a.__brushOption=e,Ro(a,e),t.group.add(a),a}function No(t,e){var a=Ba(e);return a.endCreating&&(a.endCreating(t,e),Ro(e,e.__brushOption)),e}function zo(t,e){var a=e.__brushOption;Ba(e).updateCoverShape(t,e,a.range,a)}function Ro(t,e){var a=e.z;a==null&&(a=Ol),t.traverse(function(n){n.z=a,n.z2=a})}function Ma(t,e){Ba(e).updateCommon(t,e),zo(t,e)}function Ba(t){return At[t.__brushOption.brushType]}function Va(t,e,a){var n=t._panels;if(!n)return Me;var o,i=t._transform;return D(n,function(r){r.isTargetByCursor(e,a,i)&&(o=r)}),o}function $o(t,e){var a=t._panels;if(!a)return Me;var n=e.__brushOption.panelId;return n!=null?a[n]:Me}function sa(t){var e=t._covers,a=e.length;return D(e,function(n){t.group.remove(n)},t),e.length=0,!!a}function Be(t,e){var a=Y(t._covers,function(n){var o=n.__brushOption,i=ve(o.range);return{brushType:o.brushType,panelId:o.panelId,range:i}});t.trigger("brush",{areas:a,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Rl(t){var e=t._track;if(!e.length)return!1;var a=e[e.length-1],n=e[0],o=a[0]-n[0],i=a[1]-n[1],r=Il(o*o+i*i,.5);return r>Ml}function Fo(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Wo(t,e,a,n){var o=new we;return o.add(new na({name:"main",style:Ea(a),silent:!0,draggable:!0,cursor:"move",drift:K(_n,t,e,o,["n","s","w","e"]),ondragend:K(Be,e,{isEnd:!0})})),D(n,function(i){o.add(new na({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:K(_n,t,e,o,i),ondragend:K(Be,e,{isEnd:!0})}))}),o}function Go(t,e,a,n){var o=n.brushStyle.lineWidth||0,i=Fe(o,Bl),r=a[0][0],s=a[1][0],l=r-o/2,u=s-o/2,c=a[0][1],d=a[1][1],f=c-i+o/2,h=d-i+o/2,p=c-r,y=d-s,_=p+o,b=y+o;ye(t,e,"main",r,s,p,y),n.transformable&&(ye(t,e,"w",l,u,i,b),ye(t,e,"e",f,u,i,b),ye(t,e,"n",l,u,_,i),ye(t,e,"s",l,h,_,i),ye(t,e,"nw",l,u,i,i),ye(t,e,"ne",f,u,i,i),ye(t,e,"sw",l,h,i,i),ye(t,e,"se",f,h,i,i))}function la(t,e){var a=e.__brushOption,n=a.transformable,o=e.childAt(0);o.useStyle(Ea(a)),o.attr({silent:!n,cursor:n?"move":"default"}),D([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r=e.childOfName(i.join("")),s=i.length===1?ua(t,i[0]):Fl(t,i);r&&r.attr({silent:!n,invisible:!n,cursor:n?El[s]+"-resize":null})})}function ye(t,e,a,n,o,i,r){var s=e.childOfName(a);s&&s.setShape(Gl(Na(t,e,[[n,o],[n+i,o+r]])))}function Ea(t){return Ze({strokeNoScale:!0},t.brushStyle)}function Uo(t,e,a,n){var o=[it(t,a),it(e,n)],i=[Fe(t,a),Fe(e,n)];return[[o[0],i[0]],[o[1],i[1]]]}function $l(t){return go(t.group)}function ua(t,e){var a={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=Oi(a[e],$l(t));return n[o]}function Fl(t,e){var a=[ua(t,e[0]),ua(t,e[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function _n(t,e,a,n,o,i){var r=a.__brushOption,s=t.toRectRange(r.range),l=Zo(e,o,i);D(n,function(u){var c=Vl[u];s[c[0]][c[1]]+=l[c[0]]}),r.range=t.fromRectRange(Uo(s[0][0],s[1][0],s[0][1],s[1][1])),Ma(e,a),Be(e,{isEnd:!1})}function Wl(t,e,a,n){var o=e.__brushOption.range,i=Zo(t,a,n);D(o,function(r){r[0]+=i[0],r[1]+=i[1]}),Ma(t,e),Be(t,{isEnd:!1})}function Zo(t,e,a){var n=t.group,o=n.transformCoordToLocal(e,a),i=n.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function Na(t,e,a){var n=$o(t,e);return n&&n!==Me?n.clipPath(a,t._transform):ve(a)}function Gl(t){var e=it(t[0][0],t[1][0]),a=it(t[0][1],t[1][1]),n=Fe(t[0][0],t[1][0]),o=Fe(t[0][1],t[1][1]);return{x:e,y:a,width:n-e,height:o-a}}function Ul(t,e,a){if(!(!t._brushType||Hl(t,e.offsetX,e.offsetY))){var n=t._zr,o=t._covers,i=Va(t,e,a);if(!t._dragging)for(var r=0;r<o.length;r++){var s=o[r].__brushOption;if(i&&(i===Me||s.panelId===i.panelId)&&At[s.brushType].contain(o[r],a[0],a[1]))return}i&&n.setCursorStyle("crosshair")}}function ca(t){var e=t.event;e.preventDefault&&e.preventDefault()}function da(t,e,a){return t.childOfName("main").contain(e,a)}function Ho(t,e,a,n){var o=t._creatingCover,i=t._creatingPanel,r=t._brushOption,s;if(t._track.push(a.slice()),Rl(t)||o){if(i&&!o){r.brushMode==="single"&&sa(t);var l=ve(r);l.brushType=bn(l.brushType,i),l.panelId=i===Me?null:i.panelId,o=t._creatingCover=Eo(t,l),t._covers.push(o)}if(o){var u=At[bn(t._brushType,i)],c=o.__brushOption;c.range=u.getCreatingRange(Na(t,o,t._track)),n&&(No(t,o),u.updateCommon(t,o)),zo(t,o),s={isEnd:n}}}else n&&r.brushMode==="single"&&r.removeOnClick&&Va(t,e,a)&&sa(t)&&(s={isEnd:n,removeOnClick:!0});return s}function bn(t,e){return t==="auto"?e.defaultBrushType:t}var Zl={mousedown:function(t){if(this._dragging)xn(this,t);else if(!t.target||!t.target.draggable){ca(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var a=this._creatingPanel=Va(this,t,e);a&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,a=t.offsetY,n=this.group.transformCoordToLocal(e,a);if(Ul(this,t,n),this._dragging){ca(t);var o=Ho(this,t,n,!1);o&&Be(this,o)}},mouseup:function(t){xn(this,t)}};function xn(t,e){if(t._dragging){ca(e);var a=e.offsetX,n=e.offsetY,o=t.group.transformCoordToLocal(a,n),i=Ho(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,i&&Be(t,i)}}function Hl(t,e,a){var n=t._zr;return e<0||e>n.getWidth()||a<0||a>n.getHeight()}var At={lineX:Sn(0),lineY:Sn(1),rect:{createCover:function(t,e){function a(n){return n}return Wo({toRectRange:a,fromRectRange:a},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Fo(t);return Uo(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,a,n){Go(t,e,a,n)},updateCommon:la,contain:da},polygon:{createCover:function(t,e){var a=new we;return a.add(new vo({name:"main",style:Ea(e),silent:!0})),a},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Ii({name:"main",draggable:!0,drift:K(Wl,t,e),ondragend:K(Be,t,{isEnd:!0})}))},updateCoverShape:function(t,e,a,n){e.childAt(0).setShape({points:Na(t,e,a)})},updateCommon:la,contain:da}};function Sn(t){return{createCover:function(e,a){return Wo({toRectRange:function(n){var o=[n,[0,100]];return t&&o.reverse(),o},fromRectRange:function(n){return n[t]}},e,a,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var a=Fo(e),n=it(a[0][t],a[1][t]),o=Fe(a[0][t],a[1][t]);return[n,o]},updateCoverShape:function(e,a,n,o){var i,r=$o(e,a);if(r!==Me&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(t);else{var s=e._zr;i=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,i];t&&l.reverse(),Go(e,a,l,o)},updateCommon:la,contain:da}}const jl=zl;function Yl(t){return t=za(t),function(e){return Mi(e,t)}}function Kl(t,e){return t=za(t),function(a){var n=e??a,o=n?t.width:t.height,i=n?t.x:t.y;return[i,i+(o||0)]}}function ql(t,e,a){var n=za(t);return function(o,i){return n.contain(i[0],i[1])&&!Sl(o,e,a)}}function za(t){return xa.create(t)}var Xl=function(){function t(){}return t.prototype.getInitialData=function(e,a){var n,o=a.getComponent("xAxis",this.get("xAxisIndex")),i=a.getComponent("yAxis",this.get("yAxisIndex")),r=o.get("type"),s=i.get("type"),l;r==="category"?(e.layout="horizontal",n=o.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",n=i.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],f=u[1-c],h=[o,i],p=h[c].get("type"),y=h[1-c].get("type"),_=e.data;if(_&&l){var b=[];D(_,function(v,x){var S;G(v)?(S=v.slice(),v.unshift(x)):G(v.value)?(S=X({},v),S.value=S.value.slice(),v.value.unshift(x)):S=v,b.push(S)}),e.data=b}var m=this.defaultValueDimensions,g=[{name:d,type:Ja(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Ja(y),dimsDef:m.slice()}];return Jr(this,{coordDimensions:g,dimensionsCount:m.length+1,encodeDefaulter:K(Bi,g,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),Jl=["color","borderColor"],Ql=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},e.prototype.incrementalPrepareRender=function(a,n,o){this._clear(),this._updateDrawMode(a)},e.prototype.incrementalRender=function(a,n,o,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,n):this._incrementalRenderNormal(a,n)},e.prototype.eachRendered=function(a){po(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var n=a.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(a){var n=a.getData(),o=this._data,i=this.group,r=n.getLayout("isSimpleBox"),s=a.get("clip",!0),l=a.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),n.diff(o).add(function(c){if(n.hasValue(c)){var d=n.getItemLayout(c);if(s&&Cn(u,d))return;var f=$t(d,c,!0);co(f,{shape:{points:d.ends}},a,c),Ft(f,n,c,r),i.add(f),n.setItemGraphicEl(c,f)}}).update(function(c,d){var f=o.getItemGraphicEl(d);if(!n.hasValue(c)){i.remove(f);return}var h=n.getItemLayout(c);if(s&&Cn(u,h)){i.remove(f);return}f?(wa(f,{shape:{points:h.ends}},a,c),Vi(f)):f=$t(h),Ft(f,n,c,r),i.add(f),n.setItemGraphicEl(c,f)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=n},e.prototype._renderLarge=function(a){this._clear(),wn(a,this.group);var n=a.get("clip",!0)?zr(a.coordinateSystem,!1,a):null;n?this.group.setClipPath(n):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(a,n){for(var o=n.getData(),i=o.getLayout("isSimpleBox"),r;(r=a.next())!=null;){var s=o.getItemLayout(r),l=$t(s);Ft(l,o,r,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(a,n){wn(n,this.group,this._progressiveEls,!0)},e.prototype.remove=function(a){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(lo),eu=function(){function t(){}return t}(),tu=function(t){V(e,t);function e(a){var n=t.call(this,a)||this;return n.type="normalCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new eu},e.prototype.buildPath=function(a,n){var o=n.points;this.__simpleBox?(a.moveTo(o[4][0],o[4][1]),a.lineTo(o[6][0],o[6][1])):(a.moveTo(o[0][0],o[0][1]),a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]),a.lineTo(o[3][0],o[3][1]),a.closePath(),a.moveTo(o[4][0],o[4][1]),a.lineTo(o[5][0],o[5][1]),a.moveTo(o[6][0],o[6][1]),a.lineTo(o[7][0],o[7][1]))},e}(rt);function $t(t,e,a){var n=t.ends;return new tu({shape:{points:a?au(n,t):n},z2:100})}function Cn(t,e){for(var a=!0,n=0;n<e.ends.length;n++)if(t.contain(e.ends[n][0],e.ends[n][1])){a=!1;break}return a}function Ft(t,e,a,n){var o=e.getItemModel(a);t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=n,Ei(t,o)}function au(t,e){return Y(t,function(a){return a=a.slice(),a[1]=e.initBaseline,a})}var nu=function(){function t(){}return t}(),Wt=function(t){V(e,t);function e(a){var n=t.call(this,a)||this;return n.type="largeCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new nu},e.prototype.buildPath=function(a,n){for(var o=n.points,i=0;i<o.length;)if(this.__sign===o[i++]){var r=o[i++];a.moveTo(r,o[i++]),a.lineTo(r,o[i++])}else i+=3},e}(rt);function wn(t,e,a,n){var o=t.getData(),i=o.getLayout("largePoints"),r=new Wt({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(r);var s=new Wt({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new Wt({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),Gt(1,r,t),Gt(-1,s,t),Gt(0,l,t),n&&(r.incremental=!0,s.incremental=!0),a&&a.push(r,s)}function Gt(t,e,a,n){var o=a.get(["itemStyle",t>0?"borderColor":"borderColor0"])||a.get(["itemStyle",t>0?"color":"color0"]);t===0&&(o=a.get(["itemStyle","borderColorDoji"]));var i=a.getModel("itemStyle").getItemStyle(Jl);e.useStyle(i),e.style.fill=null,e.style.stroke=o}const ou=Ql;var jo=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(a,n,o){var i=n.getItemLayout(a);return i&&o.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(so);Pa(jo,Xl,!0);const iu=jo;function ru(t){!t||!G(t.series)||D(t.series,function(e){nt(e)&&e.type==="k"&&(e.type="candlestick")})}var su=["itemStyle","borderColor"],lu=["itemStyle","borderColor0"],uu=["itemStyle","borderColorDoji"],cu=["itemStyle","color"],du=["itemStyle","color0"],fu={seriesType:"candlestick",plan:mo(),performRawSeries:!0,reset:function(t,e){function a(i,r){return r.get(i>0?cu:du)}function n(i,r){return r.get(i===0?uu:i>0?su:lu)}if(!e.isSeriesFiltered(t)){var o=t.pipelineContext.large;return!o&&{progress:function(i,r){for(var s;(s=i.next())!=null;){var l=r.getItemModel(s),u=r.getItemLayout(s).sign,c=l.getItemStyle();c.fill=a(u,l),c.stroke=n(u,l)||c.fill;var d=r.ensureUniqueItemVisual(s,"style");X(d,c)}}}}}};const pu=fu;var hu={seriesType:"candlestick",plan:mo(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),n=vu(t,a),o=0,i=1,r=["x","y"],s=a.getDimensionIndex(a.mapDimension(r[o])),l=Y(a.mapDimensionsAll(r[i]),a.getDimensionIndex,a),u=l[0],c=l[1],d=l[2],f=l[3];if(a.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:t.pipelineContext.large?p:h};function h(y,_){for(var b,m=_.getStore();(b=y.next())!=null;){var g=m.get(s,b),v=m.get(u,b),x=m.get(c,b),S=m.get(d,b),C=m.get(f,b),T=Math.min(v,x),A=Math.max(v,x),I=F(T,g),P=F(A,g),L=F(S,g),E=F(C,g),U=[];Te(U,P,0),Te(U,I,1),U.push(me(E),me(P),me(L),me(I));var j=_.getItemModel(b),ge=!!j.get(["itemStyle","borderColorDoji"]);_.setItemLayout(b,{sign:An(m,b,v,x,c,ge),initBaseline:v>x?P[i]:I[i],ends:U,brushRect:je(S,C,g)})}function F(z,ce){var ne=[];return ne[o]=ce,ne[i]=z,isNaN(ce)||isNaN(z)?[NaN,NaN]:e.dataToPoint(ne)}function Te(z,ce,ne){var k=ce.slice(),H=ce.slice();k[o]=Ot(k[o]+n/2,1,!1),H[o]=Ot(H[o]-n/2,1,!0),ne?z.push(k,H):z.push(H,k)}function je(z,ce,ne){var k=F(z,ne),H=F(ce,ne);return k[o]-=n/2,H[o]-=n/2,{x:k[0],y:k[1],width:n,height:H[1]-k[1]}}function me(z){return z[o]=Ot(z[o],1),z}}function p(y,_){for(var b=Ni(y.count*4),m=0,g,v=[],x=[],S,C=_.getStore(),T=!!t.get(["itemStyle","borderColorDoji"]);(S=y.next())!=null;){var A=C.get(s,S),I=C.get(u,S),P=C.get(c,S),L=C.get(d,S),E=C.get(f,S);if(isNaN(A)||isNaN(L)||isNaN(E)){b[m++]=NaN,m+=3;continue}b[m++]=An(C,S,I,P,c,T),v[o]=A,v[i]=L,g=e.dataToPoint(v,null,x),b[m++]=g?g[0]:NaN,b[m++]=g?g[1]:NaN,v[i]=E,g=e.dataToPoint(v,null,x),b[m++]=g?g[1]:NaN}_.setLayout("largePoints",b)}}};function An(t,e,a,n,o,i){var r;return a>n?r=-1:a<n?r=1:r=i?0:e>0?t.get(o,e-1)<=n?1:-1:1,r}function vu(t,e){var a=t.getBaseAxis(),n,o=a.type==="category"?a.getBandWidth():(n=a.getExtent(),Math.abs(n[1]-n[0])/e.count()),i=Se(xe(t.get("barMaxWidth"),o),o),r=Se(xe(t.get("barMinWidth"),1),o),s=t.get("barWidth");return s!=null?Se(s,o):Math.max(Math.min(o/2,i),r)}const gu=hu;function mu(t){t.registerChartView(ou),t.registerSeriesModel(iu),t.registerPreprocessor(ru),t.registerVisual(pu),t.registerLayout(gu)}function yu(t,e,a,n){return t&&(t.legacy||t.legacy!==!1&&!a&&!n&&e!=="tspan"&&(e==="text"||B(t,"text")))}function _u(t,e,a){var n=t,o,i,r;if(e==="text")r=n;else{r={},B(n,"text")&&(r.text=n.text),B(n,"rich")&&(r.rich=n.rich),B(n,"textFill")&&(r.fill=n.textFill),B(n,"textStroke")&&(r.stroke=n.textStroke),B(n,"fontFamily")&&(r.fontFamily=n.fontFamily),B(n,"fontSize")&&(r.fontSize=n.fontSize),B(n,"fontStyle")&&(r.fontStyle=n.fontStyle),B(n,"fontWeight")&&(r.fontWeight=n.fontWeight),i={type:"text",style:r,silent:!0},o={};var s=B(n,"textPosition");a?o.position=s?n.textPosition:"inside":s&&(o.position=n.textPosition),B(n,"textPosition")&&(o.position=n.textPosition),B(n,"textOffset")&&(o.offset=n.textOffset),B(n,"textRotation")&&(o.rotation=n.textRotation),B(n,"textDistance")&&(o.distance=n.textDistance)}return Tn(r,t),D(r.rich,function(l){Tn(l,l)}),{textConfig:o,textContent:i}}function Tn(t,e){e&&(e.font=e.textFont||e.font,B(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),B(e,"textAlign")&&(t.align=e.textAlign),B(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),B(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),B(e,"textWidth")&&(t.width=e.textWidth),B(e,"textHeight")&&(t.height=e.textHeight),B(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),B(e,"textPadding")&&(t.padding=e.textPadding),B(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),B(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),B(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),B(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),B(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),B(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),B(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}var Yo={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Pn=He(Yo);zi(ot,function(t,e){return t[e]=1,t},{});ot.join(", ");var _t=["","style","shape","extra"],We=Ae();function Ra(t,e,a,n,o){var i=t+"Animation",r=_o(t,n,o)||{},s=We(e).userDuring;return r.duration>0&&(r.during=s?re(Au,{el:e,userDuring:s}):null,r.setToFinal=!0,r.scope=t),X(r,a[i]),r}function Ut(t,e,a,n){n=n||{};var o=n.dataIndex,i=n.isInit,r=n.clearStyle,s=a.isAnimationEnabled(),l=We(t),u=e.style;l.userDuring=e.during;var c={},d={};if(Pu(t,e,d),Ln("shape",e,d),Ln("extra",e,d),!i&&s&&(Tu(t,e,c),Dn("shape",t,e,c),Dn("extra",t,e,c),Du(t,e,u,c)),d.style=u,xu(t,d,r),Cu(t,e),s)if(i){var f={};D(_t,function(p){var y=p?e[p]:e;y&&y.enterFrom&&(p&&(f[p]=f[p]||{}),X(p?f[p]:f,y.enterFrom))});var h=Ra("enter",t,e,a,o);h.duration>0&&t.animateFrom(f,h)}else Su(t,e,o||0,a,c);Ko(t,e),u?t.dirty():t.markRedraw()}function Ko(t,e){for(var a=We(t).leaveToProps,n=0;n<_t.length;n++){var o=_t[n],i=o?e[o]:e;i&&i.leaveTo&&(a||(a=We(t).leaveToProps={}),o&&(a[o]=a[o]||{}),X(o?a[o]:a,i.leaveTo))}}function bu(t,e,a,n){if(t){var o=t.parent,i=We(t).leaveToProps;if(i){var r=Ra("update",t,e,a,0);r.done=function(){o.remove(t),n&&n()},t.animateTo(i,r)}else o.remove(t),n&&n()}}function Oe(t){return t==="all"}function xu(t,e,a){var n=e.style;if(!t.isGroup&&n){if(a){t.useStyle({});for(var o=t.animators,i=0;i<o.length;i++){var r=o[i];r.targetName==="style"&&r.changeTarget(t.style)}}t.setStyle(n)}e&&(e.style=null,e&&t.attr(e),e.style=n)}function Su(t,e,a,n,o){if(o){var i=Ra("update",t,e,n,a);i.duration>0&&t.animateFrom(o,i)}}function Cu(t,e){B(e,"silent")&&(t.silent=e.silent),B(e,"ignore")&&(t.ignore=e.ignore),t instanceof yo&&B(e,"invisible")&&(t.invisible=e.invisible),t instanceof rt&&B(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var fe={},wu={setTransform:function(t,e){return fe.el[t]=e,this},getTransform:function(t){return fe.el[t]},setShape:function(t,e){var a=fe.el,n=a.shape||(a.shape={});return n[t]=e,a.dirtyShape&&a.dirtyShape(),this},getShape:function(t){var e=fe.el.shape;if(e)return e[t]},setStyle:function(t,e){var a=fe.el,n=a.style;return n&&(n[t]=e,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(t){var e=fe.el.style;if(e)return e[t]},setExtra:function(t,e){var a=fe.el.extra||(fe.el.extra={});return a[t]=e,this},getExtra:function(t){var e=fe.el.extra;if(e)return e[t]}};function Au(){var t=this,e=t.el;if(e){var a=We(e).userDuring,n=t.userDuring;if(a!==n){t.el=t.userDuring=null;return}fe.el=e,n(wu)}}function Dn(t,e,a,n){var o=a[t];if(o){var i=e[t],r;if(i){var s=a.transition,l=o.transition;if(l)if(!r&&(r=n[t]={}),Oe(l))X(r,i);else for(var u=Da(l),c=0;c<u.length;c++){var d=u[c],f=i[d];r[d]=f}else if(Oe(s)||ue(s,t)>=0){!r&&(r=n[t]={});for(var h=He(i),c=0;c<h.length;c++){var d=h[c],f=i[d];Lu(o[d],f)&&(r[d]=f)}}}}}function Ln(t,e,a){var n=e[t];if(n)for(var o=a[t]={},i=He(n),r=0;r<i.length;r++){var s=i[r];o[s]=Ri(n[s])}}function Tu(t,e,a){for(var n=e.transition,o=Oe(n)?ot:Da(n||[]),i=0;i<o.length;i++){var r=o[i];if(!(r==="style"||r==="shape"||r==="extra")){var s=t[r];a[r]=s}}}function Pu(t,e,a){for(var n=0;n<Pn.length;n++){var o=Pn[n],i=Yo[o],r=e[o];r&&(a[i[0]]=r[0],a[i[1]]=r[1])}for(var n=0;n<ot.length;n++){var s=ot[n];e[s]!=null&&(a[s]=e[s])}}function Du(t,e,a,n){if(a){var o=t.style,i;if(o){var r=a.transition,s=e.transition;if(r&&!Oe(r)){var l=Da(r);!i&&(i=n.style={});for(var u=0;u<l.length;u++){var c=l[u],d=o[c];i[c]=d}}else if(t.getAnimationStyleProps&&(Oe(s)||Oe(r)||ue(s,"style")>=0)){var f=t.getAnimationStyleProps(),h=f?f.style:null;if(h){!i&&(i=n.style={});for(var p=He(a),u=0;u<p.length;u++){var c=p[u];if(h[c]){var d=o[c];i[c]=d}}}}}}}function Lu(t,e){return $i(t)?t!==e:t!=null&&isFinite(t)}var qo=Ae(),ku=["percent","easing","shape","style","extra"];function Iu(t){t.stopAnimation("keyframe"),t.attr(qo(t))}function fa(t,e,a){if(!(!a.isAnimationEnabled()||!e)){if(G(e)){D(e,function(s){fa(t,s,a)});return}var n=e.keyframes,o=e.duration;if(a&&o==null){var i=_o("enter",a,0);o=i&&i.duration}if(!(!n||!o)){var r=qo(t);D(_t,function(s){if(!(s&&!t[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),D(n,function(u){var c=t.animators,d=s?u[s]:u;if(d){var f=He(d);if(s||(f=wt(f,function(y){return ue(ku,y)<0})),!!f.length){l||(l=t.animate(s,e.loop,!0),l.scope="keyframe");for(var h=0;h<c.length;h++)c[h]!==l&&c[h].targetName===l.targetName&&c[h].stopTracks(f);s&&(r[s]=r[s]||{});var p=s?r[s]:r;D(f,function(y){p[y]=((s?t[s]:t)||{})[y]}),l.whenWithKeys(o*u.percent,d,f,u.easing)}}}),l&&l.delay(e.delay||0).duration(o).start(e.easing)}})}}}var Ou=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,n,o){var i=Fi(a);t.prototype.init.apply(this,arguments),kn(a,i)},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),kn(this.option,a)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(st);function kn(t,e){var a=t.cellSize,n;G(a)?n=a:n=t.cellSize=[a,a],n.length===1&&(n[1]=n[0]);var o=Y([0,1],function(i){return Wi(e,i)&&(n[i]="auto"),n[i]!=null&&n[i]!=="auto"});bo(t,e,{type:"box",ignoreSize:o})}const Mu=Ou;var Bu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,n,o){var i=this.group;i.removeAll();var r=a.coordinateSystem,s=r.getRangeInfo(),l=r.getOrient(),u=n.getLocaleModel();this._renderDayRect(a,s,i),this._renderLines(a,s,l,i),this._renderYearText(a,s,l,i),this._renderMonthText(a,u,l,i),this._renderWeekText(a,u,s,l,i)},e.prototype._renderDayRect=function(a,n,o){for(var i=a.coordinateSystem,r=a.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=n.start.time;u<=n.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new na({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:r});o.add(d)}},e.prototype._renderLines=function(a,n,o,i){var r=this,s=a.coordinateSystem,l=a.getModel(["splitLine","lineStyle"]).getLineStyle(),u=a.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=n.start,f=0;d.time<=n.end.time;f++){p(d.formatedDate),f===0&&(d=s.getDateInfo(n.start.y+"-"+n.start.m));var h=d.date;h.setMonth(h.getMonth()+1),d=s.getDateInfo(h)}p(s.getNextNDay(n.end.time,1).formatedDate);function p(y){r._firstDayOfMonth.push(s.getDateInfo(y)),r._firstDayPoints.push(s.dataToRect([y],!1).tl);var _=r._getLinePointsOfOneWeek(a,y,o);r._tlpoints.push(_[0]),r._blpoints.push(_[_.length-1]),u&&r._drawSplitline(_,l,i)}u&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,c,o),l,i),u&&this._drawSplitline(r._getEdgesPoints(r._blpoints,c,o),l,i)},e.prototype._getEdgesPoints=function(a,n,o){var i=[a[0].slice(),a[a.length-1].slice()],r=o==="horizontal"?0:1;return i[0][r]=i[0][r]-n/2,i[1][r]=i[1][r]+n/2,i},e.prototype._drawSplitline=function(a,n,o){var i=new vo({z2:20,shape:{points:a},style:n});o.add(i)},e.prototype._getLinePointsOfOneWeek=function(a,n,o){for(var i=a.coordinateSystem,r=i.getDateInfo(n),s=[],l=0;l<7;l++){var u=i.getNextNDay(r.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[o==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(a,n){return Ce(a)&&a?Gi(a,n):$e(a)?a(n):n.nameMap},e.prototype._yearTextPositionControl=function(a,n,o,i,r){var s=n[0],l=n[1],u=["center","bottom"];i==="bottom"?(l+=r,u=["center","top"]):i==="left"?s-=r:i==="right"?(s+=r,u=["center","top"]):l-=r;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(a,n,o,i){var r=a.getModel("yearLabel");if(r.get("show")){var s=r.get("margin"),l=r.get("position");l||(l=o!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,f=o==="horizontal"?0:1,h={top:[c,u[f][1]],bottom:[c,u[1-f][1]],left:[u[1-f][0],d],right:[u[f][0],d]},p=n.start.y;+n.end.y>+n.start.y&&(p=p+"-"+n.end.y);var y=r.get("formatter"),_={start:n.start.y,end:n.end.y,nameMap:p},b=this._formatterLabel(y,_),m=new be({z2:30,style:ze(r,{text:b})});m.attr(this._yearTextPositionControl(m,h[l],o,l,s)),i.add(m)}},e.prototype._monthTextPositionControl=function(a,n,o,i,r){var s="left",l="top",u=a[0],c=a[1];return o==="horizontal"?(c=c+r,n&&(s="center"),i==="start"&&(l="bottom")):(u=u+r,n&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(a,n,o,i){var r=a.getModel("monthLabel");if(r.get("show")){var s=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),c=r.get("align"),d=[this._tlpoints,this._blpoints];(!s||Ce(s))&&(s&&(n=Qa(s)||n),s=n.get(["time","monthAbbr"])||[]);var f=u==="start"?0:1,h=o==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",y=0;y<d[f].length-1;y++){var _=d[f][y].slice(),b=this._firstDayOfMonth[y];if(p){var m=this._firstDayPoints[y];_[h]=(m[h]+d[0][y+1][h])/2}var g=r.get("formatter"),v=s[+b.m-1],x={yyyy:b.y,yy:(b.y+"").slice(2),MM:b.m,M:+b.m,nameMap:v},S=this._formatterLabel(g,x),C=new be({z2:30,style:X(ze(r,{text:S}),this._monthTextPositionControl(_,p,o,u,l))});i.add(C)}}},e.prototype._weekTextPositionControl=function(a,n,o,i,r){var s="center",l="middle",u=a[0],c=a[1],d=o==="start";return n==="horizontal"?(u=u+i+(d?1:-1)*r[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*r[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(a,n,o,i,r){var s=a.getModel("dayLabel");if(s.get("show")){var l=a.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),f=l.getFirstDayOfWeek();if(!c||Ce(c)){c&&(n=Qa(c)||n);var h=n.get(["time","dayOfWeekShort"]);c=h||Y(n.get(["time","dayOfWeekAbbr"]),function(x){return x[0]})}var p=l.getNextNDay(o.end.time,7-o.lweek).time,y=[l.getCellWidth(),l.getCellHeight()];d=Se(d,Math.min(y[1],y[0])),u==="start"&&(p=l.getNextNDay(o.start.time,-(7+o.fweek)).time,d=-d);for(var _=0;_<7;_++){var b=l.getNextNDay(p,_),m=l.dataToRect([b.time],!1).center,g=_;g=Math.abs((_+f)%7);var v=new be({z2:30,style:X(ze(s,{text:c[g]}),this._weekTextPositionControl(m,i,u,d,y))});r.add(v)}}},e.type="calendar",e}(lt);const Vu=Bu;var Zt=864e5,Eu=function(){function t(e,a,n){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(e){e=Ui(e);var a=e.getFullYear(),n=e.getMonth()+1,o=n<10?"0"+n:""+n,i=e.getDate(),r=i<10?"0"+i:""+i,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:a+"",m:o,d:r,day:s,time:e.getTime(),formatedDate:a+"-"+o+"-"+r,date:e}},t.prototype.getNextNDay=function(e,a){return a=a||0,a===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+a),this.getDateInfo(e))},t.prototype.update=function(e,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];D([0,1],function(d){c(i,d)&&(r[o[d]]=i[d]*s[d])});var l={width:a.getWidth(),height:a.getHeight()},u=this._rect=xo(r,l);D([0,1],function(d){c(i,d)||(i[d]=u[o[d]]/s[d])});function c(d,f){return d[f]!=null&&d[f]!=="auto"}this._sw=i[0],this._sh=i[1]},t.prototype.dataToPoint=function(e,a){G(e)&&(e=e[0]),a==null&&(a=!0);var n=this.getDateInfo(e),o=this._rangeInfo,i=n.formatedDate;if(a&&!(n.time>=o.start.time&&n.time<o.end.time+Zt))return[NaN,NaN];var r=n.day,s=this._getRangeInfo([o.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},t.prototype.pointToData=function(e){var a=this.pointToDate(e);return a&&a.time},t.prototype.dataToRect=function(e,a){var n=this.dataToPoint(e,a);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(e){var a=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,a-1,o):this._getDateByWeeksAndDay(a,n-1,o)},t.prototype.convertToPixel=function(e,a,n){var o=In(a);return o===this?o.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,a,n){var o=In(a);return o===this?o.pointToData(n):null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var e=this._model.get("range"),a;if(G(e)&&e.length===1&&(e=e[0]),G(e))a=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(a=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),i=o.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);a=[o.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(a=[n,n])}if(!a)return e;var s=this._getRangeInfo(a);return s.start.time>s.end.time&&a.reverse(),a},t.prototype._getRangeInfo=function(e){var a=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],n;a[0].time>a[1].time&&(n=!0,a.reverse());var o=Math.floor(a[1].time/Zt)-Math.floor(a[0].time/Zt)+1,i=new Date(a[0].time),r=i.getDate(),s=a[1].date.getDate();i.setDate(r+o-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-a[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-a[1].time)*u>0;)o-=u,i.setDate(l-u);var c=Math.floor((o+a[0].day+6)/7),d=n?-c+1:c-1;return n&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:o,weeks:c,nthWeek:d,fweek:a[0].day,lweek:a[1].day}},t.prototype._getDateByWeeksAndDay=function(e,a,n){var o=this._getRangeInfo(n);if(e>o.weeks||e===0&&a<o.fweek||e===o.weeks&&a>o.lweek)return null;var i=(e-1)*7-o.fweek+a,r=new Date(o.start.time);return r.setDate(+o.start.d+i),this.getDateInfo(r)},t.create=function(e,a){var n=[];return e.eachComponent("calendar",function(o){var i=new t(o);n.push(i),o.coordinateSystem=i}),e.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},t.dimensions=["time","value"],t}();function In(t){var e=t.calendarModel,a=t.seriesModel,n=e?e.coordinateSystem:a?a.coordinateSystem:null;return n}const Nu=Eu;function zu(t){t.registerComponentModel(Mu),t.registerComponentView(Vu),t.registerCoordinateSystem("calendar",Nu)}function Ru(t,e){var a=t.existing;if(e.id=t.keyInfo.id,!e.type&&a&&(e.type=a.type),e.parentId==null){var n=e.parentOption;n?e.parentId=n.id:a&&(e.parentId=a.parentId)}e.parentOption=null}function On(t,e){var a;return D(e,function(n){t[n]!=null&&t[n]!=="auto"&&(a=!0)}),a}function $u(t,e,a){var n=X({},a),o=t[e],i=a.$action||"merge";i==="merge"?o?(le(o,n,!0),bo(o,n,{ignoreSize:!0}),Hi(a,o),ct(a,o),ct(a,o,"shape"),ct(a,o,"style"),ct(a,o,"extra"),a.clipPath=o.clipPath):t[e]=n:i==="replace"?t[e]=n:i==="remove"&&o&&(t[e]=null)}var Xo=["transition","enterFrom","leaveTo"],Fu=Xo.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function ct(t,e,a){if(a&&(!t[a]&&e[a]&&(t[a]={}),t=t[a],e=e[a]),!(!t||!e))for(var n=a?Xo:Fu,o=0;o<n.length;o++){var i=n[o];t[i]==null&&e[i]!=null&&(t[i]=e[i])}}function Wu(t,e){if(t&&(t.hv=e.hv=[On(e,["left","right"]),On(e,["top","bottom"])],t.type==="group")){var a=t,n=e;a.width==null&&(a.width=n.width=0),a.height==null&&(a.height=n.height=0)}}var Gu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.preventAutoZ=!0,a}return e.prototype.mergeOption=function(a,n){var o=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,a,n),this.option.elements=o},e.prototype.optionUpdated=function(a,n){var o=this.option,i=(n?o:a).elements,r=o.elements=n?[]:o.elements,s=[];this._flatten(i,s,null);var l=Zi(r,s,"normalMerge"),u=this._elOptionsToUpdate=[];D(l,function(c,d){var f=c.newOption;f&&(u.push(f),Ru(c,f),$u(r,d,f),Wu(r[d],f))},this),o.elements=wt(r,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(a,n,o){D(a,function(i){if(i){o&&(i.parentOption=o),n.push(i);var r=i.children;r&&r.length&&this._flatten(r,n,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},e.type="graphic",e.defaultOption={elements:[]},e}(st),Mn={path:null,compoundPath:null,group:we,image:qi,text:be},ee=Ae(),Uu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this._elMap=yt()},e.prototype.render=function(a,n,o){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,o)},e.prototype._updateElements=function(a){var n=a.useElOptionsToUpdate();if(n){var o=this._elMap,i=this.group,r=a.get("z"),s=a.get("zlevel");D(n,function(l){var u=tt(l.id,null),c=u!=null?o.get(u):null,d=tt(l.parentId,null),f=d!=null?o.get(d):i,h=l.type,p=l.style;h==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var y=l.textContent,_=l.textConfig;if(p&&yu(p,h,!!_,!!y)){var b=_u(p,h,!0);!_&&b.textConfig&&(_=l.textConfig=b.textConfig),!y&&b.textContent&&(y=b.textContent)}var m=Zu(l),g=l.$action||"merge",v=g==="merge",x=g==="replace";if(v){var S=!c,C=c;S?C=Bn(u,f,l.type,o):(C&&(ee(C).isNew=!1),Iu(C)),C&&(Ut(C,m,a,{isInit:S}),Vn(C,l,r,s))}else if(x){mt(c,l,o,a);var T=Bn(u,f,l.type,o);T&&(Ut(T,m,a,{isInit:!0}),Vn(T,l,r,s))}else g==="remove"&&(Ko(c,l),mt(c,l,o,a));var A=o.get(u);if(A&&y)if(v){var I=A.getTextContent();I?I.attr(y):A.setTextContent(new be(y))}else x&&A.setTextContent(new be(y));if(A){var P=l.clipPath;if(P){var L=P.type,E=void 0,S=!1;if(v){var U=A.getClipPath();S=!U||ee(U).type!==L,E=S?pa(L):U}else x&&(S=!0,E=pa(L));A.setClipPath(E),Ut(E,P,a,{isInit:S}),fa(E,P.keyframeAnimation,a)}var j=ee(A);A.setTextConfig(_),j.option=l,Hu(A,a,l),So({el:A,componentModel:a,itemName:A.name,itemTooltipOption:l.tooltip}),fa(A,l.keyframeAnimation,a)}})}},e.prototype._relocate=function(a,n){for(var o=a.option.elements,i=this.group,r=this._elMap,s=n.getWidth(),l=n.getHeight(),u=["x","y"],c=0;c<o.length;c++){var d=o[c],f=tt(d.id,null),h=f!=null?r.get(f):null;if(!(!h||!h.isGroup)){var p=h.parent,y=p===i,_=ee(h),b=ee(p);_.width=Se(_.option.width,y?s:b.width)||0,_.height=Se(_.option.height,y?l:b.height)||0}}for(var c=o.length-1;c>=0;c--){var d=o[c],f=tt(d.id,null),h=f!=null?r.get(f):null;if(h){var p=h.parent,b=ee(p),m=p===i?{width:s,height:l}:{width:b.width,height:b.height},g={},v=ji(h,d,m,null,{hv:d.hv,boundingMode:d.bounding},g);if(!ee(h).isNew&&v){for(var x=d.transition,S={},C=0;C<u.length;C++){var T=u[C],A=g[T];x&&(Oe(x)||ue(x,T)>=0)?S[T]=A:h[T]=A}wa(h,S,a,0)}else h.attr(g)}}},e.prototype._clear=function(){var a=this,n=this._elMap;n.each(function(o){mt(o,ee(o).option,n,a._lastGraphicModel)}),this._elMap=yt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(lt);function pa(t){var e=B(Mn,t)?Mn[t]:Yi(t),a=new e({});return ee(a).type=t,a}function Bn(t,e,a,n){var o=pa(a);return e.add(o),n.set(t,o),ee(o).id=t,ee(o).isNew=!0,o}function mt(t,e,a,n){var o=t&&t.parent;o&&(t.type==="group"&&t.traverse(function(i){mt(i,e,a,n)}),bu(t,e,n),a.removeKey(ee(t).id))}function Vn(t,e,a,n){t.isGroup||D([["cursor",yo.prototype.cursor],["zlevel",n||0],["z",a||0],["z2",0]],function(o){var i=o[0];B(e,i)?t[i]=xe(e[i],o[1]):t[i]==null&&(t[i]=o[1])}),D(He(e),function(o){if(o.indexOf("on")===0){var i=e[o];t[o]=$e(i)?i:null}}),B(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function Zu(t){return t=X({},t),D(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Ki),function(e){delete t[e]}),t}function Hu(t,e,a){var n=Re(t).eventData;!t.silent&&!t.ignore&&!n&&(n=Re(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),n&&(n.info=a.info)}function ju(t){t.registerComponentModel(Gu),t.registerComponentView(Uu),t.registerPreprocessor(function(e){var a=e.graphic;G(a)?!a[0]||!a[0].elements?e.graphic=[{elements:a}]:e.graphic=[e.graphic[0]]:a&&!a.elements&&(e.graphic=[{elements:[a]}])})}var Yu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}(Rr);const Ku=Yu;var qu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="dataZoom.select",e}($r);const Xu=qu;function Ju(t){t.registerComponentModel(Ku),t.registerComponentView(Xu),Fr(t)}var se=function(){function t(){}return t}(),Jo={};function Qe(t,e){Jo[t]=e}function Qo(t){return Jo[t]}var Qu=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;D(this.option.feature,function(n,o){var i=Qo(o);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(a)),le(n,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(st);const ec=Qu;var tc=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,n,o,i){var r=this.group;if(r.removeAll(),!a.get("show"))return;var s=+a.get("itemSize"),l=a.get("orient")==="vertical",u=a.get("feature")||{},c=this._features||(this._features={}),d=[];D(u,function(p,y){d.push(y)}),new ho(this._featureNames||[],d).add(f).update(f).remove(K(f,null)).execute(),this._featureNames=d;function f(p,y){var _=d[p],b=d[y],m=u[_],g=new Xi(m,a,a.ecModel),v;if(i&&i.newTitle!=null&&i.featureName===_&&(m.title=i.newTitle),_&&!b){if(ac(_))v={onclick:g.option.onclick,featureName:_};else{var x=Qo(_);if(!x)return;v=new x}c[_]=v}else if(v=c[b],!v)return;v.uid=Ji("toolbox-feature"),v.model=g,v.ecModel=n,v.api=o;var S=v instanceof se;if(!_&&b){S&&v.dispose&&v.dispose(n,o);return}if(!g.get("show")||S&&v.unusable){S&&v.remove&&v.remove(n,o);return}h(g,v,_),g.setIconStatus=function(C,T){var A=this.option,I=this.iconPaths;A.iconStatus=A.iconStatus||{},A.iconStatus[C]=T,I[C]&&(T==="emphasis"?ta:aa)(I[C])},v instanceof se&&v.render&&v.render(g,n,o,i)}function h(p,y,_){var b=p.getModel("iconStyle"),m=p.getModel(["emphasis","iconStyle"]),g=y instanceof se&&y.getIcons?y.getIcons():p.get("icon"),v=p.get("title")||{},x,S;Ce(g)?(x={},x[_]=g):x=g,Ce(v)?(S={},S[_]=v):S=v;var C=p.iconPaths={};D(x,function(T,A){var I=Co(T,{},{x:-s/2,y:-s/2,width:s,height:s});I.setStyle(b.getItemStyle());var P=I.ensureState("emphasis");P.style=m.getItemStyle();var L=new be({style:{text:S[A],align:m.get("textAlign"),borderRadius:m.get("textBorderRadius"),padding:m.get("textPadding"),fill:null,font:Qi({fontStyle:m.get("textFontStyle"),fontFamily:m.get("textFontFamily"),fontSize:m.get("textFontSize"),fontWeight:m.get("textFontWeight")},n)},ignore:!0});I.setTextContent(L),So({el:I,componentModel:a,itemName:A,formatterParamsExtra:{title:S[A]}}),I.__title=S[A],I.on("mouseover",function(){var E=m.getItemStyle(),U=l?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";L.setStyle({fill:m.get("textFill")||E.fill||E.stroke||"#000",backgroundColor:m.get("textBackgroundColor")}),I.setTextConfig({position:m.get("textPosition")||U}),L.ignore=!a.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",A])!=="emphasis"&&o.leaveEmphasis(this),L.hide()}),(p.get(["iconStatus",A])==="emphasis"?ta:aa)(I),r.add(I),I.on("click",re(y.onclick,y,n,o,A)),C[A]=I})}er(r,a,o),r.add(tr(r.getBoundingRect(),a)),l||r.eachChild(function(p){var y=p.__title,_=p.ensureState("emphasis"),b=_.textConfig||(_.textConfig={}),m=p.getTextContent(),g=m&&m.ensureState("emphasis");if(g&&!$e(g)&&y){var v=g.style||(g.style={}),x=ar(y,be.makeFont(v)),S=p.x+r.x,C=p.y+r.y+s,T=!1;C+x.height>o.getHeight()&&(b.position="top",T=!0);var A=T?-5-x.height:s+10;S+x.width/2>o.getWidth()?(b.position=["100%",A],v.align="right"):S-x.width/2<0&&(b.position=[0,A],v.align="left")}})},e.prototype.updateView=function(a,n,o,i){D(this._features,function(r){r instanceof se&&r.updateView&&r.updateView(r.model,n,o,i)})},e.prototype.remove=function(a,n){D(this._features,function(o){o instanceof se&&o.remove&&o.remove(a,n)}),this.group.removeAll()},e.prototype.dispose=function(a,n){D(this._features,function(o){o instanceof se&&o.dispose&&o.dispose(a,n)})},e.type="toolbox",e}(lt);function ac(t){return t.indexOf("my")===0}const nc=tc;var oc=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){var o=this.model,i=o.get("name")||a.get("title.0.text")||"echarts",r=n.getZr().painter.getType()==="svg",s=r?"svg":o.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:o.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),u=wo.browser;if($e(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||r){var f=l.split(","),h=f[0].indexOf("base64")>-1,p=r?decodeURIComponent(f[1]):f[1];h&&(p=window.atob(p));var y=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var _=p.length,b=new Uint8Array(_);_--;)b[_]=p.charCodeAt(_);var m=new Blob([b]);window.navigator.msSaveOrOpenBlob(m,y)}else{var g=document.createElement("iframe");document.body.appendChild(g);var v=g.contentWindow,x=v.document;x.open("image/svg+xml","replace"),x.write(p),x.close(),v.focus(),x.execCommand("SaveAs",!0,y),document.body.removeChild(g)}}else{var S=o.get("lang"),C='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(S&&S[0]||"")+'" /></body>',T=window.open();T.document.write(C),T.document.title=i}},e.getDefaultOption=function(a){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(se);const ic=oc;var En="__ec_magicType_stack__",rc=[["line","bar"],["stack"]],sc=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var a=this.model,n=a.get("icon"),o={};return D(a.get("type"),function(i){n[i]&&(o[i]=n[i])}),o},e.getDefaultOption=function(a){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(a,n,o){var i=this.model,r=i.get(["seriesIndex",o]);if(Nn[o]){var s={series:[]},l=function(d){var f=d.subType,h=d.id,p=Nn[o](f,h,d,i);p&&(Ze(p,d.option),s.series.push(p));var y=d.coordinateSystem;if(y&&y.type==="cartesian2d"&&(o==="line"||o==="bar")){var _=y.getAxesByScale("ordinal")[0];if(_){var b=_.dim,m=b+"Axis",g=d.getReferringComponents(m,nr).models[0],v=g.componentIndex;s[m]=s[m]||[];for(var x=0;x<=v;x++)s[m][v]=s[m][v]||{};s[m][v].boundaryGap=o==="bar"}}};D(rc,function(d){ue(d,o)>=0&&D(d,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(o,"emphasis"),a.eachComponent({mainType:"series",query:r==null?null:{seriesIndex:r}},l);var u,c=o;o==="stack"&&(u=le({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",o])!=="emphasis"&&(c="tiled")),n.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(se),Nn={line:function(t,e,a,n){if(t==="bar")return le({id:e,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(t,e,a,n){if(t==="line")return le({id:e,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(t,e,a,n){var o=a.get("stack")===En;if(t==="line"||t==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),le({id:e,stack:o?"":En},n.get(["option","stack"])||{},!0)}};La({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});const lc=sc;var Tt=new Array(60).join("-"),Ge="	";function uc(t){var e={},a=[],n=[];return t.eachRawSeries(function(o){var i=o.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var r=i.getBaseAxis();if(r.type==="category"){var s=r.dim+"_"+r.index;e[s]||(e[s]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},n.push({axisDim:r.dim,axisIndex:r.index})),e[s].series.push(o)}else a.push(o)}else a.push(o)}),{seriesGroupByCategoryAxis:e,other:a,meta:n}}function cc(t){var e=[];return D(t,function(a,n){var o=a.categoryAxis,i=a.valueAxis,r=i.dim,s=[" "].concat(Y(a.series,function(h){return h.name})),l=[o.model.getCategories()];D(a.series,function(h){var p=h.getRawData();l.push(h.getRawData().mapArray(p.mapDimension(r),function(y){return y}))});for(var u=[s.join(Ge)],c=0;c<l[0].length;c++){for(var d=[],f=0;f<l.length;f++)d.push(l[f][c]);u.push(d.join(Ge))}e.push(u.join(`
`))}),e.join(`

`+Tt+`

`)}function dc(t){return Y(t,function(e){var a=e.getRawData(),n=[e.name],o=[];return a.each(a.dimensions,function(){for(var i=arguments.length,r=arguments[i-1],s=a.getName(r),l=0;l<i-1;l++)o[l]=arguments[l];n.push((s?s+Ge:"")+o.join(Ge))}),n.join(`
`)}).join(`

`+Tt+`

`)}function fc(t){var e=uc(t);return{value:wt([cc(e.seriesGroupByCategoryAxis),dc(e.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+Tt+`

`),meta:e.meta}}function bt(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function pc(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Ge)>=0)return!0}var ha=new RegExp("["+Ge+"]+","g");function hc(t){for(var e=t.split(/\n+/g),a=bt(e.shift()).split(ha),n=[],o=Y(a,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var r=bt(e[i]).split(ha);n.push(r.shift());for(var s=0;s<r.length;s++)o[s]&&(o[s].data[i]=r[s])}return{series:o,categories:n}}function vc(t){for(var e=t.split(/\n+/g),a=bt(e.shift()),n=[],o=0;o<e.length;o++){var i=bt(e[o]);if(i){var r=i.split(ha),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),n[o]={name:s,value:[]},l=n[o].value):l=n[o]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);l.length===1&&(u?n[o].value=l[0]:n[o]=l[0])}}return{name:a,data:n}}function gc(t,e){var a=t.split(new RegExp(`
*`+Tt+`
*`,"g")),n={series:[]};return D(a,function(o,i){if(pc(o)){var r=hc(o),s=e[i],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:r.categories},n.series=n.series.concat(r.series))}else{var r=vc(o);n.series.push(r)}}),n}var mc=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),i=this.model;this._dom&&o.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),f=i.get("contentToOption"),h=fc(a);if($e(d)){var p=d(n.getOption());Ce(p)?u.innerHTML=p:or(p)&&u.appendChild(p)}else{c.readOnly=i.get("readOnly");var y=c.style;y.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",y.color=i.get("textColor"),y.borderColor=i.get("textareaBorderColor"),y.backgroundColor=i.get("textareaColor"),c.value=h.value,u.appendChild(c)}var _=h.meta,b=document.createElement("div");b.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",g=document.createElement("div"),v=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var x=this;function S(){o.removeChild(r),x._dom=null}en(g,"click",S),en(v,"click",function(){if(f==null&&d!=null||f!=null&&d==null){S();return}var C;try{$e(f)?C=f(u,n.getOption()):C=gc(c.value,_)}catch(T){throw S(),new Error("Data view format error "+T)}C&&n.dispatchAction({type:"changeDataView",newOption:C}),S()}),g.innerHTML=l[1],v.innerHTML=l[2],v.style.cssText=g.style.cssText=m,!i.get("readOnly")&&b.appendChild(v),b.appendChild(g),r.appendChild(s),r.appendChild(u),r.appendChild(b),u.style.height=o.clientHeight-80+"px",o.appendChild(r),this._dom=r},e.prototype.remove=function(a,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(a,n){this.remove(a,n)},e.getDefaultOption=function(a){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(se);function yc(t,e){return Y(t,function(a,n){var o=e&&e[n];if(nt(o)&&!G(o)){var i=nt(a)&&!G(a);i||(a={value:a});var r=o.name!=null&&a.name==null;return a=Ze(a,o),r&&delete a.name,a}else return a})}La({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var a=[];D(t.newOption.series,function(n){var o=e.getSeriesByName(n.name)[0];if(!o)a.push(X({type:"scatter"},n));else{var i=o.get("data");a.push({name:n.name,data:yc(n.data,i)})}}),e.mergeOption(Ze({series:a},t.newOption))});const _c=mc;var ei=D,ti=Ae();function bc(t,e){var a=$a(t);ei(e,function(n,o){for(var i=a.length-1;i>=0;i--){var r=a[i];if(r[o])break}if(i<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(s){var l=s.getPercentRange();a[0][o]={dataZoomId:o,start:l[0],end:l[1]}}}}),a.push(e)}function xc(t){var e=$a(t),a=e[e.length-1];e.length>1&&e.pop();var n={};return ei(a,function(o,i){for(var r=e.length-1;r>=0;r--)if(o=e[r][i],o){n[i]=o;break}}),n}function Sc(t){ti(t).snapshots=null}function Cc(t){return $a(t).length}function $a(t){var e=ti(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var wc=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(a,n){Sc(a),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(a){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(se);La({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});const Ac=wc;var Tc=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Pc=function(){function t(e,a,n){var o=this;this._targetInfoList=[];var i=zn(a,e);D(Dc,function(r,s){(!n||!n.include||ue(n.include,s)>=0)&&r(i,o._targetInfoList)})}return t.prototype.setOutputRanges=function(e,a){return this.matchOutputRanges(e,a,function(n,o,i){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var r=Ht[n.brushType](0,i,o);n.__rangeOffset={offset:Wn[n.brushType](r.values,n.range,[1,1]),xyMinMax:r.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,a,n){D(e,function(o){var i=this.findTargetInfo(o,a);i&&i!==!0&&D(i.coordSyses,function(r){var s=Ht[o.brushType](1,r,o.range,!0);n(o,s.values,r,a)})},this)},t.prototype.setInputRanges=function(e,a){D(e,function(n){var o=this.findTargetInfo(n,a);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var i=Ht[n.brushType](0,o.coordSys,n.coordRange),r=n.__rangeOffset;n.range=r?Wn[n.brushType](i.values,r.offset,Lc(i.xyMinMax,r.xyMinMax)):i.values}},this)},t.prototype.makePanelOpts=function(e,a){return Y(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:a?a(n):null,clipPath:Yl(o),isTargetByCursor:ql(o,e,n.coordSysModel),getLinearBrushOtherExtent:Kl(o)}})},t.prototype.controlSeries=function(e,a,n){var o=this.findTargetInfo(e,n);return o===!0||o&&ue(o.coordSyses,a.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,a){for(var n=this._targetInfoList,o=zn(a,e),i=0;i<n.length;i++){var r=n[i],s=e.panelId;if(s){if(r.panelId===s)return r}else for(var l=0;l<Rn.length;l++)if(Rn[l](o,r))return r}return!0},t}();function va(t){return t[0]>t[1]&&t.reverse(),t}function zn(t,e){return Ao(t,e,{includeMainTypes:Tc})}var Dc={grid:function(t,e){var a=t.xAxisModels,n=t.yAxisModels,o=t.gridModels,i=yt(),r={},s={};!a&&!n&&!o||(D(a,function(l){var u=l.axis.grid.model;i.set(u.id,u),r[u.id]=!0}),D(n,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),D(o,function(l){i.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];D(u.getCartesians(),function(d,f){(ue(a,d.getAxis("x").model)>=0||ue(n,d.getAxis("y").model)>=0)&&c.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:$n.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){D(t.geoModels,function(a){var n=a.coordinateSystem;e.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:n,coordSyses:[n],getPanelRect:$n.geo})})}},Rn=[function(t,e){var a=t.xAxisModel,n=t.yAxisModel,o=t.gridModel;return!o&&a&&(o=a.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===e.gridModel},function(t,e){var a=t.geoModel;return a&&a===e.geoModel}],$n={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(go(t)),e}},Ht={lineX:K(Fn,0),lineY:K(Fn,1),rect:function(t,e,a,n){var o=t?e.pointToData([a[0][0],a[1][0]],n):e.dataToPoint([a[0][0],a[1][0]],n),i=t?e.pointToData([a[0][1],a[1][1]],n):e.dataToPoint([a[0][1],a[1][1]],n),r=[va([o[0],i[0]]),va([o[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,a,n){var o=[[1/0,-1/0],[1/0,-1/0]],i=Y(a,function(r){var s=t?e.pointToData(r,n):e.dataToPoint(r,n);return o[0][0]=Math.min(o[0][0],s[0]),o[1][0]=Math.min(o[1][0],s[1]),o[0][1]=Math.max(o[0][1],s[0]),o[1][1]=Math.max(o[1][1],s[1]),s});return{values:i,xyMinMax:o}}};function Fn(t,e,a,n){var o=a.getAxis(["x","y"][t]),i=va(Y([0,1],function(s){return e?o.coordToData(o.toLocalCoord(n[s]),!0):o.toGlobalCoord(o.dataToCoord(n[s]))})),r=[];return r[t]=i,r[1-t]=[NaN,NaN],{values:i,xyMinMax:r}}var Wn={lineX:K(Gn,0),lineY:K(Gn,1),rect:function(t,e,a){return[[t[0][0]-a[0]*e[0][0],t[0][1]-a[0]*e[0][1]],[t[1][0]-a[1]*e[1][0],t[1][1]-a[1]*e[1][1]]]},polygon:function(t,e,a){return Y(t,function(n,o){return[n[0]-a[0]*e[o][0],n[1]-a[1]*e[o][1]]})}};function Gn(t,e,a,n){return[e[0]-n[t]*a[0],e[1]-n[t]*a[1]]}function Lc(t,e){var a=Un(t),n=Un(e),o=[a[0]/n[0],a[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function Un(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const ai=Pc;var ga=D,kc=rr("toolbox-dataZoom_"),Ic=function(t){V(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(a,n,o,i){this._brushController||(this._brushController=new jl(o.getZr()),this._brushController.on("brush",re(this._onBrush,this)).mount()),Bc(a,n,this,i,o),Mc(a,n)},e.prototype.onclick=function(a,n,o){Oc[o].call(this)},e.prototype.remove=function(a,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(a,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(a){var n=a.areas;if(!a.isEnd||!n.length)return;var o={},i=this.ecModel;this._brushController.updateCovers([]);var r=new ai(Fa(this.model),i,{include:["grid"]});r.matchOutputRanges(n,i,function(u,c,d){if(d.type==="cartesian2d"){var f=u.brushType;f==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[f],d,c)}}),bc(i,o),this._dispatchZoomAction(o);function s(u,c,d){var f=c.getAxis(u),h=f.model,p=l(u,h,i),y=p.findRepresentativeAxisProxy(h).getMinMaxSpan();(y.minValueSpan!=null||y.maxValueSpan!=null)&&(d=Wr(0,d.slice(),f.scale.getExtent(),0,y.minValueSpan,y.maxValueSpan)),p&&(o[p.id]={dataZoomId:p.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var f;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var p=h.getAxisModel(u,c.componentIndex);p&&(f=h)}),f}},e.prototype._dispatchZoomAction=function(a){var n=[];ga(a,function(o,i){n.push(ve(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(a){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(se),Oc={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(xc(this.ecModel))}};function Fa(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function Mc(t,e){t.setIconStatus("back",Cc(e)>1?"emphasis":"normal")}function Bc(t,e,a,n,o){var i=a._isZoomActive;n&&n.type==="takeGlobalCursor"&&(i=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),a._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var r=new ai(Fa(t),e,{include:["grid"]}),s=r.makePanelOpts(o,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}ir("dataZoom",function(t){var e=t.getComponent("toolbox",0),a=["feature","dataZoom"];if(!e||e.get(a)==null)return;var n=e.getModel(a),o=[],i=Fa(n),r=Ao(t,i);ga(r.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),ga(r.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:kc+u+d};f[c]=d,o.push(f)}return o});const Vc=Ic;function Ec(t){t.registerComponentModel(ec),t.registerComponentView(nc),Qe("saveAsImage",ic),Qe("magicType",lc),Qe("dataView",_c),Qe("dataZoom",Vc),Qe("restore",Ac),Ca(Ju)}var Nc=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.layoutMode="box",a}return e.prototype.init=function(a,n,o){this.mergeDefaultAndTheme(a,o),this._initData()},e.prototype.mergeOption=function(a){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var n=this._data.count();this.option.loop?a=(a%n+n)%n:(a>=n&&(a=n-1),a<0&&(a=0)),this.option.currentIndex=a},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(a){this.option.autoPlay=!!a},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var a=this.option,n=a.data||[],o=a.axisType,i=this._names=[],r;o==="category"?(r=[],D(n,function(u,c){var d=tt(sr(u),""),f;nt(u)?(f=ve(u),f.value=c):f=c,r.push(f),i.push(d)})):r=n;var s={category:"ordinal",time:"time",value:"number"}[o]||"number",l=this._data=new gt([{name:"value",type:s}],this);l.initData(r,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(st);const Zn=Nc;var ni=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline.slider",e.defaultOption=lr(Zn.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Zn);Pa(ni,To.prototype);const zc=ni;var Rc=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.type="timeline",e}(lt);const $c=Rc;var Fc=function(t){V(e,t);function e(a,n,o,i){var r=t.call(this,a,n,o)||this;return r.type=i||"value",r}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(Gr);const Wc=Fc;var jt=Math.PI,Hn=Ae(),Gc=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(a,n){this.api=n},e.prototype.render=function(a,n,o){if(this.model=a,this.api=o,this.ecModel=n,this.group.removeAll(),a.get("show",!0)){var i=this._layout(a,o),r=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,a);a.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return oa("nameValue",{noName:!0,value:c})},D(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,r,l,a)},this),this._renderAxisLabel(i,s,l,a),this._position(i,a)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(a,n){var o=a.get(["label","position"]),i=a.get("orient"),r=Zc(a,n),s;o==null||o==="auto"?s=i==="horizontal"?r.y+r.height/2<n.getHeight()/2?"-":"+":r.x+r.width/2<n.getWidth()/2?"+":"-":Ce(o)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][o]:s=o;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:jt/2},d=i==="vertical"?r.height:r.width,f=a.getModel("controlStyle"),h=f.get("show",!0),p=h?f.get("itemSize"):0,y=h?f.get("itemGap"):0,_=p+y,b=a.get(["label","rotate"])||0;b=b*jt/180;var m,g,v,x=f.get("position",!0),S=h&&f.get("showPlayBtn",!0),C=h&&f.get("showPrevBtn",!0),T=h&&f.get("showNextBtn",!0),A=0,I=d;x==="left"||x==="bottom"?(S&&(m=[0,0],A+=_),C&&(g=[A,0],A+=_),T&&(v=[I-p,0],I-=_)):(S&&(m=[I-p,0],I-=_),C&&(g=[0,0],A+=_),T&&(v=[I-p,0],I-=_));var P=[A,I];return a.get("inverse")&&P.reverse(),{viewRect:r,mainLength:d,orient:i,rotation:c[i],labelRotation:b,labelPosOpt:s,labelAlign:a.get(["label","align"])||l[i],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||u[i],playPosition:m,prevBtnPosition:g,nextBtnPosition:v,axisExtent:P,controlSize:p,controlGap:y}},e.prototype._position=function(a,n){var o=this._mainGroup,i=this._labelGroup,r=a.viewRect;if(a.orient==="vertical"){var s=gr(),l=r.x,u=r.y+r.height;tn(s,s,[-l,-u]),ur(s,s,-jt/2),tn(s,s,[l,u]),r=r.clone(),r.applyTransform(s)}var c=m(r),d=m(o.getBoundingRect()),f=m(i.getBoundingRect()),h=[o.x,o.y],p=[i.x,i.y];p[0]=h[0]=c[0][0];var y=a.labelPosOpt;if(y==null||Ce(y)){var _=y==="+"?0:1;g(h,d,c,1,_),g(p,f,c,1,1-_)}else{var _=y>=0?0:1;g(h,d,c,1,_),p[1]=h[1]+y}o.setPosition(h),i.setPosition(p),o.rotation=i.rotation=a.rotation,b(o),b(i);function b(v){v.originX=c[0][0]-v.x,v.originY=c[1][0]-v.y}function m(v){return[[v.x,v.x+v.width],[v.y,v.y+v.height]]}function g(v,x,S,C,T){v[C]+=S[C][T]-x[C][T]}},e.prototype._createAxis=function(a,n){var o=n.getData(),i=n.get("axisType"),r=Uc(n,i);r.getTicks=function(){return o.mapArray(["value"],function(u){return{value:u}})};var s=o.getDataExtent("value");r.setExtent(s[0],s[1]),r.calcNiceTicks();var l=new Wc("value",r,a.axisExtent,i);return l.model=n,l},e.prototype._createGroup=function(a){var n=this[a]=new we;return this.group.add(n),n},e.prototype._renderAxisLine=function(a,n,o,i){var r=o.getExtent();if(i.get(["lineStyle","show"])){var s=new ea({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:X({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new ea({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Ze({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},e.prototype._renderAxisTick=function(a,n,o,i){var r=this,s=i.getData(),l=o.scale.getTicks();this._tickSymbols=[],D(l,function(u){var c=o.dataToCoord(u.value),d=s.getItemModel(u.value),f=d.getModel("itemStyle"),h=d.getModel(["emphasis","itemStyle"]),p=d.getModel(["progress","itemStyle"]),y={x:c,y:0,onclick:re(r._changeTimeline,r,u.value)},_=jn(d,f,n,y);_.ensureState("emphasis").style=h.getItemStyle(),_.ensureState("progress").style=p.getItemStyle(),Mt(_);var b=Re(_);d.get("tooltip")?(b.dataIndex=u.value,b.dataModel=i):b.dataIndex=b.dataModel=null,r._tickSymbols.push(_)})},e.prototype._renderAxisLabel=function(a,n,o,i){var r=this,s=o.getLabelModel();if(s.get("show")){var l=i.getData(),u=o.getViewLabels();this._tickLabels=[],D(u,function(c){var d=c.tickValue,f=l.getItemModel(d),h=f.getModel("label"),p=f.getModel(["emphasis","label"]),y=f.getModel(["progress","label"]),_=o.dataToCoord(c.tickValue),b=new be({x:_,y:0,rotation:a.labelRotation-a.rotation,onclick:re(r._changeTimeline,r,d),silent:!1,style:ze(h,{text:c.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});b.ensureState("emphasis").style=ze(p),b.ensureState("progress").style=ze(y),n.add(b),Mt(b),Hn(b).dataIndex=d,r._tickLabels.push(b)})}},e.prototype._renderControl=function(a,n,o,i){var r=a.controlSize,s=a.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);f(a.nextBtnPosition,"next",re(this._changeTimeline,this,d?"-":"+")),f(a.prevBtnPosition,"prev",re(this._changeTimeline,this,d?"+":"-")),f(a.playPosition,c?"stop":"play",re(this._handlePlayClick,this,!c),!0);function f(h,p,y,_){if(h){var b=cr(xe(i.get(["controlStyle",p+"BtnSize"]),r),r),m=[0,-b/2,b,b],g=Hc(i,p+"Icon",m,{x:h[0],y:h[1],originX:r/2,originY:0,rotation:_?-s:0,rectHover:!0,style:l,onclick:y});g.ensureState("emphasis").style=u,n.add(g),Mt(g)}}},e.prototype._renderCurrentPointer=function(a,n,o,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=re(u._handlePointerDrag,u),d.ondragend=re(u._handlePointerDragend,u),Yn(d,u._progressLine,s,o,i,!0)},onUpdate:function(d){Yn(d,u._progressLine,s,o,i)}};this._currentPointer=jn(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},e.prototype._handlePointerDrag=function(a,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},e.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},e.prototype._pointerChangeTimeline=function(a,n){var o=this._toAxisCoord(a)[0],i=this._axis,r=dr(i.getExtent().slice());o>r[1]&&(o=r[1]),o<r[0]&&(o=r[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=o,s.dirty());var l=this._findNearestTick(o),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=a.model;a._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(a){var n=this._mainGroup.getLocalTransform();return fr(a,n,!0)},e.prototype._findNearestTick=function(a){var n=this.model.getData(),o=1/0,i,r=this._axis;return n.each(["value"],function(s,l){var u=r.dataToCoord(s),c=Math.abs(u-a);c<o&&(o=c,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(a){var n=this.model.getCurrentIndex();a==="+"?a=n+1:a==="-"&&(a=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},e.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",i<a);if(o)for(var i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",Hn(o[i]).dataIndex<=a)},e.type="timeline.slider",e}($c);function Uc(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new vr({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new hr({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new pr}}function Zc(t,e){return xo(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function Hc(t,e,a,n){var o=n.style,i=Co(t.get(["controlStyle",e]),n||{},new xa(a[0],a[1],a[2],a[3]));return o&&i.setStyle(o),i}function jn(t,e,a,n,o,i){var r=e.get("color");if(o)o.setColor(r),a.add(o),i&&i.onUpdate(o);else{var s=t.get("symbol");o=Sa(s,-1,-1,2,2,r),o.setStyle("strokeNoScale",!0),a.add(o),i&&i.onCreate(o)}var l=e.getItemStyle(["color"]);o.setStyle(l),n=le({rectHover:!0,z2:100},n,!0);var u=Aa(t.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var c=Ta(t.get("symbolOffset"),u);c&&(n.x=(n.x||0)+c[0],n.y=(n.y||0)+c[1]);var d=t.get("symbolRotate");return n.rotation=(d||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function Yn(t,e,a,n,o,i){if(!t.dragging){var r=o.getModel("checkpointStyle"),s=n.dataToCoord(o.getData().get("value",a));if(i||!r.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}const jc=Gc;function Yc(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,a,n){var o=a.getComponent("timeline");return o&&e.currentIndex!=null&&(o.setCurrentIndex(e.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),a.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),Ze({currentIndex:o.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,a){var n=a.getComponent("timeline");n&&e.playState!=null&&n.setPlayState(e.playState)})}function Kc(t){var e=t&&t.timeline;G(e)||(e=e?[e]:[]),D(e,function(a){a&&qc(a)})}function qc(t){var e=t.type,a={number:"value",time:"time"};if(a[e]&&(t.axisType=a[e],delete t.type),Kn(t),Ie(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});Ie(n,"position")||(n.position=t.controlPosition),n.position==="none"&&!Ie(n,"show")&&(n.show=!1,delete n.position),delete t.controlPosition}D(t.data||[],function(o){nt(o)&&!G(o)&&(!Ie(o,"value")&&Ie(o,"name")&&(o.value=o.name),Kn(o))})}function Kn(t){var e=t.itemStyle||(t.itemStyle={}),a=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},o=n.normal||(n.normal={}),i={normal:1,emphasis:1};D(n,function(r,s){!i[s]&&!Ie(o,s)&&(o[s]=r)}),a.label&&!Ie(n,"emphasis")&&(n.emphasis=a.label,delete a.label)}function Ie(t,e){return t.hasOwnProperty(e)}function Xc(t){t.registerComponentModel(zc),t.registerComponentView(jc),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),Yc(t),t.registerPreprocessor(Kc)}function Jc(t,e){if(!t)return!1;for(var a=G(t)?t:[t],n=0;n<a.length;n++)if(a[n]&&a[n][e])return!0;return!1}function dt(t){mr(t,"label",["show"])}var ft=Ae(),oi=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,n,o){this.mergeDefaultAndTheme(a,o),this._mergeOption(a,o,!1,!0)},e.prototype.isAnimationEnabled=function(){if(wo.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,n){this._mergeOption(a,n,!1,!1)},e.prototype._mergeOption=function(a,n,o,i){var r=this.mainType;o||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=ft(s)[r];if(!l||!l.data){ft(s)[r]=null;return}u?u._mergeOption(l,n,!0):(i&&dt(l),D(l.data,function(c){c instanceof Array?(dt(c[0]),dt(c[1])):dt(c)}),u=this.createMarkerModelFromSeries(l,this,n),X(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),ft(s)[r]=u},this)},e.prototype.formatTooltip=function(a,n,o){var i=this.getData(),r=this.getRawValue(a),s=i.getName(a);return oa("section",{header:this.name,blocks:[oa("nameValue",{name:s,value:r,noName:!s,noValue:r==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.getMarkerModelFromSeries=function(a,n){return ft(a)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(st);Pa(oi,To.prototype);const xt=oi;function Qc(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function ed(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function pt(t,e,a,n,o,i){var r=[],s=yr(e,n),l=s?e.getCalculationInfo("stackResultDimension"):n,u=Wa(e,l,t),c=e.indicesOfNearest(l,u)[0];r[o]=e.get(a,c),r[i]=e.get(l,c);var d=e.get(n,c),f=_r(e.get(n,c));return f=Math.min(f,20),f>=0&&(r[i]=+r[i].toFixed(f)),[r,d]}var Yt={min:K(pt,"min"),max:K(pt,"max"),average:K(pt,"average"),median:K(pt,"median")};function qn(t,e){if(e){var a=t.getData(),n=t.coordinateSystem,o=n&&n.dimensions;if(!ed(e)&&!G(e.coord)&&G(o)){var i=ii(e,a,n,t);if(e=ve(e),e.type&&Yt[e.type]&&i.baseAxis&&i.valueAxis){var r=ue(o,i.baseAxis.dim),s=ue(o,i.valueAxis.dim),l=Yt[e.type](a,i.baseDataDim,i.valueDataDim,r,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!G(o))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)Yt[u[c]]&&(u[c]=Wa(a,a.mapDimension(o[c]),u[c]));return e}}function ii(t,e,a,n){var o={};return t.valueIndex!=null||t.valueDim!=null?(o.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,o.valueAxis=a.getAxis(td(n,o.valueDataDim)),o.baseAxis=a.getOtherAxis(o.valueAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=a.getOtherAxis(o.baseAxis),o.baseDataDim=e.mapDimension(o.baseAxis.dim),o.valueDataDim=e.mapDimension(o.valueAxis.dim)),o}function td(t,e){var a=t.getData().getDimensionInfo(e);return a&&a.coordDim}function Xn(t,e){return t&&t.containData&&e.coord&&!Qc(e)?t.containData(e.coord):!0}function ad(t,e){return t?function(a,n,o,i){var r=i<2?a.coord&&a.coord[i]:a.value;return an(r,e[i])}:function(a,n,o,i){return an(a.value,e[i])}}function Wa(t,e,a){if(a==="average"){var n=0,o=0;return t.each(e,function(i,r){isNaN(i)||(n+=i,o++)}),n/o}else return a==="median"?t.getMedian(e):t.getDataExtent(e)[a==="max"?1:0]}var Kt=Ae(),nd=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=yt()},e.prototype.render=function(a,n,o){var i=this,r=this.markerGroupMap;r.each(function(s){Kt(s).keep=!1}),n.eachSeries(function(s){var l=xt.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,n,o)}),r.each(function(s){!Kt(s).keep&&i.group.remove(s.group)})},e.prototype.markKeep=function(a){Kt(a).keep=!0},e.prototype.toggleBlurSeries=function(a,n){var o=this;D(a,function(i){var r=xt.getMarkerModelFromSeries(i,o.type);if(r){var s=r.getData();s.eachItemGraphicEl(function(l){l&&(n?br(l):xr(l))})}})},e.type="marker",e}(lt);const od=nd;var id=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,n,o){return new e(a,n,o)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(xt);const rd=id;var ht=Ae(),sd=function(t,e,a,n){var o=t.getData(),i;if(G(n))i=n;else{var r=n.type;if(r==="min"||r==="max"||r==="average"||r==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=e.getAxis(n.yAxis!=null?"y":"x"),l=Cr(n.yAxis,n.xAxis);else{var u=ii(n,o,e,t);s=u.valueAxis;var c=wr(o,u.valueDataDim);l=Wa(o,c,r)}var d=s.dim==="x"?0:1,f=1-d,h=ve(n),p={coord:[]};h.type=null,h.coord=[],h.coord[f]=-1/0,p.coord[f]=1/0;var y=a.get("precision");y>=0&&Ar(l)&&(l=+l.toFixed(Math.min(y,20))),h.coord[d]=p.coord[d]=l,i=[h,p,{type:r,valueIndex:n.valueIndex,value:l}]}else i=[]}var _=[qn(t,i[0]),qn(t,i[1]),X({},i[2])];return _[2].type=_[2].type||null,le(_[2],_[0]),le(_[2],_[1]),_};function St(t){return!isNaN(t)&&!isFinite(t)}function Jn(t,e,a,n){var o=1-t,i=n.dimensions[t];return St(e[o])&&St(a[o])&&e[t]===a[t]&&n.getAxis(i).containData(e[t])}function ld(t,e){if(t.type==="cartesian2d"){var a=e[0].coord,n=e[1].coord;if(a&&n&&(Jn(1,a,n,t)||Jn(0,a,n,t)))return!0}return Xn(t,e[0])&&Xn(t,e[1])}function qt(t,e,a,n,o){var i=n.coordinateSystem,r=t.getItemModel(e),s,l=Se(r.get("x"),o.getWidth()),u=Se(r.get("y"),o.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=i.dimensions,d=t.get(c[0],e),f=t.get(c[1],e);s=i.dataToPoint([d,f])}if(Ur(i,"cartesian2d")){var h=i.getAxis("x"),p=i.getAxis("y"),c=i.dimensions;St(t.get(c[0],e))?s[0]=h.toGlobalCoord(h.getExtent()[a?0:1]):St(t.get(c[1],e))&&(s[1]=p.toGlobalCoord(p.getExtent()[a?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}t.setItemLayout(e,s)}var ud=function(t){V(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,n,o){n.eachSeries(function(i){var r=xt.getMarkerModelFromSeries(i,"markLine");if(r){var s=r.getData(),l=ht(r).from,u=ht(r).to;l.each(function(c){qt(l,c,!0,i,o),qt(u,c,!1,i,o)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(a,n,o,i){var r=a.coordinateSystem,s=a.id,l=a.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new kl);this.group.add(c.group);var d=cd(r,a,n),f=d.from,h=d.to,p=d.line;ht(n).from=f,ht(n).to=h,n.setData(p);var y=n.get("symbol"),_=n.get("symbolSize"),b=n.get("symbolRotate"),m=n.get("symbolOffset");G(y)||(y=[y,y]),G(_)||(_=[_,_]),G(b)||(b=[b,b]),G(m)||(m=[m,m]),d.from.each(function(v){g(f,v,!0),g(h,v,!1)}),p.each(function(v){var x=p.getItemModel(v).getModel("lineStyle").getLineStyle();p.setItemLayout(v,[f.getItemLayout(v),h.getItemLayout(v)]),x.stroke==null&&(x.stroke=f.getItemVisual(v,"style").fill),p.setItemVisual(v,{fromSymbolKeepAspect:f.getItemVisual(v,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(v,"symbolOffset"),fromSymbolRotate:f.getItemVisual(v,"symbolRotate"),fromSymbolSize:f.getItemVisual(v,"symbolSize"),fromSymbol:f.getItemVisual(v,"symbol"),toSymbolKeepAspect:h.getItemVisual(v,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(v,"symbolOffset"),toSymbolRotate:h.getItemVisual(v,"symbolRotate"),toSymbolSize:h.getItemVisual(v,"symbolSize"),toSymbol:h.getItemVisual(v,"symbol"),style:x})}),c.updateData(p),d.line.eachItemGraphicEl(function(v){Re(v).dataModel=n,v.traverse(function(x){Re(x).dataModel=n})});function g(v,x,S){var C=v.getItemModel(x);qt(v,x,S,a,i);var T=C.getModel("itemStyle").getItemStyle();T.fill==null&&(T.fill=Sr(l,"color")),v.setItemVisual(x,{symbolKeepAspect:C.get("symbolKeepAspect"),symbolOffset:xe(C.get("symbolOffset",!0),m[S?0:1]),symbolRotate:xe(C.get("symbolRotate",!0),b[S?0:1]),symbolSize:xe(C.get("symbolSize"),_[S?0:1]),symbol:xe(C.get("symbol",!0),y[S?0:1]),style:T})}this.markKeep(c),c.group.silent=n.get("silent")||a.get("silent")},e.type="markLine",e}(od);function cd(t,e,a){var n;t?n=Y(t&&t.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return X(X({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new gt(n,a),i=new gt(n,a),r=new gt([],a),s=Y(a.get("data"),K(sd,e,t,a));t&&(s=wt(s,K(ld,t)));var l=ad(!!t,n);return o.initData(Y(s,function(u){return u[0]}),null,l),i.initData(Y(s,function(u){return u[1]}),null,l),r.initData(Y(s,function(u){return u[2]})),r.hasItemOption=!0,{from:o,to:i,line:r}}const dd=ud;function fd(t){t.registerComponentModel(rd),t.registerComponentView(dd),t.registerPreprocessor(function(e){Jc(e.series,"markLine")&&(e.markLine=e.markLine||{})})}function pd(t,e,a){const n=gi("Shift",{events:["keydown","keyup"]}),o=Z(()=>e.value==="dark"?"white":"black"),i=W({x:0,y:0}),r=144,s=W(!0),l=W(!1),u=W(!1),c=35,d=170;function f(m){return Le(a.value,m,Oo)}function h(m){s.value&&!u.value&&b(m.offsetX,m.offsetY)}function p(m){var g,v,x,S,C,T,A,I;if(l.value)u.value?(_(),u.value=!1,(T=(C=t.value)==null?void 0:C.chart)==null||T.getZr().off("mousemove",h),(I=(A=t.value)==null?void 0:A.chart)==null||I.getZr().off("mousedown",p)):u.value=!0;else{const P=((g=t.value)==null?void 0:g.convertFromPixel({seriesIndex:0},[m.offsetX,m.offsetY]))??[0,0];P[0]=f(Number(P[0]));const L=((v=t.value)==null?void 0:v.convertToPixel({seriesIndex:0},P))??[0,0];i.value={x:L[0],y:L[1]},(S=(x=t.value)==null?void 0:x.chart)==null||S.getZr().on("mousemove",h),y()}}function y(){var m;l.value=!0,(m=t.value)==null||m.setOption({dataZoom:[{disabled:!0}],graphic:[{type:"rect",shape:{x:i.value.x,width:0,y:i.value.y,height:0},style:{fill:o.value,opacity:.1}},{type:"rect",z:5,shape:{x:i.value.x,width:d,y:i.value.y,height:c,r:5},style:{fill:"#002fff",opacity:.8},textContent:{z:10,style:{text:"0 bars - 0%",font:"14px sans-serif",fill:"white"}},textConfig:{position:"inside"}}]})}function _(){var m;l.value=!1,(m=t.value)==null||m.setOption({dataZoom:[{disabled:!1}],graphic:[{$action:"remove"},{$action:"remove"}]})}function b(m,g){var U,j,ge,F;const v=((U=t.value)==null?void 0:U.convertFromPixel({seriesIndex:0},[i.value.x,i.value.y]))??[0,0],x=((j=t.value)==null?void 0:j.convertFromPixel({seriesIndex:0},[m,g]))??[0,0],S=Number(v[1]),C=Number(x[1]),T=f(Number(v[0])),A=f(Number(x[0])),I=Math.abs(T-A),P=((ge=t.value)==null?void 0:ge.convertToPixel({seriesIndex:0},[A,0])[0])??0,L=mi(I,{units:["d","h","m"]}),E=Math.abs((S-C)/S*100).toFixed(2);(F=t.value)==null||F.setOption({graphic:[{shape:{width:P>i.value.x?-1*(i.value.x-P):P-i.value.x,height:g>i.value.y?-1*(i.value.y-g):g-i.value.y}},{shape:{x:i.value.x+(P-i.value.x)/2-d/2,y:g>i.value.y?g-(c+5):g+9},textContent:{style:{textAlign:m<i.value.x?"left":"right",text:`${I/a.value} bars (${S<C?E:"-"+E}%) 
 ${L}`}}}]}),s.value=!1,setTimeout(()=>{s.value=!0},1e3/r)}Q(()=>n.value,()=>{var m,g;n.value&&!l.value&&((g=(m=t.value)==null?void 0:m.chart)==null||g.getZr().on("mousedown",p))})}const hd={class:"chart-wrapper"},Xt="5.5%",Jt="1%",Qn=55,et=8,vd="#00ff26",gd="#00ff26",md="#faba25",yd="#faba25",_d=Ue({__name:"CandleChart",props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}},colorUp:{required:!1,type:String,default:"#12bb7b"},colorDown:{required:!1,type:String,default:"#ef5350"}},setup(t){Ca([Tr,zu,Pr,Zr,Hr,Dr,Xc,Lr,Ec,kr,jr,Yr,fd,mu,Kr,qr,bl,Ir,ju]);const e=t,a=e.colorUp,n=e.colorUp,o=e.colorDown,i=e.colorDown,r=W(),s=W({}),l=Z(()=>e.dataset?e.dataset.strategy:""),u=Z(()=>e.dataset?e.dataset.pair:""),c=Z(()=>e.dataset?e.dataset.timeframe:""),d=Z(()=>e.dataset!==null&&typeof e.dataset=="object"),f=Z(()=>e.trades.filter(m=>m.pair===u.value)),h=Z(()=>`${l.value} - ${u.value} - ${c.value}`),p=Z(()=>dl(e.plotConfig));pd(r,Ka(()=>e.theme),Ka(()=>e.dataset.timeframe_ms));function y(m=!1){var me,z,ce,ne;if(!d.value)return;(me=s.value)!=null&&me.title&&(s.value.title[0].text=h.value);const g=e.dataset.columns.slice(),v=g.findIndex(k=>k==="__date_ts"),x=g.findIndex(k=>k==="open"),S=g.findIndex(k=>k==="high"),C=g.findIndex(k=>k==="low"),T=g.findIndex(k=>k==="close"),A=g.findIndex(k=>k==="volume"),I=g.findIndex(k=>k==="_buy_signal_close"||k==="_enter_long_signal_close"),P=g.findIndex(k=>k==="_sell_signal_close"||k==="_exit_long_signal_close"),L=g.findIndex(k=>k==="_enter_short_signal_close"),E=g.findIndex(k=>k==="_exit_short_signal_close"),U="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((z=s.value)==null?void 0:z.dataZoom))if(m){const k=(1-250/e.dataset.length)*100;s.value.dataZoom.forEach((H,Ve)=>{s.value&&s.value.dataZoom&&(s.value.dataZoom[Ve].start=k)})}else s.value.dataZoom.forEach((k,H)=>{s.value&&s.value.dataZoom&&(delete s.value.dataZoom[H].start,delete s.value.dataZoom[H].end)});let j=e.heikinAshi?nl(g,e.dataset.data):e.dataset.data.slice();p.value.forEach(([k,H])=>{j=cl(g,j,k,H)});const ge=Array(j.length>0?j[j.length-2].length:0);ge[v]=j[j.length-1][v]+e.dataset.timeframe_ms*3,j.push(ge);const F={dataset:{source:j},grid:[{left:Xt,right:Jt,bottom:`${U*et+2}%`},{left:Xt,right:Jt,bottom:`${U*et}%`,height:`${et}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:a,color0:o,borderColor:n,borderColor0:i},encode:{x:v,y:[x,T,C,S]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:v,y:A}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:vd},encode:{x:v,y:I}}]};if(P>=0&&Array.isArray(F.series)&&F.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:md},encode:{x:v,y:P}}),Array.isArray(F.series)&&(L>=0&&F.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:gd},tooltip:{},encode:{x:v,y:L}}),E>=0&&F.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:yd},tooltip:{},encode:{x:v,y:E}})),Object.assign(s.value,F),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([k,H])=>{var Ye,J,Pe,Ke,qe,Xe,Je;const Ve=g.findIndex(De=>De===k);if(Ve>0){if(!Array.isArray((Ye=s.value)==null?void 0:Ye.legend)&&((Pe=(J=s.value)==null?void 0:J.legend)!=null&&Pe.data)&&s.value.legend.data.push(k),Array.isArray((Ke=s.value)==null?void 0:Ke.series)){if((qe=s.value)==null||qe.series.push(ia(v,Ve,k,H)),H.fill_to){const De=`${k}-${H.fill_to}`,Pt=g.findIndex(kt=>kt===De),Dt={color:H.color,type:_e.line},Lt=ln(v,Pt,k,Dt,0);s.value.series[s.value.series.length-1].stack=k,s.value.series.push(Lt)}(Je=s.value)==null||Je.series.splice(((Xe=s.value)==null?void 0:Xe.series.length)-1,0)}}else console.log(`element ${k} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let k=2;Object.entries(e.plotConfig.subplots).forEach(([H,Ve])=>{const Ye=k;Array.isArray(s.value.yAxis)&&s.value.yAxis.length<=k&&s.value.yAxis.push({scale:!0,gridIndex:Ye,name:H,nameLocation:"middle",nameGap:Qn,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(s.value.xAxis)&&s.value.xAxis.length<=k&&s.value.xAxis.push({type:"time",gridIndex:Ye,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(s.value.dataZoom)&&s.value.dataZoom.forEach(J=>J.xAxisIndex&&Array.isArray(J.xAxisIndex)?J.xAxisIndex.push(k):null),s.value.grid&&Array.isArray(s.value.grid)&&s.value.grid.push({left:Xt,right:Jt,bottom:`${(U-k+1)*et}%`,height:`${et}%`}),Object.entries(Ve).forEach(([J,Pe])=>{var qe,Xe,Je;const Ke=g.findIndex(De=>De===J);if(Ke>0){if(!Array.isArray(s.value.legend)&&((qe=s.value.legend)!=null&&qe.data)&&s.value.legend.data.push(J),s.value.series&&Array.isArray(s.value.series)){if(s.value.series.push(ia(v,Ke,J,Pe,k)),Pe.fill_to){const De=`${J}-${Pe.fill_to}`,Pt=g.findIndex(kt=>kt===De),Dt={color:Pe.color,type:_e.line},Lt=ln(v,Pt,J,Dt,k);s.value.series[s.value.series.length-1].stack=J,s.value.series.push(Lt)}(Je=s.value)==null||Je.series.splice(((Xe=s.value)==null?void 0:Xe.series.length)-1,0)}}else console.log(`element ${J} was not found in the columns.`)}),k+=1})}Array.isArray(s.value.grid)&&(s.value.grid[s.value.grid.length-1].bottom="50px",delete s.value.grid[s.value.grid.length-1].top);const Te="Trades";!Array.isArray(s.value.legend)&&((ce=s.value.legend)!=null&&ce.data)&&s.value.legend.data.push(Te);const je=ul(Te,e.theme,e.dataset,f.value);Array.isArray(s.value.series)&&s.value.series.push(je),(ne=r.value)==null||ne.setOption(s.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],notMerge:m})}function _(){var m;(m=r.value)==null||m.setOption({},{notMerge:!0}),s.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(g,v,x,S,C){const T={top:60},A=g[0]<C.viewSize[0]/2;return T[["left","right"][+A]]=A?5:60,T}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,max:g=>g.max+(g.max-g.min)*.02,min:g=>g.min-(g.max-g.min)*.04},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Qn,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...Xr}]},console.log("Initialized"),y(!0)}function b(){if(!e.sliderPosition)return;const m=qa(e.sliderPosition.startValue-e.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),g=qa(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");r.value&&r.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:m,endValue:g})}return ma(()=>{_()}),Q(()=>e.useUTC,()=>_()),Q(()=>e.dataset,()=>y()),Q(()=>e.plotConfig,()=>_()),Q(()=>e.heikinAshi,()=>y()),Q(()=>e.sliderPosition,()=>b()),Q(()=>e.theme,()=>{_()}),(m,g)=>(M(),$("div",hd,[w(d)?(M(),ae(w(Or),{key:0,ref_key:"candleChart",ref:r,theme:t.theme,autoresize:"","manual-update":""},null,8,["theme"])):q("",!0)]))}}),bd=ba(_d,[["__scopeId","data-v-5ce7d2b6"]]),xd=t=>(ao("data-v-b72f0e45"),t=t(),no(),t),Sd={class:"d-flex h-100"},Cd={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},wd={class:"d-flex me-0"},Ad={class:"ms-1 ms-md-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},Td={class:"ms-md-2 text-nowrap"},Pd={class:"d-flex flex-column"},Dd={class:"d-flex flex-row flex-wrap"},Ld={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},kd={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Id={class:"d-flex flex-row flex-wrap"},Od={key:0,class:"ms-2 text-nowrap"},Md={key:1,class:"ms-2 text-nowrap"},Bd={class:"ms-auto d-flex align-items-center w-auto"},Vd=xd(()=>N("small",{class:"text-nowrap"},"Heikin Ashi",-1)),Ed={class:"ms-2"},Nd={class:"ms-2 me-0 me-md-1"},zd={class:"h-100 w-100 d-flex"},Rd={class:"flex-grow-1"},$d={key:1,class:"m-auto"},Fd={key:1,style:{"font-size":"1.5rem"}},Wd={key:0,class:"w-25"},Gd=Ue({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(t){const e=t,a=yi(),n=_i(),o=to(),i=Ia(),r=W(""),s=W(),l=Z(()=>{var b,m;return e.historicView?(b=o.activeBot.history[`${r.value}__${e.timeframe}`])==null?void 0:b.data:(m=o.activeBot.candleData[`${r.value}__${e.timeframe}`])==null?void 0:m.data}),u=Z(()=>{var b;return e.strategy||((b=l.value)==null?void 0:b.strategy)||""}),c=Z(()=>l.value?l.value.columns:[]),d=Z(()=>l.value&&l.value.data.length>0),f=Z(()=>e.historicView?o.activeBot.historyStatus===Ee.loading:o.activeBot.candleDataStatus===Ee.loading),h=Z(()=>{switch(e.historicView?o.activeBot.historyStatus:o.activeBot.candleDataStatus){case Ee.not_loaded:return"Not loaded yet.";case Ee.loading:return"Loading...";case Ee.success:return"No data available";case Ee.error:return"Failed to load data";default:return"Unknown"}}),p=W(!1);function y(){e.plotConfigModal?p.value=!p.value:s.value=!s.value}function _(){console.log("refresh",r.value,e.timeframe),r.value&&e.timeframe&&(e.historicView?o.activeBot.getPairHistory({pair:r.value,timeframe:e.timeframe,timerange:e.timerange,strategy:e.strategy,freqaimodel:e.freqaiModel}):o.activeBot.getPairCandles({pair:r.value,timeframe:e.timeframe}))}return Q(()=>e.availablePairs,()=>{e.availablePairs.find(b=>b===r.value)||([r.value]=e.availablePairs,_())}),Q(()=>o.activeBot.selectedPair,()=>{r.value=o.activeBot.selectedPair,_()}),ma(()=>{s.value=e.plotConfigModal,o.activeBot.selectedPair?r.value=o.activeBot.selectedPair:e.availablePairs.length>0&&([r.value]=e.availablePairs),i.plotConfigChanged(),d.value||_()}),(b,m)=>{const g=Si,v=Ct,x=bi,S=Io,C=Ci,T=bd,A=wi,I=al,P=xi;return M(),$("div",Sd,[N("div",Cd,[N("div",wd,[N("div",Ad,[N("span",Td,he(w(u))+" | "+he(t.timeframe||""),1),O(w(Do),{modelValue:w(r),"onUpdate:modelValue":m[0]||(m[0]=L=>te(r)?r.value=L:null),class:"ms-md-2",options:t.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:_},null,8,["modelValue","options"]),O(v,{title:"Refresh chart",class:"ms-2",disabled:!w(r),size:"sm",onClick:_},{default:R(()=>[O(g)]),_:1},8,["disabled"]),N("div",Pd,[N("div",Dd,[w(l)?(M(),$("small",Ld,"Long entries: "+he(w(l).enter_long_signals||w(l).buy_signals),1)):q("",!0),w(l)?(M(),$("small",kd,"Long exit: "+he(w(l).exit_long_signals||w(l).sell_signals),1)):q("",!0)]),N("div",Id,[w(l)&&w(l).enter_short_signals?(M(),$("small",Od,"Short entries: "+he(w(l).enter_short_signals),1)):q("",!0),w(l)&&w(l).exit_short_signals?(M(),$("small",Md,"Short exits: "+he(w(l).exit_short_signals),1)):q("",!0)])])]),N("div",Bd,[O(x,{modelValue:w(a).useHeikinAshiCandles,"onUpdate:modelValue":m[1]||(m[1]=L=>w(a).useHeikinAshiCandles=L)},{default:R(()=>[Vd]),_:1},8,["modelValue"]),N("div",Ed,[O(S)]),N("div",Nd,[O(v,{size:"sm",title:"Plot configurator",onClick:y},{default:R(()=>[O(C,{width:"12",height:"12"})]),_:1})])])]),N("div",zd,[N("div",Rd,[w(d)?(M(),ae(T,{key:0,dataset:w(l),trades:t.trades,"plot-config":w(i).plotConfig,"heikin-ashi":w(a).useHeikinAshiCandles,"use-u-t-c":w(a).timezone==="UTC",theme:w(a).chartTheme,"slider-position":t.sliderPosition,"color-up":w(n).colorUp,"color-down":w(n).colorDown},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position","color-up","color-down"])):(M(),$("div",$d,[w(f)?(M(),ae(A,{key:0,label:"Spinning"})):(M(),$("div",Fd,he(w(h)),1))]))]),O(eo,{name:"fade"},{default:R(()=>[t.plotConfigModal?q("",!0):vt((M(),$("div",Wd,[O(I,{columns:w(c),"is-visible":w(s)??!1},null,8,["columns","is-visible"])],512)),[[Qt,w(s)]])]),_:1})])]),t.plotConfigModal?(M(),ae(P,{key:0,id:"plotConfiguratorModal",modelValue:w(p),"onUpdate:modelValue":m[2]||(m[2]=L=>te(p)?p.value=L:null),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:R(()=>[O(I,{"is-visible":w(p),columns:w(c)},null,8,["is-visible","columns"])]),_:1},8,["modelValue"])):q("",!0)])}}}),Kd=ba(Gd,[["__scopeId","data-v-b72f0e45"]]);export{Kd as _};
//# sourceMappingURL=CandleChartContainer-S3lhr2ab.js.map
