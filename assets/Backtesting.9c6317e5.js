import{_ as M,d as I,i as L,q as v,x as O,aC as K,y as F,r as d,o as c,c as w,a as i,t as C,b as a,w as o,H as s,Q as W,R as G,j as x,f as $,u as E,v as Z,K as oe,g as R,p as Y,e as Q,h as B,X as ee,F as X,V as re,W as ie,Y as ne}from"./index.a527b286.js";import{_ as ue,T as J,a as ce}from"./StrategySelect.596ba934.js";import{T as te}from"./TradeList.29063a7c.js";import{P as de,C as me,T as _e}from"./TradesLog.1c7d2959.js";import{T as be,P as fe,D as pe}from"./TradeProfit.8c15c390.js";import{P as ve}from"./PairSummary.247adcc0.js";import{C as ke}from"./CandleChartContainer.ac194f95.js";import{_ as ge}from"./InfoBox.1c46f4f2.js";import"./install.8dc9f665.js";import"./install.b9fc360c.js";import"./createSeriesDataSimply.5222f1f4.js";const ye={class:"container-fluid px-0 backtestresult-container"},Re={class:"row d-flex justify-content-center"},he={class:"row text-start ms-0"},Be={class:"row w-100"},we={class:"col-12 col-xl-6 px-0 px-xl-0 pe-xl-1"},$e={class:"col-12 col-xl-6 px-0 px-xl-0 pt-2 pt-xl-0 ps-xl-1"},xe=I({__name:"BacktestResultView",props:{backtestResult:{required:!0,type:Object}},setup(t){const e=t,u=r=>`${O(r,e.backtestResult.stake_currency_decimals)} ${e.backtestResult.stake_currency}`,k=r=>r.trades.slice().sort((S,T)=>S.profit_ratio-T.profit_ratio),f=L(()=>{const r=k(e.backtestResult);if(r.length===0)return"N/A";const V=r[r.length-1];return`${V.pair} ${v(V.profit_ratio,2)}`}),y=L(()=>{const r=k(e.backtestResult);if(r.length===0)return"N/A";const V=r[0];return`${V.pair} ${v(V.profit_ratio,2)}`}),b=L(()=>{var V,S,T,g,U;const r=((V=e.backtestResult)==null?void 0:V.trade_count_short)&&((S=e.backtestResult)==null?void 0:S.trade_count_short)>0?[{metric:"___",value:"___"},{metric:"Long / Short",value:`${e.backtestResult.trade_count_long} / ${e.backtestResult.trade_count_short}`},{metric:"Total profit Long",value:`${v(e.backtestResult.profit_total_long||0)} | ${u(e.backtestResult.profit_total_long_abs)}`},{metric:"Total profit Short",value:`${v(e.backtestResult.profit_total_short||0)} | ${u(e.backtestResult.profit_total_short_abs)}`}]:[];return[{metric:"Total Profit",value:`${v(e.backtestResult.profit_total)} | ${u(e.backtestResult.profit_total_abs)}`},{metric:"CAGR",value:`${e.backtestResult.cagr?v(e.backtestResult.cagr):"N/A"}`},{metric:"Sortino",value:`${e.backtestResult.sortino?e.backtestResult.sortino.toFixed(2):"N/A"}`},{metric:"Sharpe",value:`${e.backtestResult.sharpe?e.backtestResult.sharpe.toFixed(2):"N/A"}`},{metric:"Calmar",value:`${e.backtestResult.calmar?e.backtestResult.calmar.toFixed(2):"N/A"}`},{metric:"Expectancy",value:`${e.backtestResult.expectancy?e.backtestResult.expectancy.toFixed(2):"N/A"}`},{metric:"Profit factor",value:`${e.backtestResult.profit_factor?O(e.backtestResult.profit_factor,3):"N/A"}`},{metric:"Total trades / Daily Avg Trades",value:`${e.backtestResult.total_trades} / ${e.backtestResult.trades_per_day}`},{metric:"Best day",value:`${v(e.backtestResult.backtest_best_day,2)} | ${u(e.backtestResult.backtest_best_day_abs)}`},{metric:"Worst day",value:`${v(e.backtestResult.backtest_worst_day,2)} | ${u(e.backtestResult.backtest_worst_day_abs)}`},{metric:"Win/Draw/Loss",value:`${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].wins} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].draws} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].losses}`},{metric:"Days win/draw/loss",value:`${e.backtestResult.winning_days} / ${e.backtestResult.draw_days} / ${e.backtestResult.losing_days}`},{metric:"Avg. Duration winners",value:K(e.backtestResult.winner_holding_avg_s)},{metric:"Avg. Duration Losers",value:K(e.backtestResult.loser_holding_avg_s)},{metric:"Rejected entry signals",value:e.backtestResult.rejected_signals},{metric:"Entry/Exit timeouts",value:`${e.backtestResult.timedout_entry_orders} / ${e.backtestResult.timedout_exit_orders}`},{metric:"Canceled Trade Entries",value:(T=e.backtestResult.canceled_trade_entries)!=null?T:"N/A"},{metric:"Canceled Entry Orders",value:(g=e.backtestResult.canceled_entry_orders)!=null?g:"N/A"},{metric:"Replaced Entry Orders",value:(U=e.backtestResult.replaced_entry_orders)!=null?U:"N/A"},...r,{metric:"___",value:"___"},{metric:"Min balance",value:u(e.backtestResult.csum_min)},{metric:"Max balance",value:u(e.backtestResult.csum_max)},{metric:"Market change",value:v(e.backtestResult.market_change)},{metric:"___",value:"___"},{metric:"Max Drawdown (Account)",value:v(e.backtestResult.max_drawdown_account)},{metric:"Max Drawdown ABS",value:u(e.backtestResult.max_drawdown_abs)},{metric:"Drawdown high | low",value:`${u(e.backtestResult.max_drawdown_high)} | ${u(e.backtestResult.max_drawdown_low)}`},{metric:"Drawdown start",value:F(e.backtestResult.drawdown_start_ts)},{metric:"Drawdown end",value:F(e.backtestResult.drawdown_end_ts)},{metric:"___",value:"___"},{metric:"Best Pair",value:`${e.backtestResult.best_pair.key} ${v(e.backtestResult.best_pair.profit_sum)}`},{metric:"Worst Pair",value:`${e.backtestResult.worst_pair.key} ${v(e.backtestResult.worst_pair.profit_sum)}`},{metric:"Best single Trade",value:f.value},{metric:"Worst single Trade",value:y.value}]}),p=L(()=>[{setting:"Backtesting from",value:F(e.backtestResult.backtest_start_ts)},{setting:"Backtesting to",value:F(e.backtestResult.backtest_end_ts)},{setting:"BT execution time",value:K(e.backtestResult.backtest_run_end_ts-e.backtestResult.backtest_run_start_ts)},{setting:"Max open trades",value:e.backtestResult.max_open_trades},{setting:"Timeframe",value:e.backtestResult.timeframe},{setting:"Timeframe Detail",value:e.backtestResult.timeframe_detail||"N/A"},{setting:"Timerange",value:e.backtestResult.timerange},{setting:"Stoploss",value:v(e.backtestResult.stoploss,2)},{setting:"Trailing Stoploss",value:e.backtestResult.trailing_stop},{setting:"Trail only when offset is reached",value:e.backtestResult.trailing_only_offset_is_reached},{setting:"Trailing Stop positive",value:e.backtestResult.trailing_stop_positive},{setting:"Trailing stop positive offset",value:e.backtestResult.trailing_stop_positive_offset},{setting:"Custom Stoploss",value:e.backtestResult.use_custom_stoploss},{setting:"ROI",value:e.backtestResult.minimal_roi},{setting:"Use Exit Signal",value:e.backtestResult.use_exit_signal!==void 0?e.backtestResult.use_exit_signal:e.backtestResult.use_sell_signal},{setting:"Exit profit only",value:e.backtestResult.exit_profit_only!==void 0?e.backtestResult.exit_profit_only:e.backtestResult.sell_profit_only},{setting:"Exit profit offset",value:e.backtestResult.exit_profit_offset!==void 0?e.backtestResult.exit_profit_offset:e.backtestResult.sell_profit_offset},{setting:"Enable protections",value:e.backtestResult.enable_protections},{setting:"Starting balance",value:u(e.backtestResult.starting_balance)},{setting:"Final balance",value:u(e.backtestResult.final_balance)},{setting:"Avg. stake amount",value:u(e.backtestResult.avg_stake_amount)},{setting:"Total trade volume",value:u(e.backtestResult.total_volume)}]),m=L(()=>[{key:"key",label:"Pair"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:r=>v(r,2)},{key:"profit_sum",label:"Cum Profit %",formatter:r=>v(r,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:r=>O(r,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:r=>v(r,2)},{key:"duration_avg",label:"Avg Duration"},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),_=L(()=>[{key:"exit_reason",label:"Exit Reason"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:r=>v(r,2)},{key:"profit_sum",label:"Cum Profit %",formatter:r=>v(r,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:r=>O(r,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:r=>v(r,2)},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),A=[{key:"metric",label:"Metric"},{key:"value",label:"Value"}],h=[{key:"setting",label:"Setting"},{key:"value",label:"Value"}];return(r,V)=>{const S=d("b-table"),T=d("b-card");return c(),w("div",ye,[i("div",Re,[i("h3",null,"Backtest-result for "+C(t.backtestResult.strategy_name),1)]),i("div",he,[i("div",Be,[i("div",we,[a(T,{header:"Strategy settings"},{default:o(()=>[a(S,{small:"",borderless:"",items:s(p),fields:h},null,8,["items"])]),_:1})]),i("div",$e,[a(T,{header:"Metrics"},{default:o(()=>[a(S,{small:"",borderless:"",items:s(b),fields:A},null,8,["items"])]),_:1})])]),a(T,{header:"Results per Exit-reason",class:"row mt-2 w-100"},{default:o(()=>[a(S,{small:"",hover:"",stacked:"sm",items:t.backtestResult.exit_reason_summary||t.backtestResult.sell_reason_summary,fields:s(_)},null,8,["items","fields"])]),_:1}),a(T,{header:"Results per pair",class:"row mt-2 w-100"},{default:o(()=>[a(S,{small:"",hover:"",stacked:"sm",items:t.backtestResult.results_per_pair,fields:s(m)},null,8,["items","fields"])]),_:1}),a(T,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[a(te,{class:"row trade-history mt-2 w-100",trades:t.backtestResult.trades,"show-filter":!0,"stake-currency":t.backtestResult.stake_currency},null,8,["trades","stake-currency"])]),_:1})])])}}});var Ve=M(xe,[["__scopeId","data-v-763fccbc"]]);const Te=I({name:"BacktestResultSelect",props:{backtestHistory:{required:!0,type:Object},selectedBacktestResultKey:{required:!1,default:"",type:String}},emits:["selectionChange"],setup(t,{emit:e}){return{formatPercent:v,setBacktestResult:k=>{e("selectionChange",k)}}}}),Ce={class:"container d-flex flex-column align-items-center"},Se=i("h3",null,"Available results:",-1);function Pe(t,e,u,k,f,y){const b=d("b-list-group-item"),p=d("b-list-group");return c(),w("div",Ce,[Se,a(p,{class:"ms-2"},{default:o(()=>[(c(!0),w(W,null,G(Object.entries(t.backtestHistory),([m,_])=>(c(),x(b,{key:m,button:"",active:m===t.selectedBacktestResultKey,class:"d-flex justify-content-between align-items-center py-1",onClick:A=>t.setBacktestResult(m)},{default:o(()=>[$(C(m)+" "+C(_.total_trades)+" "+C(t.formatPercent(_.profit_total)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})])}var Ae=M(Te,[["render",Pe]]);const qe={class:"w-100 d-flex"},Le={class:"ms-2"},De=I({__name:"FreqaiModelSelect",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const u=t,k=E(),f=L({get(){return u.modelValue},set(y){e("update:modelValue",y)}});return Z(()=>{k.activeBot.freqaiModelList.length===0&&k.activeBot.getFreqAIModelList()}),(y,b)=>{const p=d("b-form-select"),m=d("b-button");return c(),w("div",null,[i("div",qe,[a(p,{id:"freqaiModel-select",modelValue:s(f),"onUpdate:modelValue":b[0]||(b[0]=_=>oe(f)?f.value=_:null),options:s(k).activeBot.freqaiModelList},null,8,["modelValue","options"]),i("div",Le,[a(m,{onClick:s(k).activeBot.getFreqAIModelList},{default:o(()=>[$("\u21BB")]),_:1},8,["onClick"])])])])}}}),Ne=I({setup(){const t=E();return Z(()=>{t.activeBot.getBacktestHistory()}),{timestampms:F,botStore:t}}}),Ie=i("p",null," Load Historic results from disk. You can click on multiple results to load all of them into freqUI. ",-1);function Ue(t,e,u,k,f,y){const b=d("b-list-group-item"),p=d("b-list-group");return c(),w("div",null,[i("button",{class:"btn btn-secondary float-end",title:"Refresh","aria-label":"Refresh",onClick:e[0]||(e[0]=(...m)=>t.botStore.activeBot.getBacktestHistory&&t.botStore.activeBot.getBacktestHistory(...m))}," \u21BB "),Ie,t.botStore.activeBot.backtestHistoryList?(c(),x(p,{key:0,class:"ms-2"},{default:o(()=>[(c(!0),w(W,null,G(t.botStore.activeBot.backtestHistoryList,(m,_)=>(c(),x(b,{key:_,class:"d-flex justify-content-between align-items-center py-1 mb-1",button:"",onClick:A=>t.botStore.activeBot.getBacktestHistoryResult(m)},{default:o(()=>[i("strong",null,C(m.strategy),1),$(" backtested on: "+C(t.timestampms(m.backtest_start_time*1e3))+" ",1),i("small",null,C(m.filename),1)]),_:2},1032,["onClick"]))),128))]),_:1})):R("",!0)])}var Me=M(Ne,[["render",Ue]]);const ze=I({name:"BacktestGraphsView",components:{ProfitDistributionChart:de,CumProfitChart:me,TradesLogChart:_e},props:{trades:{required:!0,type:Array}},setup(){return{}}}),Fe=t=>(Y("data-v-c2c9d094"),t=t(),Q(),t),Ee={class:"text-center flex-fill mt-2 d-flex flex-column"},je=Fe(()=>i("hr",null,null,-1));function He(t,e,u,k,f,y){const b=d("TradesLogChart"),p=d("CumProfitChart"),m=d("ProfitDistributionChart");return c(),w("div",Ee,[a(b,{trades:t.trades,class:"trades-log"},null,8,["trades"]),a(p,{trades:t.trades,"profit-column":"profit_abs",class:"cum-profit","show-title":!0},null,8,["trades"]),je,a(m,{class:"mt-3",trades:t.trades,"show-title":!0},null,8,["trades"])])}var Oe=M(ze,[["render",He],["__scopeId","data-v-c2c9d094"]]);const We=I({name:"TradeListNav",components:{TradeProfit:be,ProfitPill:fe,DateTimeTZ:pe},props:{trades:{required:!0,type:Array},backtestMode:{required:!1,default:!1,type:Boolean}},emits:["trade-select"],setup(t,{emit:e}){const u=E(),k=B({}),f=b=>{k.value=b,e("trade-select",b)},y=L(()=>t.trades.slice().sort((b,p)=>p.open_timestamp-b.open_timestamp));return{botStore:u,selectedTrade:k,sortedTrades:y,onTradeSelect:f}}}),Ke=t=>(Y("data-v-3322872f"),t=t(),Q(),t),Ge=Ke(()=>i("span",null,"Trade Navigation",-1)),Ze={key:0};function Ye(t,e,u,k,f,y){const b=d("DateTimeTZ"),p=d("TradeProfit"),m=d("ProfitPill"),_=d("b-list-group-item"),A=d("b-list-group");return c(),w("div",null,[Ge,a(A,null,{default:o(()=>[(c(!0),w(W,null,G(t.sortedTrades,h=>(c(),x(_,{key:h.open_timestamp,button:"",class:"d-flex flex-wrap justify-content-between align-items-center py-1",title:`${h.pair}`,active:h.open_timestamp===t.selectedTrade.open_timestamp,onClick:r=>t.onTradeSelect(h)},{default:o(()=>[i("div",null,[t.botStore.activeBot.botState.trading_mode!=="spot"?(c(),w("span",Ze,C(h.is_short?"S-":"L-"),1)):R("",!0),a(b,{date:h.open_timestamp},null,8,["date"])]),a(p,{trade:h},null,8,["trade"]),t.backtestMode?(c(),x(m,{key:0,"profit-ratio":h.profit_ratio,"stake-currency":t.botStore.activeBot.stakeCurrency},null,8,["profit-ratio","stake-currency"])):R("",!0)]),_:2},1032,["title","active","onClick"]))),128)),t.trades.length===0?(c(),x(_,{key:0},{default:o(()=>[$("No trades to show...")]),_:1})):R("",!0)]),_:1})])}var Qe=M(We,[["render",Ye],["__scopeId","data-v-3322872f"]]);const Xe=I({name:"BacktestResultChart",components:{CandleChartContainer:ke,PairSummary:ve,TradeList:te,TradeListNav:Qe},props:{timeframe:{required:!0,type:String},strategy:{required:!0,type:String},timerange:{required:!0,type:String},pairlist:{required:!0,type:Array},trades:{required:!0,type:Array}},setup(){const t=E(),e=B(!0),u=B();return{botStore:t,showRightBar:e,navigateChartToTrade:f=>{u.value={startValue:f.open_timestamp,endValue:f.close_timestamp}},sliderPosition:u}}}),Je={class:"row"},et={class:"col-md-11 text-start"},tt={class:"col-md-1 text-end"},at={class:"row text-center h-100 d-flex align-items-stretch"};function st(t,e,u,k,f,y){const b=d("b-button"),p=d("PairSummary"),m=d("CandleChartContainer"),_=d("TradeListNav"),A=d("TradeList"),h=d("b-card");return c(),w("div",null,[i("div",Je,[i("div",et,[i("p",null," Graph will always show the latest values for the selected strategy. Timerange: "+C(t.timerange)+" - "+C(t.strategy),1)]),i("div",tt,[a(b,{"aria-label":"Close",title:"Trade Navigation",size:"sm",onClick:e[0]||(e[0]=r=>t.showRightBar=!t.showRightBar)},{default:o(()=>[$(C(t.showRightBar?">":"<"),1)]),_:1})])]),i("div",at,[a(p,{class:"col-md-2 overflow-auto",style:{"max-height":"calc(100vh - 200px)"},pairlist:t.pairlist,trades:t.trades,"sort-method":"profit","backtest-mode":!0},null,8,["pairlist","trades"]),a(m,{"available-pairs":t.pairlist,"historic-view":!0,timeframe:t.timeframe,timerange:t.timerange,strategy:t.strategy,trades:t.trades,class:ee(`${t.showRightBar?"col-md-8":"col-md-10"} candle-chart-container px-0 h-100 align-self-stretch`),"slider-position":t.sliderPosition},null,8,["available-pairs","timeframe","timerange","strategy","trades","class","slider-position"]),t.showRightBar?(c(),x(_,{key:0,class:"overflow-auto col-md-2",style:{"max-height":"calc(100vh - 200px)"},trades:t.trades.filter(r=>r.pair===t.botStore.activeBot.selectedPair),onTradeSelect:t.navigateChartToTrade},null,8,["trades","onTradeSelect"])):R("",!0)]),a(h,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[a(A,{class:"row trade-history mt-2 w-100",trades:t.trades,"show-filter":!0},null,8,["trades"])]),_:1})])}var lt=M(Xe,[["render",st],["__scopeId","data-v-63c7a0c4"]]);const z=t=>(Y("data-v-2aceef93"),t=t(),Q(),t),ot={class:"container-fluid",style:{"max-height":"calc(100vh - 60px)"}},rt={class:"container-fluid"},it=z(()=>i("div",{class:"row mb-2"},null,-1)),nt={key:0},ut={class:"row w-100"},ct=z(()=>i("h2",{class:"col-4 col-lg-3"},"Backtesting",-1)),dt={class:"col-12 col-lg-order-last col-lg-6 mx-md-5 d-flex flex-wrap justify-content-md-center justify-content-between mb-4"},mt={class:"d-md-flex"},_t={key:0,class:"flex-fill row d-flex flex-column bt-config"},bt={key:1,class:"flex-fill row d-flex flex-column bt-config"},ft={class:"mb-2"},pt=z(()=>i("span",null,"Strategy",-1)),vt={class:"d-flex"},kt={class:"d-flex justify-content-center"},gt=z(()=>i("span",{class:"me-2"},"Enable FreqAI:",-1)),yt=z(()=>i("hr",null,null,-1)),Rt=z(()=>i("h3",{class:"mt-3"},"Backtesting summary",-1)),ht={class:"d-flex flex-wrap flex-md-nowrap justify-content-between justify-content-md-center"},Bt={key:0,class:"container-fluid text-center w-100 mt-2"},wt=I({__name:"Backtesting",setup(t){const e=E(),u=L(()=>e.activeBot.backtestHistory?Object.keys(e.activeBot.backtestHistory).length!==0:!1),k=L(()=>{try{return e.activeBot.selectedBacktestResult.timeframe}catch{return""}}),f=B(""),y=B(""),b=B(""),p=B(""),m=B(!1),_=B({enabled:!1,model:"",identifier:""}),A=B(!1),h=B(!1),r=B(!0),V=B(""),S=B(""),T=B(""),g=B("run"),U=B(null),ae=()=>{f.value=e.activeBot.selectedBacktestResult.strategy_name,e.activeBot.getStrategy(f.value),y.value=e.activeBot.selectedBacktestResult.timeframe,b.value=e.activeBot.selectedBacktestResult.timeframe_detail||"",p.value=e.activeBot.selectedBacktestResult.timerange};X(()=>e.activeBot.selectedBacktestResultKey,()=>{ae()});const se=()=>{const P={strategy:f.value,timerange:p.value,enable_protections:A.value},l=parseInt(V.value,10);if(l&&(P.max_open_trades=l),h.value)P.stake_amount="unlimited";else{const N=Number(S.value);N&&(P.stake_amount=N.toString())}const D=Number(T.value);D&&(P.dry_run_wallet=D),y.value&&(P.timeframe=y.value),b.value&&(P.timeframe_detail=b.value),r.value||(P.backtest_cache="none"),_.value.enabled&&(P.freqaimodel=_.value.model,_.value.identifier!==""&&(P.freqai={identifier:_.value.identifier})),e.activeBot.startBacktest(P)};return Z(()=>e.activeBot.getState()),X(()=>e.activeBot.backtestRunning,()=>{e.activeBot.backtestRunning===!0?U.value=window.setInterval(e.activeBot.pollBacktest,1e3):U.value&&(clearInterval(U.value),U.value=null)}),(P,l)=>{const D=d("b-form-radio"),N=d("b-button"),q=d("b-form-group"),j=d("b-form-input"),H=d("b-form-checkbox"),le=d("b-card");return c(),w("div",ot,[i("div",rt,[it,s(e).activeBot.canRunBacktest?R("",!0):(c(),w("p",nt," Bot must be in webserver mode to enable Backtesting. ")),i("div",ut,[ct,i("div",dt,[s(e).activeBot.botApiVersion>=2.15?(c(),x(D,{key:0,modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=n=>g.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"historicResults",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[$("Load Results")]),_:1},8,["modelValue","disabled"])):R("",!0),a(D,{modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=n=>g.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"run",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[$("Run backtest")]),_:1},8,["modelValue","disabled"]),a(D,{id:"bt-analyze-btn",modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=n=>g.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"results",disabled:!s(u)},{default:o(()=>[$("Analyze result")]),_:1},8,["modelValue","disabled"]),a(D,{modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=n=>g.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize-summary",disabled:!s(u)},{default:o(()=>[$("Visualize summary")]),_:1},8,["modelValue","disabled"]),a(D,{modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=n=>g.value=n),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize",disabled:!s(u)},{default:o(()=>[$("Visualize result")]),_:1},8,["modelValue","disabled"])]),re(i("small",{class:"text-end bt-running-label col-8 col-lg-3"},"Backtest running: "+C(s(e).activeBot.backtestStep)+" "+C(s(v)(s(e).activeBot.backtestProgress,2)),513),[[ie,s(e).activeBot.backtestRunning]])])]),i("div",mt,[i("div",{class:ee(`${m.value?"col-md-3":""} sticky-top sticky-offset me-3 d-flex flex-column`)},[g.value!=="visualize"?(c(),x(N,{key:0,class:"align-self-start","aria-label":"Close",size:"sm",onClick:l[5]||(l[5]=n=>m.value=!m.value)},{default:o(()=>[$(C(m.value?"<":">"),1)]),_:1})):R("",!0),a(ne,{name:"fade",mode:"in-out"},{default:o(()=>[g.value!=="visualize"&&m.value?(c(),x(Ae,{key:0,"backtest-history":s(e).activeBot.backtestHistory,"selected-backtest-result-key":s(e).activeBot.selectedBacktestResultKey,onSelectionChange:s(e).activeBot.setBacktestResultKey},null,8,["backtest-history","selected-backtest-result-key","onSelectionChange"])):R("",!0)]),_:1})],2),g.value=="historicResults"?(c(),w("div",_t,[a(Me)])):R("",!0),g.value=="run"?(c(),w("div",bt,[i("div",ft,[pt,a(ue,{modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=n=>f.value=n)},null,8,["modelValue"])]),a(le,{disabled:s(e).activeBot.backtestRunning},{default:o(()=>[a(q,{"label-cols-lg":"2",label:"Backtest params","label-size":"sm","label-class":"fw-bold pt-0",class:"mb-0"},{default:o(()=>[a(q,{"label-cols-sm":"5",label:"Timeframe:","label-align-sm":"right","label-for":"timeframe-select"},{default:o(()=>[a(J,{id:"timeframe-select",modelValue:y.value,"onUpdate:modelValue":l[7]||(l[7]=n=>y.value=n)},null,8,["modelValue"])]),_:1}),a(q,{"label-cols-sm":"5",label:"Detail Timeframe:","label-align-sm":"right","label-for":"timeframe-detail-select",title:"Detail timeframe, to simulate intra-candle results. Not setting this will not use this functionality."},{default:o(()=>[a(J,{id:"timeframe-detail-select",modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=n=>b.value=n),"below-timeframe":y.value},null,8,["modelValue","below-timeframe"])]),_:1}),a(q,{"label-cols-sm":"5",label:"Max open trades:","label-align-sm":"right","label-for":"max-open-trades"},{default:o(()=>[a(j,{id:"max-open-trades",modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=n=>V.value=n),placeholder:"Use strategy default",type:"number"},null,8,["modelValue"])]),_:1}),a(q,{"label-cols-sm":"5",label:"Starting capital:","label-align-sm":"right","label-for":"starting-capital"},{default:o(()=>[a(j,{id:"starting-capital",modelValue:T.value,"onUpdate:modelValue":l[10]||(l[10]=n=>T.value=n),type:"number",step:"0.001"},null,8,["modelValue"])]),_:1}),a(q,{"label-cols-sm":"5",label:"Stake amount:","label-align-sm":"right","label-for":"stake-amount"},{default:o(()=>[i("div",vt,[a(H,{id:"stake-amount-bool",modelValue:h.value,"onUpdate:modelValue":l[11]||(l[11]=n=>h.value=n),class:"col-md-6"},{default:o(()=>[$("Unlimited stake")]),_:1},8,["modelValue"]),a(j,{id:"stake-amount",modelValue:S.value,"onUpdate:modelValue":l[12]||(l[12]=n=>S.value=n),type:"number",placeholder:"Use strategy default",step:"0.01",disabled:h.value},null,8,["modelValue","disabled"])])]),_:1}),a(q,{"label-cols-sm":"5",label:"Enable Protections:","label-align-sm":"right","label-for":"enable-protections"},{default:o(()=>[a(H,{id:"enable-protections",modelValue:A.value,"onUpdate:modelValue":l[13]||(l[13]=n=>A.value=n)},null,8,["modelValue"])]),_:1}),s(e).activeBot.botApiVersion>=2.22?(c(),x(q,{key:0,"label-cols-sm":"5",label:"Cache Backtest results:","label-align-sm":"right","label-for":"enable-cache"},{default:o(()=>[a(H,{id:"enable-cache",modelValue:r.value,"onUpdate:modelValue":l[14]||(l[14]=n=>r.value=n)},null,8,["modelValue"])]),_:1})):R("",!0),s(e).activeBot.botApiVersion>=2.22?(c(),w(W,{key:1},[a(q,{"label-cols-sm":"5",label:"Enable FreqAI:","label-align-sm":"right","label-for":"enable-freqai"},{label:o(()=>[i("div",kt,[gt,a(ge,{hint:"Assumes freqAI configuration is setup in the configuration, and the strategy is a freqAI strategy. Will fail if that's not the case."})])]),default:o(()=>[a(H,{id:"enable-freqai",modelValue:_.value.enabled,"onUpdate:modelValue":l[15]||(l[15]=n=>_.value.enabled=n)},null,8,["modelValue"])]),_:1}),_.value.enabled?(c(),x(q,{key:0,"label-cols-sm":"5",label:"FreqAI identifier:","label-align-sm":"right","label-for":"freqai-identifier"},{default:o(()=>[a(j,{id:"freqai-identifier",modelValue:_.value.identifier,"onUpdate:modelValue":l[16]||(l[16]=n=>_.value.identifier=n),placeholder:"Use config default"},null,8,["modelValue"])]),_:1})):R("",!0),_.value.enabled?(c(),x(q,{key:1,"label-cols-sm":"5",label:"FreqAI Model","label-align-sm":"right","label-for":"freqai-model"},{default:o(()=>[a(De,{id:"freqai-model",modelValue:_.value.model,"onUpdate:modelValue":l[17]||(l[17]=n=>_.value.model=n)},null,8,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),yt,a(ce,{modelValue:p.value,"onUpdate:modelValue":l[18]||(l[18]=n=>p.value=n),class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["disabled"]),Rt,i("div",ht,[a(N,{id:"start-backtest",variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:se},{default:o(()=>[$(" Start backtest ")]),_:1},8,["disabled"]),a(N,{variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:s(e).activeBot.pollBacktest},{default:o(()=>[$(" Load backtest result ")]),_:1},8,["disabled","onClick"]),a(N,{variant:"primary",class:"mx-1",disabled:!s(e).activeBot.backtestRunning,onClick:s(e).activeBot.stopBacktest},{default:o(()=>[$("Stop Backtest")]),_:1},8,["disabled","onClick"]),a(N,{variant:"primary",class:"mx-1",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,onClick:s(e).activeBot.removeBacktest},{default:o(()=>[$("Reset Backtest")]),_:1},8,["disabled","onClick"])])])):R("",!0),s(u)&&g.value=="results"?(c(),x(Ve,{key:2,"backtest-result":s(e).activeBot.selectedBacktestResult,class:"flex-fill"},null,8,["backtest-result"])):R("",!0),s(u)&&g.value=="visualize-summary"?(c(),x(Oe,{key:3,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["trades"])):R("",!0)]),s(u)&&g.value=="visualize"?(c(),w("div",Bt,[a(lt,{timeframe:s(k),strategy:f.value,timerange:p.value,pairlist:s(e).activeBot.selectedBacktestResult.pairlist,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["timeframe","strategy","timerange","pairlist","trades"])])):R("",!0)])}}});var Nt=M(wt,[["__scopeId","data-v-2aceef93"]]);export{Nt as default};
//# sourceMappingURL=Backtesting.9c6317e5.js.map
