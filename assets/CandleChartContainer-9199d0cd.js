import{x as Ma,y as wn,d as Ge,r as R,i as E,z as xt,M as ue,aq as $t,g as Re,c as z,j as J,h as W,n as Z,o as P,a as V,t as re,m as ut,b as T,w as L,k as D,ah as An,f as H,p as Ba,e as za,ar as Tn,u as Va,l as Et,B as Ft,as as Pn,ac as te,ad as ae,ae as ie,J as Wt,K as Zt,af as Ye,at as Dn,G as Ee,N as ct,s as Ut,L as Ht,P as Na,am as On,au as Le}from"./index-5b12648a.js";import{_ as N,S as Ra,B as Ct,P as St,G as $e,c as $a,g as Ea,C as Fa,u as wt,e as A,b as se,m as ce,a as de,d as K,D as Wa,E as In,f as Za,h as Ln,i as Q,R as dt,j as Pe,t as kn,k as Ua,l as Mn,n as oe,o as we,p as Gt,q as Bn,r as zn,s as Vn,v as Nn,w as Rn,x as $n,y as Ha,z as Be,A as Ga,F as Ke,H as En,I as Fe,J as ht,K as Fn,L as At,M as Wn,N as Zn,O as he,Q as Un,T as ze,Z as Ce,U as Se,V as jt,W as Tt,X as Hn,Y as ja,$ as Gn,a0 as jn,a1 as qt,a2 as Yt,a3 as qa,a4 as qn,a5 as Yn,a6 as Kn,a7 as Xn,a8 as Jn,a9 as Ve,aa as Pt,ab as Qn,ac as eo,ad as Kt,ae as to,af as Ya,ag as Ka,ah as ao,ai as no,aj as oo,ak as io,al as ro,am as so,an as lo,ao as uo,ap as co,aq as Xt,ar as ho,as as Jt,at as Xe,au as po,av as fo,aw as vo,ax as go,ay as mo,az as yo,aA as _o,aB as bo,aC as xo,aD as Co,aE as So,aF as wo,aG as Ao,aH as To,aI as Po,aJ as Do}from"./install-ae7f4e90.js";import{c as Oo,p as Xa,S as Io,i as Lo,t as ko,r as Mo,a as Bo,D as zo,b as Vo,d as No,s as Ro,A as $o,e as Eo,f as Fo,g as Wo,h as Zo,j as Uo,k as Ho}from"./install-38d0d2fa.js";import{c as Go}from"./createSeriesDataSimply-a509c4ad.js";var We=(e=>(e.line="line",e.bar="bar",e.scatter="scatter",e))(We||{});const Ue={main_plot:{},subplots:{}};var jo=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.hasSymbolVisual=!0,t}return a.prototype.getInitialData=function(t,n){return Oo(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},a.prototype.brushSelector=function(t,n,o){return o.point(n.getItemLayout(t))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(Ra);const qo=jo;var Ja=4,Yo=function(){function e(){}return e}(),Ko=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return a.prototype.getDefaultShape=function(){return new Yo},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(t,n){var o=n.points,i=n.size,r=this.symbolProxy,s=r.shape,l=t.getContext?t.getContext():t,u=l&&i[0]<Ja,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<o.length;){var h=o[d++],v=o[d++];isNaN(h)||isNaN(v)||c&&!c.contain(h,v)||(s.x=h-i[0]/2,s.y=v-i[1]/2,s.width=i[0],s.height=i[1],r.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},a.prototype.afterBrush=function(){var t=this.shape,n=t.points,o=t.size,i=this._ctx,r=this.softClipShape,s;if(i){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||r&&!r.contain(l,u)||i.fillRect(l-o[0]/2,u-o[1]/2,o[0],o[1])}this.incremental&&(this._off=s,this.notClear=!0)}},a.prototype.findDataIndex=function(t,n){for(var o=this.shape,i=o.points,r=o.size,s=Math.max(r[0],4),l=Math.max(r[1],4),u=i.length/2-1;u>=0;u--){var c=u*2,d=i[c]-s/2,h=i[c+1]-l/2;if(t>=d&&n>=h&&t<=d+s&&n<=h+l)return u}return-1},a.prototype.contain=function(t,n){var o=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(t=o[0],n=o[1],i.contain(t,n)){var r=this.hoverDataIdx=this.findDataIndex(t,n);return r>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,o=n.points,i=n.size,r=i[0],s=i[1],l=1/0,u=1/0,c=-1/0,d=-1/0,h=0;h<o.length;){var v=o[h++],m=o[h++];l=Math.min(v,l),c=Math.max(v,c),u=Math.min(m,u),d=Math.max(m,d)}t=this._rect=new Ct(l-r/2,u-s/2,c-l+r,d-u+s)}return t},a}(St),Xo=function(){function e(){this.group=new $e}return e.prototype.updateData=function(a,t){this._clear();var n=this._create();n.setShape({points:a.getLayout("points")}),this._setCommon(n,a,t)},e.prototype.updateLayout=function(a){var t=a.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,i=n.startIndex*4*2;t=new Float32Array(t.buffer,i,o)}n.setShape("points",t),n.reset()})},e.prototype.incrementalPrepareUpdate=function(a){this._clear()},e.prototype.incrementalUpdate=function(a,t,n){var o=this._newAdded[0],i=t.getLayout("points"),r=o&&o.shape.points;if(r&&r.length<2e4){var s=r.length,l=new Float32Array(s+i.length);l.set(r),l.set(i,s),o.endIndex=a.end,o.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=a.start,u.endIndex=a.end,u.incremental=!0,u.setShape({points:i}),this._setCommon(u,t,n)}},e.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},e.prototype._create=function(){var a=new Ko({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},e.prototype._setCommon=function(a,t,n){var o=t.hostModel;n=n||{};var i=t.getVisual("symbolSize");a.setShape("size",i instanceof Array?i:[i,i]),a.softClipShape=n.clipShape||null,a.symbolProxy=$a(t.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var r=a.shape.size[0]<Ja;a.useStyle(o.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&a.setColor(l);var u=Ea(a);u.seriesIndex=o.seriesIndex,a.on("mousemove",function(c){u.dataIndex=null;var d=a.hoverDataIdx;d>=0&&(u.dataIndex=d+(a.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Jo=Xo;var Qo=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(t,n,o){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.incrementalPrepareUpdate(i),this._finished=!1},a.prototype.incrementalRender=function(t,n,o){this._symbolDraw.incrementalUpdate(t,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=t.end===n.getData().count()},a.prototype.updateTransform=function(t,n,o){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=Xa("").reset(t,n,o);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},a.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},a.prototype._getClipShape=function(t){var n=t.coordinateSystem,o=n&&n.getArea&&n.getArea();return t.get("clip",!0)?o:null},a.prototype._updateSymbolDraw=function(t,n){var o=this._symbolDraw,i=n.pipelineContext,r=i.large;return(!o||r!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=r?new Jo:new Io,this._isLargeDraw=r,this.group.removeAll()),this.group.add(o.group),o},a.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(Fa);const ei=Qo;function ti(e){wt(Lo),e.registerSeriesModel(qo),e.registerChartView(ei),e.registerLayout(Xa("scatter"))}var ai={axisPointer:1,tooltip:1,brush:1};function ni(e,a,t){var n=a.getComponentByElement(e.topTarget),o=n&&n.coordinateSystem;return n&&n!==t&&!ai.hasOwnProperty(n.mainType)&&o&&o.model!==t}var me=!0,Ne=Math.min,Ae=Math.max,oi=Math.pow,ii=1e4,ri=6,si=6,Qt="globalPan",li={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},ui={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ea={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},ci=0,di=function(e){N(a,e);function a(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new $e,n._uid="brushController_"+ci++,A(yi,function(o,i){this._handlers[i]=se(o,this)},n),n}return a.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},a.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||ko(n,Qt,this._uid),A(this._handlers,function(o,i){n.on(i,o)}),this._brushType=t.brushType,this._brushOption=ce(de(ea),t,!0)},a.prototype._doDisableBrush=function(){var t=this._zr;Mo(t,Qt,this._uid),A(this._handlers,function(n,o){t.off(o,n)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};A(t,function(o){n[o.panelId]=de(o)})}else this._panels=null;return this},a.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},a.prototype.updateCovers=function(t){t=K(t,function(h){return ce(de(ea),h,!0)});var n="\0-brush-index-",o=this._covers,i=this._covers=[],r=this,s=this._creatingCover;return new Wa(o,t,u,l).add(c).update(c).remove(d).execute(),this;function l(h,v){return(h.id!=null?h.id:n+v)+"-"+h.brushType}function u(h,v){return l(h.__brushOption,v)}function c(h,v){var m=t[h];if(v!=null&&o[v]===s)i[h]=o[v];else{var p=i[h]=v!=null?(o[v].__brushOption=m,o[v]):en(r,Qa(r,m));Dt(r,p)}}function d(h){o[h]!==s&&r.group.remove(o[h])}},a.prototype.unmount=function(){return this.enableBrush(!1),pt(this),this._zr.remove(this.group),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(In);function Qa(e,a){var t=je[a.brushType].createCover(e,a);return t.__brushOption=a,an(t,a),e.group.add(t),t}function en(e,a){var t=Ot(a);return t.endCreating&&(t.endCreating(e,a),an(a,a.__brushOption)),a}function tn(e,a){var t=a.__brushOption;Ot(a).updateCoverShape(e,a,t.range,t)}function an(e,a){var t=a.z;t==null&&(t=ii),e.traverse(function(n){n.z=t,n.z2=t})}function Dt(e,a){Ot(a).updateCommon(e,a),tn(e,a)}function Ot(e){return je[e.__brushOption.brushType]}function It(e,a,t){var n=e._panels;if(!n)return me;var o,i=e._transform;return A(n,function(r){r.isTargetByCursor(a,t,i)&&(o=r)}),o}function nn(e,a){var t=e._panels;if(!t)return me;var n=a.__brushOption.panelId;return n!=null?t[n]:me}function pt(e){var a=e._covers,t=a.length;return A(a,function(n){e.group.remove(n)},e),a.length=0,!!t}function ye(e,a){var t=K(e._covers,function(n){var o=n.__brushOption,i=de(o.range);return{brushType:o.brushType,panelId:o.panelId,range:i}});e.trigger("brush",{areas:t,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function hi(e){var a=e._track;if(!a.length)return!1;var t=a[a.length-1],n=a[0],o=t[0]-n[0],i=t[1]-n[1],r=oi(o*o+i*i,.5);return r>ri}function on(e){var a=e.length-1;return a<0&&(a=0),[e[0],e[a]]}function rn(e,a,t,n){var o=new $e;return o.add(new dt({name:"main",style:Lt(t),silent:!0,draggable:!0,cursor:"move",drift:Q(ta,e,a,o,["n","s","w","e"]),ondragend:Q(ye,a,{isEnd:!0})})),A(n,function(i){o.add(new dt({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Q(ta,e,a,o,i),ondragend:Q(ye,a,{isEnd:!0})}))}),o}function sn(e,a,t,n){var o=n.brushStyle.lineWidth||0,i=Ae(o,si),r=t[0][0],s=t[1][0],l=r-o/2,u=s-o/2,c=t[0][1],d=t[1][1],h=c-i+o/2,v=d-i+o/2,m=c-r,p=d-s,f=m+o,g=p+o;le(e,a,"main",r,s,m,p),n.transformable&&(le(e,a,"w",l,u,i,g),le(e,a,"e",h,u,i,g),le(e,a,"n",l,u,f,i),le(e,a,"s",l,v,f,i),le(e,a,"nw",l,u,i,i),le(e,a,"ne",h,u,i,i),le(e,a,"sw",l,v,i,i),le(e,a,"se",h,v,i,i))}function ft(e,a){var t=a.__brushOption,n=t.transformable,o=a.childAt(0);o.useStyle(Lt(t)),o.attr({silent:!n,cursor:n?"move":"default"}),A([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var r=a.childOfName(i.join("")),s=i.length===1?vt(e,i[0]):fi(e,i);r&&r.attr({silent:!n,invisible:!n,cursor:n?ui[s]+"-resize":null})})}function le(e,a,t,n,o,i,r){var s=a.childOfName(t);s&&s.setShape(gi(kt(e,a,[[n,o],[n+i,o+r]])))}function Lt(e){return Pe({strokeNoScale:!0},e.brushStyle)}function ln(e,a,t,n){var o=[Ne(e,t),Ne(a,n)],i=[Ae(e,t),Ae(a,n)];return[[o[0],i[0]],[o[1],i[1]]]}function pi(e){return Ua(e.group)}function vt(e,a){var t={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=kn(t[a],pi(e));return n[o]}function fi(e,a){var t=[vt(e,a[0]),vt(e,a[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function ta(e,a,t,n,o,i){var r=t.__brushOption,s=e.toRectRange(r.range),l=un(a,o,i);A(n,function(u){var c=li[u];s[c[0]][c[1]]+=l[c[0]]}),r.range=e.fromRectRange(ln(s[0][0],s[1][0],s[0][1],s[1][1])),Dt(a,t),ye(a,{isEnd:!1})}function vi(e,a,t,n){var o=a.__brushOption.range,i=un(e,t,n);A(o,function(r){r[0]+=i[0],r[1]+=i[1]}),Dt(e,a),ye(e,{isEnd:!1})}function un(e,a,t){var n=e.group,o=n.transformCoordToLocal(a,t),i=n.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function kt(e,a,t){var n=nn(e,a);return n&&n!==me?n.clipPath(t,e._transform):de(t)}function gi(e){var a=Ne(e[0][0],e[1][0]),t=Ne(e[0][1],e[1][1]),n=Ae(e[0][0],e[1][0]),o=Ae(e[0][1],e[1][1]);return{x:a,y:t,width:n-a,height:o-t}}function mi(e,a,t){if(!(!e._brushType||_i(e,a.offsetX,a.offsetY))){var n=e._zr,o=e._covers,i=It(e,a,t);if(!e._dragging)for(var r=0;r<o.length;r++){var s=o[r].__brushOption;if(i&&(i===me||s.panelId===i.panelId)&&je[s.brushType].contain(o[r],t[0],t[1]))return}i&&n.setCursorStyle("crosshair")}}function gt(e){var a=e.event;a.preventDefault&&a.preventDefault()}function mt(e,a,t){return e.childOfName("main").contain(a,t)}function cn(e,a,t,n){var o=e._creatingCover,i=e._creatingPanel,r=e._brushOption,s;if(e._track.push(t.slice()),hi(e)||o){if(i&&!o){r.brushMode==="single"&&pt(e);var l=de(r);l.brushType=aa(l.brushType,i),l.panelId=i===me?null:i.panelId,o=e._creatingCover=Qa(e,l),e._covers.push(o)}if(o){var u=je[aa(e._brushType,i)],c=o.__brushOption;c.range=u.getCreatingRange(kt(e,o,e._track)),n&&(en(e,o),u.updateCommon(e,o)),tn(e,o),s={isEnd:n}}}else n&&r.brushMode==="single"&&r.removeOnClick&&It(e,a,t)&&pt(e)&&(s={isEnd:n,removeOnClick:!0});return s}function aa(e,a){return e==="auto"?a.defaultBrushType:e}var yi={mousedown:function(e){if(this._dragging)na(this,e);else if(!e.target||!e.target.draggable){gt(e);var a=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var t=this._creatingPanel=It(this,e,a);t&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(e){var a=e.offsetX,t=e.offsetY,n=this.group.transformCoordToLocal(a,t);if(mi(this,e,n),this._dragging){gt(e);var o=cn(this,e,n,!1);o&&ye(this,o)}},mouseup:function(e){na(this,e)}};function na(e,a){if(e._dragging){gt(a);var t=a.offsetX,n=a.offsetY,o=e.group.transformCoordToLocal(t,n),i=cn(e,a,o,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&ye(e,i)}}function _i(e,a,t){var n=e._zr;return a<0||a>n.getWidth()||t<0||t>n.getHeight()}var je={lineX:oa(0),lineY:oa(1),rect:{createCover:function(e,a){function t(n){return n}return rn({toRectRange:t,fromRectRange:t},e,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var a=on(e);return ln(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(e,a,t,n){sn(e,a,t,n)},updateCommon:ft,contain:mt},polygon:{createCover:function(e,a){var t=new $e;return t.add(new Za({name:"main",style:Lt(a),silent:!0})),t},getCreatingRange:function(e){return e},endCreating:function(e,a){a.remove(a.childAt(0)),a.add(new Ln({name:"main",draggable:!0,drift:Q(vi,e,a),ondragend:Q(ye,e,{isEnd:!0})}))},updateCoverShape:function(e,a,t,n){a.childAt(0).setShape({points:kt(e,a,t)})},updateCommon:ft,contain:mt}};function oa(e){return{createCover:function(a,t){return rn({toRectRange:function(n){var o=[n,[0,100]];return e&&o.reverse(),o},fromRectRange:function(n){return n[e]}},a,t,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(a){var t=on(a),n=Ne(t[0][e],t[1][e]),o=Ae(t[0][e],t[1][e]);return[n,o]},updateCoverShape:function(a,t,n,o){var i,r=nn(a,t);if(r!==me&&r.getLinearBrushOtherExtent)i=r.getLinearBrushOtherExtent(e);else{var s=a._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[n,i];e&&l.reverse(),sn(a,t,l,o)},updateCommon:ft,contain:mt}}const bi=di;function xi(e){return e=Mt(e),function(a){return Mn(a,e)}}function Ci(e,a){return e=Mt(e),function(t){var n=a??t,o=n?e.width:e.height,i=n?e.x:e.y;return[i,i+(o||0)]}}function Si(e,a,t){var n=Mt(e);return function(o,i){return n.contain(i[0],i[1])&&!ni(o,a,t)}}function Mt(e){return Ct.create(e)}var wi=function(){function e(){}return e.prototype.getInitialData=function(a,t){var n,o=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),r=o.get("type"),s=i.get("type"),l;r==="category"?(a.layout="horizontal",n=o.getOrdinalMeta(),l=!0):s==="category"?(a.layout="vertical",n=i.getOrdinalMeta(),l=!0):a.layout=a.layout||"horizontal";var u=["x","y"],c=a.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],h=u[1-c],v=[o,i],m=v[c].get("type"),p=v[1-c].get("type"),f=a.data;if(f&&l){var g=[];A(f,function(y,w){var x;oe(y)?(x=y.slice(),y.unshift(w)):oe(y.value)?(x=we({},y),x.value=x.value.slice(),y.value.unshift(w)):x=y,g.push(x)}),a.data=g}var _=this.defaultValueDimensions,b=[{name:d,type:Gt(m),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Gt(p),dimsDef:_.slice()}];return Go(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:Q(Bn,b,this)})},e.prototype.getBaseAxis=function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+"Axis",this.get(a+"AxisIndex")).axis},e}(),Ai=["color","borderColor"],Ti=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},a.prototype.incrementalPrepareRender=function(t,n,o){this._clear(),this._updateDrawMode(t)},a.prototype.incrementalRender=function(t,n,o,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,n):this._incrementalRenderNormal(t,n)},a.prototype.eachRendered=function(t){zn(this._progressiveEls||this.group,t)},a.prototype._updateDrawMode=function(t){var n=t.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},a.prototype._renderNormal=function(t){var n=t.getData(),o=this._data,i=this.group,r=n.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||i.removeAll(),n.diff(o).add(function(c){if(n.hasValue(c)){var d=n.getItemLayout(c);if(s&&ia(u,d))return;var h=Je(d,c,!0);Vn(h,{shape:{points:d.ends}},t,c),Qe(h,n,c,r),i.add(h),n.setItemGraphicEl(c,h)}}).update(function(c,d){var h=o.getItemGraphicEl(d);if(!n.hasValue(c)){i.remove(h);return}var v=n.getItemLayout(c);if(s&&ia(u,v)){i.remove(h);return}h?(Nn(h,{shape:{points:v.ends}},t,c),Rn(h)):h=Je(v),Qe(h,n,c,r),i.add(h),n.setItemGraphicEl(c,h)}).remove(function(c){var d=o.getItemGraphicEl(c);d&&i.remove(d)}).execute(),this._data=n},a.prototype._renderLarge=function(t){this._clear(),ra(t,this.group);var n=t.get("clip",!0)?Bo(t.coordinateSystem,!1,t):null;n?this.group.setClipPath(n):this.group.removeClipPath()},a.prototype._incrementalRenderNormal=function(t,n){for(var o=n.getData(),i=o.getLayout("isSimpleBox"),r;(r=t.next())!=null;){var s=o.getItemLayout(r),l=Je(s);Qe(l,o,r,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},a.prototype._incrementalRenderLarge=function(t,n){ra(n,this.group,this._progressiveEls,!0)},a.prototype.remove=function(t){this._clear()},a.prototype._clear=function(){this.group.removeAll(),this._data=null},a.type="candlestick",a}(Fa),Pi=function(){function e(){}return e}(),Di=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return a.prototype.getDefaultShape=function(){return new Pi},a.prototype.buildPath=function(t,n){var o=n.points;this.__simpleBox?(t.moveTo(o[4][0],o[4][1]),t.lineTo(o[6][0],o[6][1])):(t.moveTo(o[0][0],o[0][1]),t.lineTo(o[1][0],o[1][1]),t.lineTo(o[2][0],o[2][1]),t.lineTo(o[3][0],o[3][1]),t.closePath(),t.moveTo(o[4][0],o[4][1]),t.lineTo(o[5][0],o[5][1]),t.moveTo(o[6][0],o[6][1]),t.lineTo(o[7][0],o[7][1]))},a}(St);function Je(e,a,t){var n=e.ends;return new Di({shape:{points:t?Oi(n,e):n},z2:100})}function ia(e,a){for(var t=!0,n=0;n<a.ends.length;n++)if(e.contain(a.ends[n][0],a.ends[n][1])){t=!1;break}return t}function Qe(e,a,t,n){var o=a.getItemModel(t);e.useStyle(a.getItemVisual(t,"style")),e.style.strokeNoScale=!0,e.__simpleBox=n,$n(e,o)}function Oi(e,a){return K(e,function(t){return t=t.slice(),t[1]=a.initBaseline,t})}var Ii=function(){function e(){}return e}(),et=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return a.prototype.getDefaultShape=function(){return new Ii},a.prototype.buildPath=function(t,n){for(var o=n.points,i=0;i<o.length;)if(this.__sign===o[i++]){var r=o[i++];t.moveTo(r,o[i++]),t.lineTo(r,o[i++])}else i+=3},a}(St);function ra(e,a,t,n){var o=e.getData(),i=o.getLayout("largePoints"),r=new et({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});a.add(r);var s=new et({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});a.add(s);var l=new et({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});a.add(l),tt(1,r,e),tt(-1,s,e),tt(0,l,e),n&&(r.incremental=!0,s.incremental=!0),t&&t.push(r,s)}function tt(e,a,t,n){var o=t.get(["itemStyle",e>0?"borderColor":"borderColor0"])||t.get(["itemStyle",e>0?"color":"color0"]);e===0&&(o=t.get(["itemStyle","borderColorDoji"]));var i=t.getModel("itemStyle").getItemStyle(Ai);a.useStyle(i),a.style.fill=null,a.style.stroke=o}const Li=Ti;var dn=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return a.prototype.getShadowDim=function(){return"open"},a.prototype.brushSelector=function(t,n,o){var i=n.getItemLayout(t);return i&&o.rect(i.brushRect)},a.type="series.candlestick",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},a}(Ra);Ha(dn,wi,!0);const ki=dn;function Mi(e){!e||!oe(e.series)||A(e.series,function(a){Be(a)&&a.type==="k"&&(a.type="candlestick")})}var Bi=["itemStyle","borderColor"],zi=["itemStyle","borderColor0"],Vi=["itemStyle","borderColorDoji"],Ni=["itemStyle","color"],Ri=["itemStyle","color0"],$i={seriesType:"candlestick",plan:Ga(),performRawSeries:!0,reset:function(e,a){function t(i,r){return r.get(i>0?Ni:Ri)}function n(i,r){return r.get(i===0?Vi:i>0?Bi:zi)}if(!a.isSeriesFiltered(e)){var o=e.pipelineContext.large;return!o&&{progress:function(i,r){for(var s;(s=i.next())!=null;){var l=r.getItemModel(s),u=r.getItemLayout(s).sign,c=l.getItemStyle();c.fill=t(u,l),c.stroke=n(u,l)||c.fill;var d=r.ensureUniqueItemVisual(s,"style");we(d,c)}}}}}};const Ei=$i;var Fi={seriesType:"candlestick",plan:Ga(),reset:function(e){var a=e.coordinateSystem,t=e.getData(),n=Wi(e,t),o=0,i=1,r=["x","y"],s=t.getDimensionIndex(t.mapDimension(r[o])),l=K(t.mapDimensionsAll(r[i]),t.getDimensionIndex,t),u=l[0],c=l[1],d=l[2],h=l[3];if(t.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?m:v};function v(p,f){for(var g,_=f.getStore();(g=p.next())!=null;){var b=_.get(s,g),y=_.get(u,g),w=_.get(c,g),x=_.get(d,g),C=_.get(h,g),B=Math.min(y,w),k=Math.max(y,w),I=ee(B,b),M=ee(k,b),O=ee(x,b),F=ee(C,b),X=[];fe(X,M,0),fe(X,I,1),X.push($(F),$(M),$(O),$(I));var pe=f.getItemModel(g),Y=!!pe.get(["itemStyle","borderColorDoji"]);f.setItemLayout(g,{sign:sa(_,g,y,w,c,Y),initBaseline:y>w?M[i]:I[i],ends:X,brushRect:_e(x,C,b)})}function ee(S,G){var j=[];return j[o]=G,j[i]=S,isNaN(G)||isNaN(S)?[NaN,NaN]:a.dataToPoint(j)}function fe(S,G,j){var q=G.slice(),U=G.slice();q[o]=Ke(q[o]+n/2,1,!1),U[o]=Ke(U[o]-n/2,1,!0),j?S.push(q,U):S.push(U,q)}function _e(S,G,j){var q=ee(S,j),U=ee(G,j);return q[o]-=n/2,U[o]-=n/2,{x:q[0],y:q[1],width:n,height:U[1]-q[1]}}function $(S){return S[o]=Ke(S[o],1),S}}function m(p,f){for(var g=En(p.count*4),_=0,b,y=[],w=[],x,C=f.getStore(),B=!!e.get(["itemStyle","borderColorDoji"]);(x=p.next())!=null;){var k=C.get(s,x),I=C.get(u,x),M=C.get(c,x),O=C.get(d,x),F=C.get(h,x);if(isNaN(k)||isNaN(O)||isNaN(F)){g[_++]=NaN,_+=3;continue}g[_++]=sa(C,x,I,M,c,B),y[o]=k,y[i]=O,b=a.dataToPoint(y,null,w),g[_++]=b?b[0]:NaN,g[_++]=b?b[1]:NaN,y[i]=F,b=a.dataToPoint(y,null,w),g[_++]=b?b[1]:NaN}f.setLayout("largePoints",g)}}};function sa(e,a,t,n,o,i){var r;return t>n?r=-1:t<n?r=1:r=i?0:a>0?e.get(o,a-1)<=n?1:-1:1,r}function Wi(e,a){var t=e.getBaseAxis(),n,o=t.type==="category"?t.getBandWidth():(n=t.getExtent(),Math.abs(n[1]-n[0])/a.count()),i=Fe(ht(e.get("barMaxWidth"),o),o),r=Fe(ht(e.get("barMinWidth"),1),o),s=e.get("barWidth");return s!=null?Fe(s,o):Math.max(Math.min(o/2,i),r)}const Zi=Fi;function Ui(e){e.registerChartView(Li),e.registerSeriesModel(ki),e.registerPreprocessor(Mi),e.registerVisual(Ei),e.registerLayout(Zi)}var Hi=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.init=function(t,n,o){var i=Fn(t);e.prototype.init.apply(this,arguments),la(t,i)},a.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),la(this.option,t)},a.prototype.getCellSize=function(){return this.option.cellSize},a.type="calendar",a.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},a}(At);function la(e,a){var t=e.cellSize,n;oe(t)?n=t:n=e.cellSize=[t,t],n.length===1&&(n[1]=n[0]);var o=K([0,1],function(i){return Wn(a,i)&&(n[i]="auto"),n[i]!=null&&n[i]!=="auto"});Zn(e,a,{type:"box",ignoreSize:o})}const Gi=Hi;var ji=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){var i=this.group;i.removeAll();var r=t.coordinateSystem,s=r.getRangeInfo(),l=r.getOrient(),u=n.getLocaleModel();this._renderDayRect(t,s,i),this._renderLines(t,s,l,i),this._renderYearText(t,s,l,i),this._renderMonthText(t,u,l,i),this._renderWeekText(t,u,s,l,i)},a.prototype._renderDayRect=function(t,n,o){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),u=n.start.time;u<=n.end.time;u=i.getNextNDay(u,1).time){var c=i.dataToRect([u],!1).tl,d=new dt({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:r});o.add(d)}},a.prototype._renderLines=function(t,n,o,i){var r=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=n.start,h=0;d.time<=n.end.time;h++){m(d.formatedDate),h===0&&(d=s.getDateInfo(n.start.y+"-"+n.start.m));var v=d.date;v.setMonth(v.getMonth()+1),d=s.getDateInfo(v)}m(s.getNextNDay(n.end.time,1).formatedDate);function m(p){r._firstDayOfMonth.push(s.getDateInfo(p)),r._firstDayPoints.push(s.dataToRect([p],!1).tl);var f=r._getLinePointsOfOneWeek(t,p,o);r._tlpoints.push(f[0]),r._blpoints.push(f[f.length-1]),u&&r._drawSplitline(f,l,i)}u&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,c,o),l,i),u&&this._drawSplitline(r._getEdgesPoints(r._blpoints,c,o),l,i)},a.prototype._getEdgesPoints=function(t,n,o){var i=[t[0].slice(),t[t.length-1].slice()],r=o==="horizontal"?0:1;return i[0][r]=i[0][r]-n/2,i[1][r]=i[1][r]+n/2,i},a.prototype._drawSplitline=function(t,n,o){var i=new Za({z2:20,shape:{points:t},style:n});o.add(i)},a.prototype._getLinePointsOfOneWeek=function(t,n,o){for(var i=t.coordinateSystem,r=i.getDateInfo(n),s=[],l=0;l<7;l++){var u=i.getNextNDay(r.time,l),c=i.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[o==="horizontal"?"bl":"tr"]}return s},a.prototype._formatterLabel=function(t,n){return he(t)&&t?Un(t,n):ze(t)?t(n):n.nameMap},a.prototype._yearTextPositionControl=function(t,n,o,i,r){var s=n[0],l=n[1],u=["center","bottom"];i==="bottom"?(l+=r,u=["center","top"]):i==="left"?s-=r:i==="right"?(s+=r,u=["center","top"]):l-=r;var c=0;return(i==="left"||i==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},a.prototype._renderYearText=function(t,n,o,i){var r=t.getModel("yearLabel");if(r.get("show")){var s=r.get("margin"),l=r.get("position");l||(l=o!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,h=o==="horizontal"?0:1,v={top:[c,u[h][1]],bottom:[c,u[1-h][1]],left:[u[1-h][0],d],right:[u[h][0],d]},m=n.start.y;+n.end.y>+n.start.y&&(m=m+"-"+n.end.y);var p=r.get("formatter"),f={start:n.start.y,end:n.end.y,nameMap:m},g=this._formatterLabel(p,f),_=new Ce({z2:30,style:Se(r,{text:g})});_.attr(this._yearTextPositionControl(_,v[l],o,l,s)),i.add(_)}},a.prototype._monthTextPositionControl=function(t,n,o,i,r){var s="left",l="top",u=t[0],c=t[1];return o==="horizontal"?(c=c+r,n&&(s="center"),i==="start"&&(l="bottom")):(u=u+r,n&&(l="middle"),i==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},a.prototype._renderMonthText=function(t,n,o,i){var r=t.getModel("monthLabel");if(r.get("show")){var s=r.get("nameMap"),l=r.get("margin"),u=r.get("position"),c=r.get("align"),d=[this._tlpoints,this._blpoints];(!s||he(s))&&(s&&(n=jt(s)||n),s=n.get(["time","monthAbbr"])||[]);var h=u==="start"?0:1,v=o==="horizontal"?0:1;l=u==="start"?-l:l;for(var m=c==="center",p=0;p<d[h].length-1;p++){var f=d[h][p].slice(),g=this._firstDayOfMonth[p];if(m){var _=this._firstDayPoints[p];f[v]=(_[v]+d[0][p+1][v])/2}var b=r.get("formatter"),y=s[+g.m-1],w={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:y},x=this._formatterLabel(b,w),C=new Ce({z2:30,style:we(Se(r,{text:x}),this._monthTextPositionControl(f,m,o,u,l))});i.add(C)}}},a.prototype._weekTextPositionControl=function(t,n,o,i,r){var s="center",l="middle",u=t[0],c=t[1],d=o==="start";return n==="horizontal"?(u=u+i+(d?1:-1)*r[0]/2,s=d?"right":"left"):(c=c+i+(d?1:-1)*r[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},a.prototype._renderWeekText=function(t,n,o,i,r){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!c||he(c)){c&&(n=jt(c)||n);var v=n.get(["time","dayOfWeekShort"]);c=v||K(n.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var m=l.getNextNDay(o.end.time,7-o.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];d=Fe(d,Math.min(p[1],p[0])),u==="start"&&(m=l.getNextNDay(o.start.time,-(7+o.fweek)).time,d=-d);for(var f=0;f<7;f++){var g=l.getNextNDay(m,f),_=l.dataToRect([g.time],!1).center,b=f;b=Math.abs((f+h)%7);var y=new Ce({z2:30,style:we(Se(s,{text:c[b]}),this._weekTextPositionControl(_,i,u,d,p))});r.add(y)}}},a.type="calendar",a}(Tt);const qi=ji;var at=864e5,Yi=function(){function e(a,t,n){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=a}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(a){a=Hn(a);var t=a.getFullYear(),n=a.getMonth()+1,o=n<10?"0"+n:""+n,i=a.getDate(),r=i<10?"0"+i:""+i,s=a.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:o,d:r,day:s,time:a.getTime(),formatedDate:t+"-"+o+"-"+r,date:a}},e.prototype.getNextNDay=function(a,t){return t=t||0,t===0?this.getDateInfo(a):(a=new Date(this.getDateInfo(a).time),a.setDate(a.getDate()+t),this.getDateInfo(a))},e.prototype.update=function(a,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],i=this._model.getCellSize().slice(),r=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];A([0,1],function(d){c(i,d)&&(r[o[d]]=i[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=ja(r,l);A([0,1],function(d){c(i,d)||(i[d]=u[o[d]]/s[d])});function c(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=i[0],this._sh=i[1]},e.prototype.dataToPoint=function(a,t){oe(a)&&(a=a[0]),t==null&&(t=!0);var n=this.getDateInfo(a),o=this._rangeInfo,i=n.formatedDate;if(t&&!(n.time>=o.start.time&&n.time<o.end.time+at))return[NaN,NaN];var r=n.day,s=this._getRangeInfo([o.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+r*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]},e.prototype.pointToData=function(a){var t=this.pointToDate(a);return t&&t.time},e.prototype.dataToRect=function(a,t){var n=this.dataToPoint(a,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},e.prototype.pointToDate=function(a){var t=Math.floor((a[0]-this._rect.x)/this._sw)+1,n=Math.floor((a[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,t-1,o):this._getDateByWeeksAndDay(t,n-1,o)},e.prototype.convertToPixel=function(a,t,n){var o=ua(t);return o===this?o.dataToPoint(n):null},e.prototype.convertFromPixel=function(a,t,n){var o=ua(t);return o===this?o.pointToData(n):null},e.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var a=this._model.get("range"),t;if(oe(a)&&a.length===1&&(a=a[0]),oe(a))t=a;else{var n=a.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),i=o.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);t=[o.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return a;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},e.prototype._getRangeInfo=function(a){var t=[this.getDateInfo(a[0]),this.getDateInfo(a[1])],n;t[0].time>t[1].time&&(n=!0,t.reverse());var o=Math.floor(t[1].time/at)-Math.floor(t[0].time/at)+1,i=new Date(t[0].time),r=i.getDate(),s=t[1].date.getDate();i.setDate(r+o-1);var l=i.getDate();if(l!==s)for(var u=i.getTime()-t[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-t[1].time)*u>0;)o-=u,i.setDate(l-u);var c=Math.floor((o+t[0].day+6)/7),d=n?-c+1:c-1;return n&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:o,weeks:c,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},e.prototype._getDateByWeeksAndDay=function(a,t,n){var o=this._getRangeInfo(n);if(a>o.weeks||a===0&&t<o.fweek||a===o.weeks&&t>o.lweek)return null;var i=(a-1)*7-o.fweek+t,r=new Date(o.start.time);return r.setDate(+o.start.d+i),this.getDateInfo(r)},e.create=function(a,t){var n=[];return a.eachComponent("calendar",function(o){var i=new e(o);n.push(i),o.coordinateSystem=i}),a.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},e.dimensions=["time","value"],e}();function ua(e){var a=e.calendarModel,t=e.seriesModel,n=a?a.coordinateSystem:t?t.coordinateSystem:null;return n}const Ki=Yi;function Xi(e){e.registerComponentModel(Gi),e.registerComponentView(qi),e.registerCoordinateSystem("calendar",Ki)}var Ji=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.select",a}(zo);const Qi=Ji;var er=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.select",a}(Vo);const tr=er;function ar(e){e.registerComponentModel(Qi),e.registerComponentView(tr),No(e)}var ne=function(){function e(){}return e}(),hn={};function ke(e,a){hn[e]=a}function pn(e){return hn[e]}var nr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;A(this.option.feature,function(n,o){var i=pn(o);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),ce(n,i.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(At);const or=nr;var ir=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.render=function(t,n,o,i){var r=this.group;if(r.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),d=[];A(u,function(m,p){d.push(p)}),new Wa(this._featureNames||[],d).add(h).update(h).remove(Q(h,null)).execute(),this._featureNames=d;function h(m,p){var f=d[m],g=d[p],_=u[f],b=new Gn(_,t,t.ecModel),y;if(i&&i.newTitle!=null&&i.featureName===f&&(_.title=i.newTitle),f&&!g){if(rr(f))y={onclick:b.option.onclick,featureName:f};else{var w=pn(f);if(!w)return;y=new w}c[f]=y}else if(y=c[g],!y)return;y.uid=jn("toolbox-feature"),y.model=b,y.ecModel=n,y.api=o;var x=y instanceof ne;if(!f&&g){x&&y.dispose&&y.dispose(n,o);return}if(!b.get("show")||x&&y.unusable){x&&y.remove&&y.remove(n,o);return}v(b,y,f),b.setIconStatus=function(C,B){var k=this.option,I=this.iconPaths;k.iconStatus=k.iconStatus||{},k.iconStatus[C]=B,I[C]&&(B==="emphasis"?qt:Yt)(I[C])},y instanceof ne&&y.render&&y.render(b,n,o,i)}function v(m,p,f){var g=m.getModel("iconStyle"),_=m.getModel(["emphasis","iconStyle"]),b=p instanceof ne&&p.getIcons?p.getIcons():m.get("icon"),y=m.get("title")||{},w,x;he(b)?(w={},w[f]=b):w=b,he(y)?(x={},x[f]=y):x=y;var C=m.iconPaths={};A(w,function(B,k){var I=qa(B,{},{x:-s/2,y:-s/2,width:s,height:s});I.setStyle(g.getItemStyle());var M=I.ensureState("emphasis");M.style=_.getItemStyle();var O=new Ce({style:{text:x[k],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});I.setTextContent(O),qn({el:I,componentModel:t,itemName:k,formatterParamsExtra:{title:x[k]}}),I.__title=x[k],I.on("mouseover",function(){var F=_.getItemStyle(),X=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";O.setStyle({fill:_.get("textFill")||F.fill||F.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),I.setTextConfig({position:_.get("textPosition")||X}),O.ignore=!t.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",k])!=="emphasis"&&o.leaveEmphasis(this),O.hide()}),(m.get(["iconStatus",k])==="emphasis"?qt:Yt)(I),r.add(I),I.on("click",se(p.onclick,p,n,o,k)),C[k]=I})}Yn(r,t,o),r.add(Kn(r.getBoundingRect(),t)),l||r.eachChild(function(m){var p=m.__title,f=m.ensureState("emphasis"),g=f.textConfig||(f.textConfig={}),_=m.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!ze(b)&&p){var y=b.style||(b.style={}),w=Xn(p,Ce.makeFont(y)),x=m.x+r.x,C=m.y+r.y+s,B=!1;C+w.height>o.getHeight()&&(g.position="top",B=!0);var k=B?-5-w.height:s+10;x+w.width/2>o.getWidth()?(g.position=["100%",k],y.align="right"):x-w.width/2<0&&(g.position=[0,k],y.align="left")}})},a.prototype.updateView=function(t,n,o,i){A(this._features,function(r){r instanceof ne&&r.updateView&&r.updateView(r.model,n,o,i)})},a.prototype.remove=function(t,n){A(this._features,function(o){o instanceof ne&&o.remove&&o.remove(t,n)}),this.group.removeAll()},a.prototype.dispose=function(t,n){A(this._features,function(o){o instanceof ne&&o.dispose&&o.dispose(t,n)})},a.type="toolbox",a}(Tt);function rr(e){return e.indexOf("my")===0}const sr=ir;var lr=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){var o=this.model,i=o.get("name")||t.get("title.0.text")||"echarts",r=n.getZr().painter.getType()==="svg",s=r?"svg":o.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:o.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),u=Jn.browser;if(ze(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=i+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||r){var h=l.split(","),v=h[0].indexOf("base64")>-1,m=r?decodeURIComponent(h[1]):h[1];v&&(m=window.atob(m));var p=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var f=m.length,g=new Uint8Array(f);f--;)g[f]=m.charCodeAt(f);var _=new Blob([g]);window.navigator.msSaveOrOpenBlob(_,p)}else{var b=document.createElement("iframe");document.body.appendChild(b);var y=b.contentWindow,w=y.document;w.open("image/svg+xml","replace"),w.write(m),w.close(),y.focus(),w.execCommand("SaveAs",!0,p),document.body.removeChild(b)}}else{var x=o.get("lang"),C='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',B=window.open();B.document.write(C),B.document.title=i}},a.getDefaultOption=function(t){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},a}(ne);const ur=lr;var ca="__ec_magicType_stack__",cr=[["line","bar"],["stack"]],dr=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),o={};return A(t.get("type"),function(i){n[i]&&(o[i]=n[i])}),o},a.getDefaultOption=function(t){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},a.prototype.onclick=function(t,n,o){var i=this.model,r=i.get(["seriesIndex",o]);if(da[o]){var s={series:[]},l=function(d){var h=d.subType,v=d.id,m=da[o](h,v,d,i);m&&(Pe(m,d.option),s.series.push(m));var p=d.coordinateSystem;if(p&&p.type==="cartesian2d"&&(o==="line"||o==="bar")){var f=p.getAxesByScale("ordinal")[0];if(f){var g=f.dim,_=g+"Axis",b=d.getReferringComponents(_,Qn).models[0],y=b.componentIndex;s[_]=s[_]||[];for(var w=0;w<=y;w++)s[_][y]=s[_][y]||{};s[_][y].boundaryGap=o==="bar"}}};A(cr,function(d){Ve(d,o)>=0&&A(d,function(h){i.setIconStatus(h,"normal")})}),i.setIconStatus(o,"emphasis"),t.eachComponent({mainType:"series",query:r==null?null:{seriesIndex:r}},l);var u,c=o;o==="stack"&&(u=ce({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",o])!=="emphasis"&&(c="tiled")),n.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},a}(ne),da={line:function(e,a,t,n){if(e==="bar")return ce({id:a,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(e,a,t,n){if(e==="line")return ce({id:a,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(e,a,t,n){var o=t.get("stack")===ca;if(e==="line"||e==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),ce({id:a,stack:o?"":ca},n.get(["option","stack"])||{},!0)}};Pt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,a){a.mergeOption(e.newOption)});const hr=dr;var qe=new Array(60).join("-"),Te="	";function pr(e){var a={},t=[],n=[];return e.eachRawSeries(function(o){var i=o.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var r=i.getBaseAxis();if(r.type==="category"){var s=r.dim+"_"+r.index;a[s]||(a[s]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},n.push({axisDim:r.dim,axisIndex:r.index})),a[s].series.push(o)}else t.push(o)}else t.push(o)}),{seriesGroupByCategoryAxis:a,other:t,meta:n}}function fr(e){var a=[];return A(e,function(t,n){var o=t.categoryAxis,i=t.valueAxis,r=i.dim,s=[" "].concat(K(t.series,function(v){return v.name})),l=[o.model.getCategories()];A(t.series,function(v){var m=v.getRawData();l.push(v.getRawData().mapArray(m.mapDimension(r),function(p){return p}))});for(var u=[s.join(Te)],c=0;c<l[0].length;c++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][c]);u.push(d.join(Te))}a.push(u.join(`
`))}),a.join(`

`+qe+`

`)}function vr(e){return K(e,function(a){var t=a.getRawData(),n=[a.name],o=[];return t.each(t.dimensions,function(){for(var i=arguments.length,r=arguments[i-1],s=t.getName(r),l=0;l<i-1;l++)o[l]=arguments[l];n.push((s?s+Te:"")+o.join(Te))}),n.join(`
`)}).join(`

`+qe+`

`)}function gr(e){var a=pr(e);return{value:to([fr(a.seriesGroupByCategoryAxis),vr(a.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+qe+`

`),meta:a.meta}}function He(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mr(e){var a=e.slice(0,e.indexOf(`
`));if(a.indexOf(Te)>=0)return!0}var yt=new RegExp("["+Te+"]+","g");function yr(e){for(var a=e.split(/\n+/g),t=He(a.shift()).split(yt),n=[],o=K(t,function(l){return{name:l,data:[]}}),i=0;i<a.length;i++){var r=He(a[i]).split(yt);n.push(r.shift());for(var s=0;s<r.length;s++)o[s]&&(o[s].data[i]=r[s])}return{series:o,categories:n}}function _r(e){for(var a=e.split(/\n+/g),t=He(a.shift()),n=[],o=0;o<a.length;o++){var i=He(a[o]);if(i){var r=i.split(yt),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),n[o]={name:s,value:[]},l=n[o].value):l=n[o]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);l.length===1&&(u?n[o].value=l[0]:n[o]=l[0])}}return{name:t,data:n}}function br(e,a){var t=e.split(new RegExp(`
*`+qe+`
*`,"g")),n={series:[]};return A(t,function(o,i){if(mr(o)){var r=yr(o),s=a[i],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:r.categories},n.series=n.series.concat(r.series))}else{var r=_r(o);n.series.push(r)}}),n}var xr=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),i=this.model;this._dom&&o.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=i.get("optionToContent"),h=i.get("contentToOption"),v=gr(t);if(ze(d)){var m=d(n.getOption());he(m)?u.innerHTML=m:eo(m)&&u.appendChild(m)}else{c.readOnly=i.get("readOnly");var p=c.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),c.value=v.value,u.appendChild(c)}var f=v.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),y=document.createElement("div");_+=";background-color:"+i.get("buttonColor"),_+=";color:"+i.get("buttonTextColor");var w=this;function x(){o.removeChild(r),w._dom=null}Kt(b,"click",x),Kt(y,"click",function(){if(h==null&&d!=null||h!=null&&d==null){x();return}var C;try{ze(h)?C=h(u,n.getOption()):C=br(c.value,f)}catch(B){throw x(),new Error("Data view format error "+B)}C&&n.dispatchAction({type:"changeDataView",newOption:C}),x()}),b.innerHTML=l[1],y.innerHTML=l[2],y.style.cssText=b.style.cssText=_,!i.get("readOnly")&&g.appendChild(y),g.appendChild(b),r.appendChild(s),r.appendChild(u),r.appendChild(g),u.style.height=o.clientHeight-80+"px",o.appendChild(r),this._dom=r},a.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},a.prototype.dispose=function(t,n){this.remove(t,n)},a.getDefaultOption=function(t){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},a}(ne);function Cr(e,a){return K(e,function(t,n){var o=a&&a[n];if(Be(o)&&!oe(o)){var i=Be(t)&&!oe(t);i||(t={value:t});var r=o.name!=null&&t.name==null;return t=Pe(t,o),r&&delete t.name,t}else return t})}Pt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,a){var t=[];A(e.newOption.series,function(n){var o=a.getSeriesByName(n.name)[0];if(!o)t.push(we({type:"scatter"},n));else{var i=o.get("data");t.push({name:n.name,data:Cr(n.data,i)})}}),a.mergeOption(Pe({series:t},e.newOption))});const Sr=xr;var fn=A,vn=Ya();function wr(e,a){var t=Bt(e);fn(a,function(n,o){for(var i=t.length-1;i>=0;i--){var r=t[i];if(r[o])break}if(i<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(s){var l=s.getPercentRange();t[0][o]={dataZoomId:o,start:l[0],end:l[1]}}}}),t.push(a)}function Ar(e){var a=Bt(e),t=a[a.length-1];a.length>1&&a.pop();var n={};return fn(t,function(o,i){for(var r=a.length-1;r>=0;r--)if(o=a[r][i],o){n[i]=o;break}}),n}function Tr(e){vn(e).snapshots=null}function Pr(e){return Bt(e).length}function Bt(e){var a=vn(e);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var Dr=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){Tr(t),n.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(t){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return n},a}(ne);Pt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,a){a.resetOption("recreate")});const Or=Dr;var Ir=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Lr=function(){function e(a,t,n){var o=this;this._targetInfoList=[];var i=ha(t,a);A(kr,function(r,s){(!n||!n.include||Ve(n.include,s)>=0)&&r(i,o._targetInfoList)})}return e.prototype.setOutputRanges=function(a,t){return this.matchOutputRanges(a,t,function(n,o,i){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var r=nt[n.brushType](0,i,o);n.__rangeOffset={offset:ga[n.brushType](r.values,n.range,[1,1]),xyMinMax:r.xyMinMax}}}),a},e.prototype.matchOutputRanges=function(a,t,n){A(a,function(o){var i=this.findTargetInfo(o,t);i&&i!==!0&&A(i.coordSyses,function(r){var s=nt[o.brushType](1,r,o.range,!0);n(o,s.values,r,t)})},this)},e.prototype.setInputRanges=function(a,t){A(a,function(n){var o=this.findTargetInfo(n,t);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var i=nt[n.brushType](0,o.coordSys,n.coordRange),r=n.__rangeOffset;n.range=r?ga[n.brushType](i.values,r.offset,Mr(i.xyMinMax,r.xyMinMax)):i.values}},this)},e.prototype.makePanelOpts=function(a,t){return K(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:xi(o),isTargetByCursor:Si(o,a,n.coordSysModel),getLinearBrushOtherExtent:Ci(o)}})},e.prototype.controlSeries=function(a,t,n){var o=this.findTargetInfo(a,n);return o===!0||o&&Ve(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(a,t){for(var n=this._targetInfoList,o=ha(t,a),i=0;i<n.length;i++){var r=n[i],s=a.panelId;if(s){if(r.panelId===s)return r}else for(var l=0;l<pa.length;l++)if(pa[l](o,r))return r}return!0},e}();function _t(e){return e[0]>e[1]&&e.reverse(),e}function ha(e,a){return Ka(e,a,{includeMainTypes:Ir})}var kr={grid:function(e,a){var t=e.xAxisModels,n=e.yAxisModels,o=e.gridModels,i=ao(),r={},s={};!t&&!n&&!o||(A(t,function(l){var u=l.axis.grid.model;i.set(u.id,u),r[u.id]=!0}),A(n,function(l){var u=l.axis.grid.model;i.set(u.id,u),s[u.id]=!0}),A(o,function(l){i.set(l.id,l),r[l.id]=!0,s[l.id]=!0}),i.each(function(l){var u=l.coordinateSystem,c=[];A(u.getCartesians(),function(d,h){(Ve(t,d.getAxis("x").model)>=0||Ve(n,d.getAxis("y").model)>=0)&&c.push(d)}),a.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:fa.grid,xAxisDeclared:r[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,a){A(e.geoModels,function(t){var n=t.coordinateSystem;a.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:fa.geo})})}},pa=[function(e,a){var t=e.xAxisModel,n=e.yAxisModel,o=e.gridModel;return!o&&t&&(o=t.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===a.gridModel},function(e,a){var t=e.geoModel;return t&&t===a.geoModel}],fa={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,a=e.getBoundingRect().clone();return a.applyTransform(Ua(e)),a}},nt={lineX:Q(va,0),lineY:Q(va,1),rect:function(e,a,t,n){var o=e?a.pointToData([t[0][0],t[1][0]],n):a.dataToPoint([t[0][0],t[1][0]],n),i=e?a.pointToData([t[0][1],t[1][1]],n):a.dataToPoint([t[0][1],t[1][1]],n),r=[_t([o[0],i[0]]),_t([o[1],i[1]])];return{values:r,xyMinMax:r}},polygon:function(e,a,t,n){var o=[[1/0,-1/0],[1/0,-1/0]],i=K(t,function(r){var s=e?a.pointToData(r,n):a.dataToPoint(r,n);return o[0][0]=Math.min(o[0][0],s[0]),o[1][0]=Math.min(o[1][0],s[1]),o[0][1]=Math.max(o[0][1],s[0]),o[1][1]=Math.max(o[1][1],s[1]),s});return{values:i,xyMinMax:o}}};function va(e,a,t,n){var o=t.getAxis(["x","y"][e]),i=_t(K([0,1],function(s){return a?o.coordToData(o.toLocalCoord(n[s]),!0):o.toGlobalCoord(o.dataToCoord(n[s]))})),r=[];return r[e]=i,r[1-e]=[NaN,NaN],{values:i,xyMinMax:r}}var ga={lineX:Q(ma,0),lineY:Q(ma,1),rect:function(e,a,t){return[[e[0][0]-t[0]*a[0][0],e[0][1]-t[0]*a[0][1]],[e[1][0]-t[1]*a[1][0],e[1][1]-t[1]*a[1][1]]]},polygon:function(e,a,t){return K(e,function(n,o){return[n[0]-t[0]*a[o][0],n[1]-t[1]*a[o][1]]})}};function ma(e,a,t,n){return[a[0]-n[e]*t[0],a[1]-n[e]*t[1]]}function Mr(e,a){var t=ya(e),n=ya(a),o=[t[0]/n[0],t[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function ya(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}const gn=Lr;var bt=A,Br=oo("toolbox-dataZoom_"),zr=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.render=function(t,n,o,i){this._brushController||(this._brushController=new bi(o.getZr()),this._brushController.on("brush",se(this._onBrush,this)).mount()),Rr(t,n,this,i,o),Nr(t,n)},a.prototype.onclick=function(t,n,o){Vr[o].call(this)},a.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(t){var n=t.areas;if(!t.isEnd||!n.length)return;var o={},i=this.ecModel;this._brushController.updateCovers([]);var r=new gn(zt(this.model),i,{include:["grid"]});r.matchOutputRanges(n,i,function(u,c,d){if(d.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[h],d,c)}}),wr(i,o),this._dispatchZoomAction(o);function s(u,c,d){var h=c.getAxis(u),v=h.model,m=l(u,v,i),p=m.findRepresentativeAxisProxy(v).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(d=Ro(0,d.slice(),h.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),m&&(o[m.id]={dataZoomId:m.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(v){var m=v.getAxisModel(u,c.componentIndex);m&&(h=v)}),h}},a.prototype._dispatchZoomAction=function(t){var n=[];bt(t,function(o,i){n.push(de(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},a.getDefaultOption=function(t){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},a}(ne),Vr={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(Ar(this.ecModel))}};function zt(e){var a={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return a.xAxisIndex==null&&a.xAxisId==null&&(a.xAxisIndex="all"),a.yAxisIndex==null&&a.yAxisId==null&&(a.yAxisIndex="all"),a}function Nr(e,a){e.setIconStatus("back",Pr(a)>1?"emphasis":"normal")}function Rr(e,a,t,n,o){var i=t._isZoomActive;n&&n.type==="takeGlobalCursor"&&(i=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),t._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var r=new gn(zt(e),a,{include:["grid"]}),s=r.makePanelOpts(o,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}no("dataZoom",function(e){var a=e.getComponent("toolbox",0),t=["feature","dataZoom"];if(!a||a.get(t)==null)return;var n=a.getModel(t),o=[],i=zt(n),r=Ka(e,i);bt(r.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),bt(r.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Br+u+d};h[c]=d,o.push(h)}return o});const $r=zr;function Er(e){e.registerComponentModel(or),e.registerComponentView(sr),ke("saveAsImage",ur),ke("magicType",hr),ke("dataView",Sr),ke("dataZoom",$r),ke("restore",Or),wt(ar)}var Fr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.layoutMode="box",t}return a.prototype.init=function(t,n,o){this.mergeDefaultAndTheme(t,o),this._initData()},a.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},a.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var n=this._data.count();this.option.loop?t=(t%n+n)%n:(t>=n&&(t=n-1),t<0&&(t=0)),this.option.currentIndex=t},a.prototype.getCurrentIndex=function(){return this.option.currentIndex},a.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},a.prototype.setPlayState=function(t){this.option.autoPlay=!!t},a.prototype.getPlayState=function(){return!!this.option.autoPlay},a.prototype._initData=function(){var t=this.option,n=t.data||[],o=t.axisType,i=this._names=[],r;o==="category"?(r=[],A(n,function(u,c){var d=io(ro(u),""),h;Be(u)?(h=de(u),h.value=c):h=c,r.push(h),i.push(d)})):r=n;var s={category:"ordinal",time:"time",value:"number"}[o]||"number",l=this._data=new so([{name:"value",type:s}],this);l.initData(r,i)},a.prototype.getData=function(){return this._data},a.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},a.type="timeline",a.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},a}(At);const _a=Fr;var mn=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="timeline.slider",a.defaultOption=lo(_a.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),a}(_a);Ha(mn,uo.prototype);const Wr=mn;var Zr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="timeline",a}(Tt);const Ur=Zr;var Hr=function(e){N(a,e);function a(t,n,o,i){var r=e.call(this,t,n,o)||this;return r.type=i||"value",r}return a.prototype.getLabelModel=function(){return this.model.getModel("label")},a.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},a}($o);const Gr=Hr;var ot=Math.PI,ba=Ya(),jr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.init=function(t,n){this.api=n},a.prototype.render=function(t,n,o){if(this.model=t,this.api=o,this.ecModel=n,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,o),r=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,t);t.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return co("nameValue",{noName:!0,value:c})},A(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](i,r,l,t)},this),this._renderAxisLabel(i,s,l,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},a.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},a.prototype.dispose=function(){this._clearTimer()},a.prototype._layout=function(t,n){var o=t.get(["label","position"]),i=t.get("orient"),r=Yr(t,n),s;o==null||o==="auto"?s=i==="horizontal"?r.y+r.height/2<n.getHeight()/2?"-":"+":r.x+r.width/2<n.getWidth()/2?"+":"-":he(o)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][o]:s=o;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:ot/2},d=i==="vertical"?r.height:r.width,h=t.getModel("controlStyle"),v=h.get("show",!0),m=v?h.get("itemSize"):0,p=v?h.get("itemGap"):0,f=m+p,g=t.get(["label","rotate"])||0;g=g*ot/180;var _,b,y,w=h.get("position",!0),x=v&&h.get("showPlayBtn",!0),C=v&&h.get("showPrevBtn",!0),B=v&&h.get("showNextBtn",!0),k=0,I=d;w==="left"||w==="bottom"?(x&&(_=[0,0],k+=f),C&&(b=[k,0],k+=f),B&&(y=[I-m,0],I-=f)):(x&&(_=[I-m,0],I-=f),C&&(b=[0,0],k+=f),B&&(y=[I-m,0],I-=f));var M=[k,I];return t.get("inverse")&&M.reverse(),{viewRect:r,mainLength:d,orient:i,rotation:c[i],labelRotation:g,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[i],playPosition:_,prevBtnPosition:b,nextBtnPosition:y,axisExtent:M,controlSize:m,controlGap:p}},a.prototype._position=function(t,n){var o=this._mainGroup,i=this._labelGroup,r=t.viewRect;if(t.orient==="vertical"){var s=xo(),l=r.x,u=r.y+r.height;Xt(s,s,[-l,-u]),ho(s,s,-ot/2),Xt(s,s,[l,u]),r=r.clone(),r.applyTransform(s)}var c=_(r),d=_(o.getBoundingRect()),h=_(i.getBoundingRect()),v=[o.x,o.y],m=[i.x,i.y];m[0]=v[0]=c[0][0];var p=t.labelPosOpt;if(p==null||he(p)){var f=p==="+"?0:1;b(v,d,c,1,f),b(m,h,c,1,1-f)}else{var f=p>=0?0:1;b(v,d,c,1,f),m[1]=v[1]+p}o.setPosition(v),i.setPosition(m),o.rotation=i.rotation=t.rotation,g(o),g(i);function g(y){y.originX=c[0][0]-y.x,y.originY=c[1][0]-y.y}function _(y){return[[y.x,y.x+y.width],[y.y,y.y+y.height]]}function b(y,w,x,C,B){y[C]+=x[C][B]-w[C][B]}},a.prototype._createAxis=function(t,n){var o=n.getData(),i=n.get("axisType"),r=qr(n,i);r.getTicks=function(){return o.mapArray(["value"],function(u){return{value:u}})};var s=o.getDataExtent("value");r.setExtent(s[0],s[1]),r.calcNiceTicks();var l=new Gr("value",r,t.axisExtent,i);return l.model=n,l},a.prototype._createGroup=function(t){var n=this[t]=new $e;return this.group.add(n),n},a.prototype._renderAxisLine=function(t,n,o,i){var r=o.getExtent();if(i.get(["lineStyle","show"])){var s=new Jt({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:we({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new Jt({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Pe({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},a.prototype._renderAxisTick=function(t,n,o,i){var r=this,s=i.getData(),l=o.scale.getTicks();this._tickSymbols=[],A(l,function(u){var c=o.dataToCoord(u.value),d=s.getItemModel(u.value),h=d.getModel("itemStyle"),v=d.getModel(["emphasis","itemStyle"]),m=d.getModel(["progress","itemStyle"]),p={x:c,y:0,onclick:se(r._changeTimeline,r,u.value)},f=xa(d,h,n,p);f.ensureState("emphasis").style=v.getItemStyle(),f.ensureState("progress").style=m.getItemStyle(),Xe(f);var g=Ea(f);d.get("tooltip")?(g.dataIndex=u.value,g.dataModel=i):g.dataIndex=g.dataModel=null,r._tickSymbols.push(f)})},a.prototype._renderAxisLabel=function(t,n,o,i){var r=this,s=o.getLabelModel();if(s.get("show")){var l=i.getData(),u=o.getViewLabels();this._tickLabels=[],A(u,function(c){var d=c.tickValue,h=l.getItemModel(d),v=h.getModel("label"),m=h.getModel(["emphasis","label"]),p=h.getModel(["progress","label"]),f=o.dataToCoord(c.tickValue),g=new Ce({x:f,y:0,rotation:t.labelRotation-t.rotation,onclick:se(r._changeTimeline,r,d),silent:!1,style:Se(v,{text:c.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});g.ensureState("emphasis").style=Se(m),g.ensureState("progress").style=Se(p),n.add(g),Xe(g),ba(g).dataIndex=d,r._tickLabels.push(g)})}},a.prototype._renderControl=function(t,n,o,i){var r=t.controlSize,s=t.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel(["emphasis","controlStyle"]).getItemStyle(),c=i.getPlayState(),d=i.get("inverse",!0);h(t.nextBtnPosition,"next",se(this._changeTimeline,this,d?"-":"+")),h(t.prevBtnPosition,"prev",se(this._changeTimeline,this,d?"+":"-")),h(t.playPosition,c?"stop":"play",se(this._handlePlayClick,this,!c),!0);function h(v,m,p,f){if(v){var g=po(ht(i.get(["controlStyle",m+"BtnSize"]),r),r),_=[0,-g/2,g,g],b=Kr(i,m+"Icon",_,{x:v[0],y:v[1],originX:r/2,originY:0,rotation:f?-s:0,rectHover:!0,style:l,onclick:p});b.ensureState("emphasis").style=u,n.add(b),Xe(b)}}},a.prototype._renderCurrentPointer=function(t,n,o,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=se(u._handlePointerDrag,u),d.ondragend=se(u._handlePointerDragend,u),Ca(d,u._progressLine,s,o,i,!0)},onUpdate:function(d){Ca(d,u._progressLine,s,o,i)}};this._currentPointer=xa(l,l,this._mainGroup,{},this._currentPointer,c)},a.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},a.prototype._handlePointerDrag=function(t,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},a.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},a.prototype._pointerChangeTimeline=function(t,n){var o=this._toAxisCoord(t)[0],i=this._axis,r=fo(i.getExtent().slice());o>r[1]&&(o=r[1]),o<r[0]&&(o=r[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=o,s.dirty());var l=this._findNearestTick(o),u=this.model;(n||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},a.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=t.model;t._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},a.prototype._toAxisCoord=function(t){var n=this._mainGroup.getLocalTransform();return vo(t,n,!0)},a.prototype._findNearestTick=function(t){var n=this.model.getData(),o=1/0,i,r=this._axis;return n.each(["value"],function(s,l){var u=r.dataToCoord(s),c=Math.abs(u-t);c<o&&(o=c,i=l)}),i},a.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},a.prototype._changeTimeline=function(t){var n=this.model.getCurrentIndex();t==="+"?t=n+1:t==="-"&&(t=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},a.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",i<t);if(o)for(var i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",ba(o[i]).dataIndex<=t)},a.type="timeline.slider",a}(Ur);function qr(e,a){if(a=a||e.get("type"),a)switch(a){case"category":return new yo({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new mo({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new go}}function Yr(e,a){return ja(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()},e.get("padding"))}function Kr(e,a,t,n){var o=n.style,i=qa(e.get(["controlStyle",a]),n||{},new Ct(t[0],t[1],t[2],t[3]));return o&&i.setStyle(o),i}function xa(e,a,t,n,o,i){var r=a.get("color");if(o)o.setColor(r),t.add(o),i&&i.onUpdate(o);else{var s=e.get("symbol");o=$a(s,-1,-1,2,2,r),o.setStyle("strokeNoScale",!0),t.add(o),i&&i.onCreate(o)}var l=a.getItemStyle(["color"]);o.setStyle(l),n=ce({rectHover:!0,z2:100},n,!0);var u=_o(e.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var c=bo(e.get("symbolOffset"),u);c&&(n.x=(n.x||0)+c[0],n.y=(n.y||0)+c[1]);var d=e.get("symbolRotate");return n.rotation=(d||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function Ca(e,a,t,n,o,i){if(!e.dragging){var r=o.getModel("checkpointStyle"),s=n.dataToCoord(o.getData().get("value",t));if(i||!r.get("animation",!0))e.attr({x:s,y:0}),a&&a.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),a&&a.animateTo({shape:{x2:s}},l)}}}const Xr=jr;function Jr(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(a,t,n){var o=t.getComponent("timeline");return o&&a.currentIndex!=null&&(o.setCurrentIndex(a.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:a.from}))),t.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),Pe({currentIndex:o.option.currentIndex},a)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(a,t){var n=t.getComponent("timeline");n&&a.playState!=null&&n.setPlayState(a.playState)})}function Qr(e){var a=e&&e.timeline;oe(a)||(a=a?[a]:[]),A(a,function(t){t&&es(t)})}function es(e){var a=e.type,t={number:"value",time:"time"};if(t[a]&&(e.axisType=t[a],delete e.type),Sa(e),ge(e,"controlPosition")){var n=e.controlStyle||(e.controlStyle={});ge(n,"position")||(n.position=e.controlPosition),n.position==="none"&&!ge(n,"show")&&(n.show=!1,delete n.position),delete e.controlPosition}A(e.data||[],function(o){Be(o)&&!oe(o)&&(!ge(o,"value")&&ge(o,"name")&&(o.value=o.name),Sa(o))})}function Sa(e){var a=e.itemStyle||(e.itemStyle={}),t=a.emphasis||(a.emphasis={}),n=e.label||e.label||{},o=n.normal||(n.normal={}),i={normal:1,emphasis:1};A(n,function(r,s){!i[s]&&!ge(o,s)&&(o[s]=r)}),t.label&&!ge(n,"emphasis")&&(n.emphasis=t.label,delete t.label)}function ge(e,a){return e.hasOwnProperty(a)}function ts(e){e.registerComponentModel(Wr),e.registerComponentView(Xr),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),Jr(e),e.registerPreprocessor(Qr)}function Ze(){return`#${(Math.random()*16777215<<0).toString(16)}`}function as(e,a){const t=e.indexOf("open"),n=e.indexOf("close"),o=e.indexOf("high"),i=e.indexOf("low");let r;return a.map((s,l)=>{const u=s.slice(),c=l===0?(u[t]+u[n])/2:(r[t]+r[n])/2,d=(u[t]+u[o]+u[i]+u[n])/4,h=Math.max(u[o],u[t],u[n]),v=Math.min(u[i],u[t],u[n]);return u[t]=c,u[n]=d,u[o]=h,u[i]=v,r=u.slice(),u})}const ns=2,os=3;function be(e,a,t=os){const n=a%e;return a-n+(t===ns?e:0)}function yn(e,a){return`${a.ft_order_side==="buy"?"+":"-"}${wn("cost"in a?a.cost:a.amount*a.safe_price,e.quote_currency??"<stake_currency>")}`}function wa(e,a,t){return`${e.is_short?"Short":"Long"} ${t}  ${Ma(e.profit_ratio)}
  ${yn(e,a)}
  Enter-tag: ${e.enter_tag??""}
  Exit-Tag: ${e.exit_reason??""}`}function is(e,a){return`${e.is_short?"Short":"Long"} adjustment
  ${yn(e,a)}
  Enter-tag: ${e.enter_tag??""}`}const rs="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Aa="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",it="#AD00FF",rt="#0066FF";function ss(e,a){const t=[];for(let n=0,o=a.length;n<o;n+=1){const i=a[n];if((be(e.timeframe_ms??0,i.open_timestamp)<=e.data_stop_ts||!i.close_timestamp||i.close_timestamp&&i.close_timestamp>=e.data_start_ts)&&i.orders)for(let r=0;r<i.orders.length;r++){const s=i.orders[r];s.order_filled_timestamp&&be(e.timeframe_ms??0,s.order_filled_timestamp)<=e.data_stop_ts&&s.order_filled_timestamp>e.data_start_ts&&(r===0?t.push([be(e.timeframe_ms??0,i.open_timestamp),s.safe_price,Aa,s.ft_order_side=="sell"?180:0,i.is_short?it:rt,i.is_short?"Short":"Long",wa(i,s,"entry")]):r===i.orders.length-1&&i.close_timestamp?be(e.timeframe_ms??0,i.close_timestamp)<=e.data_stop_ts&&i.close_timestamp>e.data_start_ts&&i.is_open===!1&&t.push([be(e.timeframe_ms??0,i.close_timestamp),s.safe_price,Aa,i.is_short?0:180,i.is_short?it:rt,Ma(i.profit_ratio,2),wa(i,s,"exit")]):t.push([be(e.timeframe_ms??0,s.order_filled_timestamp),s.safe_price,rs,s.ft_order_side=="sell"?180:0,i.is_short?it:rt,"",is(i,s)]))}}return{tradeData:t}}wt([So,Xi,wo,Eo,Fo,Ao,ts,To,Er,Po,Wo,Zo,Ui,Uo,Ho,ti,Do]);const st="5.5%",lt="1%",Ta=55,Me=8,ls="#26A69A",us="#26A69A",cs="#EF5350",ds="#EF5350",hs="#00ff26",ps="#00ff26",fs="#faba25",vs="#faba25",gs=Ge({name:"CandleChart",components:{"v-chart":Co},props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(e){const a=R(),t=R([]),n=R([]),o=R({}),i=E(()=>e.dataset?e.dataset.strategy:""),r=E(()=>e.dataset?e.dataset.pair:""),s=E(()=>e.dataset?e.dataset.timeframe:""),l=E(()=>e.dataset?e.dataset.columns:[]),u=E(()=>e.dataset!==null&&typeof e.dataset=="object"),c=E(()=>e.trades.filter(p=>p.pair===r.value)),d=E(()=>`${i.value} - ${r.value} - ${s.value}`),h=(p=!1)=>{var ee,fe,_e,$;if(!u.value)return;(ee=o.value)!=null&&ee.title&&(o.value.title[0].text=d.value);const f=e.dataset.columns.findIndex(S=>S==="__date_ts"),g=e.dataset.columns.findIndex(S=>S==="open"),_=e.dataset.columns.findIndex(S=>S==="high"),b=e.dataset.columns.findIndex(S=>S==="low"),y=e.dataset.columns.findIndex(S=>S==="close"),w=e.dataset.columns.findIndex(S=>S==="volume"),x=e.dataset.columns.findIndex(S=>S==="_buy_signal_close"||S==="_enter_long_signal_close"),C=e.dataset.columns.findIndex(S=>S==="_sell_signal_close"||S==="_exit_long_signal_close"),B=e.dataset.columns.findIndex(S=>S==="_enter_short_signal_close"),k=e.dataset.columns.findIndex(S=>S==="_exit_short_signal_close"),I="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((fe=o.value)==null?void 0:fe.dataZoom))if(p){const S=(1-250/e.dataset.length)*100;o.value.dataZoom.forEach((G,j)=>{o.value&&o.value.dataZoom&&(o.value.dataZoom[j].start=S)})}else o.value.dataZoom.forEach((S,G)=>{o.value&&o.value.dataZoom&&(delete o.value.dataZoom[G].start,delete o.value.dataZoom[G].end)});const M=e.heikinAshi?as(l.value,e.dataset.data):e.dataset.data.slice(),O=Array(M.length>0?M[M.length-2].length:0);O[f]=M[M.length-1][f]+e.dataset.timeframe_ms*3,M.push(O);const F={dataset:{source:M},grid:[{left:st,right:lt,bottom:`${I*Me+2}%`},{left:st,right:lt,bottom:`${I*Me}%`,height:`${Me}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:ls,color0:cs,borderColor:us,borderColor0:ds},encode:{x:f,y:[g,y,b,_]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:f,y:w}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:hs},encode:{x:f,y:x}}]};if(C>=0&&Array.isArray(F.series)&&F.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:fs},encode:{x:f,y:C}}),Array.isArray(F.series)&&(B>=0&&F.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ps},tooltip:{},encode:{x:f,y:B}}),k>=0&&F.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:vs},tooltip:{},encode:{x:f,y:k}})),Object.assign(o.value,F),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([S,G])=>{var q,U,De,Oe,Ie;const j=e.dataset.columns.findIndex(ve=>ve===S);if(j>1){!Array.isArray((q=o.value)==null?void 0:q.legend)&&((De=(U=o.value)==null?void 0:U.legend)!=null&&De.data)&&o.value.legend.data.push(S);const ve={name:S,type:G.type||"line",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:G.color},encode:{x:f,y:j},showSymbol:!1};Array.isArray((Oe=o.value)==null?void 0:Oe.series)&&((Ie=o.value)==null||Ie.series.push(ve))}else console.log(`element ${S} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let S=2;Object.entries(e.plotConfig.subplots).forEach(([G,j])=>{const q=S;Array.isArray(o.value.yAxis)&&o.value.yAxis.length<=S&&o.value.yAxis.push({scale:!0,gridIndex:q,name:G,nameLocation:"middle",nameGap:Ta,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(o.value.xAxis)&&o.value.xAxis.length<=S&&o.value.xAxis.push({type:"time",scale:!0,gridIndex:q,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(o.value.dataZoom)&&o.value.dataZoom.forEach(U=>U.xAxisIndex&&Array.isArray(U.xAxisIndex)?U.xAxisIndex.push(S):null),o.value.grid&&Array.isArray(o.value.grid)&&o.value.grid.push({left:st,right:lt,bottom:`${(I-S+1)*Me}%`,height:`${Me}%`}),Object.entries(j).forEach(([U,De])=>{var Ie;const Oe=e.dataset.columns.findIndex(ve=>ve===U);if(Oe>0){!Array.isArray(o.value.legend)&&((Ie=o.value.legend)!=null&&Ie.data)&&o.value.legend.data.push(U);const ve={name:U,type:De.type||"line",xAxisIndex:S,yAxisIndex:S,itemStyle:{color:De.color||Ze()},encode:{x:f,y:Oe},showSymbol:!1};o.value.series&&Array.isArray(o.value.series)&&o.value.series.push(ve)}else console.log(`element ${U} was not found in the columns.`)}),S+=1})}Array.isArray(o.value.grid)&&(o.value.grid[o.value.grid.length-1].bottom="50px",delete o.value.grid[o.value.grid.length-1].top);const{tradeData:X}=ss(e.dataset,c.value),pe="Trades";!Array.isArray(o.value.legend)&&((_e=o.value.legend)!=null&&_e.data)&&o.value.legend.data.push(pe);const Y={name:pe,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e.theme!=="dark"?"#fff":"#000",padding:2,color:e.theme==="dark"?"#fff":"#000"},labelLayout:{rotate:75,align:"left",dx:10},itemStyle:{color:S=>S.data[4],opacity:.9},symbol:S=>S[2],symbolRotate:S=>S[3],symbolSize:13,data:X};Array.isArray(o.value.series)&&o.value.series.push(Y),($=a.value)==null||$.setOption(o.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!p})},v=()=>{var p;(p=a.value)==null||p.setOption({},{noMerge:!0}),o.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(f,g,_,b,y){const w={top:60},x=f[0]<y.viewSize[0]/2;return w[["left","right"][+x]]=x?5:60,w}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Ta,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:80,end:100}]},console.log("Initialized"),h(!0)},m=()=>{if(!e.sliderPosition)return;const p=$t(e.sliderPosition.startValue-e.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),f=$t(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");a.value&&a.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:p,endValue:f})};return xt(()=>{v()}),ue(()=>e.useUTC,()=>v()),ue(()=>e.dataset,()=>h()),ue(()=>e.plotConfig,()=>v()),ue(()=>e.heikinAshi,()=>h()),ue(()=>e.sliderPosition,()=>m()),{candleChart:a,buyData:t,sellData:n,strategy:i,pair:r,timeframe:s,datasetColumns:l,hasData:u,filteredTrades:c,chartTitle:d}}});const ms={class:"d-flex flex-grow-1 chart-wrapper"};function ys(e,a,t,n,o,i){const r=Z("v-chart");return P(),z("div",ms,[e.hasData?(P(),J(r,{key:0,ref:"candleChart",theme:e.theme,autoresize:"","manual-update":""},null,8,["theme"])):W("",!0)])}const _s=Re(gs,[["render",ys],["__scopeId","data-v-e4e7dfd2"]]),_n="ft_custom_plot_config",bn="ft_selected_plot_config";function bs(){return localStorage.getItem(bn)||"default"}function xn(e){localStorage.setItem(bn,e)}function Vt(){return JSON.parse(localStorage.getItem(_n)||"{}")}function Pa(){return Object.keys(Vt())}function Cn(e){const a=Vt();return e in a?a[e]:{...Ue}}function xs(e){const t={...Vt(),...e};localStorage.setItem(_n,JSON.stringify(t)),xn(Object.keys(e)[0])}const Cs={name:"CloseCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ss=["aria-hidden","aria-label"],ws=["fill","width","height"],As={d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},Ts={key:0};function Ps(e,a,t,n,o,i){return P(),z("span",ut(e.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon close-circle-outline-icon",role:"img",onClick:a[0]||(a[0]=r=>e.$emit("click",r))}),[(P(),z("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[V("path",As,[t.title?(P(),z("title",Ts,re(t.title),1)):W("",!0)])],8,ws))],16,Ss)}const Ds=Re(Cs,[["render",Ps]]),Os=e=>(Ba("data-v-6dd49f6f"),e=e(),za(),e),Is={key:0},Ls=Os(()=>V("hr",null,null,-1)),ks={class:"d-flex d-flex-columns"},Ms=Ge({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array},addNew:{required:!0,type:Boolean}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,n=R(Ze()),o=R(We.line),i=R(Object.keys(We)),r=R(""),s=R(""),l=R(!1),u=E(()=>t.columns.filter(m=>m.toLowerCase().includes(r.value.toLowerCase()))),c=()=>{n.value=Ze()},d=E(()=>l.value||!s.value?{}:{[s.value]:{color:n.value,type:o.value}}),h=()=>{a("update:modelValue",d.value)},v=()=>{l.value=!0,h()};return ue(()=>t.modelValue,()=>{[s.value]=Object.keys(t.modelValue),l.value=!1,s.value&&t.modelValue&&(n.value=t.modelValue[s.value].color||Ze(),o.value=t.modelValue[s.value].type||We.line)}),ue(n,()=>{t.addNew||h()}),(m,p)=>{const f=Z("b-form-input"),g=Z("b-input-group-append"),_=Z("b-input-group"),b=Z("b-form-select"),y=Z("b-form-group"),w=Z("b-input-group-prepend"),x=Z("b-button");return P(),z("div",null,[e.addNew?(P(),z("div",Is,[T(y,{label:"Add indicator","label-for":"indicatorSelector"},{default:L(()=>[T(_,{size:"sm"},{default:L(()=>[T(f,{modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=C=>r.value=C),placeholder:"Filter indicators"},null,8,["modelValue"]),T(g,null,{default:L(()=>[T(Ds,{class:"pointer align-self-center ms-1",size:18,onClick:p[1]||(p[1]=C=>r.value="")})]),_:1})]),_:1}),T(b,{id:"indicatorSelector",modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=C=>s.value=C),options:D(u),"select-size":4},null,8,["modelValue","options"])]),_:1})])):W("",!0),T(y,{label:"Type","label-for":"plotTypeSelector"},{default:L(()=>[T(b,{id:"plotTypeSelector",modelValue:o.value,"onUpdate:modelValue":p[3]||(p[3]=C=>o.value=C),size:"sm",options:i.value,onChange:p[4]||(p[4]=C=>h())},null,8,["modelValue","options"])]),_:1}),Ls,T(y,{label:"Color","label-for":"colsel",size:"sm"},{default:L(()=>[T(_,null,{default:L(()=>[T(w,null,{default:L(()=>[V("div",{style:An({"background-color":n.value}),class:"colorbox me-2"},null,4)]),_:1}),T(f,{id:"colsel",modelValue:n.value,"onUpdate:modelValue":p[5]||(p[5]=C=>n.value=C),size:"sm"},null,8,["modelValue"]),T(g,null,{default:L(()=>[T(x,{variant:"primary",size:"sm",onClick:c},{default:L(()=>[H("↻")]),_:1})]),_:1})]),_:1})]),_:1}),V("div",ks,[e.addNew?(P(),J(x,{key:0,class:"flex-grow-1",variant:"primary",title:"Add ",size:"sm",onClick:h},{default:L(()=>[H(" Save indicator ")]),_:1})):W("",!0),e.addNew?(P(),J(x,{key:1,class:"ms-1 flex-grow-1",variant:"secondary",title:"Add ",size:"sm",onClick:v},{default:L(()=>[H(" Cancel ")]),_:1})):W("",!0)])])}}});const Bs=Re(Ms,[["__scopeId","data-v-6dd49f6f"]]),Sn=Tn("plotConfig",{state:()=>({customPlotConfig:{},plotConfigName:bs(),availablePlotConfigNames:Pa(),plotConfig:{...Ue}}),getters:{},actions:{saveCustomPlotConfig(e){this.customPlotConfig=e,xs(e),this.availablePlotConfigNames=Pa()},setPlotConfigName(e){this.plotConfigName=e,xn(e)},plotConfigChanged(e=""){console.log("plotConfigChanged"),this.setPlotConfigName(e||this.plotConfigName),this.plotConfig=Cn(this.plotConfigName)},setPlotConfig(e){console.log("emit..."),this.plotConfig={...e}}}}),Nt=e=>(Ba("data-v-02ea3f44"),e=e(),za(),e),zs={key:0},Vs={class:"col-mb-3"},Ns=Nt(()=>V("hr",null,null,-1)),Rs=Nt(()=>V("hr",null,null,-1)),$s=Nt(()=>V("hr",null,null,-1)),Es={key:1,class:"col-mb-5 ms-1 mt-2"},Fs=Ge({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},setup(e){const a=Sn(),t=Va(),n=R(Ue),o=R("default"),i=R(""),r=R(""),s=R(!1),l=R(!1),u=R("main_plot"),c=R(),d=R(!0),h=E(()=>u.value==="main_plot"),v=E(()=>h.value?n.value.main_plot:n.value.subplots[u.value]),m=E(()=>["main_plot",...Object.keys(n.value.subplots)]),p=E(()=>h.value?Object.keys(n.value.main_plot):u.value in n.value.subplots?Object.keys(n.value.subplots[u.value]):[]);function f(M){console.log(n.value);const O=Object.keys(M)[0],F=M[O];h.value?(console.log(`Adding ${O} to MainPlot`),n.value.main_plot[O]={...F}):(console.log(`Adding ${O} to ${u.value}`),n.value.subplots[u.value][O]={...F}),n.value={...n.value},s.value=!1,a.setPlotConfig(n.value)}const g=E({get(){return s.value?{}:r.value?{[r.value]:v.value[r.value]}:{}},set(M){Object.keys(M)[0]&&M?f(M):s.value=!1}}),_=E({get(){return JSON.stringify(n.value,null,2)},set(M){try{c.value=JSON.parse(M),d.value=!0}catch{d.value=!1}}});function b(){console.log(n.value),h.value?(console.log(`Removing ${r.value} from MainPlot`),delete n.value.main_plot[r.value]):(console.log(`Removing ${r.value} from ${u.value}`),delete n.value.subplots[u.value][r.value]),n.value={...n.value},console.log(n.value),r.value="",a.setPlotConfig(n.value)}function y(){n.value.subplots={...n.value.subplots,[i.value]:{}},u.value=i.value,i.value="",a.setPlotConfig(n.value)}function w(){delete n.value.subplots[u.value],n.value.subplots={...n.value.subplots},u.value="",a.setPlotConfig(n.value)}function x(){n.value=Cn(o.value),console.log(n.value),console.log("loading config"),a.setPlotConfig(n.value)}function C(){c.value!==void 0&&d.value&&(n.value=c.value,a.setPlotConfig(n.value))}function B(){n.value={...Ue}}async function k(){if(t.activeBot.isWebserverMode&&!t.activeBot.strategy.strategy){Ft("No strategy selected, can't load plot config.");return}try{await t.activeBot.getStrategyPlotConfig(),t.activeBot.strategyPlotConfig&&(n.value=t.activeBot.strategyPlotConfig,a.setPlotConfig(n.value))}catch{Ft("Failed to load Plot configuration from Strategy.")}}function I(){a.saveCustomPlotConfig({[o.value]:n.value})}return xt(()=>{n.value=a.plotConfig,o.value=a.plotConfigName}),(M,O)=>{const F=Z("b-form-input"),X=Z("b-form-group"),pe=Z("b-form-select"),Y=Z("b-button"),ee=Z("b-input-group-append"),fe=Z("b-input-group"),_e=Z("b-form-textarea");return e.columns?(P(),z("div",zs,[T(X,{label:"Plot config name","label-for":"idPlotConfigName"},{default:L(()=>[T(F,{id:"idPlotConfigName",modelValue:o.value,"onUpdate:modelValue":O[0]||(O[0]=$=>o.value=$),size:"sm"},null,8,["modelValue"])]),_:1}),V("div",Vs,[Ns,T(X,{label:"Target","label-for":"FieldSel"},{default:L(()=>[T(pe,{id:"FieldSel",modelValue:u.value,"onUpdate:modelValue":O[1]||(O[1]=$=>u.value=$),options:D(m),"select-size":3},null,8,["modelValue","options"])]),_:1})]),T(X,{label:"Add new plot","label-for":"newSubPlot"},{default:L(()=>[T(fe,{size:"sm"},{default:L(()=>[T(F,{id:"newSubPlot",modelValue:i.value,"onUpdate:modelValue":O[2]||(O[2]=$=>i.value=$),class:"addPlot"},null,8,["modelValue"]),T(ee,null,{default:L(()=>[T(Y,{disabled:!i.value,onClick:y},{default:L(()=>[H("+")]),_:1},8,["disabled"]),u.value&&u.value!="main_plot"?(P(),J(Y,{key:0,onClick:w},{default:L(()=>[H("-")]),_:1})):W("",!0)]),_:1})]),_:1})]),_:1}),Rs,V("div",null,[T(X,{label:"Used indicators","label-for":"selectedIndicators"},{default:L(()=>[T(pe,{id:"selectedIndicators",modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=$=>r.value=$),options:D(p),"select-size":4},null,8,["modelValue","options"])]),_:1})]),V("div",null,[T(Y,{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:s.value,onClick:O[4]||(O[4]=$=>s.value=!s.value)},{default:L(()=>[H(" Add new indicator ")]),_:1},8,["disabled"]),T(Y,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!r.value,class:"ms-1",onClick:b},{default:L(()=>[H(" Remove indicator ")]),_:1},8,["disabled"])]),r.value||s.value?(P(),J(Bs,{key:0,modelValue:D(g),"onUpdate:modelValue":O[5]||(O[5]=$=>Et(g)?g.value=$:null),class:"mt-1",columns:e.columns,"add-new":s.value},null,8,["modelValue","columns","add-new"])):W("",!0),$s,V("div",null,[T(Y,{class:"ms-1",variant:"secondary",size:"sm",onClick:x},{default:L(()=>[H("Load")]),_:1}),T(Y,{disabled:D(t).activeBot.isWebserverMode&&D(t).activeBot.botApiVersion<2.23||!D(t).activeBot.isBotOnline,class:"ms-1",variant:"secondary",size:"sm",onClick:k},{default:L(()=>[H(" From strategy ")]),_:1},8,["disabled"]),T(Y,{class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:B},{default:L(()=>[H("Reset")]),_:1}),T(Y,{id:"showButton",class:"ms-1",variant:"secondary",size:"sm",title:"Show configuration for easy transfer to a strategy",onClick:O[6]||(O[6]=$=>l.value=!l.value)},{default:L(()=>[H("Show")]),_:1}),l.value?(P(),J(Y,{key:0,class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:C},{default:L(()=>[H("Load from String")]),_:1})):W("",!0),T(Y,{class:"ms-1",variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration",onClick:I},{default:L(()=>[H("Save")]),_:1})]),l.value?(P(),z("div",Es,[T(_e,{id:"TextArea",modelValue:D(_),"onUpdate:modelValue":O[7]||(O[7]=$=>Et(_)?_.value=$:null),class:"textArea",size:"sm",state:d.value},null,8,["modelValue","state"])])):W("",!0)])):W("",!0)}}});const Da=Re(Fs,[["__scopeId","data-v-02ea3f44"]]);var Ws=Object.defineProperty,Zs=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,Oa=Object.getOwnPropertySymbols,Hs=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Ia=(e,a,t)=>a in e?Ws(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,xe=(e,a)=>{for(var t in a||(a={}))Hs.call(a,t)&&Ia(e,t,a[t]);if(Oa)for(var t of Oa(a))Gs.call(a,t)&&Ia(e,t,a[t]);return e},La=(e,a)=>Zs(e,Us(a));const js={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(e){this.autoscroll&&e&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var e;const a=((e=this.$refs.dropdownMenu)==null?void 0:e.children[this.typeAheadPointer])||!1;if(a){const t=this.getDropdownViewport(),{top:n,bottom:o,height:i}=a.getBoundingClientRect();if(n<t.top)return this.$refs.dropdownMenu.scrollTop=a.offsetTop;if(o>t.bottom)return this.$refs.dropdownMenu.scrollTop=a.offsetTop-(t.height-i)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},qs={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open(e){e&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown(){for(let e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect(){const e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},Ys={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(e){this.mutableLoading=e}},methods:{toggleLoading(e=null){return e==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=e}}},Rt=(e,a)=>{const t=e.__vccOpts||e;for(const[n,o]of a)t[n]=o;return t},Ks={},Xs={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},Js=V("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),Qs=[Js];function el(e,a){return P(),z("svg",Xs,Qs)}const tl=Rt(Ks,[["render",el]]),al={},nl={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},ol=V("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),il=[ol];function rl(e,a){return P(),z("svg",nl,il)}const sl=Rt(al,[["render",rl]]),ka={Deselect:tl,OpenIndicator:sl},ll={mounted(e,{instance:a}){if(a.appendToBody){const{height:t,top:n,left:o,width:i}=a.$refs.toggle.getBoundingClientRect();let r=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;e.unbindPosition=a.calculatePosition(e,a,{width:i+"px",left:r+o+"px",top:s+n+t+"px"}),document.body.appendChild(e)}},unmounted(e,{instance:a}){a.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}};function ul(e){const a={};return Object.keys(e).sort().forEach(t=>{a[t]=e[t]}),JSON.stringify(a)}let cl=0;function dl(){return++cl}const hl={components:xe({},ka),directives:{appendToBody:ll},mixins:[js,qs,Ys],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0},getOptionLabel:{type:Function,default(e){return typeof e=="object"?e.hasOwnProperty(this.label)?e[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(e)}.
https://vue-select.org/api/props.html#getoptionlabel`):e}},getOptionKey:{type:Function,default(e){if(typeof e!="object")return e;try{return e.hasOwnProperty("id")?e.id:ul(e)}catch(a){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,e,a)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(e,a,t){return(a||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},filter:{type:Function,default(e,a){return e.filter(t=>{let n=this.getOptionLabel(t);return typeof n=="number"&&(n=n.toString()),this.filterBy(t,n,a)})}},createOption:{type:Function,default(e){return typeof this.optionList[0]=="object"?{[this.label]:e}:e}},resetOnOptionsChange:{default:!1,validator:e=>["function","boolean"].includes(typeof e)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:e,multiple:a}){return e&&!a}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(e,a)=>e},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,a,{width:t,top:n,left:o}){e.style.top=n,e.style.left=o,e.style.width=t}},dropdownShouldOpen:{type:Function,default({noDrop:e,open:a,mutableLoading:t}){return e?!1:a&&!t}},uid:{type:[String,Number],default:()=>dl()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let e=this.modelValue;return this.isTrackingValues&&(e=this.$data._value),e!=null&&e!==""?[].concat(e):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const e={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:xe({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:a=>this.search=a.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:e,listFooter:e,header:La(xe({},e),{deselect:this.deselect}),footer:La(xe({},e),{deselect:this.deselect})}},childComponents(){return xe(xe({},ka),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;const a=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){const t=this.createOption(this.search);this.optionExists(t)||a.unshift(t)}return a},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(e,a){const t=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(e,a,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&t()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple(){this.clearSelection()},open(e){this.$emit(e?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(e){Array.isArray(e)?this.$data._value=e.map(a=>this.findOptionFromReducedValue(a)):this.$data._value=this.findOptionFromReducedValue(e)},select(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&(this.$emit("option:created",e),this.pushTag(e)),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect(e){this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter(a=>!this.optionComparator(a,e))),this.$emit("option:deselected",e)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(e){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(e){typeof this.modelValue>"u"&&(this.$data._value=e),e!==null&&(Array.isArray(e)?e=e.map(a=>this.reduce(a)):e=this.reduce(e)),this.$emit("update:modelValue",e)},toggleDropdown(e){const a=e.target!==this.searchEl;a&&e.preventDefault();const t=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||t.filter(Boolean).some(n=>n.contains(e.target)||n===e.target)){e.preventDefault();return}this.open&&a?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(e){return this.selectedValue.some(a=>this.optionComparator(a,e))},isOptionDeselectable(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator(e,a){return this.getOptionKey(e)===this.getOptionKey(a)},findOptionFromReducedValue(e){const a=n=>JSON.stringify(this.reduce(n))===JSON.stringify(e),t=[...this.options,...this.pushedTags].filter(a);return t.length===1?t[0]:t.find(n=>this.optionComparator(n,this.$data._value))||e},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let e=null;this.multiple&&(e=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(e)}},optionExists(e){return this.optionList.some(a=>this.optionComparator(a,e))},normalizeOptionForSlot(e){return typeof e=="object"?e:{[this.label]:e}},pushTag(e){this.pushedTags.push(e)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:e,multiple:a}=this;this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:a})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(e){const a=o=>(o.preventDefault(),!this.isComposing&&this.typeAheadSelect()),t={8:o=>this.maybeDeleteValue(),9:o=>this.onTab(),27:o=>this.onEscape(),38:o=>(o.preventDefault(),this.typeAheadUp()),40:o=>(o.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(o=>t[o]=a);const n=this.mapKeydown(t,this);if(typeof n[e.keyCode]=="function")return n[e.keyCode](e)}}},pl=["dir"],fl=["id","aria-expanded","aria-owns"],vl={ref:"selectedOptions",class:"vs__selected-options"},gl=["disabled","title","aria-label","onClick"],ml={ref:"actions",class:"vs__actions"},yl=["disabled"],_l={class:"vs__spinner"},bl=["id"],xl=["id","aria-selected","onMouseover","onClick"],Cl={key:0,class:"vs__no-options"},Sl=H(" Sorry, no matching options. "),wl=["id"];function Al(e,a,t,n,o,i){const r=Pn("append-to-body");return P(),z("div",{dir:t.dir,class:Ht(["v-select",i.stateClasses])},[te(e.$slots,"header",ae(ie(i.scope.header))),V("div",{id:`vs${t.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":i.dropdownOpen.toString(),"aria-owns":`vs${t.uid}__listbox`,"aria-label":"Search for option",onMousedown:a[1]||(a[1]=s=>i.toggleDropdown(s))},[V("div",vl,[(P(!0),z(Wt,null,Zt(i.selectedValue,(s,l)=>te(e.$slots,"selected-option-container",{option:i.normalizeOptionForSlot(s),deselect:i.deselect,multiple:t.multiple,disabled:t.disabled},()=>[(P(),z("span",{key:t.getOptionKey(s),class:"vs__selected"},[te(e.$slots,"selected-option",ae(ie(i.normalizeOptionForSlot(s))),()=>[H(re(t.getOptionLabel(s)),1)]),t.multiple?(P(),z("button",{key:0,ref_for:!0,ref:u=>o.deselectButtons[l]=u,disabled:t.disabled,type:"button",class:"vs__deselect",title:`Deselect ${t.getOptionLabel(s)}`,"aria-label":`Deselect ${t.getOptionLabel(s)}`,onClick:u=>i.deselect(s)},[(P(),J(Ye(i.childComponents.Deselect)))],8,gl)):W("",!0)]))])),256)),te(e.$slots,"search",ae(ie(i.scope.search)),()=>[V("input",ut({class:"vs__search"},i.scope.search.attributes,Dn(i.scope.search.events)),null,16)])],512),V("div",ml,[Ee(V("button",{ref:"clearButton",disabled:t.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:a[0]||(a[0]=(...s)=>i.clearSelection&&i.clearSelection(...s))},[(P(),J(Ye(i.childComponents.Deselect)))],8,yl),[[ct,i.showClearButton]]),te(e.$slots,"open-indicator",ae(ie(i.scope.openIndicator)),()=>[t.noDrop?W("",!0):(P(),J(Ye(i.childComponents.OpenIndicator),ae(ut({key:0},i.scope.openIndicator.attributes)),null,16))]),te(e.$slots,"spinner",ae(ie(i.scope.spinner)),()=>[Ee(V("div",_l,"Loading...",512),[[ct,e.mutableLoading]])])],512)],40,fl),T(Na,{name:t.transition},{default:L(()=>[i.dropdownOpen?Ee((P(),z("ul",{id:`vs${t.uid}__listbox`,ref:"dropdownMenu",key:`vs${t.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:a[2]||(a[2]=Ut((...s)=>i.onMousedown&&i.onMousedown(...s),["prevent"])),onMouseup:a[3]||(a[3]=(...s)=>i.onMouseUp&&i.onMouseUp(...s))},[te(e.$slots,"list-header",ae(ie(i.scope.listHeader))),(P(!0),z(Wt,null,Zt(i.filteredOptions,(s,l)=>(P(),z("li",{id:`vs${t.uid}__option-${l}`,key:t.getOptionKey(s),role:"option",class:Ht(["vs__dropdown-option",{"vs__dropdown-option--deselect":i.isOptionDeselectable(s)&&l===e.typeAheadPointer,"vs__dropdown-option--selected":i.isOptionSelected(s),"vs__dropdown-option--highlight":l===e.typeAheadPointer,"vs__dropdown-option--disabled":!t.selectable(s)}]),"aria-selected":l===e.typeAheadPointer?!0:null,onMouseover:u=>t.selectable(s)?e.typeAheadPointer=l:null,onClick:Ut(u=>t.selectable(s)?i.select(s):null,["prevent","stop"])},[te(e.$slots,"option",ae(ie(i.normalizeOptionForSlot(s))),()=>[H(re(t.getOptionLabel(s)),1)])],42,xl))),128)),i.filteredOptions.length===0?(P(),z("li",Cl,[te(e.$slots,"no-options",ae(ie(i.scope.noOptions)),()=>[Sl])])):W("",!0),te(e.$slots,"list-footer",ae(ie(i.scope.listFooter)))],40,bl)),[[r]]):(P(),z("ul",{key:1,id:`vs${t.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,wl))]),_:3},8,["name"]),te(e.$slots,"footer",ae(ie(i.scope.footer)))],10,pl)}const Tl=Rt(hl,[["render",Al]]),Pl={class:"d-flex h-100"},Dl={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},Ol={class:"d-flex me-0"},Il={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},Ll={class:"ms-2 text-nowrap"},kl={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},Ml={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Bl={key:2,class:"ms-2 text-nowrap"},zl={key:3,class:"ms-2 text-nowrap"},Vl={class:"ms-auto d-flex align-items-center w-auto"},Nl={class:"ms-2"},Rl={class:"ms-2 me-0 me-md-1"},$l={class:"me-1 ms-1 h-100"},El={key:1,class:"m-auto"},Fl={key:1,style:{"font-size":"1.5rem"}},Wl={key:0,class:"w-25 config-sidebar"},Zl=Ge({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(e){const a=e,t=On(),n=Va(),o=Sn(),i=R(""),r=R(a.plotConfigModal),s=E(()=>{var f,g;return a.historicView?(f=n.activeBot.history[`${i.value}__${a.timeframe}`])==null?void 0:f.data:(g=n.activeBot.candleData[`${i.value}__${a.timeframe}`])==null?void 0:g.data}),l=E(()=>{var f;return a.strategy||((f=s.value)==null?void 0:f.strategy)||""}),u=E(()=>s.value?s.value.columns:[]),c=E(()=>s.value&&s.value.data.length>0),d=E(()=>a.historicView?n.activeBot.historyStatus===Le.loading:n.activeBot.candleDataStatus===Le.loading),h=E(()=>{switch(a.historicView?n.activeBot.historyStatus:n.activeBot.candleDataStatus){case Le.loading:return"Loading...";case Le.success:return"No data available";case Le.error:return"Failed to load data";default:return"Unknown"}}),v=R(!1),m=()=>{a.plotConfigModal?v.value=!v.value:r.value=!r.value},p=()=>{console.log("refresh",i.value,a.timeframe),i.value&&a.timeframe&&(a.historicView?n.activeBot.getPairHistory({pair:i.value,timeframe:a.timeframe,timerange:a.timerange,strategy:a.strategy}):n.activeBot.getPairCandles({pair:i.value,timeframe:a.timeframe,limit:500}))};return ue(()=>a.availablePairs,()=>{a.availablePairs.find(f=>f===i.value)||([i.value]=a.availablePairs,p())}),ue(()=>n.activeBot.selectedPair,()=>{i.value=n.activeBot.selectedPair,p()}),xt(()=>{n.activeBot.selectedPair?i.value=n.activeBot.selectedPair:a.availablePairs.length>0&&([i.value]=a.availablePairs),o.plotConfigChanged(),c.value||p()}),(f,g)=>{const _=Z("b-button"),b=Z("b-form-checkbox"),y=Z("b-form-select"),w=Z("b-spinner"),x=Z("b-modal");return P(),z("div",Pl,[V("div",Dl,[V("div",Ol,[V("div",Il,[V("span",Ll,re(D(l))+" | "+re(e.timeframe||""),1),T(D(Tl),{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=C=>i.value=C),class:"ms-2",options:e.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:p},null,8,["modelValue","options"]),T(_,{class:"ms-2",disabled:!i.value,size:"sm",onClick:p},{default:L(()=>[H("↻")]),_:1},8,["disabled"]),D(s)?(P(),z("small",kl,"Long signals: "+re(D(s).enter_long_signals||D(s).buy_signals),1)):W("",!0),D(s)?(P(),z("small",Ml,"Long exit: "+re(D(s).exit_long_signals||D(s).sell_signals),1)):W("",!0),D(s)&&D(s).enter_short_signals?(P(),z("small",Bl,"Short entries: "+re(D(s).enter_short_signals),1)):W("",!0),D(s)&&D(s).exit_short_signals?(P(),z("small",zl,"Short exits: "+re(D(s).exit_short_signals),1)):W("",!0)]),V("div",Vl,[T(b,{modelValue:D(t).useHeikinAshiCandles,"onUpdate:modelValue":g[1]||(g[1]=C=>D(t).useHeikinAshiCandles=C)},{default:L(()=>[H("Heikin Ashi")]),_:1},8,["modelValue"]),V("div",Nl,[T(y,{modelValue:D(o).plotConfigName,"onUpdate:modelValue":g[2]||(g[2]=C=>D(o).plotConfigName=C),options:D(o).availablePlotConfigNames,size:"sm",onChange:D(o).plotConfigChanged},null,8,["modelValue","options","onChange"])]),V("div",Rl,[T(_,{size:"sm",title:"Plot configurator",onClick:m},{default:L(()=>[H(" ⚙ ")]),_:1})])])]),V("div",$l,[D(c)?(P(),J(_s,{key:0,dataset:D(s),trades:e.trades,"plot-config":D(o).plotConfig,"heikin-ashi":D(t).useHeikinAshiCandles,"use-u-t-c":D(t).timezone==="UTC",theme:D(t).chartTheme,"slider-position":e.sliderPosition},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position"])):(P(),z("div",El,[D(d)?(P(),J(w,{key:0,label:"Spinning"})):(P(),z("div",Fl,re(D(h)),1))]))])]),T(Na,{name:"fade",mode:"in-out"},{default:L(()=>[e.plotConfigModal?W("",!0):Ee((P(),z("div",Wl,[T(Da,{columns:D(u),"as-modal":!1},null,8,["columns"])],512)),[[ct,r.value]])]),_:1}),e.plotConfigModal?(P(),J(x,{key:0,id:"plotConfiguratorModal",modelValue:v.value,"onUpdate:modelValue":g[3]||(g[3]=C=>v.value=C),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:L(()=>[v.value?(P(),J(Da,{key:0,columns:D(u)},null,8,["columns"])):W("",!0)]),_:1},8,["modelValue"])):W("",!0)])}}});const ql=Re(Zl,[["__scopeId","data-v-7ac7db0a"]]);export{ql as C};
//# sourceMappingURL=CandleChartContainer-9199d0cd.js.map
