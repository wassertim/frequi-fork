import{d as U,i as P,x as b,C as O,I as G,A as z,c as x,a as n,t as V,b as t,w as i,n as y,o as u,k as s,g as D,J as W,K,j as $,f as B,u as F,z as J,l as oe,h as g,p as Q,e as X,r as p,L as ee,M as Y,G as ie,N as re,P as ne}from"./index-369ec608.js";import{_ as ce,T as Z,a as ue}from"./StrategySelect.vue_vue_type_script_setup_true_lang-6961afdf.js";import{T as te}from"./TradeList-59f99048.js";import{T as de,C as me,P as _e}from"./TradesLog-765cfbbd.js";import{D as be,_ as fe,P as ve,I as ke}from"./InfoBox-bd34570d.js";import{P as pe}from"./PairSummary-058e02ad.js";import{C as ge}from"./CandleChartContainer-0b97f2f4.js";import"./install-37e83d45.js";import"./install-94ef3642.js";import"./createSeriesDataSimply-6639a935.js";const ye={class:"container-fluid px-0 backtestresult-container"},Re={class:"row d-flex justify-content-center"},he={class:"row text-start ms-0"},Be={class:"row w-100"},xe={class:"col-12 col-xl-6 px-0 px-xl-0 pe-xl-1"},we={class:"col-12 col-xl-6 px-0 px-xl-0 pt-2 pt-xl-0 ps-xl-1"},$e=U({__name:"BacktestResultView",props:{backtestResult:{required:!0,type:Object}},setup(a){const e=a,c=l=>`${O(l,e.backtestResult.stake_currency_decimals)} ${e.backtestResult.stake_currency}`,f=l=>l.trades.slice().sort((S,A)=>S.profit_ratio-A.profit_ratio),v=P(()=>{const l=f(e.backtestResult);if(l.length===0)return"N/A";const w=l[l.length-1];return`${w.pair} ${b(w.profit_ratio,2)}`}),_=P(()=>{const l=f(e.backtestResult);if(l.length===0)return"N/A";const w=l[0];return`${w.pair} ${b(w.profit_ratio,2)}`}),k=P(()=>{var w,S;const l=(w=e.backtestResult)!=null&&w.trade_count_short&&((S=e.backtestResult)==null?void 0:S.trade_count_short)>0?[{metric:"___",value:"___"},{metric:"Long / Short",value:`${e.backtestResult.trade_count_long} / ${e.backtestResult.trade_count_short}`},{metric:"Total profit Long",value:`${b(e.backtestResult.profit_total_long||0)} | ${c(e.backtestResult.profit_total_long_abs)}`},{metric:"Total profit Short",value:`${b(e.backtestResult.profit_total_short||0)} | ${c(e.backtestResult.profit_total_short_abs)}`}]:[];return[{metric:"Total Profit",value:`${b(e.backtestResult.profit_total)} | ${c(e.backtestResult.profit_total_abs)}`},{metric:"CAGR",value:`${e.backtestResult.cagr?b(e.backtestResult.cagr):"N/A"}`},{metric:"Sortino",value:`${e.backtestResult.sortino?e.backtestResult.sortino.toFixed(2):"N/A"}`},{metric:"Sharpe",value:`${e.backtestResult.sharpe?e.backtestResult.sharpe.toFixed(2):"N/A"}`},{metric:"Calmar",value:`${e.backtestResult.calmar?e.backtestResult.calmar.toFixed(2):"N/A"}`},{metric:"Expectancy",value:`${e.backtestResult.expectancy?e.backtestResult.expectancy.toFixed(2):"N/A"}`},{metric:"Profit factor",value:`${e.backtestResult.profit_factor?O(e.backtestResult.profit_factor,3):"N/A"}`},{metric:"Total trades / Daily Avg Trades",value:`${e.backtestResult.total_trades} / ${e.backtestResult.trades_per_day}`},{metric:"Best day",value:`${b(e.backtestResult.backtest_best_day,2)} | ${c(e.backtestResult.backtest_best_day_abs)}`},{metric:"Worst day",value:`${b(e.backtestResult.backtest_worst_day,2)} | ${c(e.backtestResult.backtest_worst_day_abs)}`},{metric:"Win/Draw/Loss",value:`${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].wins} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].draws} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].losses}`},{metric:"Days win/draw/loss",value:`${e.backtestResult.winning_days} / ${e.backtestResult.draw_days} / ${e.backtestResult.losing_days}`},{metric:"Avg. Duration winners",value:G(e.backtestResult.winner_holding_avg_s)},{metric:"Avg. Duration Losers",value:G(e.backtestResult.loser_holding_avg_s)},{metric:"Rejected entry signals",value:e.backtestResult.rejected_signals},{metric:"Entry/Exit timeouts",value:`${e.backtestResult.timedout_entry_orders} / ${e.backtestResult.timedout_exit_orders}`},{metric:"Canceled Trade Entries",value:e.backtestResult.canceled_trade_entries??"N/A"},{metric:"Canceled Entry Orders",value:e.backtestResult.canceled_entry_orders??"N/A"},{metric:"Replaced Entry Orders",value:e.backtestResult.replaced_entry_orders??"N/A"},...l,{metric:"___",value:"___"},{metric:"Min balance",value:c(e.backtestResult.csum_min)},{metric:"Max balance",value:c(e.backtestResult.csum_max)},{metric:"Market change",value:b(e.backtestResult.market_change)},{metric:"___",value:"___"},{metric:"Max Drawdown (Account)",value:b(e.backtestResult.max_drawdown_account)},{metric:"Max Drawdown ABS",value:c(e.backtestResult.max_drawdown_abs)},{metric:"Drawdown high | low",value:`${c(e.backtestResult.max_drawdown_high)} | ${c(e.backtestResult.max_drawdown_low)}`},{metric:"Drawdown start",value:z(e.backtestResult.drawdown_start_ts)},{metric:"Drawdown end",value:z(e.backtestResult.drawdown_end_ts)},{metric:"___",value:"___"},{metric:"Best Pair",value:`${e.backtestResult.best_pair.key} ${b(e.backtestResult.best_pair.profit_sum)}`},{metric:"Worst Pair",value:`${e.backtestResult.worst_pair.key} ${b(e.backtestResult.worst_pair.profit_sum)}`},{metric:"Best single Trade",value:v.value},{metric:"Worst single Trade",value:_.value}]}),R=P(()=>[{setting:"Backtesting from",value:z(e.backtestResult.backtest_start_ts)},{setting:"Backtesting to",value:z(e.backtestResult.backtest_end_ts)},{setting:"BT execution time",value:G(e.backtestResult.backtest_run_end_ts-e.backtestResult.backtest_run_start_ts)},{setting:"Max open trades",value:e.backtestResult.max_open_trades},{setting:"Timeframe",value:e.backtestResult.timeframe},{setting:"Timeframe Detail",value:e.backtestResult.timeframe_detail||"N/A"},{setting:"Timerange",value:e.backtestResult.timerange},{setting:"Stoploss",value:b(e.backtestResult.stoploss,2)},{setting:"Trailing Stoploss",value:e.backtestResult.trailing_stop},{setting:"Trail only when offset is reached",value:e.backtestResult.trailing_only_offset_is_reached},{setting:"Trailing Stop positive",value:e.backtestResult.trailing_stop_positive},{setting:"Trailing stop positive offset",value:e.backtestResult.trailing_stop_positive_offset},{setting:"Custom Stoploss",value:e.backtestResult.use_custom_stoploss},{setting:"ROI",value:e.backtestResult.minimal_roi},{setting:"Use Exit Signal",value:e.backtestResult.use_exit_signal!==void 0?e.backtestResult.use_exit_signal:e.backtestResult.use_sell_signal},{setting:"Exit profit only",value:e.backtestResult.exit_profit_only!==void 0?e.backtestResult.exit_profit_only:e.backtestResult.sell_profit_only},{setting:"Exit profit offset",value:e.backtestResult.exit_profit_offset!==void 0?e.backtestResult.exit_profit_offset:e.backtestResult.sell_profit_offset},{setting:"Enable protections",value:e.backtestResult.enable_protections},{setting:"Starting balance",value:c(e.backtestResult.starting_balance)},{setting:"Final balance",value:c(e.backtestResult.final_balance)},{setting:"Avg. stake amount",value:c(e.backtestResult.avg_stake_amount)},{setting:"Total trade volume",value:c(e.backtestResult.total_volume)}]),d=P(()=>[{key:"key",label:"Pair"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:l=>b(l,2)},{key:"profit_sum",label:"Cum Profit %",formatter:l=>b(l,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:l=>O(l,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:l=>b(l,2)},{key:"duration_avg",label:"Avg Duration"},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),m=P(()=>[{key:"exit_reason",label:"Exit Reason"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:l=>b(l,2)},{key:"profit_sum",label:"Cum Profit %",formatter:l=>b(l,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:l=>O(l,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:l=>b(l,2)},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),T=[{key:"metric",label:"Metric"},{key:"value",label:"Value"}],I=[{key:"setting",label:"Setting"},{key:"value",label:"Value"}];return(l,w)=>{const S=y("b-table"),A=y("b-card");return u(),x("div",ye,[n("div",Re,[n("h3",null,"Backtest-result for "+V(a.backtestResult.strategy_name),1)]),n("div",he,[n("div",Be,[n("div",xe,[t(A,{header:"Strategy settings"},{default:i(()=>[t(S,{small:"",borderless:"",items:s(R),fields:I},null,8,["items"])]),_:1})]),n("div",we,[t(A,{header:"Metrics"},{default:i(()=>[t(S,{small:"",borderless:"",items:s(k),fields:T},null,8,["items"])]),_:1})])]),t(A,{header:"Results per Exit-reason",class:"row mt-2 w-100"},{default:i(()=>[t(S,{small:"",hover:"",stacked:"sm",items:a.backtestResult.exit_reason_summary||a.backtestResult.sell_reason_summary,fields:s(m)},null,8,["items","fields"])]),_:1}),t(A,{header:"Results per pair",class:"row mt-2 w-100"},{default:i(()=>[t(S,{small:"",hover:"",stacked:"sm",items:a.backtestResult.results_per_pair,fields:s(d)},null,8,["items","fields"])]),_:1}),t(A,{header:"Single trades",class:"row mt-2 w-100"},{default:i(()=>[t(te,{class:"row trade-history mt-2 w-100",trades:a.backtestResult.trades,"show-filter":!0,"stake-currency":a.backtestResult.stake_currency},null,8,["trades","stake-currency"])]),_:1})])])}}});const Ve=D($e,[["__scopeId","data-v-3eb84a87"]]),Se=U({name:"BacktestResultSelect",props:{backtestHistory:{required:!0,type:Object},selectedBacktestResultKey:{required:!1,default:"",type:String}},emits:["selectionChange"],setup(a,{emit:e}){return{formatPercent:b,setBacktestResult:f=>{e("selectionChange",f)}}}}),Ce={class:"container d-flex flex-column align-items-center"},Te=n("h3",null,"Available results:",-1);function Ae(a,e,c,f,v,_){const k=y("b-list-group-item"),R=y("b-list-group");return u(),x("div",Ce,[Te,t(R,{class:"ms-2"},{default:i(()=>[(u(!0),x(W,null,K(Object.entries(a.backtestHistory),([d,m])=>(u(),$(k,{key:d,button:"",active:d===a.selectedBacktestResultKey,class:"d-flex justify-content-between align-items-center py-1",onClick:T=>a.setBacktestResult(d)},{default:i(()=>[B(V(d)+" "+V(m.total_trades)+" "+V(a.formatPercent(m.profit_total)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})])}const qe=D(Se,[["render",Ae]]),Pe={class:"w-100 d-flex"},Ie={class:"ms-2"},Ne=U({__name:"FreqaiModelSelect",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(a,{emit:e}){const c=a,f=F(),v=P({get(){return c.modelValue},set(_){e("update:modelValue",_)}});return J(()=>{f.activeBot.freqaiModelList.length===0&&f.activeBot.getFreqAIModelList()}),(_,k)=>{const R=y("b-form-select"),d=y("b-button");return u(),x("div",null,[n("div",Pe,[t(R,{id:"freqaiModel-select",modelValue:s(v),"onUpdate:modelValue":k[0]||(k[0]=m=>oe(v)?v.value=m:null),options:s(f).activeBot.freqaiModelList},null,8,["modelValue","options"]),n("div",Ie,[t(d,{onClick:s(f).activeBot.getFreqAIModelList},{default:i(()=>[B("↻")]),_:1},8,["onClick"])])])])}}}),Le=U({setup(){const a=F();return J(()=>{a.activeBot.getBacktestHistory()}),{timestampms:z,botStore:a}}}),Ue=n("p",null," Load Historic results from disk. You can click on multiple results to load all of them into freqUI. ",-1);function De(a,e,c,f,v,_){const k=y("b-list-group-item"),R=y("b-list-group");return u(),x("div",null,[n("button",{class:"btn btn-secondary float-end",title:"Refresh","aria-label":"Refresh",onClick:e[0]||(e[0]=(...d)=>a.botStore.activeBot.getBacktestHistory&&a.botStore.activeBot.getBacktestHistory(...d))}," ↻ "),Ue,a.botStore.activeBot.backtestHistoryList?(u(),$(R,{key:0,class:"ms-2"},{default:i(()=>[(u(!0),x(W,null,K(a.botStore.activeBot.backtestHistoryList,(d,m)=>(u(),$(k,{key:m,class:"d-flex justify-content-between align-items-center py-1 mb-1",button:"",onClick:T=>a.botStore.activeBot.getBacktestHistoryResult(d)},{default:i(()=>[n("strong",null,V(d.strategy),1),B(" backtested on: "+V(a.timestampms(d.backtest_start_time*1e3))+" ",1),n("small",null,V(d.filename),1)]),_:2},1032,["onClick"]))),128))]),_:1})):g("",!0)])}const Me=D(Le,[["render",De]]),ze=a=>(Q("data-v-6fd492b8"),a=a(),X(),a),Fe={class:"text-center flex-fill mt-2 d-flex flex-column"},je=ze(()=>n("hr",null,null,-1)),Ee=U({__name:"BacktestGraphsView",props:{trades:{required:!0,type:Array}},setup(a){return(e,c)=>(u(),x("div",Fe,[t(de,{trades:a.trades,class:"trades-log"},null,8,["trades"]),t(me,{trades:a.trades,"profit-column":"profit_abs",class:"cum-profit","show-title":!0},null,8,["trades"]),je,t(_e,{class:"mt-3",trades:a.trades,"show-title":!0},null,8,["trades"])]))}});const He=D(Ee,[["__scopeId","data-v-6fd492b8"]]),Oe={key:0},We=U({__name:"TradeListNav",props:{trades:{required:!0,type:Array},backtestMode:{required:!1,default:!1,type:Boolean}},emits:["trade-select"],setup(a,{emit:e}){const c=a,f=F(),v=p({}),_=p(!0),k=d=>{v.value=d,e("trade-select",d)},R=P(()=>c.trades.slice().sort((d,m)=>_.value?m.open_timestamp-d.open_timestamp:d.open_timestamp-m.open_timestamp));return(d,m)=>{const T=y("b-list-group-item"),I=y("b-list-group");return u(),x("div",null,[t(I,null,{default:i(()=>[t(T,{button:"",class:"d-flex flex-wrap justify-content-center align-items-center",title:"Trade Navigation",onClick:m[0]||(m[0]=l=>_.value=!_.value)},{default:i(()=>[B("Trade Navigation "+V(_.value?"↓":"↑"),1)]),_:1}),(u(!0),x(W,null,K(s(R),l=>(u(),$(T,{key:l.open_timestamp,button:"",class:"d-flex flex-wrap justify-content-between align-items-center py-1",title:`${l.pair}`,active:l.open_timestamp===v.value.open_timestamp,onClick:w=>k(l)},{default:i(()=>[n("div",null,[s(f).activeBot.botState.trading_mode!=="spot"?(u(),x("span",Oe,V(l.is_short?"S-":"L-"),1)):g("",!0),t(be,{date:l.open_timestamp},null,8,["date"])]),t(fe,{trade:l},null,8,["trade"]),a.backtestMode?(u(),$(ve,{key:0,"profit-ratio":l.profit_ratio,"stake-currency":s(f).activeBot.stakeCurrency},null,8,["profit-ratio","stake-currency"])):g("",!0)]),_:2},1032,["title","active","onClick"]))),128)),a.trades.length===0?(u(),$(T,{key:0},{default:i(()=>[B("No trades to show...")]),_:1})):g("",!0)]),_:1})])}}});const Ge=D(We,[["__scopeId","data-v-a048b989"]]),Ke={class:"row"},Je={class:"col-md-11 text-start"},Ye={class:"col-md-1 text-end"},Ze={class:"row text-center h-100 d-flex align-items-stretch"},Qe=U({__name:"BacktestResultChart",props:{timeframe:{required:!0,type:String},strategy:{required:!0,type:String},timerange:{required:!0,type:String},pairlist:{required:!0,type:Array},trades:{required:!0,type:Array}},setup(a){const e=F(),c=p(!0),f=p(),v=_=>{f.value={startValue:_.open_timestamp,endValue:_.close_timestamp}};return(_,k)=>{const R=y("b-button"),d=y("b-card");return u(),x("div",null,[n("div",Ke,[n("div",Je,[n("p",null," Graph will always show the latest values for the selected strategy. Timerange: "+V(a.timerange)+" - "+V(a.strategy),1)]),n("div",Ye,[t(R,{"aria-label":"Close",title:"Trade Navigation",size:"sm",onClick:k[0]||(k[0]=m=>c.value=!c.value)},{default:i(()=>[B(V(c.value?">":"<"),1)]),_:1})])]),n("div",Ze,[t(pe,{class:"col-md-2 overflow-auto",style:{"max-height":"calc(100vh - 200px)"},pairlist:a.pairlist,trades:a.trades,"sort-method":"profit","backtest-mode":!0},null,8,["pairlist","trades"]),t(ge,{"available-pairs":a.pairlist,"historic-view":!0,timeframe:a.timeframe,timerange:a.timerange,strategy:a.strategy,trades:a.trades,class:ee(`${c.value?"col-md-8":"col-md-10"} candle-chart-container px-0 h-100 align-self-stretch`),"slider-position":f.value},null,8,["available-pairs","timeframe","timerange","strategy","trades","class","slider-position"]),c.value?(u(),$(Ge,{key:0,class:"overflow-auto col-md-2",style:{"max-height":"calc(100vh - 200px)"},trades:a.trades.filter(m=>m.pair===s(e).activeBot.selectedPair),onTradeSelect:v},null,8,["trades"])):g("",!0)]),t(d,{header:"Single trades",class:"row mt-2 w-100"},{default:i(()=>[t(te,{class:"row trade-history mt-2 w-100",trades:a.trades,"show-filter":!0},null,8,["trades"])]),_:1})])}}});const Xe=D(Qe,[["__scopeId","data-v-4a6dc3b1"]]),M=a=>(Q("data-v-34be633c"),a=a(),X(),a),et={class:"container-fluid",style:{"max-height":"calc(100vh - 60px)"}},tt={class:"container-fluid"},at=M(()=>n("div",{class:"row mb-2"},null,-1)),st={key:0},lt={class:"row w-100"},ot=M(()=>n("h2",{class:"col-4 col-lg-3"},"Backtesting",-1)),it={class:"col-12 col-lg-order-last col-lg-6 mx-md-5 d-flex flex-wrap justify-content-md-center justify-content-between mb-4"},rt={class:"d-md-flex"},nt={key:0,class:"flex-fill row d-flex flex-column bt-config"},ct={key:1,class:"flex-fill row d-flex flex-column bt-config"},ut={class:"mb-2"},dt=M(()=>n("span",null,"Strategy",-1)),mt={class:"d-flex"},_t={class:"d-flex justify-content-center"},bt=M(()=>n("span",{class:"me-2"},"Enable FreqAI:",-1)),ft=M(()=>n("hr",null,null,-1)),vt=M(()=>n("h3",{class:"mt-3"},"Backtesting summary",-1)),kt={class:"d-flex flex-wrap flex-md-nowrap justify-content-between justify-content-md-center"},pt={key:0,class:"container-fluid text-center w-100 mt-2"},gt=U({__name:"BacktestingView",setup(a){const e=F(),c=P(()=>e.activeBot.backtestHistory?Object.keys(e.activeBot.backtestHistory).length!==0:!1),f=P(()=>{try{return e.activeBot.selectedBacktestResult.timeframe}catch{return""}}),v=p(""),_=p(""),k=p(""),R=p(""),d=p(!1),m=p({enabled:!1,model:"",identifier:""}),T=p(!1),I=p(!1),l=p(!0),w=p(""),S=p(""),A=p(""),h=p("run"),j=p(null),ae=()=>{v.value=e.activeBot.selectedBacktestResult.strategy_name,e.activeBot.getStrategy(v.value),_.value=e.activeBot.selectedBacktestResult.timeframe,k.value=e.activeBot.selectedBacktestResult.timeframe_detail||"",R.value=e.activeBot.selectedBacktestResult.timerange};Y(()=>e.activeBot.selectedBacktestResultKey,()=>{ae()});const se=()=>{const C={strategy:v.value,timerange:R.value,enable_protections:T.value},o=parseInt(w.value,10);if(o&&(C.max_open_trades=o),I.value)C.stake_amount="unlimited";else{const L=Number(S.value);L&&(C.stake_amount=L.toString())}const N=Number(A.value);N&&(C.dry_run_wallet=N),_.value&&(C.timeframe=_.value),k.value&&(C.timeframe_detail=k.value),l.value||(C.backtest_cache="none"),m.value.enabled&&(C.freqaimodel=m.value.model,m.value.identifier!==""&&(C.freqai={identifier:m.value.identifier})),e.activeBot.startBacktest(C)};return J(()=>e.activeBot.getState()),Y(()=>e.activeBot.backtestRunning,()=>{e.activeBot.backtestRunning===!0?j.value=window.setInterval(e.activeBot.pollBacktest,1e3):j.value&&(clearInterval(j.value),j.value=null)}),(C,o)=>{const N=y("b-form-radio"),L=y("b-button"),q=y("b-form-group"),E=y("b-form-input"),H=y("b-form-checkbox"),le=y("b-card");return u(),x("div",et,[n("div",tt,[at,s(e).activeBot.canRunBacktest?g("",!0):(u(),x("p",st," Bot must be in webserver mode to enable Backtesting. ")),n("div",lt,[ot,n("div",it,[s(e).activeBot.botApiVersion>=2.15?(u(),$(N,{key:0,modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=r=>h.value=r),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"historicResults",disabled:!s(e).activeBot.canRunBacktest},{default:i(()=>[B("Load Results")]),_:1},8,["modelValue","disabled"])):g("",!0),t(N,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=r=>h.value=r),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"run",disabled:!s(e).activeBot.canRunBacktest},{default:i(()=>[B("Run backtest")]),_:1},8,["modelValue","disabled"]),t(N,{id:"bt-analyze-btn",modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=r=>h.value=r),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"results",disabled:!s(c)},{default:i(()=>[B("Analyze result")]),_:1},8,["modelValue","disabled"]),t(N,{modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=r=>h.value=r),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize-summary",disabled:!s(c)},{default:i(()=>[B("Visualize summary")]),_:1},8,["modelValue","disabled"]),t(N,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=r=>h.value=r),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize",disabled:!s(c)},{default:i(()=>[B("Visualize result")]),_:1},8,["modelValue","disabled"])]),ie(n("small",{class:"text-end bt-running-label col-8 col-lg-3"},"Backtest running: "+V(s(e).activeBot.backtestStep)+" "+V(s(b)(s(e).activeBot.backtestProgress,2)),513),[[re,s(e).activeBot.backtestRunning]])])]),n("div",rt,[n("div",{class:ee(`${d.value?"col-md-3":""} sticky-top sticky-offset me-3 d-flex flex-column`)},[h.value!=="visualize"?(u(),$(L,{key:0,class:"align-self-start","aria-label":"Close",size:"sm",onClick:o[5]||(o[5]=r=>d.value=!d.value)},{default:i(()=>[B(V(d.value?"<":">"),1)]),_:1})):g("",!0),t(ne,{name:"fade",mode:"in-out"},{default:i(()=>[h.value!=="visualize"&&d.value?(u(),$(qe,{key:0,"backtest-history":s(e).activeBot.backtestHistory,"selected-backtest-result-key":s(e).activeBot.selectedBacktestResultKey,onSelectionChange:s(e).activeBot.setBacktestResultKey},null,8,["backtest-history","selected-backtest-result-key","onSelectionChange"])):g("",!0)]),_:1})],2),h.value=="historicResults"?(u(),x("div",nt,[t(Me)])):g("",!0),h.value=="run"?(u(),x("div",ct,[n("div",ut,[dt,t(ce,{modelValue:v.value,"onUpdate:modelValue":o[6]||(o[6]=r=>v.value=r)},null,8,["modelValue"])]),t(le,{disabled:s(e).activeBot.backtestRunning},{default:i(()=>[t(q,{"label-cols-lg":"2",label:"Backtest params","label-size":"sm","label-class":"fw-bold pt-0",class:"mb-0"},{default:i(()=>[t(q,{"label-cols-sm":"5",label:"Timeframe:","label-align-sm":"right","label-for":"timeframe-select"},{default:i(()=>[t(Z,{id:"timeframe-select",modelValue:_.value,"onUpdate:modelValue":o[7]||(o[7]=r=>_.value=r)},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Detail Timeframe:","label-align-sm":"right","label-for":"timeframe-detail-select",title:"Detail timeframe, to simulate intra-candle results. Not setting this will not use this functionality."},{default:i(()=>[t(Z,{id:"timeframe-detail-select",modelValue:k.value,"onUpdate:modelValue":o[8]||(o[8]=r=>k.value=r),"below-timeframe":_.value},null,8,["modelValue","below-timeframe"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Max open trades:","label-align-sm":"right","label-for":"max-open-trades"},{default:i(()=>[t(E,{id:"max-open-trades",modelValue:w.value,"onUpdate:modelValue":o[9]||(o[9]=r=>w.value=r),placeholder:"Use strategy default",type:"number"},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Starting capital:","label-align-sm":"right","label-for":"starting-capital"},{default:i(()=>[t(E,{id:"starting-capital",modelValue:A.value,"onUpdate:modelValue":o[10]||(o[10]=r=>A.value=r),type:"number",step:"0.001"},null,8,["modelValue"])]),_:1}),t(q,{"label-cols-sm":"5",label:"Stake amount:","label-align-sm":"right","label-for":"stake-amount"},{default:i(()=>[n("div",mt,[t(H,{id:"stake-amount-bool",modelValue:I.value,"onUpdate:modelValue":o[11]||(o[11]=r=>I.value=r),class:"col-md-6"},{default:i(()=>[B("Unlimited stake")]),_:1},8,["modelValue"]),t(E,{id:"stake-amount",modelValue:S.value,"onUpdate:modelValue":o[12]||(o[12]=r=>S.value=r),type:"number",placeholder:"Use strategy default",step:"0.01",disabled:I.value},null,8,["modelValue","disabled"])])]),_:1}),t(q,{"label-cols-sm":"5",label:"Enable Protections:","label-align-sm":"right","label-for":"enable-protections"},{default:i(()=>[t(H,{id:"enable-protections",modelValue:T.value,"onUpdate:modelValue":o[13]||(o[13]=r=>T.value=r)},null,8,["modelValue"])]),_:1}),s(e).activeBot.botApiVersion>=2.22?(u(),$(q,{key:0,"label-cols-sm":"5",label:"Cache Backtest results:","label-align-sm":"right","label-for":"enable-cache"},{default:i(()=>[t(H,{id:"enable-cache",modelValue:l.value,"onUpdate:modelValue":o[14]||(o[14]=r=>l.value=r)},null,8,["modelValue"])]),_:1})):g("",!0),s(e).activeBot.botApiVersion>=2.22?(u(),x(W,{key:1},[t(q,{"label-cols-sm":"5",label:"Enable FreqAI:","label-align-sm":"right","label-for":"enable-freqai"},{label:i(()=>[n("div",_t,[bt,t(ke,{hint:"Assumes freqAI configuration is setup in the configuration, and the strategy is a freqAI strategy. Will fail if that's not the case."})])]),default:i(()=>[t(H,{id:"enable-freqai",modelValue:m.value.enabled,"onUpdate:modelValue":o[15]||(o[15]=r=>m.value.enabled=r)},null,8,["modelValue"])]),_:1}),m.value.enabled?(u(),$(q,{key:0,"label-cols-sm":"5",label:"FreqAI identifier:","label-align-sm":"right","label-for":"freqai-identifier"},{default:i(()=>[t(E,{id:"freqai-identifier",modelValue:m.value.identifier,"onUpdate:modelValue":o[16]||(o[16]=r=>m.value.identifier=r),placeholder:"Use config default"},null,8,["modelValue"])]),_:1})):g("",!0),m.value.enabled?(u(),$(q,{key:1,"label-cols-sm":"5",label:"FreqAI Model","label-align-sm":"right","label-for":"freqai-model"},{default:i(()=>[t(Ne,{id:"freqai-model",modelValue:m.value.model,"onUpdate:modelValue":o[17]||(o[17]=r=>m.value.model=r)},null,8,["modelValue"])]),_:1})):g("",!0)],64)):g("",!0),ft,t(ue,{modelValue:R.value,"onUpdate:modelValue":o[18]||(o[18]=r=>R.value=r),class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["disabled"]),vt,n("div",kt,[t(L,{id:"start-backtest",variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:se},{default:i(()=>[B(" Start backtest ")]),_:1},8,["disabled"]),t(L,{variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:s(e).activeBot.pollBacktest},{default:i(()=>[B(" Load backtest result ")]),_:1},8,["disabled","onClick"]),t(L,{variant:"primary",class:"mx-1",disabled:!s(e).activeBot.backtestRunning,onClick:s(e).activeBot.stopBacktest},{default:i(()=>[B("Stop Backtest")]),_:1},8,["disabled","onClick"]),t(L,{variant:"primary",class:"mx-1",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,onClick:s(e).activeBot.removeBacktest},{default:i(()=>[B("Reset Backtest")]),_:1},8,["disabled","onClick"])])])):g("",!0),s(c)&&h.value=="results"?(u(),$(Ve,{key:2,"backtest-result":s(e).activeBot.selectedBacktestResult,class:"flex-fill"},null,8,["backtest-result"])):g("",!0),s(c)&&h.value=="visualize-summary"?(u(),$(He,{key:3,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["trades"])):g("",!0)]),s(c)&&h.value=="visualize"?(u(),x("div",pt,[t(Xe,{timeframe:s(f),strategy:v.value,timerange:R.value,pairlist:s(e).activeBot.selectedBacktestResult.pairlist,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["timeframe","strategy","timerange","pairlist","trades"])])):g("",!0)])}}});const Tt=D(gt,[["__scopeId","data-v-34be633c"]]);export{Tt as default};
//# sourceMappingURL=BacktestingView-f88f0143.js.map
