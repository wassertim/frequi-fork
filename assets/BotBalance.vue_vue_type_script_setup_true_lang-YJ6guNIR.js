import{g as st,r as Re,aU as xt,aA as St,k as K,A as Fe,x as F,h as M,av as Mt,z as be,o as V,_ as Tt,c as oe,a as N,u as At,n as wt,w as ge,b as he,q as Pe,l as Ct,B as Dt,v as Pt,m as kt,a_ as Bt,i as It}from"./index-AeBN2JHL.js";import{br as Nt,ci as k,cp as He,Z as Ve,y as ot,F as Ot,f as je,bL as Et,P as Rt,cq as Ze,cr as ke,cs as Vt,ct as $t,cu as ne,cv as Gt,B as We,ah as Ke,a0 as zt,g as Be,Y as G,cw as Yt,aa as Ie,cx as Xt,cy as lt,cz as qt,e as ie,cA as Ut,bz as Ft,i as se,a4 as Qe,b as _e,cB as Ht,a7 as Se,bo as jt,an as Zt,h as Je,b7 as ct,_ as $e,ai as Wt,K as W,bE as de,O as Kt,Q as Qt,t as Jt,s as ea,d as ta,cC as aa,bu as vt,bD as ra,C as na,q as et,A as ut,cD as ia,cE as sa,a_ as oa,S as la,cF as ca,u as va,bd as ua,b9 as fa,ba as ga,bb as ha,bc as da,be as pa}from"./installCanvasRenderer-px4rLZYN.js";import{c as ma}from"./createSeriesDataSimply-3rM94wIH.js";var re=Math.PI*2,U=Nt.CMD,ya=["top","right","bottom","left"];function ba(i,t,n,e,a){var o=n.width,r=n.height;switch(i){case"top":e.set(n.x+o/2,n.y-t),a.set(0,-1);break;case"bottom":e.set(n.x+o/2,n.y+r+t),a.set(0,1);break;case"left":e.set(n.x-t,n.y+r/2),a.set(-1,0);break;case"right":e.set(n.x+o+t,n.y+r/2),a.set(1,0);break}}function _a(i,t,n,e,a,o,r,l,v){r-=i,l-=t;var f=Math.sqrt(r*r+l*l);r/=f,l/=f;var s=r*n+i,h=l*n+t;if(Math.abs(e-a)%re<1e-4)return v[0]=s,v[1]=h,f-n;if(o){var u=e;e=ne(a),a=ne(u)}else e=ne(e),a=ne(a);e>a&&(a+=re);var c=Math.atan2(l,r);if(c<0&&(c+=re),c>=e&&c<=a||c+re>=e&&c+re<=a)return v[0]=s,v[1]=h,f-n;var g=n*Math.cos(e)+i,d=n*Math.sin(e)+t,p=n*Math.cos(a)+i,m=n*Math.sin(a)+t,y=(g-r)*(g-r)+(d-l)*(d-l),b=(p-r)*(p-r)+(m-l)*(m-l);return y<b?(v[0]=g,v[1]=d,Math.sqrt(y)):(v[0]=p,v[1]=m,Math.sqrt(b))}function Le(i,t,n,e,a,o,r,l){var v=a-i,f=o-t,s=n-i,h=e-t,u=Math.sqrt(s*s+h*h);s/=u,h/=u;var c=v*s+f*h,g=c/u;l&&(g=Math.min(Math.max(g,0),1)),g*=u;var d=r[0]=i+g*s,p=r[1]=t+g*h;return Math.sqrt((d-a)*(d-a)+(p-o)*(p-o))}function ft(i,t,n,e,a,o,r){n<0&&(i=i+n,n=-n),e<0&&(t=t+e,e=-e);var l=i+n,v=t+e,f=r[0]=Math.min(Math.max(a,i),l),s=r[1]=Math.min(Math.max(o,t),v);return Math.sqrt((f-a)*(f-a)+(s-o)*(s-o))}var $=[];function La(i,t,n){var e=ft(t.x,t.y,t.width,t.height,i.x,i.y,$);return n.set($[0],$[1]),e}function xa(i,t,n){for(var e=0,a=0,o=0,r=0,l,v,f=1/0,s=t.data,h=i.x,u=i.y,c=0;c<s.length;){var g=s[c++];c===1&&(e=s[c],a=s[c+1],o=e,r=a);var d=f;switch(g){case U.M:o=s[c++],r=s[c++],e=o,a=r;break;case U.L:d=Le(e,a,s[c],s[c+1],h,u,$,!0),e=s[c++],a=s[c++];break;case U.C:d=$t(e,a,s[c++],s[c++],s[c++],s[c++],s[c],s[c+1],h,u,$),e=s[c++],a=s[c++];break;case U.Q:d=Vt(e,a,s[c++],s[c++],s[c],s[c+1],h,u,$),e=s[c++],a=s[c++];break;case U.A:var p=s[c++],m=s[c++],y=s[c++],b=s[c++],S=s[c++],x=s[c++];c+=1;var C=!!(1-s[c++]);l=Math.cos(S)*y+p,v=Math.sin(S)*b+m,c<=1&&(o=l,r=v);var A=(h-p)*b/y+p;d=_a(p,m,b,S,S+x,C,A,u,$),e=Math.cos(S+x)*y+p,a=Math.sin(S+x)*b+m;break;case U.R:o=e=s[c++],r=a=s[c++];var _=s[c++],T=s[c++];d=ft(o,r,_,T,h,u,$);break;case U.Z:d=Le(e,a,o,r,h,u,$,!0),e=o,a=r;break}d<f&&(f=d,n.set($[0],$[1]))}return f}var z=new k,L=new k,w=new k,X=new k,Y=new k;function tt(i,t){if(i){var n=i.getTextGuideLine(),e=i.getTextContent();if(e&&n){var a=i.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],r=a.candidates||ya,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var v=1/0,f=a.anchor,s=i.getComputedTransform(),h=s&&Et([],s),u=t.get("length2")||0;f&&w.copy(f);for(var c=0;c<r.length;c++){var g=r[c];ba(g,0,l,z,X),k.scaleAndAdd(L,z,X,u),L.transform(h);var d=i.getBoundingRect(),p=f?f.distance(L):i instanceof Rt?xa(L,i.path,w):La(L,d,w);p<v&&(v=p,L.transform(s),w.transform(s),w.toArray(o[0]),L.toArray(o[1]),z.toArray(o[2]))}gt(o,t.get("minTurnAngle")),n.setShape({points:o})}}}var xe=[],I=new k;function gt(i,t){if(t<=180&&t>0){t=t/180*Math.PI,z.fromArray(i[0]),L.fromArray(i[1]),w.fromArray(i[2]),k.sub(X,z,L),k.sub(Y,w,L);var n=X.len(),e=Y.len();if(!(n<.001||e<.001)){X.scale(1/n),Y.scale(1/e);var a=X.dot(Y),o=Math.cos(t);if(o<a){var r=Le(L.x,L.y,w.x,w.y,z.x,z.y,xe,!1);I.fromArray(xe),I.scaleAndAdd(Y,r/Math.tan(Math.PI-t));var l=w.x!==L.x?(I.x-L.x)/(w.x-L.x):(I.y-L.y)/(w.y-L.y);if(isNaN(l))return;l<0?k.copy(I,L):l>1&&k.copy(I,w),I.toArray(i[1])}}}}function Sa(i,t,n){if(n<=180&&n>0){n=n/180*Math.PI,z.fromArray(i[0]),L.fromArray(i[1]),w.fromArray(i[2]),k.sub(X,L,z),k.sub(Y,w,L);var e=X.len(),a=Y.len();if(!(e<.001||a<.001)){X.scale(1/e),Y.scale(1/a);var o=X.dot(t),r=Math.cos(n);if(o<r){var l=Le(L.x,L.y,w.x,w.y,z.x,z.y,xe,!1);I.fromArray(xe);var v=Math.PI/2,f=Math.acos(Y.dot(t)),s=v+f-n;if(s>=v)k.copy(I,w);else{I.scaleAndAdd(Y,l/Math.tan(Math.PI/2-s));var h=w.x!==L.x?(I.x-L.x)/(w.x-L.x):(I.y-L.y)/(w.y-L.y);if(isNaN(h))return;h<0?k.copy(I,L):h>1&&k.copy(I,w)}I.toArray(i[1])}}}}function at(i,t,n,e){var a=n==="normal",o=a?i:i.ensureState(n);o.ignore=t;var r=e.get("smooth");r&&r===!0&&(r=.3),o.shape=o.shape||{},r>0&&(o.shape.smooth=r);var l=e.getModel("lineStyle").getLineStyle();a?i.useStyle(l):o.style=l}function Ma(i,t){var n=t.smooth,e=t.points;if(e)if(i.moveTo(e[0][0],e[0][1]),n>0&&e.length>=3){var a=Ze(e[0],e[1]),o=Ze(e[1],e[2]);if(!a||!o){i.lineTo(e[1][0],e[1][1]),i.lineTo(e[2][0],e[2][1]);return}var r=Math.min(a,o)*n,l=ke([],e[1],e[0],r/a),v=ke([],e[1],e[2],r/o),f=ke([],l,v,.5);i.bezierCurveTo(l[0],l[1],l[0],l[1],f[0],f[1]),i.bezierCurveTo(v[0],v[1],v[0],v[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)i.lineTo(e[s][0],e[s][1])}function ht(i,t,n){var e=i.getTextGuideLine(),a=i.getTextContent();if(!a){e&&i.removeTextGuideLine();return}for(var o=t.normal,r=o.get("show"),l=a.ignore,v=0;v<He.length;v++){var f=He[v],s=t[f],h=f==="normal";if(s){var u=s.get("show"),c=h?l:Ve(a.states[f]&&a.states[f].ignore,l);if(c||!Ve(u,r)){var g=h?e:e&&e.states[f];g&&(g.ignore=!0);continue}e||(e=new ot,i.setTextGuideLine(e),!h&&(l||!r)&&at(e,!0,"normal",t.normal),i.stateProxy&&(e.stateProxy=i.stateProxy)),at(e,!1,f,s)}}if(e){Ot(e.style,n),e.style.fill=null;var d=o.get("showAbove"),p=i.textGuideLineConfig=i.textGuideLineConfig||{};p.showAbove=d||!1,e.buildPath=Ma}}function dt(i,t){t=t||"labelLine";for(var n={normal:i.getModel(t)},e=0;e<je.length;e++){var a=je[e];n[a]=i.getModel([a,t])}return n}function Ta(i){if(i){for(var t=[],n=0;n<i.length;n++)t.push(i[n].slice());return t}}function Aa(i,t){var n=i.label,e=t&&t.getTextGuideLine();return{dataIndex:i.dataIndex,dataType:i.dataType,seriesIndex:i.seriesModel.seriesIndex,text:i.label.style.text,rect:i.hostRect,labelRect:i.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Ta(e&&e.shape.points)}}var rt=["align","verticalAlign","width","height","fontSize"],B=new Gt,Ne=Se(),wa=Se();function pe(i,t,n){for(var e=0;e<n.length;e++){var a=n[e];t[a]!=null&&(i[a]=t[a])}}var me=["x","y","rotation"],Ca=function(){function i(){this._labelList=[],this._chartViewList=[]}return i.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},i.prototype._addLabel=function(t,n,e,a,o){var r=a.style,l=a.__hostTarget,v=l.textConfig||{},f=a.getComputedTransform(),s=a.getBoundingRect().plain();We.applyTransform(s,s,f),f?B.setLocalTransform(f):(B.x=B.y=B.rotation=B.originX=B.originY=0,B.scaleX=B.scaleY=1),B.rotation=ne(B.rotation);var h=a.__hostTarget,u;if(h){u=h.getBoundingRect().plain();var c=h.getComputedTransform();We.applyTransform(u,u,c)}var g=u&&h.getTextGuideLine();this._labelList.push({label:a,labelLine:g,seriesModel:e,dataIndex:t,dataType:n,layoutOption:o,computedLayoutOption:null,rect:s,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:g&&g.ignore,x:B.x,y:B.y,scaleX:B.scaleX,scaleY:B.scaleY,rotation:B.rotation,style:{x:r.x,y:r.y,align:r.align,verticalAlign:r.verticalAlign,width:r.width,height:r.height,fontSize:r.fontSize},cursor:a.cursor,attachedPos:v.position,attachedRot:v.rotation}})},i.prototype.addLabelsOfSeries=function(t){var n=this;this._chartViewList.push(t);var e=t.__model,a=e.get("labelLayout");(Ke(a)||zt(a).length)&&t.group.traverse(function(o){if(o.ignore)return!0;var r=o.getTextContent(),l=Be(o);r&&!r.disableLabelLayout&&n._addLabel(l.dataIndex,l.dataType,e,r,a)})},i.prototype.updateLayoutConfig=function(t){var n=t.getWidth(),e=t.getHeight();function a(b,S){return function(){tt(b,S)}}for(var o=0;o<this._labelList.length;o++){var r=this._labelList[o],l=r.label,v=l.__hostTarget,f=r.defaultAttr,s=void 0;Ke(r.layoutOption)?s=r.layoutOption(Aa(r,v)):s=r.layoutOption,s=s||{},r.computedLayoutOption=s;var h=Math.PI/180;v&&v.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:f.attachedPos,rotation:s.rotate!=null?s.rotate*h:f.attachedRot,offset:[s.dx||0,s.dy||0]});var u=!1;if(s.x!=null?(l.x=G(s.x,n),l.setStyle("x",0),u=!0):(l.x=f.x,l.setStyle("x",f.style.x)),s.y!=null?(l.y=G(s.y,e),l.setStyle("y",0),u=!0):(l.y=f.y,l.setStyle("y",f.style.y)),s.labelLinePoints){var c=v.getTextGuideLine();c&&(c.setShape({points:s.labelLinePoints}),u=!1)}var g=Ne(l);g.needsUpdateLabelLine=u,l.rotation=s.rotate!=null?s.rotate*h:f.rotation,l.scaleX=f.scaleX,l.scaleY=f.scaleY;for(var d=0;d<rt.length;d++){var p=rt[d];l.setStyle(p,s[p]!=null?s[p]:f.style[p])}if(s.draggable){if(l.draggable=!0,l.cursor="move",v){var m=r.seriesModel;if(r.dataIndex!=null){var y=r.seriesModel.getData(r.dataType);m=y.getItemModel(r.dataIndex)}l.on("drag",a(v,m.getModel("labelLine")))}}else l.off("drag"),l.cursor=f.cursor}},i.prototype.layout=function(t){var n=t.getWidth(),e=t.getHeight(),a=Yt(this._labelList),o=Ie(a,function(v){return v.layoutOption.moveOverlap==="shiftX"}),r=Ie(a,function(v){return v.layoutOption.moveOverlap==="shiftY"});Xt(o,0,n),lt(r,0,e);var l=Ie(a,function(v){return v.layoutOption.hideOverlap});qt(l)},i.prototype.processLabelsOverall=function(){var t=this;ie(this._chartViewList,function(n){var e=n.__model,a=n.ignoreLabelLineUpdate,o=e.isAnimationEnabled();n.group.traverse(function(r){if(r.ignore&&!r.forceLabelAnimation)return!0;var l=!a,v=r.getTextContent();!l&&v&&(l=Ne(v).needsUpdateLabelLine),l&&t._updateLabelLine(r,e),o&&t._animateLabels(r,e)})})},i.prototype._updateLabelLine=function(t,n){var e=t.getTextContent(),a=Be(t),o=a.dataIndex;if(e&&o!=null){var r=n.getData(a.dataType),l=r.getItemModel(o),v={},f=r.getItemVisual(o,"style");if(f){var s=r.getVisual("drawType");v.stroke=f[s]}var h=l.getModel("labelLine");ht(t,dt(l),v),tt(t,h)}},i.prototype._animateLabels=function(t,n){var e=t.getTextContent(),a=t.getTextGuideLine();if(e&&(t.forceLabelAnimation||!e.ignore&&!e.invisible&&!t.disableLabelAnimation&&!Ut(t))){var o=Ne(e),r=o.oldLayout,l=Be(t),v=l.dataIndex,f={x:e.x,y:e.y,rotation:e.rotation},s=n.getData(l.dataType);if(r){e.attr(r);var u=t.prevStates;u&&(Qe(u,"select")>=0&&e.attr(o.oldLayoutSelect),Qe(u,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),_e(e,f,n,v)}else if(e.attr(f),!Ft(e).valueAnimation){var h=Ve(e.style.opacity,1);e.style.opacity=0,se(e,{style:{opacity:h}},n,v)}if(o.oldLayout=f,e.states.select){var c=o.oldLayoutSelect={};pe(c,f,me),pe(c,e.states.select,me)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};pe(g,f,me),pe(g,e.states.emphasis,me)}Ht(e,v,s,n,n)}if(a&&!a.ignore&&!a.invisible){var o=wa(a),r=o.oldLayout,d={points:a.shape.points};r?(a.attr({shape:r}),_e(a,{shape:d},n)):(a.setShape(d),a.style.strokePercent=0,se(a,{style:{strokePercent:1}},n)),o.oldLayout=d}},i}();const Da=Ca;var Oe=Se();function Pa(i){i.registerUpdateLifecycle("series:beforeupdate",function(t,n,e){var a=Oe(n).labelManager;a||(a=Oe(n).labelManager=new Da),a.clearLabels()}),i.registerUpdateLifecycle("series:layoutlabels",function(t,n,e){var a=Oe(n).labelManager;e.updatedSeries.forEach(function(o){a.addLabelsOfSeries(n.getViewOfSeriesModel(o))}),a.updateLayoutConfig(n),a.layout(n),a.processLabelsOverall()})}var ye=Math.PI*2,nt=Math.PI/180;function pt(i,t){return Zt(i.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function mt(i,t){var n=pt(i,t),e=i.get("center"),a=i.get("radius");Je(a)||(a=[0,a]);var o=G(n.width,t.getWidth()),r=G(n.height,t.getHeight()),l=Math.min(o,r),v=G(a[0],l/2),f=G(a[1],l/2),s,h,u=i.coordinateSystem;if(u){var c=u.dataToPoint(e);s=c[0]||0,h=c[1]||0}else Je(e)||(e=[e,e]),s=G(e[0],o)+n.x,h=G(e[1],r)+n.y;return{cx:s,cy:h,r0:v,r:f}}function ka(i,t,n){t.eachSeriesByType(i,function(e){var a=e.getData(),o=a.mapDimension("value"),r=pt(e,n),l=mt(e,n),v=l.cx,f=l.cy,s=l.r,h=l.r0,u=-e.get("startAngle")*nt,c=e.get("minAngle")*nt,g=0;a.each(o,function(P){!isNaN(P)&&g++});var d=a.getSum(o),p=Math.PI/(d||g)*2,m=e.get("clockwise"),y=e.get("roseType"),b=e.get("stillShowZeroSum"),S=a.getDataExtent(o);S[0]=0;var x=ye,C=0,A=u,_=m?1:-1;if(a.setLayout({viewRect:r,r:s}),a.each(o,function(P,E){var D;if(isNaN(P)){a.setItemLayout(E,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:v,cy:f,r0:h,r:y?NaN:s});return}y!=="area"?D=d===0&&b?p:P*p:D=ye/g,D<c?(D=c,x-=c):C+=P;var O=A+_*D;a.setItemLayout(E,{angle:D,startAngle:A,endAngle:O,clockwise:m,cx:v,cy:f,r0:h,r:y?jt(P,S,[h,s]):s}),A=O}),x<ye&&g)if(x<=.001){var T=ye/g;a.each(o,function(P,E){if(!isNaN(P)){var D=a.getItemLayout(E);D.angle=T,D.startAngle=u+_*E*T,D.endAngle=u+_*(E+1)*T}})}else p=x/C,A=u,a.each(o,function(P,E){if(!isNaN(P)){var D=a.getItemLayout(E),O=D.angle===c?c:P*p;D.startAngle=A,D.endAngle=A+_*O,A+=_*O}})})}function Ba(i){return{seriesType:i,reset:function(t,n){var e=n.findComponents({mainType:"legend"});if(!(!e||!e.length)){var a=t.getData();a.filterSelf(function(o){for(var r=a.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(r))return!1;return!0})}}}}var Ia=Math.PI/180;function it(i,t,n,e,a,o,r,l,v,f){if(i.length<2)return;function s(d){for(var p=d.rB,m=p*p,y=0;y<d.list.length;y++){var b=d.list[y],S=Math.abs(b.label.y-n),x=e+b.len,C=x*x,A=Math.sqrt((1-Math.abs(S*S/m))*C),_=t+(A+b.len2)*a,T=_-b.label.x,P=b.targetTextWidth-T*a;yt(b,P,!0),b.label.x=_}}function h(d){for(var p={list:[],maxY:0},m={list:[],maxY:0},y=0;y<d.length;y++)if(d[y].labelAlignTo==="none"){var b=d[y],S=b.label.y>n?m:p,x=Math.abs(b.label.y-n);if(x>=S.maxY){var C=b.label.x-t-b.len2*a,A=e+b.len,_=Math.abs(C)<A?Math.sqrt(x*x/(1-C*C/A/A)):A;S.rB=_,S.maxY=x}S.list.push(b)}s(p),s(m)}for(var u=i.length,c=0;c<u;c++)if(i[c].position==="outer"&&i[c].labelAlignTo==="labelLine"){var g=i[c].label.x-f;i[c].linePoints[1][0]+=g,i[c].label.x=f}lt(i,v,v+r)&&h(i)}function Na(i,t,n,e,a,o,r,l){for(var v=[],f=[],s=Number.MAX_VALUE,h=-Number.MAX_VALUE,u=0;u<i.length;u++){var c=i[u].label;Ee(i[u])||(c.x<t?(s=Math.min(s,c.x),v.push(i[u])):(h=Math.max(h,c.x),f.push(i[u])))}for(var u=0;u<i.length;u++){var g=i[u];if(!Ee(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var c=g.label,d=g.linePoints,p=void 0;g.labelAlignTo==="edge"?c.x<t?p=d[2][0]-g.labelDistance-r-g.edgeDistance:p=r+a-g.edgeDistance-d[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?c.x<t?p=s-r-g.bleedMargin:p=r+a-h-g.bleedMargin:c.x<t?p=c.x-r-g.bleedMargin:p=r+a-c.x-g.bleedMargin,g.targetTextWidth=p,yt(g,p)}}it(f,t,n,e,1,a,o,r,l,h),it(v,t,n,e,-1,a,o,r,l,s);for(var u=0;u<i.length;u++){var g=i[u];if(!Ee(g)&&g.linePoints){var c=g.label,d=g.linePoints,m=g.labelAlignTo==="edge",y=c.style.padding,b=y?y[1]+y[3]:0,S=c.style.backgroundColor?0:b,x=g.rect.width+S,C=d[1][0]-d[2][0];m?c.x<t?d[2][0]=r+g.edgeDistance+x+g.labelDistance:d[2][0]=r+a-g.edgeDistance-x-g.labelDistance:(c.x<t?d[2][0]=c.x+g.labelDistance:d[2][0]=c.x-g.labelDistance,d[1][0]=d[2][0]+C),d[1][1]=d[2][1]=c.y}}}function yt(i,t,n){if(n===void 0&&(n=!1),i.labelStyleWidth==null){var e=i.label,a=e.style,o=i.rect,r=a.backgroundColor,l=a.padding,v=l?l[1]+l[3]:0,f=a.overflow,s=o.width+(r?0:v);if(t<s||n){var h=o.height;if(f&&f.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",t-v);var u=e.getBoundingRect();e.setStyle("width",Math.ceil(u.width)),e.setStyle("backgroundColor",r)}else{var c=t-v,g=t<s?c:n?c>i.unconstrainedWidth?null:c:null;e.setStyle("width",g)}var d=e.getBoundingRect();o.width=d.width;var p=(e.style.margin||0)+2.1;o.height=d.height+p,o.y-=(o.height-h)/2}}}function Ee(i){return i.position==="center"}function Oa(i){var t=i.getData(),n=[],e,a,o=!1,r=(i.get("minShowLabelAngle")||0)*Ia,l=t.getLayout("viewRect"),v=t.getLayout("r"),f=l.width,s=l.x,h=l.y,u=l.height;function c(C){C.ignore=!0}function g(C){if(!C.ignore)return!0;for(var A in C.states)if(C.states[A].ignore===!1)return!0;return!1}t.each(function(C){var A=t.getItemGraphicEl(C),_=A.shape,T=A.getTextContent(),P=A.getTextGuideLine(),E=t.getItemModel(C),D=E.getModel("label"),O=D.get("position")||E.get(["emphasis","label","position"]),Me=D.get("distanceToLabelLine"),Te=D.get("alignTo"),Ae=G(D.get("edgeDistance"),f),bt=D.get("bleedMargin"),le=E.getModel("labelLine"),Q=le.get("length");Q=G(Q,f);var ce=le.get("length2");if(ce=G(ce,f),Math.abs(_.endAngle-_.startAngle)<r){ie(T.states,c),T.ignore=!0,P&&(ie(P.states,c),P.ignore=!0);return}if(g(T)){var ve=(_.startAngle+_.endAngle)/2,R=Math.cos(ve),q=Math.sin(ve),J,ue,Ge,fe;e=_.cx,a=_.cy;var H=O==="inside"||O==="inner";if(O==="center")J=_.cx,ue=_.cy,fe="center";else{var we=(H?(_.r+_.r0)/2*R:_.r*R)+e,Ce=(H?(_.r+_.r0)/2*q:_.r*q)+a;if(J=we+R*3,ue=Ce+q*3,!H){var ze=we+R*(Q+v-_.r),Ye=Ce+q*(Q+v-_.r),Xe=ze+(R<0?-1:1)*ce,qe=Ye;Te==="edge"?J=R<0?s+Ae:s+f-Ae:J=Xe+(R<0?-Me:Me),ue=qe,Ge=[[we,Ce],[ze,Ye],[Xe,qe]]}fe=H?"center":Te==="edge"?R>0?"right":"left":R>0?"left":"right"}var ee=Math.PI,j=0,te=D.get("rotate");if(ct(te))j=te*(ee/180);else if(O==="center")j=0;else if(te==="radial"||te===!0){var _t=R<0?-ve+ee:-ve;j=_t}else if(te==="tangential"&&O!=="outside"&&O!=="outer"){var Z=Math.atan2(R,q);Z<0&&(Z=ee*2+Z);var Lt=q>0;Lt&&(Z=ee+Z),j=Z-ee}if(o=!!j,T.x=J,T.y=ue,T.rotation=j,T.setStyle({verticalAlign:"middle"}),H){T.setStyle({align:fe});var De=T.states.select;De&&(De.x+=T.x,De.y+=T.y)}else{var ae=T.getBoundingRect().clone();ae.applyTransform(T.getComputedTransform());var Ue=(T.style.margin||0)+2.1;ae.y-=Ue/2,ae.height+=Ue,n.push({label:T,labelLine:P,position:O,len:Q,len2:ce,minTurnAngle:le.get("minTurnAngle"),maxSurfaceAngle:le.get("maxSurfaceAngle"),surfaceNormal:new k(R,q),linePoints:Ge,textAlign:fe,labelDistance:Me,labelAlignTo:Te,edgeDistance:Ae,bleedMargin:bt,rect:ae,unconstrainedWidth:ae.width,labelStyleWidth:T.style.width})}A.setTextConfig({inside:H})}}),!o&&i.get("avoidLabelOverlap")&&Na(n,e,a,v,f,u,s,h);for(var d=0;d<n.length;d++){var p=n[d],m=p.label,y=p.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),b&&(ie(m.states,c),m.ignore=!0);var S=m.states.select;S&&(S.x+=m.x,S.y+=m.y)}if(y){var x=p.linePoints;b||!x?(ie(y.states,c),y.ignore=!0):(gt(x,p.minTurnAngle),Sa(x,p.surfaceNormal,p.maxSurfaceAngle),y.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new k(x[0][0],x[0][1])})}}}var Ea=function(i){$e(t,i);function t(n,e,a){var o=i.call(this)||this;o.z2=2;var r=new Wt;return o.setTextContent(r),o.updateData(n,e,a,!0),o}return t.prototype.updateData=function(n,e,a,o){var r=this,l=n.hostModel,v=n.getItemModel(e),f=v.getModel("emphasis"),s=n.getItemLayout(e),h=W(de(v.getModel("itemStyle"),s,!0),s);if(isNaN(h.startAngle)){r.setShape(h);return}if(o){r.setShape(h);var u=l.getShallow("animationType");l.ecModel.ssr?(se(r,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),r.originX=h.cx,r.originY=h.cy):u==="scale"?(r.shape.r=s.r0,se(r,{shape:{r:s.r}},l,e)):a!=null?(r.setShape({startAngle:a,endAngle:a}),se(r,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(r.shape.endAngle=s.startAngle,_e(r,{shape:{endAngle:s.endAngle}},l,e))}else Kt(r),_e(r,{shape:h},l,e);r.useStyle(n.getItemVisual(e,"style")),Qt(r,v);var c=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),d=Math.cos(c)*g,p=Math.sin(c)*g,m=v.getShallow("cursor");m&&r.attr("cursor",m),this._updateLabel(l,n,e),r.ensureState("emphasis").shape=W({r:s.r+(f.get("scale")&&f.get("scaleSize")||0)},de(f.getModel("itemStyle"),s)),W(r.ensureState("select"),{x:d,y:p,shape:de(v.getModel(["select","itemStyle"]),s)}),W(r.ensureState("blur"),{shape:de(v.getModel(["blur","itemStyle"]),s)});var y=r.getTextGuideLine(),b=r.getTextContent();y&&W(y.ensureState("select"),{x:d,y:p}),W(b.ensureState("select"),{x:d,y:p}),Jt(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype._updateLabel=function(n,e,a){var o=this,r=e.getItemModel(a),l=r.getModel("labelLine"),v=e.getItemVisual(a,"style"),f=v&&v.fill,s=v&&v.opacity;ea(o,ta(r),{labelFetcher:e.hostModel,labelDataIndex:a,inheritColor:f,defaultOpacity:s,defaultText:n.getFormattedLabel(a,"normal")||e.getName(a)});var h=o.getTextContent();o.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var u=n.get(["label","position"]);if(u!=="outside"&&u!=="outer")o.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new ot,this.setTextGuideLine(c)),ht(this,dt(r),{stroke:f,opacity:aa(l.get(["lineStyle","opacity"]),s,1)})}},t}(vt),Ra=function(i){$e(t,i);function t(){var n=i!==null&&i.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,e,a,o){var r=n.getData(),l=this._data,v=this.group,f;if(!l&&r.count()>0){for(var s=r.getItemLayout(0),h=1;isNaN(s&&s.startAngle)&&h<r.count();++h)s=r.getItemLayout(h);s&&(f=s.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),r.count()===0&&n.get("showEmptyCircle")){var u=new vt({shape:mt(n,a)});u.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,v.add(u)}r.diff(l).add(function(c){var g=new Ea(r,c,f);r.setItemGraphicEl(c,g),v.add(g)}).update(function(c,g){var d=l.getItemGraphicEl(g);d.updateData(r,c,f),d.off("click"),v.add(d),r.setItemGraphicEl(c,d)}).remove(function(c){var g=l.getItemGraphicEl(c);ra(g,n,c)}).execute(),Oa(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(n,e){var a=e.getData(),o=a.getItemLayout(0);if(o){var r=n[0]-o.cx,l=n[1]-o.cy,v=Math.sqrt(r*r+l*l);return v<=o.r&&v>=o.r0}},t.type="pie",t}(na);const Va=Ra;var $a=function(){function i(t,n){this._getDataWithEncodedVisual=t,this._getRawData=n}return i.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},i.prototype.containName=function(t){var n=this._getRawData();return n.indexOfName(t)>=0},i.prototype.indexOfName=function(t){var n=this._getDataWithEncodedVisual();return n.indexOfName(t)},i.prototype.getItemVisual=function(t,n){var e=this._getDataWithEncodedVisual();return e.getItemVisual(t,n)},i}();const Ga=$a;var za=Se(),Ya=function(i){$e(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.init=function(n){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ga(et(this.getData,this),et(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return ma(this,{coordDimensions:["value"],encodeDefaulter:ut(ia,this)})},t.prototype.getDataParams=function(n){var e=this.getData(),a=za(e),o=a.seats;if(!o){var r=[];e.each(e.mapDimension("value"),function(v){r.push(v)}),o=a.seats=sa(r,e.hostModel.get("percentPrecision"))}var l=i.prototype.getDataParams.call(this,n);return l.percent=o[n]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(n){oa(n,"labelLine",["show"]);var e=n.labelLine,a=n.emphasis.labelLine;e.show=e.show&&n.label.show,a.show=a.show&&n.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(la);const Xa=Ya;function qa(i){return{seriesType:i,reset:function(t,n){var e=t.getData();e.filterSelf(function(a){var o=e.mapDimension("value"),r=e.get(o,a);return!(ct(r)&&!isNaN(r)&&r<0)})}}}function Ua(i){i.registerChartView(Va),i.registerSeriesModel(Xa),ca("pie",i.registerAction),i.registerLayout(ut(ka,"pie")),i.registerProcessor(Ba("pie")),i.registerProcessor(qa("pie"))}const Fa=st({__name:"BalanceChart",props:{currencies:{required:!0,type:Array},showTitle:{required:!1,type:Boolean}},setup(i){va([Ua,ua,fa,ga,ha,da,Pa]);const t=Re(null),{width:n}=xt(t),e=i,a=St(),o=K(()=>({title:{text:"Balance",show:e.showTitle},center:["50%","50%"],backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["balance","currency","est_stake","free","used","stake"],source:e.currencies},tooltip:{trigger:"item",formatter:r=>`${Fe(r.value.balance,r.value.currency,8)}<br />${r.percent}% (${Fe(r.value.est_stake,r.value.stake)})`},series:[{type:"pie",radius:["40%","70%"],encode:{value:"est_stake",itemName:"currency",tooltip:["balance","currency"]},label:{formatter:"{b} - {d}%"},tooltip:{show:!0}}]}));return(r,l)=>i.currencies?(V(),F(M(pa),{key:0,ref_key:"balanceChart",ref:t,option:M(o),theme:M(a).chartTheme,style:Mt({height:M(n)*.6+"px"}),autoresize:""},null,8,["option","theme","style"])):be("",!0)}}),Ha=Tt(Fa,[["__scopeId","data-v-ecc5d33b"]]),ja={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Za=N("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1),Wa=[Za];function Ka(i,t){return V(),oe("svg",ja,[...Wa])}const Qa={name:"mdi-eye",render:Ka},Ja={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},er=N("path",{fill:"currentColor",d:"M11.83 9L15 12.16V12a3 3 0 0 0-3-3zm-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28l.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5c1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22L21 20.73L3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75c-1.73-4.39-6-7.5-11-7.5c-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7"},null,-1),tr=[er];function ar(i,t){return V(),oe("svg",Ja,[...tr])}const rr={name:"mdi-eye-off",render:ar},nr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ir=N("path",{fill:"currentColor",d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5"},null,-1),sr=[ir];function or(i,t){return V(),oe("svg",nr,[...sr])}const lr={name:"mdi-robot",render:or},cr={class:"mb-2"},vr=N("label",{class:"me-auto h3"},"Balance",-1),ur={class:"float-end d-flex flex-row"},fr={key:0},gr=N("td",{class:"pt-1"},[N("strong",null,"Total")],-1),hr={class:"pt-1"},dr=["title"],pr={class:"pt-1"},_r=st({__name:"BotBalance",setup(i){const t=At(),n=Re(!0),e=Re(!0),a=K(()=>Number((1.1**t.activeBot.stakeCurrencyDecimals).toFixed(8))),o=K(()=>t.activeBot.botApiVersion>=2.26),r=K(()=>{var h;return(h=t.activeBot.balance.currencies)==null?void 0:h.filter(u=>(!n.value||u.est_stake>=a.value)&&(!o.value||!e.value||(u.is_bot_managed??!0)===!0))}),l=h=>h?Ct(h,t.activeBot.stakeCurrencyDecimals):"",v=K(()=>{var h;return(h=r.value)==null?void 0:h.map(u=>({balance:e.value&&o.value&&u.bot_owned!=null?u.bot_owned:u.balance,currency:u.currency,est_stake:e.value&&o.value?u.est_stake_bot??u.est_stake:u.est_stake,free:e.value&&o.value?u.bot_owned??u.free:u.free,used:u.used,stake:u.stake}))}),f=K(()=>[{key:"currency",label:"Currency"},{key:e.value&&o.value?"bot_owned":"free",label:"Available",formatter:l},{key:e.value&&o.value?"est_stake_bot":"est_stake",label:`in ${t.activeBot.balance.stake}`,formatter:l}]);async function s(){t.activeBot.getBalance()}return wt(()=>{s()}),(h,u)=>{const c=lr,g=Bt,d=Dt,p=rr,m=Qa,y=It,b=Ha,S=Pt;return V(),oe("div",null,[N("div",cr,[vr,N("div",ur,[M(o)?(V(),F(d,{key:0,size:"sm",title:M(e)?"Showing Bot balance":"Showing Account balance",onClick:u[0]||(u[0]=x=>e.value=!M(e))},{default:ge(()=>[M(e)?(V(),F(c,{key:0})):(V(),F(g,{key:1}))]),_:1},8,["title"])):be("",!0),he(d,{size:"sm",title:M(n)?"Show all balances":"Hide small balances",onClick:u[1]||(u[1]=x=>n.value=!M(n))},{default:ge(()=>[M(n)?(V(),F(p,{key:0})):(V(),F(m,{key:1}))]),_:1},8,["title"]),he(d,{class:"float-end",size:"sm",onClick:s},{default:ge(()=>[he(y)]),_:1})])]),M(r)?(V(),F(b,{key:0,currencies:M(v)},null,8,["currencies"])):be("",!0),N("div",null,[M(t).activeBot.balance.note?(V(),oe("p",fr,[N("strong",null,Pe(M(t).activeBot.balance.note),1)])):be("",!0),he(S,{class:"table-sm",items:M(r),fields:M(f)},{"custom-foot":ge(()=>[gr,N("td",hr,[N("span",{class:"font-italic",title:`Increase over initial capital of ${l(M(t).activeBot.balance.starting_capital)} ${M(t).activeBot.balance.stake}`},Pe(M(kt)(M(t).activeBot.balance.starting_capital_ratio)),9,dr)]),N("td",pr,[N("strong",null,Pe(M(e)&&M(o)?l(M(t).activeBot.balance.total_bot):l(M(t).activeBot.balance.total)),1)])]),_:1},8,["items","fields"])])])}}});export{_r as _};
//# sourceMappingURL=BotBalance.vue_vue_type_script_setup_true_lang-YJ6guNIR.js.map
