import{_ as M,d as D,j as q,x as f,A as O,aE as G,B as F,o as c,c as B,b as r,t as C,e as a,w as o,l as s,r as v,Q as W,R as K,k as $,g as x,u as E,z as Y,s as oe,h as R,p as Q,f as X,i as h,X as ee,H as Z,V as re,W as ie,Y as ne}from"./index.5e6b3c4a.js";import{_ as ue,T as J,a as ce}from"./StrategySelect.9ba18c35.js";import{T as te}from"./TradeList.63b97380.js";import{P as de,C as me,T as _e}from"./TradesLog.8d3f52a4.js";import{D as be,_ as fe,P as ve,a as pe}from"./InfoBox.065c0f41.js";import{P as ke}from"./PairSummary.a2dd6db6.js";import{C as ge}from"./CandleChartContainer.e8452553.js";import"./install.6a484433.js";import"./install.c51d785f.js";import"./createSeriesDataSimply.a7ae3a3f.js";const ye={class:"container-fluid px-0 backtestresult-container"},Re={class:"row d-flex justify-content-center"},he={class:"row text-start ms-0"},Be={class:"row w-100"},xe={class:"col-12 col-xl-6 px-0 px-xl-0 pe-xl-1"},we={class:"col-12 col-xl-6 px-0 px-xl-0 pt-2 pt-xl-0 ps-xl-1"},$e=D({__name:"BacktestResultView",props:{backtestResult:{required:!0,type:Object}},setup(t){const e=t,n=u=>`${O(u,e.backtestResult.stake_currency_decimals)} ${e.backtestResult.stake_currency}`,p=u=>u.trades.slice().sort((T,S)=>T.profit_ratio-S.profit_ratio),k=q(()=>{const u=p(e.backtestResult);if(u.length===0)return"N/A";const V=u[u.length-1];return`${V.pair} ${f(V.profit_ratio,2)}`}),g=q(()=>{const u=p(e.backtestResult);if(u.length===0)return"N/A";const V=u[0];return`${V.pair} ${f(V.profit_ratio,2)}`}),b=q(()=>{var V,T,S,y,N;const u=((V=e.backtestResult)==null?void 0:V.trade_count_short)&&((T=e.backtestResult)==null?void 0:T.trade_count_short)>0?[{metric:"___",value:"___"},{metric:"Long / Short",value:`${e.backtestResult.trade_count_long} / ${e.backtestResult.trade_count_short}`},{metric:"Total profit Long",value:`${f(e.backtestResult.profit_total_long||0)} | ${n(e.backtestResult.profit_total_long_abs)}`},{metric:"Total profit Short",value:`${f(e.backtestResult.profit_total_short||0)} | ${n(e.backtestResult.profit_total_short_abs)}`}]:[];return[{metric:"Total Profit",value:`${f(e.backtestResult.profit_total)} | ${n(e.backtestResult.profit_total_abs)}`},{metric:"CAGR",value:`${e.backtestResult.cagr?f(e.backtestResult.cagr):"N/A"}`},{metric:"Sortino",value:`${e.backtestResult.sortino?e.backtestResult.sortino.toFixed(2):"N/A"}`},{metric:"Sharpe",value:`${e.backtestResult.sharpe?e.backtestResult.sharpe.toFixed(2):"N/A"}`},{metric:"Calmar",value:`${e.backtestResult.calmar?e.backtestResult.calmar.toFixed(2):"N/A"}`},{metric:"Expectancy",value:`${e.backtestResult.expectancy?e.backtestResult.expectancy.toFixed(2):"N/A"}`},{metric:"Profit factor",value:`${e.backtestResult.profit_factor?O(e.backtestResult.profit_factor,3):"N/A"}`},{metric:"Total trades / Daily Avg Trades",value:`${e.backtestResult.total_trades} / ${e.backtestResult.trades_per_day}`},{metric:"Best day",value:`${f(e.backtestResult.backtest_best_day,2)} | ${n(e.backtestResult.backtest_best_day_abs)}`},{metric:"Worst day",value:`${f(e.backtestResult.backtest_worst_day,2)} | ${n(e.backtestResult.backtest_worst_day_abs)}`},{metric:"Win/Draw/Loss",value:`${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].wins} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].draws} / ${e.backtestResult.results_per_pair[e.backtestResult.results_per_pair.length-1].losses}`},{metric:"Days win/draw/loss",value:`${e.backtestResult.winning_days} / ${e.backtestResult.draw_days} / ${e.backtestResult.losing_days}`},{metric:"Avg. Duration winners",value:G(e.backtestResult.winner_holding_avg_s)},{metric:"Avg. Duration Losers",value:G(e.backtestResult.loser_holding_avg_s)},{metric:"Rejected entry signals",value:e.backtestResult.rejected_signals},{metric:"Entry/Exit timeouts",value:`${e.backtestResult.timedout_entry_orders} / ${e.backtestResult.timedout_exit_orders}`},{metric:"Canceled Trade Entries",value:(S=e.backtestResult.canceled_trade_entries)!=null?S:"N/A"},{metric:"Canceled Entry Orders",value:(y=e.backtestResult.canceled_entry_orders)!=null?y:"N/A"},{metric:"Replaced Entry Orders",value:(N=e.backtestResult.replaced_entry_orders)!=null?N:"N/A"},...u,{metric:"___",value:"___"},{metric:"Min balance",value:n(e.backtestResult.csum_min)},{metric:"Max balance",value:n(e.backtestResult.csum_max)},{metric:"Market change",value:f(e.backtestResult.market_change)},{metric:"___",value:"___"},{metric:"Max Drawdown (Account)",value:f(e.backtestResult.max_drawdown_account)},{metric:"Max Drawdown ABS",value:n(e.backtestResult.max_drawdown_abs)},{metric:"Drawdown high | low",value:`${n(e.backtestResult.max_drawdown_high)} | ${n(e.backtestResult.max_drawdown_low)}`},{metric:"Drawdown start",value:F(e.backtestResult.drawdown_start_ts)},{metric:"Drawdown end",value:F(e.backtestResult.drawdown_end_ts)},{metric:"___",value:"___"},{metric:"Best Pair",value:`${e.backtestResult.best_pair.key} ${f(e.backtestResult.best_pair.profit_sum)}`},{metric:"Worst Pair",value:`${e.backtestResult.worst_pair.key} ${f(e.backtestResult.worst_pair.profit_sum)}`},{metric:"Best single Trade",value:k.value},{metric:"Worst single Trade",value:g.value}]}),_=q(()=>[{setting:"Backtesting from",value:F(e.backtestResult.backtest_start_ts)},{setting:"Backtesting to",value:F(e.backtestResult.backtest_end_ts)},{setting:"BT execution time",value:G(e.backtestResult.backtest_run_end_ts-e.backtestResult.backtest_run_start_ts)},{setting:"Max open trades",value:e.backtestResult.max_open_trades},{setting:"Timeframe",value:e.backtestResult.timeframe},{setting:"Timeframe Detail",value:e.backtestResult.timeframe_detail||"N/A"},{setting:"Timerange",value:e.backtestResult.timerange},{setting:"Stoploss",value:f(e.backtestResult.stoploss,2)},{setting:"Trailing Stoploss",value:e.backtestResult.trailing_stop},{setting:"Trail only when offset is reached",value:e.backtestResult.trailing_only_offset_is_reached},{setting:"Trailing Stop positive",value:e.backtestResult.trailing_stop_positive},{setting:"Trailing stop positive offset",value:e.backtestResult.trailing_stop_positive_offset},{setting:"Custom Stoploss",value:e.backtestResult.use_custom_stoploss},{setting:"ROI",value:e.backtestResult.minimal_roi},{setting:"Use Exit Signal",value:e.backtestResult.use_exit_signal!==void 0?e.backtestResult.use_exit_signal:e.backtestResult.use_sell_signal},{setting:"Exit profit only",value:e.backtestResult.exit_profit_only!==void 0?e.backtestResult.exit_profit_only:e.backtestResult.sell_profit_only},{setting:"Exit profit offset",value:e.backtestResult.exit_profit_offset!==void 0?e.backtestResult.exit_profit_offset:e.backtestResult.sell_profit_offset},{setting:"Enable protections",value:e.backtestResult.enable_protections},{setting:"Starting balance",value:n(e.backtestResult.starting_balance)},{setting:"Final balance",value:n(e.backtestResult.final_balance)},{setting:"Avg. stake amount",value:n(e.backtestResult.avg_stake_amount)},{setting:"Total trade volume",value:n(e.backtestResult.total_volume)}]),d=q(()=>[{key:"key",label:"Pair"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:u=>f(u,2)},{key:"profit_sum",label:"Cum Profit %",formatter:u=>f(u,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:u=>O(u,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:u=>f(u,2)},{key:"duration_avg",label:"Avg Duration"},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),m=q(()=>[{key:"exit_reason",label:"Exit Reason"},{key:"trades",label:"Buys"},{key:"profit_mean",label:"Avg Profit %",formatter:u=>f(u,2)},{key:"profit_sum",label:"Cum Profit %",formatter:u=>f(u,2)},{key:"profit_total_abs",label:`Tot Profit ${e.backtestResult.stake_currency}`,formatter:u=>O(u,e.backtestResult.stake_currency_decimals)},{key:"profit_total",label:"Tot Profit %",formatter:u=>f(u,2)},{key:"wins",label:"Wins"},{key:"draws",label:"Draws"},{key:"losses",label:"Losses"}]),L=[{key:"metric",label:"Metric"},{key:"value",label:"Value"}],w=[{key:"setting",label:"Setting"},{key:"value",label:"Value"}];return(u,V)=>{const T=v("b-table"),S=v("b-card");return c(),B("div",ye,[r("div",Re,[r("h3",null,"Backtest-result for "+C(t.backtestResult.strategy_name),1)]),r("div",he,[r("div",Be,[r("div",xe,[a(S,{header:"Strategy settings"},{default:o(()=>[a(T,{small:"",borderless:"",items:s(_),fields:w},null,8,["items"])]),_:1})]),r("div",we,[a(S,{header:"Metrics"},{default:o(()=>[a(T,{small:"",borderless:"",items:s(b),fields:L},null,8,["items"])]),_:1})])]),a(S,{header:"Results per Exit-reason",class:"row mt-2 w-100"},{default:o(()=>[a(T,{small:"",hover:"",stacked:"sm",items:t.backtestResult.exit_reason_summary||t.backtestResult.sell_reason_summary,fields:s(m)},null,8,["items","fields"])]),_:1}),a(S,{header:"Results per pair",class:"row mt-2 w-100"},{default:o(()=>[a(T,{small:"",hover:"",stacked:"sm",items:t.backtestResult.results_per_pair,fields:s(d)},null,8,["items","fields"])]),_:1}),a(S,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[a(te,{class:"row trade-history mt-2 w-100",trades:t.backtestResult.trades,"show-filter":!0,"stake-currency":t.backtestResult.stake_currency},null,8,["trades","stake-currency"])]),_:1})])])}}});var Ve=M($e,[["__scopeId","data-v-763fccbc"]]);const Se=D({name:"BacktestResultSelect",props:{backtestHistory:{required:!0,type:Object},selectedBacktestResultKey:{required:!1,default:"",type:String}},emits:["selectionChange"],setup(t,{emit:e}){return{formatPercent:f,setBacktestResult:p=>{e("selectionChange",p)}}}}),Ce={class:"container d-flex flex-column align-items-center"},Te=r("h3",null,"Available results:",-1);function Ae(t,e,n,p,k,g){const b=v("b-list-group-item"),_=v("b-list-group");return c(),B("div",Ce,[Te,a(_,{class:"ms-2"},{default:o(()=>[(c(!0),B(W,null,K(Object.entries(t.backtestHistory),([d,m])=>(c(),$(b,{key:d,button:"",active:d===t.selectedBacktestResultKey,class:"d-flex justify-content-between align-items-center py-1",onClick:L=>t.setBacktestResult(d)},{default:o(()=>[x(C(d)+" "+C(m.total_trades)+" "+C(t.formatPercent(m.profit_total)),1)]),_:2},1032,["active","onClick"]))),128))]),_:1})])}var Pe=M(Se,[["render",Ae]]);const qe={class:"w-100 d-flex"},Le={class:"ms-2"},Ie=D({__name:"FreqaiModelSelect",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,p=E(),k=q({get(){return n.modelValue},set(g){e("update:modelValue",g)}});return Y(()=>{p.activeBot.freqaiModelList.length===0&&p.activeBot.getFreqAIModelList()}),(g,b)=>{const _=v("b-form-select"),d=v("b-button");return c(),B("div",null,[r("div",qe,[a(_,{id:"freqaiModel-select",modelValue:s(k),"onUpdate:modelValue":b[0]||(b[0]=m=>oe(k)?k.value=m:null),options:s(p).activeBot.freqaiModelList},null,8,["modelValue","options"]),r("div",Le,[a(d,{onClick:s(p).activeBot.getFreqAIModelList},{default:o(()=>[x("\u21BB")]),_:1},8,["onClick"])])])])}}}),Ue=D({setup(){const t=E();return Y(()=>{t.activeBot.getBacktestHistory()}),{timestampms:F,botStore:t}}}),De=r("p",null," Load Historic results from disk. You can click on multiple results to load all of them into freqUI. ",-1);function Ne(t,e,n,p,k,g){const b=v("b-list-group-item"),_=v("b-list-group");return c(),B("div",null,[r("button",{class:"btn btn-secondary float-end",title:"Refresh","aria-label":"Refresh",onClick:e[0]||(e[0]=(...d)=>t.botStore.activeBot.getBacktestHistory&&t.botStore.activeBot.getBacktestHistory(...d))}," \u21BB "),De,t.botStore.activeBot.backtestHistoryList?(c(),$(_,{key:0,class:"ms-2"},{default:o(()=>[(c(!0),B(W,null,K(t.botStore.activeBot.backtestHistoryList,(d,m)=>(c(),$(b,{key:m,class:"d-flex justify-content-between align-items-center py-1 mb-1",button:"",onClick:L=>t.botStore.activeBot.getBacktestHistoryResult(d)},{default:o(()=>[r("strong",null,C(d.strategy),1),x(" backtested on: "+C(t.timestampms(d.backtest_start_time*1e3))+" ",1),r("small",null,C(d.filename),1)]),_:2},1032,["onClick"]))),128))]),_:1})):R("",!0)])}var Me=M(Ue,[["render",Ne]]);const ze=D({name:"BacktestGraphsView",components:{ProfitDistributionChart:de,CumProfitChart:me,TradesLogChart:_e},props:{trades:{required:!0,type:Array}},setup(){return{}}}),Fe=t=>(Q("data-v-c2c9d094"),t=t(),X(),t),Ee={class:"text-center flex-fill mt-2 d-flex flex-column"},je=Fe(()=>r("hr",null,null,-1));function He(t,e,n,p,k,g){const b=v("TradesLogChart"),_=v("CumProfitChart"),d=v("ProfitDistributionChart");return c(),B("div",Ee,[a(b,{trades:t.trades,class:"trades-log"},null,8,["trades"]),a(_,{trades:t.trades,"profit-column":"profit_abs",class:"cum-profit","show-title":!0},null,8,["trades"]),je,a(d,{class:"mt-3",trades:t.trades,"show-title":!0},null,8,["trades"])])}var Oe=M(ze,[["render",He],["__scopeId","data-v-c2c9d094"]]);const We=t=>(Q("data-v-3aaee09a"),t=t(),X(),t),Ge=We(()=>r("span",null,"Trade Navigation",-1)),Ke={key:0},Ye=D({__name:"TradeListNav",props:{trades:{required:!0,type:Array},backtestMode:{required:!1,default:!1,type:Boolean}},emits:["trade-select"],setup(t,{emit:e}){const n=t,p=E(),k=h({}),g=_=>{k.value=_,e("trade-select",_)},b=q(()=>n.trades.slice().sort((_,d)=>d.open_timestamp-_.open_timestamp));return(_,d)=>{const m=v("b-list-group-item"),L=v("b-list-group");return c(),B("div",null,[Ge,a(L,null,{default:o(()=>[(c(!0),B(W,null,K(s(b),w=>(c(),$(m,{key:w.open_timestamp,button:"",class:"d-flex flex-wrap justify-content-between align-items-center py-1",title:`${w.pair}`,active:w.open_timestamp===k.value.open_timestamp,onClick:u=>g(w)},{default:o(()=>[r("div",null,[s(p).activeBot.botState.trading_mode!=="spot"?(c(),B("span",Ke,C(w.is_short?"S-":"L-"),1)):R("",!0),a(be,{date:w.open_timestamp},null,8,["date"])]),a(fe,{trade:w},null,8,["trade"]),t.backtestMode?(c(),$(ve,{key:0,"profit-ratio":w.profit_ratio,"stake-currency":s(p).activeBot.stakeCurrency},null,8,["profit-ratio","stake-currency"])):R("",!0)]),_:2},1032,["title","active","onClick"]))),128)),t.trades.length===0?(c(),$(m,{key:0},{default:o(()=>[x("No trades to show...")]),_:1})):R("",!0)]),_:1})])}}});var Qe=M(Ye,[["__scopeId","data-v-3aaee09a"]]);const Xe={class:"row"},Ze={class:"col-md-11 text-start"},Je={class:"col-md-1 text-end"},et={class:"row text-center h-100 d-flex align-items-stretch"},tt=D({__name:"BacktestResultChart",props:{timeframe:{required:!0,type:String},strategy:{required:!0,type:String},timerange:{required:!0,type:String},pairlist:{required:!0,type:Array},trades:{required:!0,type:Array}},setup(t){const e=E(),n=h(!0),p=h(),k=g=>{p.value={startValue:g.open_timestamp,endValue:g.close_timestamp}};return(g,b)=>{const _=v("b-button"),d=v("b-card");return c(),B("div",null,[r("div",Xe,[r("div",Ze,[r("p",null," Graph will always show the latest values for the selected strategy. Timerange: "+C(t.timerange)+" - "+C(t.strategy),1)]),r("div",Je,[a(_,{"aria-label":"Close",title:"Trade Navigation",size:"sm",onClick:b[0]||(b[0]=m=>n.value=!n.value)},{default:o(()=>[x(C(n.value?">":"<"),1)]),_:1})])]),r("div",et,[a(ke,{class:"col-md-2 overflow-auto",style:{"max-height":"calc(100vh - 200px)"},pairlist:t.pairlist,trades:t.trades,"sort-method":"profit","backtest-mode":!0},null,8,["pairlist","trades"]),a(ge,{"available-pairs":t.pairlist,"historic-view":!0,timeframe:t.timeframe,timerange:t.timerange,strategy:t.strategy,trades:t.trades,class:ee(`${n.value?"col-md-8":"col-md-10"} candle-chart-container px-0 h-100 align-self-stretch`),"slider-position":p.value},null,8,["available-pairs","timeframe","timerange","strategy","trades","class","slider-position"]),n.value?(c(),$(Qe,{key:0,class:"overflow-auto col-md-2",style:{"max-height":"calc(100vh - 200px)"},trades:t.trades.filter(m=>m.pair===s(e).activeBot.selectedPair),onTradeSelect:k},null,8,["trades"])):R("",!0)]),a(d,{header:"Single trades",class:"row mt-2 w-100"},{default:o(()=>[a(te,{class:"row trade-history mt-2 w-100",trades:t.trades,"show-filter":!0},null,8,["trades"])]),_:1})])}}});var at=M(tt,[["__scopeId","data-v-0d25dcb0"]]);const z=t=>(Q("data-v-2aceef93"),t=t(),X(),t),st={class:"container-fluid",style:{"max-height":"calc(100vh - 60px)"}},lt={class:"container-fluid"},ot=z(()=>r("div",{class:"row mb-2"},null,-1)),rt={key:0},it={class:"row w-100"},nt=z(()=>r("h2",{class:"col-4 col-lg-3"},"Backtesting",-1)),ut={class:"col-12 col-lg-order-last col-lg-6 mx-md-5 d-flex flex-wrap justify-content-md-center justify-content-between mb-4"},ct={class:"d-md-flex"},dt={key:0,class:"flex-fill row d-flex flex-column bt-config"},mt={key:1,class:"flex-fill row d-flex flex-column bt-config"},_t={class:"mb-2"},bt=z(()=>r("span",null,"Strategy",-1)),ft={class:"d-flex"},vt={class:"d-flex justify-content-center"},pt=z(()=>r("span",{class:"me-2"},"Enable FreqAI:",-1)),kt=z(()=>r("hr",null,null,-1)),gt=z(()=>r("h3",{class:"mt-3"},"Backtesting summary",-1)),yt={class:"d-flex flex-wrap flex-md-nowrap justify-content-between justify-content-md-center"},Rt={key:0,class:"container-fluid text-center w-100 mt-2"},ht=D({__name:"Backtesting",setup(t){const e=E(),n=q(()=>e.activeBot.backtestHistory?Object.keys(e.activeBot.backtestHistory).length!==0:!1),p=q(()=>{try{return e.activeBot.selectedBacktestResult.timeframe}catch{return""}}),k=h(""),g=h(""),b=h(""),_=h(""),d=h(!1),m=h({enabled:!1,model:"",identifier:""}),L=h(!1),w=h(!1),u=h(!0),V=h(""),T=h(""),S=h(""),y=h("run"),N=h(null),ae=()=>{k.value=e.activeBot.selectedBacktestResult.strategy_name,e.activeBot.getStrategy(k.value),g.value=e.activeBot.selectedBacktestResult.timeframe,b.value=e.activeBot.selectedBacktestResult.timeframe_detail||"",_.value=e.activeBot.selectedBacktestResult.timerange};Z(()=>e.activeBot.selectedBacktestResultKey,()=>{ae()});const se=()=>{const A={strategy:k.value,timerange:_.value,enable_protections:L.value},l=parseInt(V.value,10);if(l&&(A.max_open_trades=l),w.value)A.stake_amount="unlimited";else{const U=Number(T.value);U&&(A.stake_amount=U.toString())}const I=Number(S.value);I&&(A.dry_run_wallet=I),g.value&&(A.timeframe=g.value),b.value&&(A.timeframe_detail=b.value),u.value||(A.backtest_cache="none"),m.value.enabled&&(A.freqaimodel=m.value.model,m.value.identifier!==""&&(A.freqai={identifier:m.value.identifier})),e.activeBot.startBacktest(A)};return Y(()=>e.activeBot.getState()),Z(()=>e.activeBot.backtestRunning,()=>{e.activeBot.backtestRunning===!0?N.value=window.setInterval(e.activeBot.pollBacktest,1e3):N.value&&(clearInterval(N.value),N.value=null)}),(A,l)=>{const I=v("b-form-radio"),U=v("b-button"),P=v("b-form-group"),j=v("b-form-input"),H=v("b-form-checkbox"),le=v("b-card");return c(),B("div",st,[r("div",lt,[ot,s(e).activeBot.canRunBacktest?R("",!0):(c(),B("p",rt," Bot must be in webserver mode to enable Backtesting. ")),r("div",it,[nt,r("div",ut,[s(e).activeBot.botApiVersion>=2.15?(c(),$(I,{key:0,modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=i=>y.value=i),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"historicResults",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[x("Load Results")]),_:1},8,["modelValue","disabled"])):R("",!0),a(I,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=i=>y.value=i),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"run",disabled:!s(e).activeBot.canRunBacktest},{default:o(()=>[x("Run backtest")]),_:1},8,["modelValue","disabled"]),a(I,{id:"bt-analyze-btn",modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=i=>y.value=i),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"results",disabled:!s(n)},{default:o(()=>[x("Analyze result")]),_:1},8,["modelValue","disabled"]),a(I,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=i=>y.value=i),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize-summary",disabled:!s(n)},{default:o(()=>[x("Visualize summary")]),_:1},8,["modelValue","disabled"]),a(I,{modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=i=>y.value=i),name:"bt-form-radios",button:"",class:"mx-1 flex-samesize-items",value:"visualize",disabled:!s(n)},{default:o(()=>[x("Visualize result")]),_:1},8,["modelValue","disabled"])]),re(r("small",{class:"text-end bt-running-label col-8 col-lg-3"},"Backtest running: "+C(s(e).activeBot.backtestStep)+" "+C(s(f)(s(e).activeBot.backtestProgress,2)),513),[[ie,s(e).activeBot.backtestRunning]])])]),r("div",ct,[r("div",{class:ee(`${d.value?"col-md-3":""} sticky-top sticky-offset me-3 d-flex flex-column`)},[y.value!=="visualize"?(c(),$(U,{key:0,class:"align-self-start","aria-label":"Close",size:"sm",onClick:l[5]||(l[5]=i=>d.value=!d.value)},{default:o(()=>[x(C(d.value?"<":">"),1)]),_:1})):R("",!0),a(ne,{name:"fade",mode:"in-out"},{default:o(()=>[y.value!=="visualize"&&d.value?(c(),$(Pe,{key:0,"backtest-history":s(e).activeBot.backtestHistory,"selected-backtest-result-key":s(e).activeBot.selectedBacktestResultKey,onSelectionChange:s(e).activeBot.setBacktestResultKey},null,8,["backtest-history","selected-backtest-result-key","onSelectionChange"])):R("",!0)]),_:1})],2),y.value=="historicResults"?(c(),B("div",dt,[a(Me)])):R("",!0),y.value=="run"?(c(),B("div",mt,[r("div",_t,[bt,a(ue,{modelValue:k.value,"onUpdate:modelValue":l[6]||(l[6]=i=>k.value=i)},null,8,["modelValue"])]),a(le,{disabled:s(e).activeBot.backtestRunning},{default:o(()=>[a(P,{"label-cols-lg":"2",label:"Backtest params","label-size":"sm","label-class":"fw-bold pt-0",class:"mb-0"},{default:o(()=>[a(P,{"label-cols-sm":"5",label:"Timeframe:","label-align-sm":"right","label-for":"timeframe-select"},{default:o(()=>[a(J,{id:"timeframe-select",modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=i=>g.value=i)},null,8,["modelValue"])]),_:1}),a(P,{"label-cols-sm":"5",label:"Detail Timeframe:","label-align-sm":"right","label-for":"timeframe-detail-select",title:"Detail timeframe, to simulate intra-candle results. Not setting this will not use this functionality."},{default:o(()=>[a(J,{id:"timeframe-detail-select",modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=i=>b.value=i),"below-timeframe":g.value},null,8,["modelValue","below-timeframe"])]),_:1}),a(P,{"label-cols-sm":"5",label:"Max open trades:","label-align-sm":"right","label-for":"max-open-trades"},{default:o(()=>[a(j,{id:"max-open-trades",modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=i=>V.value=i),placeholder:"Use strategy default",type:"number"},null,8,["modelValue"])]),_:1}),a(P,{"label-cols-sm":"5",label:"Starting capital:","label-align-sm":"right","label-for":"starting-capital"},{default:o(()=>[a(j,{id:"starting-capital",modelValue:S.value,"onUpdate:modelValue":l[10]||(l[10]=i=>S.value=i),type:"number",step:"0.001"},null,8,["modelValue"])]),_:1}),a(P,{"label-cols-sm":"5",label:"Stake amount:","label-align-sm":"right","label-for":"stake-amount"},{default:o(()=>[r("div",ft,[a(H,{id:"stake-amount-bool",modelValue:w.value,"onUpdate:modelValue":l[11]||(l[11]=i=>w.value=i),class:"col-md-6"},{default:o(()=>[x("Unlimited stake")]),_:1},8,["modelValue"]),a(j,{id:"stake-amount",modelValue:T.value,"onUpdate:modelValue":l[12]||(l[12]=i=>T.value=i),type:"number",placeholder:"Use strategy default",step:"0.01",disabled:w.value},null,8,["modelValue","disabled"])])]),_:1}),a(P,{"label-cols-sm":"5",label:"Enable Protections:","label-align-sm":"right","label-for":"enable-protections"},{default:o(()=>[a(H,{id:"enable-protections",modelValue:L.value,"onUpdate:modelValue":l[13]||(l[13]=i=>L.value=i)},null,8,["modelValue"])]),_:1}),s(e).activeBot.botApiVersion>=2.22?(c(),$(P,{key:0,"label-cols-sm":"5",label:"Cache Backtest results:","label-align-sm":"right","label-for":"enable-cache"},{default:o(()=>[a(H,{id:"enable-cache",modelValue:u.value,"onUpdate:modelValue":l[14]||(l[14]=i=>u.value=i)},null,8,["modelValue"])]),_:1})):R("",!0),s(e).activeBot.botApiVersion>=2.22?(c(),B(W,{key:1},[a(P,{"label-cols-sm":"5",label:"Enable FreqAI:","label-align-sm":"right","label-for":"enable-freqai"},{label:o(()=>[r("div",vt,[pt,a(pe,{hint:"Assumes freqAI configuration is setup in the configuration, and the strategy is a freqAI strategy. Will fail if that's not the case."})])]),default:o(()=>[a(H,{id:"enable-freqai",modelValue:m.value.enabled,"onUpdate:modelValue":l[15]||(l[15]=i=>m.value.enabled=i)},null,8,["modelValue"])]),_:1}),m.value.enabled?(c(),$(P,{key:0,"label-cols-sm":"5",label:"FreqAI identifier:","label-align-sm":"right","label-for":"freqai-identifier"},{default:o(()=>[a(j,{id:"freqai-identifier",modelValue:m.value.identifier,"onUpdate:modelValue":l[16]||(l[16]=i=>m.value.identifier=i),placeholder:"Use config default"},null,8,["modelValue"])]),_:1})):R("",!0),m.value.enabled?(c(),$(P,{key:1,"label-cols-sm":"5",label:"FreqAI Model","label-align-sm":"right","label-for":"freqai-model"},{default:o(()=>[a(Ie,{id:"freqai-model",modelValue:m.value.model,"onUpdate:modelValue":l[17]||(l[17]=i=>m.value.model=i)},null,8,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),kt,a(ce,{modelValue:_.value,"onUpdate:modelValue":l[18]||(l[18]=i=>_.value=i),class:"mt-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["disabled"]),gt,r("div",yt,[a(U,{id:"start-backtest",variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:se},{default:o(()=>[x(" Start backtest ")]),_:1},8,["disabled"]),a(U,{variant:"primary",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,class:"mx-1",onClick:s(e).activeBot.pollBacktest},{default:o(()=>[x(" Load backtest result ")]),_:1},8,["disabled","onClick"]),a(U,{variant:"primary",class:"mx-1",disabled:!s(e).activeBot.backtestRunning,onClick:s(e).activeBot.stopBacktest},{default:o(()=>[x("Stop Backtest")]),_:1},8,["disabled","onClick"]),a(U,{variant:"primary",class:"mx-1",disabled:s(e).activeBot.backtestRunning||!s(e).activeBot.canRunBacktest,onClick:s(e).activeBot.removeBacktest},{default:o(()=>[x("Reset Backtest")]),_:1},8,["disabled","onClick"])])])):R("",!0),s(n)&&y.value=="results"?(c(),$(Ve,{key:2,"backtest-result":s(e).activeBot.selectedBacktestResult,class:"flex-fill"},null,8,["backtest-result"])):R("",!0),s(n)&&y.value=="visualize-summary"?(c(),$(Oe,{key:3,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["trades"])):R("",!0)]),s(n)&&y.value=="visualize"?(c(),B("div",Rt,[a(at,{timeframe:s(p),strategy:k.value,timerange:_.value,pairlist:s(e).activeBot.selectedBacktestResult.pairlist,trades:s(e).activeBot.selectedBacktestResult.trades},null,8,["timeframe","strategy","timerange","pairlist","trades"])])):R("",!0)])}}});var qt=M(ht,[["__scopeId","data-v-2aceef93"]]);export{qt as default};
//# sourceMappingURL=Backtesting.e62fb10d.js.map
