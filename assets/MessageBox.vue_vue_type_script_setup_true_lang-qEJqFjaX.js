import{o as l,c as C,a as L,g as M,r as k,u as b,l as q,t as B,n as E,x as v,w as V,h as _,y as P,b as w,z as x,C as N,v as R,e as S,Q as O,H as T,V as K,W as z,Y as F,_ as H,E as $,R as U}from"./index-dzevJiyr.js";import{a as j,b as D}from"./InfoBox.vue_vue_type_script_setup_true_lang-vHk0tZVh.js";const I={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Q=L("path",{fill:"currentColor",d:"M12 17a2 2 0 0 0 2-2a2 2 0 0 0-2-2a2 2 0 0 0-2 2a2 2 0 0 0 2 2m6-9a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5a5 5 0 0 1 5 5v2zm-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3"},null,-1),W=[Q];function Y(p,i){return l(),C("svg",I,[...W])}const G={name:"mdi-lock",render:Y},J=["title"],X=M({__name:"PairSummary",props:{pairlist:{required:!0,type:Array},currentLocks:{required:!1,type:Array,default:()=>[]},trades:{required:!0,type:Array},sortMethod:{default:"normal",type:String},backtestMode:{required:!1,default:!1,type:Boolean}},setup(p){const i=k(""),a=p,f=b(),y=q(()=>{const c=[];return a.pairlist.forEach(e=>{const o=a.trades.filter(d=>d.pair===e),s=a.currentLocks.filter(d=>d.pair===e);let r="",u;s.sort((d,A)=>d.lock_end_timestamp>A.lock_end_timestamp?-1:1),s.length>0&&([u]=s,r=`${B(u.lock_end_timestamp)} - ${u.reason}`);let n="",m=0,h=0;o.forEach(d=>{m+=d.profit_ratio,h+=d.profit_abs??0});const t=o.length,g=t?o[0]:void 0;o.length>0&&(n=`Current profit: ${E(m)}`),g&&(n+=`
Open since: ${B(g.open_timestamp)}`),(i.value===""||e.toLocaleLowerCase().includes(i.value.toLocaleLowerCase()))&&c.push({pair:e,trade:g,locks:u,lockReason:r,profitString:n,profit:m,profitAbs:h,tradeCount:t})}),a.sortMethod==="profit"?c.sort((e,o)=>e.profit>o.profit?-1:1):c.sort((e,o)=>e.trade&&!o.trade?-1:e.trade&&o.trade?e.trade.trade_id>o.trade.trade_id?1:-1:!e.locks&&o.locks?-1:e.locks&&o.locks?e.locks.lock_end_timestamp>o.locks.lock_end_timestamp?1:-1:1),c});return(c,e)=>{const o=T,s=K,r=G,u=j,n=D,m=z,h=F;return l(),C("div",null,[p.backtestMode?(l(),v(s,{key:0,"label-for":"trade-filter",class:"mb-2 me-5"},{default:V(()=>[w(o,{id:"trade-filter",modelValue:_(i),"onUpdate:modelValue":e[0]||(e[0]=t=>P(i)?i.value=t:null),type:"text",placeholder:"Filter"},null,8,["modelValue"])]),_:1})):x("",!0),w(h,null,{default:V(()=>[(l(!0),C(N,null,O(_(y),t=>(l(),v(m,{key:t.pair,button:"",class:"d-flex justify-content-between align-items-center py-1",active:t.pair===_(f).activeBot.selectedPair,title:`${t.pair} - ${t.tradeCount} trades`,onClick:g=>_(f).activeBot.selectedPair=t.pair},{default:V(()=>[L("div",null,[S(R(t.pair)+" ",1),t.locks?(l(),C("span",{key:0,title:t.lockReason},[w(r)],8,J)):x("",!0)]),t.trade&&!p.backtestMode?(l(),v(u,{key:0,trade:t.trade},null,8,["trade"])):x("",!0),p.backtestMode&&t.tradeCount>0?(l(),v(n,{key:1,"profit-ratio":t.profit,"stake-currency":_(f).activeBot.stakeCurrency},null,8,["profit-ratio","stake-currency"])):x("",!0)]),_:2},1032,["active","title","onClick"]))),128))]),_:1})])}}}),te=H(X,[["__scopeId","data-v-83fc26a2"]]),oe=M({__name:"MessageBox",setup(p,{expose:i}){const a=k(!1),f=k(""),y=k(""),c=k(()=>{console.warn("Accepted not set.")}),e=()=>{c.value(),a.value=!1};return i({show:s=>{f.value=s.title,y.value=s.message,a.value=!0,c.value=s.accept}}),(s,r)=>{const u=U;return l(),v(u,{ref:"removeTradeModal",modelValue:_(a),"onUpdate:modelValue":r[0]||(r[0]=n=>P(a)?a.value=n:null),title:_(f),onOk:e,onCancel:r[1]||(r[1]=n=>a.value=!1),onKeyup:[r[2]||(r[2]=$(n=>a.value=!1,["esc"])),$(e,["enter"])]},{default:V(()=>[S(R(_(y)),1)]),_:1},8,["modelValue","title"])}}});export{oe as _,te as a};
//# sourceMappingURL=MessageBox.vue_vue_type_script_setup_true_lang-qEJqFjaX.js.map
