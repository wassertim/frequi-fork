import{g as sa,r as Re,a$ as xa,aL as Sa,l as K,z as je,x as j,h as R,aG as Ma,y as be,o as V,_ as Ta,c as oe,a as I,u as Aa,w as ge,b as he,v as De,m as wa,j as Ca,L as Pa,n as Da,b5 as ka,i as Ba}from"./index-20bfe6b3.js";import{bd as Ia,c5 as D,ce as He,Z as Ve,y as oa,F as Na,f as Fe,bx as Oa,P as $a,cf as Ze,cg as ke,ch as Ra,ci as Va,cj as ne,ck as Ea,B as We,a5 as Ke,bH as Ga,g as Be,Y as G,cl as Ya,ap as Ie,cm as za,cn as la,co as Xa,e as ie,cp as qa,bl as Ua,i as se,ak as Qe,b as _e,cq as ja,aq as Se,b9 as Ha,ab as Fa,h as Je,aU as ca,_ as Ee,a6 as Za,K as W,bq as de,O as Wa,Q as Ka,t as Qa,s as Ja,d as et,cr as at,bg as va,bp as tt,C as rt,q as ea,A as ua,cs as nt,ct as it,aL as st,S as ot,cu as lt,u as ct,a_ as vt,aW as ut,aX as ft,aY as gt,aZ as ht,a$ as dt}from"./installCanvasRenderer-3885c599.js";import{c as pt}from"./createSeriesDataSimply-7390802e.js";var re=Math.PI*2,U=Ia.CMD,mt=["top","right","bottom","left"];function yt(i,a,n,e,t){var o=n.width,r=n.height;switch(i){case"top":e.set(n.x+o/2,n.y-a),t.set(0,-1);break;case"bottom":e.set(n.x+o/2,n.y+r+a),t.set(0,1);break;case"left":e.set(n.x-a,n.y+r/2),t.set(-1,0);break;case"right":e.set(n.x+o+a,n.y+r/2),t.set(1,0);break}}function bt(i,a,n,e,t,o,r,l,v){r-=i,l-=a;var u=Math.sqrt(r*r+l*l);r/=u,l/=u;var s=r*n+i,f=l*n+a;if(Math.abs(e-t)%re<1e-4)return v[0]=s,v[1]=f,u-n;if(o){var h=e;e=ne(t),t=ne(h)}else e=ne(e),t=ne(t);e>t&&(t+=re);var c=Math.atan2(l,r);if(c<0&&(c+=re),c>=e&&c<=t||c+re>=e&&c+re<=t)return v[0]=s,v[1]=f,u-n;var g=n*Math.cos(e)+i,d=n*Math.sin(e)+a,p=n*Math.cos(t)+i,m=n*Math.sin(t)+a,y=(g-r)*(g-r)+(d-l)*(d-l),b=(p-r)*(p-r)+(m-l)*(m-l);return y<b?(v[0]=g,v[1]=d,Math.sqrt(y)):(v[0]=p,v[1]=m,Math.sqrt(b))}function Le(i,a,n,e,t,o,r,l){var v=t-i,u=o-a,s=n-i,f=e-a,h=Math.sqrt(s*s+f*f);s/=h,f/=h;var c=v*s+u*f,g=c/h;l&&(g=Math.min(Math.max(g,0),1)),g*=h;var d=r[0]=i+g*s,p=r[1]=a+g*f;return Math.sqrt((d-t)*(d-t)+(p-o)*(p-o))}function fa(i,a,n,e,t,o,r){n<0&&(i=i+n,n=-n),e<0&&(a=a+e,e=-e);var l=i+n,v=a+e,u=r[0]=Math.min(Math.max(t,i),l),s=r[1]=Math.min(Math.max(o,a),v);return Math.sqrt((u-t)*(u-t)+(s-o)*(s-o))}var E=[];function _t(i,a,n){var e=fa(a.x,a.y,a.width,a.height,i.x,i.y,E);return n.set(E[0],E[1]),e}function Lt(i,a,n){for(var e=0,t=0,o=0,r=0,l,v,u=1/0,s=a.data,f=i.x,h=i.y,c=0;c<s.length;){var g=s[c++];c===1&&(e=s[c],t=s[c+1],o=e,r=t);var d=u;switch(g){case U.M:o=s[c++],r=s[c++],e=o,t=r;break;case U.L:d=Le(e,t,s[c],s[c+1],f,h,E,!0),e=s[c++],t=s[c++];break;case U.C:d=Va(e,t,s[c++],s[c++],s[c++],s[c++],s[c],s[c+1],f,h,E),e=s[c++],t=s[c++];break;case U.Q:d=Ra(e,t,s[c++],s[c++],s[c],s[c+1],f,h,E),e=s[c++],t=s[c++];break;case U.A:var p=s[c++],m=s[c++],y=s[c++],b=s[c++],x=s[c++],S=s[c++];c+=1;var w=!!(1-s[c++]);l=Math.cos(x)*y+p,v=Math.sin(x)*b+m,c<=1&&(o=l,r=v);var T=(f-p)*b/y+p;d=bt(p,m,b,x,x+S,w,T,h,E),e=Math.cos(x+S)*y+p,t=Math.sin(x+S)*b+m;break;case U.R:o=e=s[c++],r=t=s[c++];var _=s[c++],M=s[c++];d=fa(o,r,_,M,f,h,E);break;case U.Z:d=Le(e,t,o,r,f,h,E,!0),e=o,t=r;break}d<u&&(u=d,n.set(E[0],E[1]))}return u}var Y=new D,L=new D,A=new D,X=new D,z=new D;function aa(i,a){if(i){var n=i.getTextGuideLine(),e=i.getTextContent();if(e&&n){var t=i.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],r=t.candidates||mt,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var v=1/0,u=t.anchor,s=i.getComputedTransform(),f=s&&Oa([],s),h=a.get("length2")||0;u&&A.copy(u);for(var c=0;c<r.length;c++){var g=r[c];yt(g,0,l,Y,X),D.scaleAndAdd(L,Y,X,h),L.transform(f);var d=i.getBoundingRect(),p=u?u.distance(L):i instanceof $a?Lt(L,i.path,A):_t(L,d,A);p<v&&(v=p,L.transform(s),A.transform(s),A.toArray(o[0]),L.toArray(o[1]),Y.toArray(o[2]))}ga(o,a.get("minTurnAngle")),n.setShape({points:o})}}}var xe=[],B=new D;function ga(i,a){if(a<=180&&a>0){a=a/180*Math.PI,Y.fromArray(i[0]),L.fromArray(i[1]),A.fromArray(i[2]),D.sub(X,Y,L),D.sub(z,A,L);var n=X.len(),e=z.len();if(!(n<.001||e<.001)){X.scale(1/n),z.scale(1/e);var t=X.dot(z),o=Math.cos(a);if(o<t){var r=Le(L.x,L.y,A.x,A.y,Y.x,Y.y,xe,!1);B.fromArray(xe),B.scaleAndAdd(z,r/Math.tan(Math.PI-a));var l=A.x!==L.x?(B.x-L.x)/(A.x-L.x):(B.y-L.y)/(A.y-L.y);if(isNaN(l))return;l<0?D.copy(B,L):l>1&&D.copy(B,A),B.toArray(i[1])}}}}function xt(i,a,n){if(n<=180&&n>0){n=n/180*Math.PI,Y.fromArray(i[0]),L.fromArray(i[1]),A.fromArray(i[2]),D.sub(X,L,Y),D.sub(z,A,L);var e=X.len(),t=z.len();if(!(e<.001||t<.001)){X.scale(1/e),z.scale(1/t);var o=X.dot(a),r=Math.cos(n);if(o<r){var l=Le(L.x,L.y,A.x,A.y,Y.x,Y.y,xe,!1);B.fromArray(xe);var v=Math.PI/2,u=Math.acos(z.dot(a)),s=v+u-n;if(s>=v)D.copy(B,A);else{B.scaleAndAdd(z,l/Math.tan(Math.PI/2-s));var f=A.x!==L.x?(B.x-L.x)/(A.x-L.x):(B.y-L.y)/(A.y-L.y);if(isNaN(f))return;f<0?D.copy(B,L):f>1&&D.copy(B,A)}B.toArray(i[1])}}}}function ta(i,a,n,e){var t=n==="normal",o=t?i:i.ensureState(n);o.ignore=a;var r=e.get("smooth");r&&r===!0&&(r=.3),o.shape=o.shape||{},r>0&&(o.shape.smooth=r);var l=e.getModel("lineStyle").getLineStyle();t?i.useStyle(l):o.style=l}function St(i,a){var n=a.smooth,e=a.points;if(e)if(i.moveTo(e[0][0],e[0][1]),n>0&&e.length>=3){var t=Ze(e[0],e[1]),o=Ze(e[1],e[2]);if(!t||!o){i.lineTo(e[1][0],e[1][1]),i.lineTo(e[2][0],e[2][1]);return}var r=Math.min(t,o)*n,l=ke([],e[1],e[0],r/t),v=ke([],e[1],e[2],r/o),u=ke([],l,v,.5);i.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),i.bezierCurveTo(v[0],v[1],v[0],v[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)i.lineTo(e[s][0],e[s][1])}function ha(i,a,n){var e=i.getTextGuideLine(),t=i.getTextContent();if(!t){e&&i.removeTextGuideLine();return}for(var o=a.normal,r=o.get("show"),l=t.ignore,v=0;v<He.length;v++){var u=He[v],s=a[u],f=u==="normal";if(s){var h=s.get("show"),c=f?l:Ve(t.states[u]&&t.states[u].ignore,l);if(c||!Ve(h,r)){var g=f?e:e&&e.states[u];g&&(g.ignore=!0);continue}e||(e=new oa,i.setTextGuideLine(e),!f&&(l||!r)&&ta(e,!0,"normal",a.normal),i.stateProxy&&(e.stateProxy=i.stateProxy)),ta(e,!1,u,s)}}if(e){Na(e.style,n),e.style.fill=null;var d=o.get("showAbove"),p=i.textGuideLineConfig=i.textGuideLineConfig||{};p.showAbove=d||!1,e.buildPath=St}}function da(i,a){a=a||"labelLine";for(var n={normal:i.getModel(a)},e=0;e<Fe.length;e++){var t=Fe[e];n[t]=i.getModel([t,a])}return n}function Mt(i){if(i){for(var a=[],n=0;n<i.length;n++)a.push(i[n].slice());return a}}function Tt(i,a){var n=i.label,e=a&&a.getTextGuideLine();return{dataIndex:i.dataIndex,dataType:i.dataType,seriesIndex:i.seriesModel.seriesIndex,text:i.label.style.text,rect:i.hostRect,labelRect:i.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Mt(e&&e.shape.points)}}var ra=["align","verticalAlign","width","height","fontSize"],k=new Ea,Ne=Se(),At=Se();function pe(i,a,n){for(var e=0;e<n.length;e++){var t=n[e];a[t]!=null&&(i[t]=a[t])}}var me=["x","y","rotation"],wt=function(){function i(){this._labelList=[],this._chartViewList=[]}return i.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},i.prototype._addLabel=function(a,n,e,t,o){var r=t.style,l=t.__hostTarget,v=l.textConfig||{},u=t.getComputedTransform(),s=t.getBoundingRect().plain();We.applyTransform(s,s,u),u?k.setLocalTransform(u):(k.x=k.y=k.rotation=k.originX=k.originY=0,k.scaleX=k.scaleY=1),k.rotation=ne(k.rotation);var f=t.__hostTarget,h;if(f){h=f.getBoundingRect().plain();var c=f.getComputedTransform();We.applyTransform(h,h,c)}var g=h&&f.getTextGuideLine();this._labelList.push({label:t,labelLine:g,seriesModel:e,dataIndex:a,dataType:n,layoutOption:o,computedLayoutOption:null,rect:s,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:t.ignore,labelGuideIgnore:g&&g.ignore,x:k.x,y:k.y,scaleX:k.scaleX,scaleY:k.scaleY,rotation:k.rotation,style:{x:r.x,y:r.y,align:r.align,verticalAlign:r.verticalAlign,width:r.width,height:r.height,fontSize:r.fontSize},cursor:t.cursor,attachedPos:v.position,attachedRot:v.rotation}})},i.prototype.addLabelsOfSeries=function(a){var n=this;this._chartViewList.push(a);var e=a.__model,t=e.get("labelLayout");(Ke(t)||Ga(t).length)&&a.group.traverse(function(o){if(o.ignore)return!0;var r=o.getTextContent(),l=Be(o);r&&!r.disableLabelLayout&&n._addLabel(l.dataIndex,l.dataType,e,r,t)})},i.prototype.updateLayoutConfig=function(a){var n=a.getWidth(),e=a.getHeight();function t(b,x){return function(){aa(b,x)}}for(var o=0;o<this._labelList.length;o++){var r=this._labelList[o],l=r.label,v=l.__hostTarget,u=r.defaultAttr,s=void 0;Ke(r.layoutOption)?s=r.layoutOption(Tt(r,v)):s=r.layoutOption,s=s||{},r.computedLayoutOption=s;var f=Math.PI/180;v&&v.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:u.attachedPos,rotation:s.rotate!=null?s.rotate*f:u.attachedRot,offset:[s.dx||0,s.dy||0]});var h=!1;if(s.x!=null?(l.x=G(s.x,n),l.setStyle("x",0),h=!0):(l.x=u.x,l.setStyle("x",u.style.x)),s.y!=null?(l.y=G(s.y,e),l.setStyle("y",0),h=!0):(l.y=u.y,l.setStyle("y",u.style.y)),s.labelLinePoints){var c=v.getTextGuideLine();c&&(c.setShape({points:s.labelLinePoints}),h=!1)}var g=Ne(l);g.needsUpdateLabelLine=h,l.rotation=s.rotate!=null?s.rotate*f:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var d=0;d<ra.length;d++){var p=ra[d];l.setStyle(p,s[p]!=null?s[p]:u.style[p])}if(s.draggable){if(l.draggable=!0,l.cursor="move",v){var m=r.seriesModel;if(r.dataIndex!=null){var y=r.seriesModel.getData(r.dataType);m=y.getItemModel(r.dataIndex)}l.on("drag",t(v,m.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},i.prototype.layout=function(a){var n=a.getWidth(),e=a.getHeight(),t=Ya(this._labelList),o=Ie(t,function(v){return v.layoutOption.moveOverlap==="shiftX"}),r=Ie(t,function(v){return v.layoutOption.moveOverlap==="shiftY"});za(o,0,n),la(r,0,e);var l=Ie(t,function(v){return v.layoutOption.hideOverlap});Xa(l)},i.prototype.processLabelsOverall=function(){var a=this;ie(this._chartViewList,function(n){var e=n.__model,t=n.ignoreLabelLineUpdate,o=e.isAnimationEnabled();n.group.traverse(function(r){if(r.ignore&&!r.forceLabelAnimation)return!0;var l=!t,v=r.getTextContent();!l&&v&&(l=Ne(v).needsUpdateLabelLine),l&&a._updateLabelLine(r,e),o&&a._animateLabels(r,e)})})},i.prototype._updateLabelLine=function(a,n){var e=a.getTextContent(),t=Be(a),o=t.dataIndex;if(e&&o!=null){var r=n.getData(t.dataType),l=r.getItemModel(o),v={},u=r.getItemVisual(o,"style");if(u){var s=r.getVisual("drawType");v.stroke=u[s]}var f=l.getModel("labelLine");ha(a,da(l),v),aa(a,f)}},i.prototype._animateLabels=function(a,n){var e=a.getTextContent(),t=a.getTextGuideLine();if(e&&(a.forceLabelAnimation||!e.ignore&&!e.invisible&&!a.disableLabelAnimation&&!qa(a))){var o=Ne(e),r=o.oldLayout,l=Be(a),v=l.dataIndex,u={x:e.x,y:e.y,rotation:e.rotation},s=n.getData(l.dataType);if(r){e.attr(r);var h=a.prevStates;h&&(Qe(h,"select")>=0&&e.attr(o.oldLayoutSelect),Qe(h,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),_e(e,u,n,v)}else if(e.attr(u),!Ua(e).valueAnimation){var f=Ve(e.style.opacity,1);e.style.opacity=0,se(e,{style:{opacity:f}},n,v)}if(o.oldLayout=u,e.states.select){var c=o.oldLayoutSelect={};pe(c,u,me),pe(c,e.states.select,me)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};pe(g,u,me),pe(g,e.states.emphasis,me)}ja(e,v,s,n,n)}if(t&&!t.ignore&&!t.invisible){var o=At(t),r=o.oldLayout,d={points:t.shape.points};r?(t.attr({shape:r}),_e(t,{shape:d},n)):(t.setShape(d),t.style.strokePercent=0,se(t,{style:{strokePercent:1}},n)),o.oldLayout=d}},i}();const Ct=wt;var Oe=Se();function Pt(i){i.registerUpdateLifecycle("series:beforeupdate",function(a,n,e){var t=Oe(n).labelManager;t||(t=Oe(n).labelManager=new Ct),t.clearLabels()}),i.registerUpdateLifecycle("series:layoutlabels",function(a,n,e){var t=Oe(n).labelManager;e.updatedSeries.forEach(function(o){t.addLabelsOfSeries(n.getViewOfSeriesModel(o))}),t.updateLayoutConfig(n),t.layout(n),t.processLabelsOverall()})}var ye=Math.PI*2,na=Math.PI/180;function pa(i,a){return Fa(i.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function ma(i,a){var n=pa(i,a),e=i.get("center"),t=i.get("radius");Je(t)||(t=[0,t]);var o=G(n.width,a.getWidth()),r=G(n.height,a.getHeight()),l=Math.min(o,r),v=G(t[0],l/2),u=G(t[1],l/2),s,f,h=i.coordinateSystem;if(h){var c=h.dataToPoint(e);s=c[0]||0,f=c[1]||0}else Je(e)||(e=[e,e]),s=G(e[0],o)+n.x,f=G(e[1],r)+n.y;return{cx:s,cy:f,r0:v,r:u}}function Dt(i,a,n){a.eachSeriesByType(i,function(e){var t=e.getData(),o=t.mapDimension("value"),r=pa(e,n),l=ma(e,n),v=l.cx,u=l.cy,s=l.r,f=l.r0,h=-e.get("startAngle")*na,c=e.get("minAngle")*na,g=0;t.each(o,function(P){!isNaN(P)&&g++});var d=t.getSum(o),p=Math.PI/(d||g)*2,m=e.get("clockwise"),y=e.get("roseType"),b=e.get("stillShowZeroSum"),x=t.getDataExtent(o);x[0]=0;var S=ye,w=0,T=h,_=m?1:-1;if(t.setLayout({viewRect:r,r:s}),t.each(o,function(P,O){var C;if(isNaN(P)){t.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:v,cy:u,r0:f,r:y?NaN:s});return}y!=="area"?C=d===0&&b?p:P*p:C=ye/g,C<c?(C=c,S-=c):w+=P;var N=T+_*C;t.setItemLayout(O,{angle:C,startAngle:T,endAngle:N,clockwise:m,cx:v,cy:u,r0:f,r:y?Ha(P,x,[f,s]):s}),T=N}),S<ye&&g)if(S<=.001){var M=ye/g;t.each(o,function(P,O){if(!isNaN(P)){var C=t.getItemLayout(O);C.angle=M,C.startAngle=h+_*O*M,C.endAngle=h+_*(O+1)*M}})}else p=S/w,T=h,t.each(o,function(P,O){if(!isNaN(P)){var C=t.getItemLayout(O),N=C.angle===c?c:P*p;C.startAngle=T,C.endAngle=T+_*N,T+=_*N}})})}function kt(i){return{seriesType:i,reset:function(a,n){var e=n.findComponents({mainType:"legend"});if(!(!e||!e.length)){var t=a.getData();t.filterSelf(function(o){for(var r=t.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(r))return!1;return!0})}}}}var Bt=Math.PI/180;function ia(i,a,n,e,t,o,r,l,v,u){if(i.length<2)return;function s(d){for(var p=d.rB,m=p*p,y=0;y<d.list.length;y++){var b=d.list[y],x=Math.abs(b.label.y-n),S=e+b.len,w=S*S,T=Math.sqrt((1-Math.abs(x*x/m))*w),_=a+(T+b.len2)*t,M=_-b.label.x,P=b.targetTextWidth-M*t;ya(b,P,!0),b.label.x=_}}function f(d){for(var p={list:[],maxY:0},m={list:[],maxY:0},y=0;y<d.length;y++)if(d[y].labelAlignTo==="none"){var b=d[y],x=b.label.y>n?m:p,S=Math.abs(b.label.y-n);if(S>=x.maxY){var w=b.label.x-a-b.len2*t,T=e+b.len,_=Math.abs(w)<T?Math.sqrt(S*S/(1-w*w/T/T)):T;x.rB=_,x.maxY=S}x.list.push(b)}s(p),s(m)}for(var h=i.length,c=0;c<h;c++)if(i[c].position==="outer"&&i[c].labelAlignTo==="labelLine"){var g=i[c].label.x-u;i[c].linePoints[1][0]+=g,i[c].label.x=u}la(i,v,v+r)&&f(i)}function It(i,a,n,e,t,o,r,l){for(var v=[],u=[],s=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<i.length;h++){var c=i[h].label;$e(i[h])||(c.x<a?(s=Math.min(s,c.x),v.push(i[h])):(f=Math.max(f,c.x),u.push(i[h])))}for(var h=0;h<i.length;h++){var g=i[h];if(!$e(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var c=g.label,d=g.linePoints,p=void 0;g.labelAlignTo==="edge"?c.x<a?p=d[2][0]-g.labelDistance-r-g.edgeDistance:p=r+t-g.edgeDistance-d[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?c.x<a?p=s-r-g.bleedMargin:p=r+t-f-g.bleedMargin:c.x<a?p=c.x-r-g.bleedMargin:p=r+t-c.x-g.bleedMargin,g.targetTextWidth=p,ya(g,p)}}ia(u,a,n,e,1,t,o,r,l,f),ia(v,a,n,e,-1,t,o,r,l,s);for(var h=0;h<i.length;h++){var g=i[h];if(!$e(g)&&g.linePoints){var c=g.label,d=g.linePoints,m=g.labelAlignTo==="edge",y=c.style.padding,b=y?y[1]+y[3]:0,x=c.style.backgroundColor?0:b,S=g.rect.width+x,w=d[1][0]-d[2][0];m?c.x<a?d[2][0]=r+g.edgeDistance+S+g.labelDistance:d[2][0]=r+t-g.edgeDistance-S-g.labelDistance:(c.x<a?d[2][0]=c.x+g.labelDistance:d[2][0]=c.x-g.labelDistance,d[1][0]=d[2][0]+w),d[1][1]=d[2][1]=c.y}}}function ya(i,a,n){if(n===void 0&&(n=!1),i.labelStyleWidth==null){var e=i.label,t=e.style,o=i.rect,r=t.backgroundColor,l=t.padding,v=l?l[1]+l[3]:0,u=t.overflow,s=o.width+(r?0:v);if(a<s||n){var f=o.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-v);var h=e.getBoundingRect();e.setStyle("width",Math.ceil(h.width)),e.setStyle("backgroundColor",r)}else{var c=a-v,g=a<s?c:n?c>i.unconstrainedWidth?null:c:null;e.setStyle("width",g)}var d=e.getBoundingRect();o.width=d.width;var p=(e.style.margin||0)+2.1;o.height=d.height+p,o.y-=(o.height-f)/2}}}function $e(i){return i.position==="center"}function Nt(i){var a=i.getData(),n=[],e,t,o=!1,r=(i.get("minShowLabelAngle")||0)*Bt,l=a.getLayout("viewRect"),v=a.getLayout("r"),u=l.width,s=l.x,f=l.y,h=l.height;function c(w){w.ignore=!0}function g(w){if(!w.ignore)return!0;for(var T in w.states)if(w.states[T].ignore===!1)return!0;return!1}a.each(function(w){var T=a.getItemGraphicEl(w),_=T.shape,M=T.getTextContent(),P=T.getTextGuideLine(),O=a.getItemModel(w),C=O.getModel("label"),N=C.get("position")||O.get(["emphasis","label","position"]),Me=C.get("distanceToLabelLine"),Te=C.get("alignTo"),Ae=G(C.get("edgeDistance"),u),ba=C.get("bleedMargin"),le=O.getModel("labelLine"),Q=le.get("length");Q=G(Q,u);var ce=le.get("length2");if(ce=G(ce,u),Math.abs(_.endAngle-_.startAngle)<r){ie(M.states,c),M.ignore=!0,P&&(ie(P.states,c),P.ignore=!0);return}if(g(M)){var ve=(_.startAngle+_.endAngle)/2,$=Math.cos(ve),q=Math.sin(ve),J,ue,Ge,fe;e=_.cx,t=_.cy;var H=N==="inside"||N==="inner";if(N==="center")J=_.cx,ue=_.cy,fe="center";else{var we=(H?(_.r+_.r0)/2*$:_.r*$)+e,Ce=(H?(_.r+_.r0)/2*q:_.r*q)+t;if(J=we+$*3,ue=Ce+q*3,!H){var Ye=we+$*(Q+v-_.r),ze=Ce+q*(Q+v-_.r),Xe=Ye+($<0?-1:1)*ce,qe=ze;Te==="edge"?J=$<0?s+Ae:s+u-Ae:J=Xe+($<0?-Me:Me),ue=qe,Ge=[[we,Ce],[Ye,ze],[Xe,qe]]}fe=H?"center":Te==="edge"?$>0?"right":"left":$>0?"left":"right"}var ee=Math.PI,F=0,ae=C.get("rotate");if(ca(ae))F=ae*(ee/180);else if(N==="center")F=0;else if(ae==="radial"||ae===!0){var _a=$<0?-ve+ee:-ve;F=_a}else if(ae==="tangential"&&N!=="outside"&&N!=="outer"){var Z=Math.atan2($,q);Z<0&&(Z=ee*2+Z);var La=q>0;La&&(Z=ee+Z),F=Z-ee}if(o=!!F,M.x=J,M.y=ue,M.rotation=F,M.setStyle({verticalAlign:"middle"}),H){M.setStyle({align:fe});var Pe=M.states.select;Pe&&(Pe.x+=M.x,Pe.y+=M.y)}else{var te=M.getBoundingRect().clone();te.applyTransform(M.getComputedTransform());var Ue=(M.style.margin||0)+2.1;te.y-=Ue/2,te.height+=Ue,n.push({label:M,labelLine:P,position:N,len:Q,len2:ce,minTurnAngle:le.get("minTurnAngle"),maxSurfaceAngle:le.get("maxSurfaceAngle"),surfaceNormal:new D($,q),linePoints:Ge,textAlign:fe,labelDistance:Me,labelAlignTo:Te,edgeDistance:Ae,bleedMargin:ba,rect:te,unconstrainedWidth:te.width,labelStyleWidth:M.style.width})}T.setTextConfig({inside:H})}}),!o&&i.get("avoidLabelOverlap")&&It(n,e,t,v,u,h,s,f);for(var d=0;d<n.length;d++){var p=n[d],m=p.label,y=p.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),b&&(ie(m.states,c),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var S=p.linePoints;b||!S?(ie(y.states,c),y.ignore=!0):(ga(S,p.minTurnAngle),xt(S,p.surfaceNormal,p.maxSurfaceAngle),y.setShape({points:S}),m.__hostTarget.textGuideLineConfig={anchor:new D(S[0][0],S[0][1])})}}}var Ot=function(i){Ee(a,i);function a(n,e,t){var o=i.call(this)||this;o.z2=2;var r=new Za;return o.setTextContent(r),o.updateData(n,e,t,!0),o}return a.prototype.updateData=function(n,e,t,o){var r=this,l=n.hostModel,v=n.getItemModel(e),u=v.getModel("emphasis"),s=n.getItemLayout(e),f=W(de(v.getModel("itemStyle"),s,!0),s);if(isNaN(f.startAngle)){r.setShape(f);return}if(o){r.setShape(f);var h=l.getShallow("animationType");l.ecModel.ssr?(se(r,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),r.originX=f.cx,r.originY=f.cy):h==="scale"?(r.shape.r=s.r0,se(r,{shape:{r:s.r}},l,e)):t!=null?(r.setShape({startAngle:t,endAngle:t}),se(r,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(r.shape.endAngle=s.startAngle,_e(r,{shape:{endAngle:s.endAngle}},l,e))}else Wa(r),_e(r,{shape:f},l,e);r.useStyle(n.getItemVisual(e,"style")),Ka(r,v);var c=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),d=Math.cos(c)*g,p=Math.sin(c)*g,m=v.getShallow("cursor");m&&r.attr("cursor",m),this._updateLabel(l,n,e),r.ensureState("emphasis").shape=W({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},de(u.getModel("itemStyle"),s)),W(r.ensureState("select"),{x:d,y:p,shape:de(v.getModel(["select","itemStyle"]),s)}),W(r.ensureState("blur"),{shape:de(v.getModel(["blur","itemStyle"]),s)});var y=r.getTextGuideLine(),b=r.getTextContent();y&&W(y.ensureState("select"),{x:d,y:p}),W(b.ensureState("select"),{x:d,y:p}),Qa(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},a.prototype._updateLabel=function(n,e,t){var o=this,r=e.getItemModel(t),l=r.getModel("labelLine"),v=e.getItemVisual(t,"style"),u=v&&v.fill,s=v&&v.opacity;Ja(o,et(r),{labelFetcher:e.hostModel,labelDataIndex:t,inheritColor:u,defaultOpacity:s,defaultText:n.getFormattedLabel(t,"normal")||e.getName(t)});var f=o.getTextContent();o.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=n.get(["label","position"]);if(h!=="outside"&&h!=="outer")o.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new oa,this.setTextGuideLine(c)),ha(this,da(r),{stroke:u,opacity:at(l.get(["lineStyle","opacity"]),s,1)})}},a}(va),$t=function(i){Ee(a,i);function a(){var n=i!==null&&i.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return a.prototype.render=function(n,e,t,o){var r=n.getData(),l=this._data,v=this.group,u;if(!l&&r.count()>0){for(var s=r.getItemLayout(0),f=1;isNaN(s&&s.startAngle)&&f<r.count();++f)s=r.getItemLayout(f);s&&(u=s.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),r.count()===0&&n.get("showEmptyCircle")){var h=new va({shape:ma(n,t)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,v.add(h)}r.diff(l).add(function(c){var g=new Ot(r,c,u);r.setItemGraphicEl(c,g),v.add(g)}).update(function(c,g){var d=l.getItemGraphicEl(g);d.updateData(r,c,u),d.off("click"),v.add(d),r.setItemGraphicEl(c,d)}).remove(function(c){var g=l.getItemGraphicEl(c);tt(g,n,c)}).execute(),Nt(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=r)},a.prototype.dispose=function(){},a.prototype.containPoint=function(n,e){var t=e.getData(),o=t.getItemLayout(0);if(o){var r=n[0]-o.cx,l=n[1]-o.cy,v=Math.sqrt(r*r+l*l);return v<=o.r&&v>=o.r0}},a.type="pie",a}(rt);const Rt=$t;var Vt=function(){function i(a,n){this._getDataWithEncodedVisual=a,this._getRawData=n}return i.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},i.prototype.containName=function(a){var n=this._getRawData();return n.indexOfName(a)>=0},i.prototype.indexOfName=function(a){var n=this._getDataWithEncodedVisual();return n.indexOfName(a)},i.prototype.getItemVisual=function(a,n){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,n)},i}();const Et=Vt;var Gt=Se(),Yt=function(i){Ee(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.init=function(n){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new Et(ea(this.getData,this),ea(this.getRawData,this)),this._defaultLabelLine(n)},a.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return pt(this,{coordDimensions:["value"],encodeDefaulter:ua(nt,this)})},a.prototype.getDataParams=function(n){var e=this.getData(),t=Gt(e),o=t.seats;if(!o){var r=[];e.each(e.mapDimension("value"),function(v){r.push(v)}),o=t.seats=it(r,e.hostModel.get("percentPrecision"))}var l=i.prototype.getDataParams.call(this,n);return l.percent=o[n]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(n){st(n,"labelLine",["show"]);var e=n.labelLine,t=n.emphasis.labelLine;e.show=e.show&&n.label.show,t.show=t.show&&n.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(ot);const zt=Yt;function Xt(i){return{seriesType:i,reset:function(a,n){var e=a.getData();e.filterSelf(function(t){var o=e.mapDimension("value"),r=e.get(o,t);return!(ca(r)&&!isNaN(r)&&r<0)})}}}function qt(i){i.registerChartView(Rt),i.registerSeriesModel(zt),lt("pie",i.registerAction),i.registerLayout(ua(Dt,"pie")),i.registerProcessor(kt("pie")),i.registerProcessor(Xt("pie"))}const Ut=sa({__name:"BalanceChart",props:{currencies:{required:!0,type:Array},showTitle:{required:!1,type:Boolean}},setup(i){ct([qt,vt,ut,ft,gt,ht,Pt]);const a=Re(null),{width:n}=xa(a),e=i,t=Sa(),o=K(()=>({title:{text:"Balance",show:e.showTitle},center:["50%","50%"],backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["balance","currency","est_stake","free","used","stake"],source:e.currencies},tooltip:{trigger:"item",formatter:r=>`${je(r.value.balance,r.value.currency,8)}<br />${r.percent}% (${je(r.value.est_stake,r.value.stake)})`},series:[{type:"pie",radius:["40%","70%"],encode:{value:"est_stake",itemName:"currency",tooltip:["balance","currency"]},label:{formatter:"{b} - {d}%"},tooltip:{show:!0}}]}));return(r,l)=>i.currencies?(V(),j(R(dt),{key:0,ref_key:"balanceChart",ref:a,option:o.value,theme:R(t).chartTheme,style:Ma({height:R(n)*.6+"px"}),autoresize:""},null,8,["option","theme","style"])):be("",!0)}});const jt=Ta(Ut,[["__scopeId","data-v-3fb6f435"]]),Ht={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ft=I("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"},null,-1),Zt=[Ft];function Wt(i,a){return V(),oe("svg",Ht,[...Zt])}const Kt={name:"mdi-eye",render:Wt},Qt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Jt=I("path",{fill:"currentColor",d:"M11.83 9L15 12.16V12a3 3 0 0 0-3-3h-.17m-4.3.8l1.55 1.55c-.05.21-.08.42-.08.65a3 3 0 0 0 3 3c.22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53a5 5 0 0 1-5-5c0-.79.2-1.53.53-2.2M2 4.27l2.28 2.28l.45.45C3.08 8.3 1.78 10 1 12c1.73 4.39 6 7.5 11 7.5c1.55 0 3.03-.3 4.38-.84l.43.42L19.73 22L21 20.73L3.27 3M12 7a5 5 0 0 1 5 5c0 .64-.13 1.26-.36 1.82l2.93 2.93c1.5-1.25 2.7-2.89 3.43-4.75c-1.73-4.39-6-7.5-11-7.5c-1.4 0-2.74.25-4 .7l2.17 2.15C10.74 7.13 11.35 7 12 7Z"},null,-1),er=[Jt];function ar(i,a){return V(),oe("svg",Qt,[...er])}const tr={name:"mdi-eye-off",render:ar},rr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},nr=I("path",{fill:"currentColor",d:"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5Z"},null,-1),ir=[nr];function sr(i,a){return V(),oe("svg",rr,[...ir])}const or={name:"mdi-robot",render:sr},lr={class:"mb-2"},cr=I("label",{class:"me-auto h3"},"Balance",-1),vr={class:"float-end d-flex flex-row"},ur={key:0},fr=I("td",{class:"pt-1"},[I("strong",null,"Total")],-1),gr={class:"pt-1"},hr=["title"],dr={class:"pt-1"},br=sa({__name:"BotBalance",setup(i){const a=Aa(),n=Re(!0),e=Re(!0),t=K(()=>Number((1.1**a.activeBot.stakeCurrencyDecimals).toFixed(8))),o=K(()=>a.activeBot.botApiVersion>=2.26),r=K(()=>{var s;return(s=a.activeBot.balance.currencies)==null?void 0:s.filter(f=>(!n.value||f.est_stake>=t.value)&&(!o.value||!e.value||(f.is_bot_managed??!0)===!0))}),l=s=>s?wa(s,a.activeBot.stakeCurrencyDecimals):"",v=K(()=>{var s;return(s=r.value)==null?void 0:s.map(f=>({balance:e.value&&o.value&&f.bot_owned!=null?f.bot_owned:f.balance,currency:f.currency,est_stake:e.value&&o.value?f.est_stake_bot??f.est_stake:f.est_stake,free:e.value&&o.value?f.bot_owned??f.free:f.free,used:f.used,stake:f.stake}))}),u=K(()=>[{key:"currency",label:"Currency"},{key:e.value&&o.value?"bot_owned":"free",label:"Available",formatter:l},{key:e.value&&o.value?"est_stake_bot":"est_stake",label:`in ${a.activeBot.balance.stake}`,formatter:l}]);return(s,f)=>{const h=or,c=ka,g=Ca,d=tr,p=Kt,m=Ba,y=jt,b=Pa;return V(),oe("div",null,[I("div",lr,[cr,I("div",vr,[o.value?(V(),j(g,{key:0,size:"sm",title:e.value?"Showing Bot balance":"Showing Account balance",onClick:f[0]||(f[0]=x=>e.value=!e.value)},{default:ge(()=>[e.value?(V(),j(h,{key:0})):(V(),j(c,{key:1}))]),_:1},8,["title"])):be("",!0),he(g,{size:"sm",title:n.value?"Show all balances":"Hide small balances",onClick:f[1]||(f[1]=x=>n.value=!n.value)},{default:ge(()=>[n.value?(V(),j(d,{key:0})):(V(),j(p,{key:1}))]),_:1},8,["title"]),he(g,{class:"float-end",size:"sm",onClick:R(a).activeBot.getBalance},{default:ge(()=>[he(m)]),_:1},8,["onClick"])])]),r.value?(V(),j(y,{key:0,currencies:v.value},null,8,["currencies"])):be("",!0),I("div",null,[R(a).activeBot.balance.note?(V(),oe("p",ur,[I("strong",null,De(R(a).activeBot.balance.note),1)])):be("",!0),he(b,{class:"table-sm",items:r.value,fields:u.value},{"custom-foot":ge(()=>[fr,I("td",gr,[I("span",{class:"font-italic",title:`Increase over initial capital of ${l(R(a).activeBot.balance.starting_capital)} ${R(a).activeBot.balance.stake}`},De(R(Da)(R(a).activeBot.balance.starting_capital_ratio)),9,hr)]),I("td",dr,[I("strong",null,De(e.value&&o.value?l(R(a).activeBot.balance.total_bot):l(R(a).activeBot.balance.total)),1)])]),_:1},8,["items","fields"])])])}}});export{br as _};
//# sourceMappingURL=BotBalance.vue_vue_type_script_setup_true_lang-7e86bb80.js.map
