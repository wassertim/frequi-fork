{"version":3,"file":"CandleChartContainer-0b97f2f4.js","sources":["../../src/types/plot.ts","../../node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../../node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../../node_modules/echarts/lib/chart/scatter/ScatterView.js","../../node_modules/echarts/lib/chart/scatter/install.js","../../node_modules/echarts/lib/component/helper/cursorHelper.js","../../node_modules/echarts/lib/component/helper/BrushController.js","../../node_modules/echarts/lib/component/helper/brushHelper.js","../../node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../../node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../../node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../../node_modules/echarts/lib/chart/candlestick/preprocessor.js","../../node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../../node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../../node_modules/echarts/lib/chart/candlestick/install.js","../../node_modules/echarts/lib/coord/calendar/CalendarModel.js","../../node_modules/echarts/lib/component/calendar/CalendarView.js","../../node_modules/echarts/lib/coord/calendar/Calendar.js","../../node_modules/echarts/lib/component/calendar/install.js","../../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../node_modules/echarts/lib/component/toolbox/featureManager.js","../../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../node_modules/echarts/lib/component/dataZoom/history.js","../../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../node_modules/echarts/lib/component/toolbox/install.js","../../node_modules/echarts/lib/component/timeline/TimelineModel.js","../../node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","../../node_modules/echarts/lib/component/timeline/TimelineView.js","../../node_modules/echarts/lib/component/timeline/TimelineAxis.js","../../node_modules/echarts/lib/component/timeline/SliderTimelineView.js","../../node_modules/echarts/lib/component/timeline/timelineAction.js","../../node_modules/echarts/lib/component/timeline/preprocessor.js","../../node_modules/echarts/lib/component/timeline/install.js","../../src/shared/randomColor.ts","../../src/shared/heikinashi.ts","../../src/shared/timemath.ts","../../src/shared/charts/tradeChartData.ts","../../src/components/charts/CandleChart.vue","../../src/shared/storage.ts","../../node_modules/vue-material-design-icons/CloseCircleOutline.vue","../../src/components/charts/PlotIndicator.vue","../../src/stores/plotConfig.ts","../../src/components/charts/PlotConfigurator.vue","../../node_modules/vue-select/dist/vue-select.es.js","../../src/components/charts/CandleChartContainer.vue"],"sourcesContent":["export enum ChartType {\n  line = 'line',\n  bar = 'bar',\n  scatter = 'scatter',\n}\n\nexport interface IndicatorConfig {\n  color?: string;\n  type?: ChartType;\n}\n\nexport interface PlotConfig {\n  main_plot: Record<string, IndicatorConfig>;\n  subplots: Record<string, Record<string, IndicatorConfig>>;\n}\n\nexport interface PlotConfigStorage {\n  [key: string]: PlotConfig;\n}\n\nexport const EMPTY_PLOTCONFIG: PlotConfig = { main_plot: {}, subplots: {} };\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.prototype.getZLevelKey = function () {\n    // Each progressive series has individual key.\n    return this.getData().count() > this.getProgressiveThreshold() ? this.id : '';\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { getECData } from '../../util/innerStore.js';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._off = 0;\n    _this.hoverDataIdx = -1;\n    return _this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.reset = function () {\n    this.notClear = false;\n    this._off = 0;\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD;\n    var softClipShape = this.softClipShape;\n    var i; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n    var softClipShape = this.softClipShape;\n    var i;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (i = this._off; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (softClipShape && !softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n\n    if (this.incremental) {\n      this._off = i;\n      this.notClear = true;\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  LargeSymbolPath.prototype.contain = function (x, y) {\n    var localPos = this.transformCoordToLocal(x, y);\n    var rect = this.getBoundingRect();\n    x = localPos[0];\n    y = localPos[1];\n\n    if (rect.contain(x, y)) {\n      // Cache found data index.\n      var dataIdx = this.hoverDataIdx = this.findDataIndex(x, y);\n      return dataIdx >= 0;\n    }\n\n    this.hoverDataIdx = -1;\n    return false;\n  };\n\n  LargeSymbolPath.prototype.getBoundingRect = function () {\n    // Ignore stroke for large symbol draw.\n    var rect = this._rect;\n\n    if (!rect) {\n      var shape = this.shape;\n      var points = shape.points;\n      var size = shape.size;\n      var w = size[0];\n      var h = size[1];\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0; i < points.length;) {\n        var x = points[i++];\n        var y = points[i++];\n        minX = Math.min(x, minX);\n        maxX = Math.max(x, maxX);\n        minY = Math.min(y, minY);\n        maxY = Math.max(y, maxY);\n      }\n\n      rect = this._rect = new graphic.BoundingRect(minX - w / 2, minY - h / 2, maxX - minX + w, maxY - minY + h);\n    }\n\n    return rect;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this._clear();\n\n    var symbolEl = this._create();\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, opt);\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points); // Reset draw cursor.\n\n      child.reset();\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._clear();\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var lastAdded = this._newAdded[0];\n    var points = data.getLayout('points');\n    var oldPoints = lastAdded && lastAdded.shape.points; // Merging the exists. Each element has 1e4 points.\n    // Consider the performance balance between too much elements and too much points in one shape(may affect hover optimization)\n\n    if (oldPoints && oldPoints.length < 2e4) {\n      var oldLen = oldPoints.length;\n      var newPoints = new Float32Array(oldLen + points.length); // Concat two array\n\n      newPoints.set(oldPoints);\n      newPoints.set(points, oldLen); // Update endIndex\n\n      lastAdded.endIndex = taskParams.end;\n      lastAdded.setShape({\n        points: newPoints\n      });\n    } else {\n      // Clear\n      this._newAdded = [];\n\n      var symbolEl = this._create();\n\n      symbolEl.startIndex = taskParams.start;\n      symbolEl.endIndex = taskParams.end;\n      symbolEl.incremental = true;\n      symbolEl.setShape({\n        points: points\n      });\n\n      this._setCommon(symbolEl, data, opt);\n    }\n  };\n\n  LargeSymbolDraw.prototype.eachRendered = function (cb) {\n    this._newAdded[0] && cb(this._newAdded[0]);\n  };\n\n  LargeSymbolDraw.prototype._create = function () {\n    var symbolEl = new LargeSymbolPath({\n      cursor: 'default'\n    });\n    symbolEl.ignoreCoarsePointer = true;\n    this.group.add(symbolEl);\n\n    this._newAdded.push(symbolEl);\n\n    return symbolEl;\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    var ecData = getECData(symbolEl); // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n\n    ecData.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      ecData.dataIndex = null;\n      var dataIndex = symbolEl.hoverDataIdx;\n\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        ecData.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clear();\n  };\n\n  LargeSymbolDraw.prototype._clear = function () {\n    this._newAdded = [];\n    this.group.removeAll();\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw.js';\nimport pointsLayout from '../../layout/points.js';\nimport ChartView from '../../view/Chart.js';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype.eachRendered = function (cb) {\n    this._symbolDraw && this._symbolDraw.eachRendered(cb);\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport ScatterSeriesModel from './ScatterSeries.js';\nimport ScatterView from './ScatterView.js';\nimport { install as installGridSimple } from '../../component/grid/installSimple.js';\nimport layoutPoints from '../../layout/points.js';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event should be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ChartView from '../../view/Chart.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel } from '../../util/states.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath(); // Clear previously rendered progressive elements.\n\n    this._progressiveEls = null;\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._progressiveEls = [];\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n\n      this._progressiveEls.push(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1,\n    ignoreCoarsePointer: true\n  });\n  group.add(elN);\n  var elDoji = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 0,\n    ignoreCoarsePointer: true\n  });\n  group.add(elDoji);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n  setLargeStyle(0, elDoji, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n\n  if (progressiveEls) {\n    progressiveEls.push(elP, elN);\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) // Use color for border color by default.\n  || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']);\n\n  if (sign === 0) {\n    borderColor = seriesModel.get(['itemStyle', 'borderColorDoji']);\n  } // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon.js';\nimport { mixin } from 'zrender/lib/core/util.js';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      borderColorDoji: null,\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { extend } from 'zrender/lib/core/util.js';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar dojiBorderColorQuery = ['itemStyle', 'borderColorDoji'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign === 0 ? dojiBorderColorQuery : sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { subPixelOptimize } from '../../util/graphic.js';\nimport createRenderPlanner from '../helper/createRenderPlanner.js';\nimport { parsePercent } from '../../util/number.js';\nimport { map, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        var itemModel = data.getItemModel(dataIndex);\n        var hasDojiColor = !!itemModel.get(['itemStyle', 'borderColorDoji']);\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = createFloat32Array(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n      var hasDojiColor = !!seriesModel.get(['itemStyle', 'borderColorDoji']);\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n/**\n * Get the sign of a single data.\n *\n * @returns 0 for doji with hasDojiColor: true,\n *          1 for positive,\n *          -1 for negative.\n */\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI, hasDojiColor) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = hasDojiColor // When doji color is set, use it instead of color/color0.\n    ? 0 : dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView.js';\nimport CandlestickSeriesModel from './CandlestickSeries.js';\nimport preprocessor from './preprocessor.js';\nimport candlestickVisual from './candlestickVisual.js';\nimport candlestickLayout from './candlestickLayout.js';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout.js';\n\nvar CalendarModel =\n/** @class */\nfunction (_super) {\n  __extends(CalendarModel, _super);\n\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { formatTplSimple } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport ComponentView from '../../view/Component.js';\nimport { getLocaleModel } from '../../core/locale.js';\n\nvar CalendarView =\n/** @class */\nfunction (_super) {\n  __extends(CalendarView, _super);\n\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarView.type;\n    return _this;\n  }\n\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient(); // locale\n\n    var localeModel = ecModel.getLocaleModel();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  }; // render day rect\n\n\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  }; // render separate line\n\n\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  }; // get points at both ends\n\n\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  }; // render split line\n\n\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  }; // render month line of one week points\n\n\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  };\n\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (isString(formatter) && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n\n    if (isFunction(formatter)) {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  };\n\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  }; // render year\n\n\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render month and year text\n\n\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // PENDING\n      // for ZH locale, original form is `一月` but current form is `1月`\n\n\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render weeks\n\n\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n\n\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\n\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as layout from '../../util/layout.js';\nimport * as numberUtil from '../../util/number.js'; // (24*60*60*1000)\n\nvar PROXIMATE_ONE_DAY = 86400000;\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions; // Required in createListFromData\n\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n\n\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n\n\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.getCellSize().slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    } // Has been calculated out number.\n\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n\n\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n\n\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n\n\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n\n\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n\n\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n\n    var normalizedRange; // Convert [1990] to 1990\n\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString(); // One year.\n\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      } // One month\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      } // One day\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      } // Not handling it.\n\n\n      return range;\n    }\n\n    var tmp = this._getRangeInfo(normalizedRange);\n\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n\n\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n\n\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\n\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\n\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel.js';\nimport CalendarView from './CalendarView.js';\nimport Calendar from '../../coord/calendar/Calendar.js';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exist.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis'); // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser; // Chrome, Firefox, New Edge\n\n    if (isFunction(MouseEvent) && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type; // @ts-ignore\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]); // @ts-ignore\n\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style; // eslint-disable-next-line max-len\n\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If return true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { each, isObject, clone } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model.js';\n\nvar TimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(TimelineModel, _super);\n\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this._initData();\n  };\n\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n\n\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n\n\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n\n\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n\n\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n\n  TimelineModel.defaultOption = {\n    // zlevel: 0,                  // 一级层叠\n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\n\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel.js';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat.js';\nimport { mixin } from 'zrender/lib/core/util.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar SliderTimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineModel, _super);\n\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\n\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\n\nvar TimelineView =\n/** @class */\nfunction (_super) {\n  __extends(TimelineView, _super);\n\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineView.type;\n    return _this;\n  }\n\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\n\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis.js';\n/**\n * Extend axis 2d\n */\n\nvar TimelineAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimelineAxis, _super);\n\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n\n  return TimelineAxis;\n}(Axis);\n\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as graphic from '../../util/graphic.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport * as layout from '../../util/layout.js';\nimport TimelineView from './TimelineView.js';\nimport TimelineAxis from './TimelineAxis.js';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as numberUtil from '../../util/number.js';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../../scale/Ordinal.js';\nimport TimeScale from '../../scale/Time.js';\nimport IntervalScale from '../../scale/Interval.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../../util/model.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup.js';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\n\nvar SliderTimelineView =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineView, _super);\n\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n\n      var mainGroup_1 = this._createGroup('_mainGroup');\n\n      var labelGroup = this._createGroup('_labelGroup');\n\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n\n      this._position(layoutInfo_1, timelineModel);\n    }\n\n    this._doPlayStop();\n\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos; // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    var axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType); // Customize scale. The `tickValue` is `dataIndex`.\n\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.calcNiceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var data = timelineModel.getData(); // Show all ticks, despite ignoring strategy.\n\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = []; // The value is dataIndex, see the customized scale.\n\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n\n      _this._tickSymbols.push(el);\n    });\n  };\n\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var labelModel = axis.getLabelModel();\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the customized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n\n      _this._tickLabels.push(textEl);\n    });\n  };\n\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n\n    this._currentPointer.markRedraw();\n\n    var progressLine = this._progressLine;\n\n    if (progressLine) {\n      progressLine.shape.x2 = toCoord;\n      progressLine.dirty();\n    }\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  };\n\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3])); // TODO createIcon won't use style in opt.\n\n  if (style) {\n    icon.setStyle(style);\n  }\n\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\n\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util.js';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false); // The timeline has played to the end, trigger event\n\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    } // Set normalized currentIndex to payload.\n\n\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel.js';\nimport SliderTimelineView from './SliderTimelineView.js';\nimport { installTimelineAction } from './timelineAction.js';\nimport preprocessor from './preprocessor.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","export default function () {\n  // eslint-disable-next-line no-bitwise\n  return `#${((Math.random() * 0xffffff) << 0).toString(16)}`;\n}\n","export default function heikinAshiDataset(columns: string[], data: Array<number[]>) {\n  const openIdx = columns.indexOf('open');\n  const closeIdx = columns.indexOf('close');\n  const highIdx = columns.indexOf('high');\n  const lowIdx = columns.indexOf('low');\n\n  let prevCandle: number[];\n  return data.map((original, idx) => {\n    // Prevent mutation of original data\n    const candle = original.slice();\n    const open =\n      idx === 0\n        ? (candle[openIdx] + candle[closeIdx]) / 2\n        : (prevCandle[openIdx] + prevCandle[closeIdx]) / 2;\n    const close = (candle[openIdx] + candle[highIdx] + candle[lowIdx] + candle[closeIdx]) / 4;\n    const high = Math.max(candle[highIdx], candle[openIdx], candle[closeIdx]);\n    const low = Math.min(candle[lowIdx], candle[openIdx], candle[closeIdx]);\n\n    candle[openIdx] = open;\n    candle[closeIdx] = close;\n    candle[highIdx] = high;\n    candle[lowIdx] = low;\n\n    prevCandle = candle.slice();\n\n    return candle;\n  });\n}\n","export const ROUND_UP = 2;\nexport const ROUND_DOWN = 3;\n\nexport function roundTimeframe(\n  timeframems: number,\n  timestamp: number,\n  direction: number = ROUND_DOWN,\n) {\n  const offset = timestamp % timeframems;\n  return timestamp - offset + (direction === ROUND_UP ? timeframems : 0);\n}\n\nexport default {\n  ROUND_UP,\n  ROUND_DOWN,\n  roundTimeframe,\n};\n","import { formatPercent, formatPriceCurrency } from '@/shared/formatters';\nimport { roundTimeframe } from '@/shared/timemath';\nimport { Order, PairHistory, Trade, BTOrder } from '@/types';\n\nfunction buildTooltipCost(trade: Trade, order: Order | BTOrder): string {\n  return `${order.ft_order_side === 'buy' ? '+' : '-'}${formatPriceCurrency(\n    'cost' in order ? order.cost : order.amount * order.safe_price,\n    trade.quote_currency ?? '<stake_currency>',\n  )}`;\n}\n\nfunction buildToolTip(trade: Trade, order: Order | BTOrder, side: string): string {\n  return `${trade.is_short ? 'Short' : 'Long'} ${side}  ${formatPercent(trade.profit_ratio)}\n  ${buildTooltipCost(trade, order)}\n  Enter-tag: ${trade.enter_tag ?? ''}\n  Exit-Tag: ${trade.exit_reason ?? ''}`;\n}\n\nfunction buildAdjustmentToolTip(trade: Trade, order: Order | BTOrder): string {\n  return `${trade.is_short ? 'Short' : 'Long'} adjustment\n  ${buildTooltipCost(trade, order)}\n  Enter-tag: ${trade.enter_tag ?? ''}`;\n}\n\n// const ENTRY_SYMB = 'circle';\n// const EXIT_SYMB = 'rect';\n\nconst ADJUSTMENT_SYMBOL =\n  'path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z';\nconst OPEN_CLOSE_SYMBOL =\n  'path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z';\n\nconst SHORT_COLOR = '#AD00FF';\n//const SHORT_ADJUST_COLOR = '#CE3BFF';\nconst LONG_COLOR = '#0066FF';\n//const LONG_ADJUST_COLOR = '#00A9FF';\n\n/** Return trade entries for charting */\nexport function getTradeEntries(dataset: PairHistory, filteredTrades: Trade[]) {\n  const tradeData: (number | string)[][] = [];\n  // Return schema:\n  // 0: Timeframe\n  // 1: rate\n  // 2: symbol\n  // 3: symbol rotate\n  // 4: color\n  // 5: label\n  // 6: tooltip\n  for (let i = 0, len = filteredTrades.length; i < len; i += 1) {\n    const trade: Trade = filteredTrades[i];\n    if (\n      // Trade is open or closed and within timerange\n      roundTimeframe(dataset.timeframe_ms ?? 0, trade.open_timestamp) <= dataset.data_stop_ts ||\n      !trade.close_timestamp ||\n      (trade.close_timestamp && trade.close_timestamp >= dataset.data_start_ts)\n    ) {\n      if (trade.orders) {\n        for (let i = 0; i < trade.orders.length; i++) {\n          const order: Order | BTOrder = trade.orders[i];\n          if (\n            order.order_filled_timestamp &&\n            roundTimeframe(dataset.timeframe_ms ?? 0, order.order_filled_timestamp) <=\n              dataset.data_stop_ts &&\n            order.order_filled_timestamp > dataset.data_start_ts\n          ) {\n            // Trade entry\n            if (i === 0) {\n              tradeData.push([\n                roundTimeframe(dataset.timeframe_ms ?? 0, trade.open_timestamp),\n                order.safe_price,\n                OPEN_CLOSE_SYMBOL,\n                order.ft_order_side == 'sell' ? 180 : 0,\n                trade.is_short ? SHORT_COLOR : LONG_COLOR,\n                trade.is_short ? 'Short' : 'Long',\n                buildToolTip(trade, order, 'entry'),\n              ]);\n              // Trade exit\n            } else if (i === trade.orders.length - 1 && trade.close_timestamp) {\n              if (\n                roundTimeframe(dataset.timeframe_ms ?? 0, trade.close_timestamp) <=\n                  dataset.data_stop_ts &&\n                trade.close_timestamp > dataset.data_start_ts &&\n                trade.is_open === false\n              ) {\n                tradeData.push([\n                  roundTimeframe(dataset.timeframe_ms ?? 0, trade.close_timestamp),\n                  order.safe_price,\n                  OPEN_CLOSE_SYMBOL,\n                  trade.is_short ? 0 : 180,\n                  trade.is_short ? SHORT_COLOR : LONG_COLOR,\n                  // (trade.profit_abs ?? 0) > 0 ? '#31e04b' : '#fc0505',\n                  formatPercent(trade.profit_ratio, 2),\n                  buildToolTip(trade, order, 'exit'),\n                ]);\n              }\n            }\n            // Position adjustment\n            else {\n              tradeData.push([\n                roundTimeframe(dataset.timeframe_ms ?? 0, order.order_filled_timestamp),\n                order.safe_price,\n                ADJUSTMENT_SYMBOL,\n                order.ft_order_side == 'sell' ? 180 : 0,\n                trade.is_short ? SHORT_COLOR : LONG_COLOR,\n                '',\n                buildAdjustmentToolTip(trade, order),\n              ]);\n            }\n          }\n        }\n      }\n    }\n  }\n  return { tradeData };\n}\n","<template>\n  <div class=\"d-flex flex-grow-1 chart-wrapper\">\n    <v-chart v-if=\"hasData\" ref=\"candleChart\" :theme=\"theme\" autoresize manual-update />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, onMounted, watch } from 'vue';\nimport { Trade, PairHistory, PlotConfig, ChartSliderPosition } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport heikinashi from '@/shared/heikinashi';\nimport { getTradeEntries } from '@/shared/charts/tradeChartData';\nimport ECharts from 'vue-echarts';\nimport { format } from 'date-fns-tz';\n\nimport { use } from 'echarts/core';\nimport { EChartsOption, SeriesOption, ScatterSeriesOption } from 'echarts';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { CandlestickChart, LineChart, BarChart, ScatterChart } from 'echarts/charts';\nimport {\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n} from 'echarts/components';\n\nuse([\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n\n  CandlestickChart,\n  BarChart,\n  LineChart,\n  ScatterChart,\n  CanvasRenderer,\n]);\n\n// Chart default options\nconst MARGINLEFT = '5.5%';\nconst MARGINRIGHT = '1%';\nconst NAMEGAP = 55;\nconst SUBPLOTHEIGHT = 8; // Value in %\n\n// Binance colors\nconst upColor = '#26A69A';\nconst upBorderColor = '#26A69A';\nconst downColor = '#EF5350';\nconst downBorderColor = '#EF5350';\n\nconst buySignalColor = '#00ff26';\nconst shortEntrySignalColor = '#00ff26';\nconst sellSignalColor = '#faba25';\nconst shortexitSignalColor = '#faba25';\n\nexport default defineComponent({\n  name: 'CandleChart',\n  components: { 'v-chart': ECharts },\n  props: {\n    trades: { required: false, default: () => [], type: Array as () => Trade[] },\n    dataset: { required: true, type: Object as () => PairHistory },\n    heikinAshi: { required: false, default: false, type: Boolean },\n    useUTC: { required: false, default: true, type: Boolean },\n    plotConfig: { required: true, type: Object as () => PlotConfig },\n    theme: { default: 'dark', type: String },\n    sliderPosition: {\n      required: false,\n      type: Object as () => ChartSliderPosition,\n      default: () => undefined,\n    },\n  },\n  setup(props) {\n    const candleChart = ref<typeof ECharts>();\n    const buyData = ref<number[][]>([]);\n    const sellData = ref<number[][]>([]);\n    const chartOptions = ref<EChartsOption>({});\n\n    const strategy = computed(() => {\n      return props.dataset ? props.dataset.strategy : '';\n    });\n\n    const pair = computed(() => {\n      return props.dataset ? props.dataset.pair : '';\n    });\n\n    const timeframe = computed(() => {\n      return props.dataset ? props.dataset.timeframe : '';\n    });\n\n    const datasetColumns = computed(() => {\n      return props.dataset ? props.dataset.columns : [];\n    });\n\n    const hasData = computed(() => {\n      return props.dataset !== null && typeof props.dataset === 'object';\n    });\n\n    const filteredTrades = computed(() => {\n      return props.trades.filter((item: Trade) => item.pair === pair.value);\n    });\n\n    const chartTitle = computed(() => {\n      return `${strategy.value} - ${pair.value} - ${timeframe.value}`;\n    });\n\n    const updateChart = (initial = false) => {\n      if (!hasData.value) {\n        return;\n      }\n      if (chartOptions.value?.title) {\n        chartOptions.value.title[0].text = chartTitle.value;\n      }\n      const colDate = props.dataset.columns.findIndex((el) => el === '__date_ts');\n      const colOpen = props.dataset.columns.findIndex((el) => el === 'open');\n      const colHigh = props.dataset.columns.findIndex((el) => el === 'high');\n      const colLow = props.dataset.columns.findIndex((el) => el === 'low');\n      const colClose = props.dataset.columns.findIndex((el) => el === 'close');\n      const colVolume = props.dataset.columns.findIndex((el) => el === 'volume');\n      const colEntryData = props.dataset.columns.findIndex(\n        (el) => el === '_buy_signal_close' || el === '_enter_long_signal_close',\n      );\n      const colExitData = props.dataset.columns.findIndex(\n        (el) => el === '_sell_signal_close' || el === '_exit_long_signal_close',\n      );\n\n      const colShortEntryData = props.dataset.columns.findIndex(\n        (el) => el === '_enter_short_signal_close',\n      );\n      const colShortExitData = props.dataset.columns.findIndex(\n        (el) => el === '_exit_short_signal_close',\n      );\n\n      const subplotCount =\n        'subplots' in props.plotConfig ? Object.keys(props.plotConfig.subplots).length + 1 : 1;\n\n      if (Array.isArray(chartOptions.value?.dataZoom)) {\n        // Only set zoom once ...\n        if (initial) {\n          const startingZoom = (1 - 250 / props.dataset.length) * 100;\n          chartOptions.value.dataZoom.forEach((el, i) => {\n            if (chartOptions.value && chartOptions.value.dataZoom) {\n              chartOptions.value.dataZoom[i].start = startingZoom;\n            }\n          });\n        } else {\n          // Remove start/end settings after chart initialization to avoid chart resetting\n          chartOptions.value.dataZoom.forEach((el, i) => {\n            if (chartOptions.value && chartOptions.value.dataZoom) {\n              delete chartOptions.value.dataZoom[i].start;\n              delete chartOptions.value.dataZoom[i].end;\n            }\n          });\n        }\n      }\n      const dataset = props.heikinAshi\n        ? heikinashi(datasetColumns.value, props.dataset.data)\n        : props.dataset.data.slice();\n      // Add new rows to end to allow slight \"scroll past\"\n      const newArray = Array(dataset.length > 0 ? dataset[dataset.length - 2].length : 0);\n      newArray[colDate] = dataset[dataset.length - 1][colDate] + props.dataset.timeframe_ms * 3;\n      dataset.push(newArray);\n      const options: EChartsOption = {\n        dataset: {\n          source: dataset,\n        },\n        grid: [\n          {\n            left: MARGINLEFT,\n            right: MARGINRIGHT,\n            // Grid Layout from bottom to top\n            bottom: `${subplotCount * SUBPLOTHEIGHT + 2}%`,\n          },\n          {\n            // Volume\n            left: MARGINLEFT,\n            right: MARGINRIGHT,\n            // Grid Layout from bottom to top\n            bottom: `${subplotCount * SUBPLOTHEIGHT}%`,\n            height: `${SUBPLOTHEIGHT}%`,\n          },\n        ],\n\n        series: [\n          {\n            name: 'Candles',\n            type: 'candlestick',\n            barWidth: '80%',\n            itemStyle: {\n              color: upColor,\n              color0: downColor,\n              borderColor: upBorderColor,\n              borderColor0: downBorderColor,\n            },\n            encode: {\n              x: colDate,\n              // open, close, low, high\n              y: [colOpen, colClose, colLow, colHigh],\n            },\n          },\n          {\n            name: 'Volume',\n            type: 'bar',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            itemStyle: {\n              color: '#777777',\n            },\n            large: true,\n            encode: {\n              x: colDate,\n              y: colVolume,\n            },\n          },\n          {\n            name: 'Entry',\n            type: 'scatter',\n            symbol: 'triangle',\n            symbolSize: 10,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: buySignalColor,\n            },\n            encode: {\n              x: colDate,\n              y: colEntryData,\n            },\n          },\n        ],\n      };\n\n      if (colExitData >= 0) {\n        // if (!Array.isArray(chartOptions.value?.legend) && chartOptions.value?.legend?.data) {\n        //   chartOptions.value.legend.data.push('Long exit');\n        // }\n        if (Array.isArray(options.series)) {\n          options.series.push({\n            name: 'Exit',\n            type: 'scatter',\n            symbol: 'diamond',\n            symbolSize: 8,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: sellSignalColor,\n            },\n            encode: {\n              x: colDate,\n              y: colExitData,\n            },\n          });\n        }\n      }\n\n      if (Array.isArray(options.series)) {\n        if (colShortEntryData >= 0) {\n          options.series.push({\n            // Short entry\n            name: 'Entry',\n            type: 'scatter',\n            symbol: 'triangle',\n            symbolRotate: 180,\n            symbolSize: 10,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: shortEntrySignalColor,\n            },\n            tooltip: {\n              // Hide tooltip - it's already there for longs.\n              // show: false,\n            },\n            encode: {\n              x: colDate,\n              y: colShortEntryData,\n            },\n          });\n        }\n        if (colShortExitData >= 0) {\n          options.series.push({\n            // Short exit\n            name: 'Exit',\n            type: 'scatter',\n            symbol: 'pin',\n            symbolSize: 8,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: shortexitSignalColor,\n            },\n            tooltip: {\n              // Hide tooltip - it's already there for longs.\n              // show: false,\n            },\n            encode: {\n              x: colDate,\n              y: colShortExitData,\n            },\n          });\n        }\n      }\n\n      // Merge this into original data\n      Object.assign(chartOptions.value, options);\n\n      if ('main_plot' in props.plotConfig) {\n        Object.entries(props.plotConfig.main_plot).forEach(([key, value]) => {\n          const col = props.dataset.columns.findIndex((el) => el === key);\n          if (col > 1) {\n            if (!Array.isArray(chartOptions.value?.legend) && chartOptions.value?.legend?.data) {\n              chartOptions.value.legend.data.push(key);\n            }\n            const sp: SeriesOption = {\n              name: key,\n              type: value.type || 'line',\n              xAxisIndex: 0,\n              yAxisIndex: 0,\n              itemStyle: {\n                color: value.color,\n              },\n              encode: {\n                x: colDate,\n                y: col,\n              },\n              showSymbol: false,\n            };\n            if (Array.isArray(chartOptions.value?.series)) {\n              chartOptions.value?.series.push(sp);\n            }\n          } else {\n            console.log(`element ${key} for main plot not found in columns.`);\n          }\n        });\n      }\n\n      // START Subplots\n      if ('subplots' in props.plotConfig) {\n        let plotIndex = 2;\n        Object.entries(props.plotConfig.subplots).forEach(([key, value]) => {\n          // define yaxis\n\n          // Subplots are added from bottom to top - only the \"bottom-most\" plot stays at the bottom.\n          // const currGridIdx = totalSubplots - plotIndex > 1 ? totalSubplots - plotIndex : plotIndex;\n          const currGridIdx = plotIndex;\n          if (\n            Array.isArray(chartOptions.value.yAxis) &&\n            chartOptions.value.yAxis.length <= plotIndex\n          ) {\n            chartOptions.value.yAxis.push({\n              scale: true,\n              gridIndex: currGridIdx,\n              name: key,\n              nameLocation: 'middle',\n              nameGap: NAMEGAP,\n              axisLabel: { show: true },\n              axisLine: { show: false },\n              axisTick: { show: false },\n              splitLine: { show: false },\n            });\n          }\n          if (\n            Array.isArray(chartOptions.value.xAxis) &&\n            chartOptions.value.xAxis.length <= plotIndex\n          ) {\n            chartOptions.value.xAxis.push({\n              type: 'time',\n              scale: true,\n              gridIndex: currGridIdx,\n              boundaryGap: false,\n              axisLine: { onZero: false },\n              axisTick: { show: false },\n              axisLabel: { show: false },\n              axisPointer: {\n                label: { show: false },\n              },\n              splitLine: { show: false },\n              splitNumber: 20,\n            });\n          }\n          if (Array.isArray(chartOptions.value.dataZoom)) {\n            chartOptions.value.dataZoom.forEach((el) =>\n              el.xAxisIndex && Array.isArray(el.xAxisIndex) ? el.xAxisIndex.push(plotIndex) : null,\n            );\n          }\n          if (chartOptions.value.grid && Array.isArray(chartOptions.value.grid)) {\n            chartOptions.value.grid.push({\n              left: MARGINLEFT,\n              right: MARGINRIGHT,\n              bottom: `${(subplotCount - plotIndex + 1) * SUBPLOTHEIGHT}%`,\n              height: `${SUBPLOTHEIGHT}%`,\n            });\n          }\n          Object.entries(value).forEach(([sk, sv]) => {\n            // entries per subplot\n            const col = props.dataset.columns.findIndex((el) => el === sk);\n            if (col > 0) {\n              if (!Array.isArray(chartOptions.value.legend) && chartOptions.value.legend?.data) {\n                chartOptions.value.legend.data.push(sk);\n              }\n              const sp: SeriesOption = {\n                name: sk,\n                type: sv.type || 'line',\n                xAxisIndex: plotIndex,\n                yAxisIndex: plotIndex,\n                itemStyle: {\n                  color: sv.color || randomColor(),\n                },\n                encode: {\n                  x: colDate,\n                  y: col,\n                },\n                showSymbol: false,\n              };\n              if (chartOptions.value.series && Array.isArray(chartOptions.value.series)) {\n                chartOptions.value.series.push(sp);\n              }\n            } else {\n              console.log(`element ${sk} was not found in the columns.`);\n            }\n          });\n\n          plotIndex += 1;\n        });\n      }\n      // END Subplots\n      // Last subplot should show xAxis labels\n      // if (options.xAxis && Array.isArray(options.xAxis)) {\n      //   options.xAxis[options.xAxis.length - 1].axisLabel.show = true;\n      //   options.xAxis[options.xAxis.length - 1].axisTick.show = true;\n      // }\n      if (Array.isArray(chartOptions.value.grid)) {\n        // Last subplot is bottom\n        chartOptions.value.grid[chartOptions.value.grid.length - 1].bottom = '50px';\n        delete chartOptions.value.grid[chartOptions.value.grid.length - 1].top;\n      }\n      const { tradeData } = getTradeEntries(props.dataset, filteredTrades.value);\n\n      const nameTrades = 'Trades';\n      if (!Array.isArray(chartOptions.value.legend) && chartOptions.value.legend?.data) {\n        chartOptions.value.legend.data.push(nameTrades);\n      }\n      const tradesSeries: ScatterSeriesOption = {\n        name: nameTrades,\n        type: 'scatter',\n        xAxisIndex: 0,\n        yAxisIndex: 0,\n        encode: {\n          x: 0,\n          y: 1,\n          label: 5,\n          tooltip: 6,\n        },\n        label: {\n          show: true,\n          fontSize: 12,\n          backgroundColor: props.theme !== 'dark' ? '#fff' : '#000',\n          padding: 2,\n          color: props.theme === 'dark' ? '#fff' : '#000',\n        },\n        labelLayout: { rotate: 75, align: 'left', dx: 10 },\n        itemStyle: {\n          // color: tradeSellColor,\n          color: (v) => v.data[4],\n          opacity: 0.9,\n        },\n        symbol: (v) => v[2],\n        symbolRotate: (v) => v[3],\n        symbolSize: 13,\n        data: tradeData,\n      };\n      if (Array.isArray(chartOptions.value.series)) {\n        chartOptions.value.series.push(tradesSeries);\n      }\n\n      // console.log('chartOptions', chartOptions.value);\n      candleChart.value?.setOption(chartOptions.value, {\n        replaceMerge: ['series', 'grid', 'yAxis', 'xAxis', 'legend'],\n        noMerge: !initial,\n      });\n    };\n\n    const initializeChartOptions = () => {\n      // Ensure we start empty.\n      candleChart.value?.setOption({}, { noMerge: true });\n\n      chartOptions.value = {\n        title: [\n          {\n            // text: this.chartTitle,\n            show: false,\n          },\n        ],\n        backgroundColor: 'rgba(0, 0, 0, 0)',\n        useUTC: props.useUTC,\n        animation: false,\n        legend: {\n          // Initial legend, further entries are pushed to the below list\n          data: ['Candles', 'Volume', 'Entry', 'Exit'],\n          right: '1%',\n        },\n        tooltip: {\n          show: true,\n          trigger: 'axis',\n          renderMode: 'richText',\n          backgroundColor: 'rgba(80,80,80,0.7)',\n          borderWidth: 0,\n          textStyle: {\n            color: '#fff',\n          },\n          axisPointer: {\n            type: 'cross',\n            lineStyle: {\n              color: '#cccccc',\n              width: 1,\n              opacity: 1,\n            },\n          },\n          // positioning copied from https://echarts.apache.org/en/option.html#tooltip.position\n          position(pos, params, dom, rect, size) {\n            // tooltip will be fixed on the right if mouse hovering on the left,\n            // and on the left if hovering on the right.\n            const obj = { top: 60 };\n            const mouseIsLeft = pos[0] < size.viewSize[0] / 2;\n            obj[['left', 'right'][+mouseIsLeft]] = mouseIsLeft ? 5 : 60;\n            return obj;\n          },\n        },\n        axisPointer: {\n          link: [{ xAxisIndex: 'all' }],\n          label: {\n            backgroundColor: '#777',\n          },\n        },\n        xAxis: [\n          {\n            type: 'time',\n            scale: true,\n            boundaryGap: false,\n            axisLine: { onZero: false },\n            axisTick: { show: true },\n            axisLabel: { show: true },\n            axisPointer: {\n              label: { show: false },\n            },\n            position: 'top',\n            splitLine: { show: false },\n            splitNumber: 20,\n            min: 'dataMin',\n            max: 'dataMax',\n          },\n          {\n            type: 'time',\n            gridIndex: 1,\n            scale: true,\n            boundaryGap: false,\n            axisLine: { onZero: false },\n            axisTick: { show: false },\n            axisLabel: { show: false },\n            axisPointer: {\n              label: { show: false },\n            },\n            splitLine: { show: false },\n            splitNumber: 20,\n            min: 'dataMin',\n            max: 'dataMax',\n          },\n        ],\n        yAxis: [\n          {\n            scale: true,\n          },\n          {\n            scale: true,\n            gridIndex: 1,\n            splitNumber: 2,\n            name: 'volume',\n            nameLocation: 'middle',\n            // position: 'right',\n            nameGap: NAMEGAP,\n            axisLabel: { show: false },\n            axisLine: { show: false },\n            axisTick: { show: false },\n            splitLine: { show: false },\n          },\n        ],\n        dataZoom: [\n          // Start values are recalculated once the data is known\n          {\n            type: 'inside',\n            xAxisIndex: [0, 1],\n            start: 80,\n            end: 100,\n          },\n          {\n            show: true,\n            xAxisIndex: [0, 1],\n            type: 'slider',\n            bottom: 10,\n            start: 80,\n            end: 100,\n          },\n        ],\n        // visualMap: {\n        //   //  TODO: this would allow to colorize volume bars (if we'd want this)\n        //   //  Needs green / red indicator column in data.\n        //   show: true,\n        //   seriesIndex: 1,\n        //   dimension: 5,\n        //   pieces: [\n        //     {\n        //       max: 500000.0,\n        //       color: downColor,\n        //     },\n        //     {\n        //       min: 500000.0,\n        //       color: upColor,\n        //     },\n        //   ],\n        // },\n      };\n\n      console.log('Initialized');\n      updateChart(true);\n    };\n\n    const updateSliderPosition = () => {\n      if (!props.sliderPosition) return;\n\n      const start = format(\n        props.sliderPosition.startValue - props.dataset.timeframe_ms * 40,\n        'yyyy-MM-dd HH:mm:ss',\n      );\n      const end = format(\n        props.sliderPosition.endValue\n          ? props.sliderPosition.endValue + props.dataset.timeframe_ms * 40\n          : props.sliderPosition.startValue + props.dataset.timeframe_ms * 80,\n        'yyyy-MM-dd HH:mm:ss',\n      );\n      if (candleChart.value) {\n        candleChart.value.dispatchAction({\n          type: 'dataZoom',\n          dataZoomIndex: 0,\n          startValue: start,\n          endValue: end,\n        });\n      }\n    };\n\n    // createSignalData(colDate: number, colOpen: number, colBuy: number, colSell: number): void {\n    // Calculate Buy and sell Series\n    // if (!this.signalsCalculated) {\n    //   // Generate Buy and sell array (using open rate to display marker)\n    //   for (let i = 0, len = this.dataset.data.length; i < len; i += 1) {\n    //     if (this.dataset.data[i][colBuy] === 1) {\n    //       this.buyData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n    //     }\n    //     if (this.dataset.data[i][colSell] === 1) {\n    //       this.sellData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n    //     }\n    //   }\n    //   this.signalsCalculated = true;\n    // }\n    // }\n    onMounted(() => {\n      initializeChartOptions();\n    });\n\n    watch(\n      () => props.useUTC,\n      () => initializeChartOptions(),\n    );\n\n    watch(\n      () => props.dataset,\n      () => updateChart(),\n    );\n\n    watch(\n      () => props.plotConfig,\n      () => initializeChartOptions(),\n    );\n\n    watch(\n      () => props.heikinAshi,\n      () => updateChart(),\n    );\n\n    watch(\n      () => props.sliderPosition,\n      () => updateSliderPosition(),\n    );\n\n    return {\n      candleChart,\n      buyData,\n      sellData,\n      strategy,\n      pair,\n      timeframe,\n      datasetColumns,\n      hasData,\n      filteredTrades,\n      chartTitle,\n    };\n  },\n});\n</script>\n\n<style scoped>\n.chart-wrapper {\n  width: 100%;\n  height: 100%;\n}\n.echarts {\n  width: 100%;\n  min-height: 200px;\n  /* TODO: height calculation is not working correctly - uses min-height for now */\n  /* height: 600px; */\n  height: 100%;\n}\n</style>\n","import { PlotConfig, EMPTY_PLOTCONFIG, PlotConfigStorage } from '@/types';\n\nconst PLOT_CONFIG = 'ft_custom_plot_config';\nconst PLOT_CONFIG_NAME = 'ft_selected_plot_config';\n\nexport function getPlotConfigName(): string {\n  return localStorage.getItem(PLOT_CONFIG_NAME) || 'default';\n}\n\nexport function storePlotConfigName(plotConfigName: string): void {\n  localStorage.setItem(PLOT_CONFIG_NAME, plotConfigName);\n}\n\nexport function getAllCustomPlotConfig(): PlotConfig {\n  return JSON.parse(localStorage.getItem(PLOT_CONFIG) || '{}');\n}\n\nexport function getAllPlotConfigNames(): Array<string> {\n  return Object.keys(getAllCustomPlotConfig());\n}\n\nexport function getCustomPlotConfig(configName: string): PlotConfig {\n  const configs = getAllCustomPlotConfig();\n  return configName in configs ? configs[configName] : { ...EMPTY_PLOTCONFIG };\n}\n\nexport function storeCustomPlotConfig(plotConfig: PlotConfigStorage) {\n  const existingConfig = getAllCustomPlotConfig();\n  // Merge existing with new config\n  const finalPlotConfig = { ...existingConfig, ...plotConfig };\n\n  localStorage.setItem(PLOT_CONFIG, JSON.stringify(finalPlotConfig));\n  // Store new config name as default\n  storePlotConfigName(Object.keys(plotConfig)[0]);\n}\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"!title\"\n        :aria-label=\"title\"\n        class=\"material-design-icon close-circle-outline-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CloseCircleOutlineIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <div>\n    <div v-if=\"addNew\">\n      <b-form-group label=\"Add indicator\" label-for=\"indicatorSelector\">\n        <b-input-group size=\"sm\">\n          <b-form-input v-model=\"indicatorFilter\" placeholder=\"Filter indicators\"></b-form-input>\n          <b-input-group-append>\n            <Reset\n              class=\"pointer align-self-center ms-1\"\n              :size=\"18\"\n              @click=\"indicatorFilter = ''\"\n            ></Reset>\n          </b-input-group-append>\n        </b-input-group>\n        <b-form-select\n          id=\"indicatorSelector\"\n          v-model=\"selAvailableIndicator\"\n          :options=\"filteredIndicators\"\n          :select-size=\"4\"\n        >\n        </b-form-select>\n      </b-form-group>\n    </div>\n\n    <b-form-group label=\"Type\" label-for=\"plotTypeSelector\">\n      <b-form-select\n        id=\"plotTypeSelector\"\n        v-model=\"graphType\"\n        size=\"sm\"\n        :options=\"availableGraphTypes\"\n        @change=\"emitIndicator()\"\n      >\n      </b-form-select>\n    </b-form-group>\n    <hr />\n    <b-form-group label=\"Color\" label-for=\"colsel\" size=\"sm\">\n      <b-input-group>\n        <b-input-group-prepend>\n          <div :style=\"{ 'background-color': selColor }\" class=\"colorbox me-2\"></div>\n          <!-- <b-form-input\n            id=\"colsel\"\n            v-model=\"selColor\"\n            size=\"sm\"\n            class=\"colorbox\"\n            type=\"color\"\n            :style=\"{ 'background-color': selColor }\"\n          >\n          </b-form-input> -->\n        </b-input-group-prepend>\n\n        <b-form-input id=\"colsel\" v-model=\"selColor\" size=\"sm\"> </b-form-input>\n        <b-input-group-append>\n          <b-button variant=\"primary\" size=\"sm\" @click=\"newColor\">&#x21bb;</b-button>\n        </b-input-group-append>\n      </b-input-group>\n    </b-form-group>\n    <div class=\"d-flex d-flex-columns\">\n      <b-button\n        v-if=\"addNew\"\n        class=\"flex-grow-1\"\n        variant=\"primary\"\n        title=\"Add \"\n        size=\"sm\"\n        @click=\"emitIndicator\"\n      >\n        Save indicator\n      </b-button>\n      <b-button\n        v-if=\"addNew\"\n        class=\"ms-1 flex-grow-1\"\n        variant=\"secondary\"\n        title=\"Add \"\n        size=\"sm\"\n        @click=\"clickCancel\"\n      >\n        Cancel\n      </b-button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ChartType, IndicatorConfig } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport Reset from 'vue-material-design-icons/CloseCircleOutline.vue';\n\nimport { computed, ref, watch } from 'vue';\n\nconst props = defineProps({\n  modelValue: { required: true, type: Object as () => Record<string, IndicatorConfig> },\n  columns: { required: true, type: Array as () => string[] },\n  addNew: { required: true, type: Boolean },\n});\nconst emit = defineEmits(['update:modelValue']);\nconst selColor = ref(randomColor());\nconst graphType = ref<ChartType>(ChartType.line);\nconst availableGraphTypes = ref(Object.keys(ChartType));\nconst indicatorFilter = ref('');\nconst selAvailableIndicator = ref('');\nconst cancelled = ref(false);\n\nconst filteredIndicators = computed(() => {\n  return props.columns.filter((col) =>\n    col.toLowerCase().includes(indicatorFilter.value.toLowerCase()),\n  );\n});\n\nconst newColor = () => {\n  selColor.value = randomColor();\n};\n\nconst combinedIndicator = computed(() => {\n  if (cancelled.value || !selAvailableIndicator.value) {\n    return {};\n  }\n  return {\n    [selAvailableIndicator.value]: {\n      color: selColor.value,\n      type: graphType.value,\n    },\n  };\n});\nconst emitIndicator = () => {\n  emit('update:modelValue', combinedIndicator.value);\n};\n\nconst clickCancel = () => {\n  cancelled.value = true;\n  emitIndicator();\n};\n\nwatch(\n  () => props.modelValue,\n  () => {\n    [selAvailableIndicator.value] = Object.keys(props.modelValue);\n    cancelled.value = false;\n    if (selAvailableIndicator.value && props.modelValue) {\n      selColor.value = props.modelValue[selAvailableIndicator.value].color || randomColor();\n      graphType.value = props.modelValue[selAvailableIndicator.value].type || ChartType.line;\n    }\n  },\n);\n\nwatch(selColor, () => {\n  if (!props.addNew) {\n    emitIndicator();\n  }\n});\n</script>\n\n<style scoped>\n.colorbox {\n  border-radius: 50%;\n  margin-top: auto;\n  margin-bottom: auto;\n  height: 25px;\n  width: 25px;\n  vertical-align: center;\n}\n.pointer {\n  cursor: pointer;\n}\n</style>\n","import {\n  getAllPlotConfigNames,\n  getCustomPlotConfig,\n  getPlotConfigName,\n  storeCustomPlotConfig,\n  storePlotConfigName,\n} from '@/shared/storage';\nimport { PlotConfigStorage, EMPTY_PLOTCONFIG, PlotConfig } from '@/types';\nimport { defineStore } from 'pinia';\n\nexport const usePlotConfigStore = defineStore('plotConfig', {\n  state: () => {\n    return {\n      customPlotConfig: {} as PlotConfigStorage,\n      plotConfigName: getPlotConfigName(),\n      availablePlotConfigNames: getAllPlotConfigNames(),\n      plotConfig: { ...EMPTY_PLOTCONFIG },\n    };\n  },\n  getters: {\n    // plotConfig: (state) => state.customPlotConfig[state.plotConfigName] || { ...EMPTY_PLOTCONFIG },\n  },\n  actions: {\n    saveCustomPlotConfig(plotConfig: PlotConfigStorage) {\n      this.customPlotConfig = plotConfig;\n      storeCustomPlotConfig(plotConfig);\n      this.availablePlotConfigNames = getAllPlotConfigNames();\n    },\n    setPlotConfigName(plotConfigName: string) {\n      this.plotConfigName = plotConfigName;\n      storePlotConfigName(plotConfigName);\n    },\n    plotConfigChanged(plotConfigName = '') {\n      console.log('plotConfigChanged');\n      this.setPlotConfigName(plotConfigName ? plotConfigName : this.plotConfigName);\n      this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n    },\n    setPlotConfig(plotConfig: PlotConfig) {\n      console.log('emit...');\n      this.plotConfig = { ...plotConfig };\n    },\n  },\n});\n","<template>\n  <div v-if=\"columns\">\n    <b-form-group label=\"Plot config name\" label-for=\"idPlotConfigName\">\n      <b-form-input id=\"idPlotConfigName\" v-model=\"plotConfigNameLoc\" size=\"sm\"> </b-form-input>\n    </b-form-group>\n    <div class=\"col-mb-3\">\n      <hr />\n\n      <b-form-group label=\"Target\" label-for=\"FieldSel\">\n        <b-form-select id=\"FieldSel\" v-model=\"selSubPlot\" :options=\"subplots\" :select-size=\"3\">\n        </b-form-select>\n      </b-form-group>\n    </div>\n    <b-form-group label=\"Add new plot\" label-for=\"newSubPlot\">\n      <b-input-group size=\"sm\">\n        <b-form-input id=\"newSubPlot\" v-model=\"newSubplotName\" class=\"addPlot\"></b-form-input>\n        <b-input-group-append>\n          <b-button :disabled=\"!newSubplotName\" @click=\"addSubplot\">+</b-button>\n          <b-button v-if=\"selSubPlot && selSubPlot != 'main_plot'\" @click=\"delSubplot\">-</b-button>\n        </b-input-group-append>\n      </b-input-group>\n    </b-form-group>\n    <hr />\n    <div>\n      <b-form-group label=\"Used indicators\" label-for=\"selectedIndicators\">\n        <b-form-select\n          id=\"selectedIndicators\"\n          v-model=\"selIndicatorName\"\n          :options=\"usedColumns\"\n          :select-size=\"4\"\n        >\n        </b-form-select>\n      </b-form-group>\n    </div>\n    <div>\n      <b-button\n        variant=\"primary\"\n        title=\"Add indicator to plot\"\n        size=\"sm\"\n        :disabled=\"addNewIndicator\"\n        @click=\"addNewIndicator = !addNewIndicator\"\n      >\n        Add new indicator\n      </b-button>\n      <b-button\n        variant=\"secondary\"\n        title=\"Remove indicator to plot\"\n        size=\"sm\"\n        :disabled=\"!selIndicatorName\"\n        class=\"ms-1\"\n        @click=\"removeIndicator\"\n      >\n        Remove indicator\n      </b-button>\n    </div>\n\n    <PlotIndicator\n      v-if=\"selIndicatorName || addNewIndicator\"\n      v-model=\"selIndicator\"\n      class=\"mt-1\"\n      :columns=\"columns\"\n      :add-new=\"addNewIndicator\"\n    />\n    <hr />\n\n    <div>\n      <b-button class=\"ms-1\" variant=\"secondary\" size=\"sm\" @click=\"loadPlotConfig\">Load</b-button>\n      <b-button\n        :disabled=\"\n          (botStore.activeBot.isWebserverMode && botStore.activeBot.botApiVersion < 2.23) ||\n          !botStore.activeBot.isBotOnline\n        \"\n        class=\"ms-1\"\n        variant=\"secondary\"\n        size=\"sm\"\n        @click=\"loadPlotConfigFromStrategy\"\n      >\n        From strategy\n      </b-button>\n\n      <b-button\n        class=\"ms-1\"\n        variant=\"secondary\"\n        size=\"sm\"\n        title=\"Load configuration from text box below\"\n        @click=\"resetConfig\"\n        >Reset</b-button\n      >\n      <b-button\n        id=\"showButton\"\n        class=\"ms-1\"\n        variant=\"secondary\"\n        size=\"sm\"\n        title=\"Show configuration for easy transfer to a strategy\"\n        @click=\"showConfig = !showConfig\"\n        >Show</b-button\n      >\n\n      <b-button\n        v-if=\"showConfig\"\n        class=\"ms-1\"\n        variant=\"secondary\"\n        size=\"sm\"\n        title=\"Load configuration from text box below\"\n        @click=\"loadConfigFromString\"\n        >Load from String</b-button\n      >\n      <b-button\n        class=\"ms-1\"\n        variant=\"primary\"\n        size=\"sm\"\n        data-toggle=\"tooltip\"\n        title=\"Save configuration\"\n        @click=\"savePlotConfig\"\n        >Save</b-button\n      >\n    </div>\n    <div v-if=\"showConfig\" class=\"col-mb-5 ms-1 mt-2\">\n      <b-form-textarea\n        id=\"TextArea\"\n        v-model=\"plotConfigJson\"\n        class=\"textArea\"\n        size=\"sm\"\n        :state=\"tempPlotConfigValid\"\n      >\n      </b-form-textarea>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { PlotConfig, EMPTY_PLOTCONFIG, IndicatorConfig } from '@/types';\nimport { getCustomPlotConfig } from '@/shared/storage';\nimport PlotIndicator from '@/components/charts/PlotIndicator.vue';\nimport { showAlert } from '@/stores/alerts';\n\nimport { computed, ref, onMounted } from 'vue';\nimport { useBotStore } from '@/stores/ftbotwrapper';\nimport { usePlotConfigStore } from '@/stores/plotConfig';\n\ndefineProps({\n  columns: { required: true, type: Array as () => string[] },\n  asModal: { required: false, default: true, type: Boolean },\n});\n\nconst plotStore = usePlotConfigStore();\nconst botStore = useBotStore();\n\nconst plotConfig = ref<PlotConfig>(EMPTY_PLOTCONFIG);\n\nconst plotConfigNameLoc = ref('default');\nconst newSubplotName = ref('');\nconst selIndicatorName = ref('');\nconst addNewIndicator = ref(false);\nconst showConfig = ref(false);\nconst selSubPlot = ref('main_plot');\nconst tempPlotConfig = ref<PlotConfig>();\nconst tempPlotConfigValid = ref(true);\n\nconst isMainPlot = computed(() => {\n  return selSubPlot.value === 'main_plot';\n});\n\nconst currentPlotConfig = computed(() => {\n  if (isMainPlot.value) {\n    return plotConfig.value.main_plot;\n  }\n\n  return plotConfig.value.subplots[selSubPlot.value];\n});\nconst subplots = computed((): string[] => {\n  // Subplot keys (for selection window)\n  return ['main_plot', ...Object.keys(plotConfig.value.subplots)];\n});\nconst usedColumns = computed((): string[] => {\n  if (isMainPlot.value) {\n    return Object.keys(plotConfig.value.main_plot);\n  }\n  if (selSubPlot.value in plotConfig.value.subplots) {\n    return Object.keys(plotConfig.value.subplots[selSubPlot.value]);\n  }\n  return [];\n});\n\nfunction addIndicator(newIndicator: Record<string, IndicatorConfig>) {\n  console.log(plotConfig.value);\n\n  // const { plotConfig.value } = this;\n  const name = Object.keys(newIndicator)[0];\n  const indicator = newIndicator[name];\n  if (isMainPlot.value) {\n    console.log(`Adding ${name} to MainPlot`);\n    plotConfig.value.main_plot[name] = { ...indicator };\n  } else {\n    console.log(`Adding ${name} to ${selSubPlot.value}`);\n    plotConfig.value.subplots[selSubPlot.value][name] = { ...indicator };\n  }\n\n  plotConfig.value = { ...plotConfig.value };\n  // Reset random color\n  addNewIndicator.value = false;\n  plotStore.setPlotConfig(plotConfig.value);\n}\n\nconst selIndicator = computed({\n  get() {\n    if (addNewIndicator.value) {\n      return {};\n    }\n    if (selIndicatorName.value) {\n      return {\n        [selIndicatorName.value]: currentPlotConfig.value[selIndicatorName.value],\n      };\n    }\n    return {};\n  },\n  set(newValue: Record<string, IndicatorConfig>) {\n    // console.log('newValue', newValue);\n    const name = Object.keys(newValue)[0];\n    // this.currentPlotConfig[this.selIndicatorName] = { ...newValue[name] };\n    // this.emitPlotConfig();\n    if (name && newValue) {\n      addIndicator(newValue);\n    } else {\n      addNewIndicator.value = false;\n    }\n  },\n});\n\nconst plotConfigJson = computed({\n  get() {\n    return JSON.stringify(plotConfig.value, null, 2);\n  },\n  set(newValue: string) {\n    try {\n      tempPlotConfig.value = JSON.parse(newValue);\n      // TODO: Should Validate schema validity (should be PlotConfig type...)\n      tempPlotConfigValid.value = true;\n    } catch (err) {\n      tempPlotConfigValid.value = false;\n    }\n  },\n});\n\nfunction removeIndicator() {\n  console.log(plotConfig.value);\n  // const { plotConfig } = this;\n  if (isMainPlot.value) {\n    console.log(`Removing ${selIndicatorName.value} from MainPlot`);\n    delete plotConfig.value.main_plot[selIndicatorName.value];\n  } else {\n    console.log(`Removing ${selIndicatorName.value} from ${selSubPlot.value}`);\n    delete plotConfig.value.subplots[selSubPlot.value][selIndicatorName.value];\n  }\n\n  plotConfig.value = { ...plotConfig.value };\n  console.log(plotConfig.value);\n  selIndicatorName.value = '';\n  plotStore.setPlotConfig(plotConfig.value);\n}\nfunction addSubplot() {\n  plotConfig.value.subplots = {\n    ...plotConfig.value.subplots,\n    [newSubplotName.value]: {},\n  };\n  selSubPlot.value = newSubplotName.value;\n  newSubplotName.value = '';\n\n  plotStore.setPlotConfig(plotConfig.value);\n}\n\nfunction delSubplot() {\n  delete plotConfig.value.subplots[selSubPlot.value];\n  plotConfig.value.subplots = { ...plotConfig.value.subplots };\n  selSubPlot.value = '';\n  plotStore.setPlotConfig(plotConfig.value);\n}\nfunction loadPlotConfig() {\n  plotConfig.value = getCustomPlotConfig(plotConfigNameLoc.value);\n  console.log(plotConfig.value);\n  console.log('loading config');\n  plotStore.setPlotConfig(plotConfig.value);\n}\n\nfunction loadConfigFromString() {\n  // this.plotConfig = JSON.parse();\n  if (tempPlotConfig.value !== undefined && tempPlotConfigValid.value) {\n    plotConfig.value = tempPlotConfig.value;\n    plotStore.setPlotConfig(plotConfig.value);\n  }\n}\nfunction resetConfig() {\n  plotConfig.value = { ...EMPTY_PLOTCONFIG };\n}\nasync function loadPlotConfigFromStrategy() {\n  if (botStore.activeBot.isWebserverMode && !botStore.activeBot.strategy.strategy) {\n    showAlert(`No strategy selected, can't load plot config.`);\n    return;\n  }\n  try {\n    await botStore.activeBot.getStrategyPlotConfig();\n    if (botStore.activeBot.strategyPlotConfig) {\n      plotConfig.value = botStore.activeBot.strategyPlotConfig;\n      plotStore.setPlotConfig(plotConfig.value);\n    }\n  } catch (data) {\n    //\n    showAlert('Failed to load Plot configuration from Strategy.');\n  }\n}\n\nfunction savePlotConfig() {\n  plotStore.saveCustomPlotConfig({ [plotConfigNameLoc.value]: plotConfig.value });\n}\n\nonMounted(() => {\n  // console.log('Config Mounted', props);\n  plotConfig.value = plotStore.plotConfig;\n  plotConfigNameLoc.value = plotStore.plotConfigName;\n});\n</script>\n\n<style scoped>\n.textArea {\n  min-height: 250px;\n}\n\n.form-group {\n  margin-bottom: 0.5rem;\n}\n\nhr {\n  margin-bottom: 0.5rem;\n  margin-top: 0.5rem;\n}\n</style>\n","var E = Object.defineProperty, M = Object.defineProperties;\nvar x = Object.getOwnPropertyDescriptors;\nvar V = Object.getOwnPropertySymbols;\nvar I = Object.prototype.hasOwnProperty, N = Object.prototype.propertyIsEnumerable;\nvar C = (e, t, s) => t in e ? E(e, t, { enumerable: !0, configurable: !0, writable: !0, value: s }) : e[t] = s, f = (e, t) => {\n  for (var s in t || (t = {}))\n    I.call(t, s) && C(e, s, t[s]);\n  if (V)\n    for (var s of V(t))\n      N.call(t, s) && C(e, s, t[s]);\n  return e;\n}, m = (e, t) => M(e, x(t));\nimport { openBlock as a, createElementBlock as h, createElementVNode as u, resolveDirective as K, normalizeClass as A, renderSlot as r, normalizeProps as d, guardReactiveProps as c, Fragment as B, renderList as L, createTextVNode as v, toDisplayString as D, createBlock as b, resolveDynamicComponent as _, createCommentVNode as O, mergeProps as k, toHandlers as j, withDirectives as w, vShow as P, createVNode as $, Transition as R, withCtx as z, withModifiers as F } from \"vue\";\nconst U = {\n  props: {\n    autoscroll: {\n      type: Boolean,\n      default: !0\n    }\n  },\n  watch: {\n    typeAheadPointer() {\n      this.autoscroll && this.maybeAdjustScroll();\n    },\n    open(e) {\n      this.autoscroll && e && this.$nextTick(() => this.maybeAdjustScroll());\n    }\n  },\n  methods: {\n    maybeAdjustScroll() {\n      var t;\n      const e = ((t = this.$refs.dropdownMenu) == null ? void 0 : t.children[this.typeAheadPointer]) || !1;\n      if (e) {\n        const s = this.getDropdownViewport(), { top: n, bottom: l, height: i } = e.getBoundingClientRect();\n        if (n < s.top)\n          return this.$refs.dropdownMenu.scrollTop = e.offsetTop;\n        if (l > s.bottom)\n          return this.$refs.dropdownMenu.scrollTop = e.offsetTop - (s.height - i);\n      }\n    },\n    getDropdownViewport() {\n      return this.$refs.dropdownMenu ? this.$refs.dropdownMenu.getBoundingClientRect() : {\n        height: 0,\n        top: 0,\n        bottom: 0\n      };\n    }\n  }\n}, q = {\n  data() {\n    return {\n      typeAheadPointer: -1\n    };\n  },\n  watch: {\n    filteredOptions() {\n      for (let e = 0; e < this.filteredOptions.length; e++)\n        if (this.selectable(this.filteredOptions[e])) {\n          this.typeAheadPointer = e;\n          break;\n        }\n    },\n    open(e) {\n      e && this.typeAheadToLastSelected();\n    },\n    selectedValue() {\n      this.open && this.typeAheadToLastSelected();\n    }\n  },\n  methods: {\n    typeAheadUp() {\n      for (let e = this.typeAheadPointer - 1; e >= 0; e--)\n        if (this.selectable(this.filteredOptions[e])) {\n          this.typeAheadPointer = e;\n          break;\n        }\n    },\n    typeAheadDown() {\n      for (let e = this.typeAheadPointer + 1; e < this.filteredOptions.length; e++)\n        if (this.selectable(this.filteredOptions[e])) {\n          this.typeAheadPointer = e;\n          break;\n        }\n    },\n    typeAheadSelect() {\n      const e = this.filteredOptions[this.typeAheadPointer];\n      e && this.selectable(e) && this.select(e);\n    },\n    typeAheadToLastSelected() {\n      this.typeAheadPointer = this.selectedValue.length !== 0 ? this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length - 1]) : -1;\n    }\n  }\n}, J = {\n  props: {\n    loading: {\n      type: Boolean,\n      default: !1\n    }\n  },\n  data() {\n    return {\n      mutableLoading: !1\n    };\n  },\n  watch: {\n    search() {\n      this.$emit(\"search\", this.search, this.toggleLoading);\n    },\n    loading(e) {\n      this.mutableLoading = e;\n    }\n  },\n  methods: {\n    toggleLoading(e = null) {\n      return e == null ? this.mutableLoading = !this.mutableLoading : this.mutableLoading = e;\n    }\n  }\n}, S = (e, t) => {\n  const s = e.__vccOpts || e;\n  for (const [n, l] of t)\n    s[n] = l;\n  return s;\n}, H = {}, X = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"10\",\n  height: \"10\"\n}, Y = /* @__PURE__ */ u(\"path\", { d: \"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z\" }, null, -1), Q = [\n  Y\n];\nfunction G(e, t) {\n  return a(), h(\"svg\", X, Q);\n}\nconst W = /* @__PURE__ */ S(H, [[\"render\", G]]), Z = {}, ee = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"14\",\n  height: \"10\"\n}, te = /* @__PURE__ */ u(\"path\", { d: \"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z\" }, null, -1), se = [\n  te\n];\nfunction ie(e, t) {\n  return a(), h(\"svg\", ee, se);\n}\nconst oe = /* @__PURE__ */ S(Z, [[\"render\", ie]]), T = {\n  Deselect: W,\n  OpenIndicator: oe\n}, ne = {\n  mounted(e, { instance: t }) {\n    if (t.appendToBody) {\n      const {\n        height: s,\n        top: n,\n        left: l,\n        width: i\n      } = t.$refs.toggle.getBoundingClientRect();\n      let y = window.scrollX || window.pageXOffset, o = window.scrollY || window.pageYOffset;\n      e.unbindPosition = t.calculatePosition(e, t, {\n        width: i + \"px\",\n        left: y + l + \"px\",\n        top: o + n + s + \"px\"\n      }), document.body.appendChild(e);\n    }\n  },\n  unmounted(e, { instance: t }) {\n    t.appendToBody && (e.unbindPosition && typeof e.unbindPosition == \"function\" && e.unbindPosition(), e.parentNode && e.parentNode.removeChild(e));\n  }\n};\nfunction le(e) {\n  const t = {};\n  return Object.keys(e).sort().forEach((s) => {\n    t[s] = e[s];\n  }), JSON.stringify(t);\n}\nlet ae = 0;\nfunction re() {\n  return ++ae;\n}\nconst de = {\n  components: f({}, T),\n  directives: { appendToBody: ne },\n  mixins: [U, q, J],\n  compatConfig: {\n    MODE: 3\n  },\n  emits: [\n    \"open\",\n    \"close\",\n    \"update:modelValue\",\n    \"search\",\n    \"search:compositionstart\",\n    \"search:compositionend\",\n    \"search:keydown\",\n    \"search:blur\",\n    \"search:focus\",\n    \"search:input\",\n    \"option:created\",\n    \"option:selecting\",\n    \"option:selected\",\n    \"option:deselecting\",\n    \"option:deselected\"\n  ],\n  props: {\n    modelValue: {},\n    components: {\n      type: Object,\n      default: () => ({})\n    },\n    options: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    disabled: {\n      type: Boolean,\n      default: !1\n    },\n    clearable: {\n      type: Boolean,\n      default: !0\n    },\n    deselectFromDropdown: {\n      type: Boolean,\n      default: !1\n    },\n    searchable: {\n      type: Boolean,\n      default: !0\n    },\n    multiple: {\n      type: Boolean,\n      default: !1\n    },\n    placeholder: {\n      type: String,\n      default: \"\"\n    },\n    transition: {\n      type: String,\n      default: \"vs__fade\"\n    },\n    clearSearchOnSelect: {\n      type: Boolean,\n      default: !0\n    },\n    closeOnSelect: {\n      type: Boolean,\n      default: !0\n    },\n    label: {\n      type: String,\n      default: \"label\"\n    },\n    autocomplete: {\n      type: String,\n      default: \"off\"\n    },\n    reduce: {\n      type: Function,\n      default: (e) => e\n    },\n    selectable: {\n      type: Function,\n      default: (e) => !0\n    },\n    getOptionLabel: {\n      type: Function,\n      default(e) {\n        return typeof e == \"object\" ? e.hasOwnProperty(this.label) ? e[this.label] : console.warn(`[vue-select warn]: Label key \"option.${this.label}\" does not exist in options object ${JSON.stringify(e)}.\nhttps://vue-select.org/api/props.html#getoptionlabel`) : e;\n      }\n    },\n    getOptionKey: {\n      type: Function,\n      default(e) {\n        if (typeof e != \"object\")\n          return e;\n        try {\n          return e.hasOwnProperty(\"id\") ? e.id : le(e);\n        } catch (t) {\n          return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.\nhttps://vue-select.org/api/props.html#getoptionkey`, e, t);\n        }\n      }\n    },\n    onTab: {\n      type: Function,\n      default: function() {\n        this.selectOnTab && !this.isComposing && this.typeAheadSelect();\n      }\n    },\n    taggable: {\n      type: Boolean,\n      default: !1\n    },\n    tabindex: {\n      type: Number,\n      default: null\n    },\n    pushTags: {\n      type: Boolean,\n      default: !1\n    },\n    filterable: {\n      type: Boolean,\n      default: !0\n    },\n    filterBy: {\n      type: Function,\n      default(e, t, s) {\n        return (t || \"\").toLocaleLowerCase().indexOf(s.toLocaleLowerCase()) > -1;\n      }\n    },\n    filter: {\n      type: Function,\n      default(e, t) {\n        return e.filter((s) => {\n          let n = this.getOptionLabel(s);\n          return typeof n == \"number\" && (n = n.toString()), this.filterBy(s, n, t);\n        });\n      }\n    },\n    createOption: {\n      type: Function,\n      default(e) {\n        return typeof this.optionList[0] == \"object\" ? { [this.label]: e } : e;\n      }\n    },\n    resetOnOptionsChange: {\n      default: !1,\n      validator: (e) => [\"function\", \"boolean\"].includes(typeof e)\n    },\n    clearSearchOnBlur: {\n      type: Function,\n      default: function({ clearSearchOnSelect: e, multiple: t }) {\n        return e && !t;\n      }\n    },\n    noDrop: {\n      type: Boolean,\n      default: !1\n    },\n    inputId: {\n      type: String\n    },\n    dir: {\n      type: String,\n      default: \"auto\"\n    },\n    selectOnTab: {\n      type: Boolean,\n      default: !1\n    },\n    selectOnKeyCodes: {\n      type: Array,\n      default: () => [13]\n    },\n    searchInputQuerySelector: {\n      type: String,\n      default: \"[type=search]\"\n    },\n    mapKeydown: {\n      type: Function,\n      default: (e, t) => e\n    },\n    appendToBody: {\n      type: Boolean,\n      default: !1\n    },\n    calculatePosition: {\n      type: Function,\n      default(e, t, { width: s, top: n, left: l }) {\n        e.style.top = n, e.style.left = l, e.style.width = s;\n      }\n    },\n    dropdownShouldOpen: {\n      type: Function,\n      default({ noDrop: e, open: t, mutableLoading: s }) {\n        return e ? !1 : t && !s;\n      }\n    },\n    uid: {\n      type: [String, Number],\n      default: () => re()\n    }\n  },\n  data() {\n    return {\n      search: \"\",\n      open: !1,\n      isComposing: !1,\n      pushedTags: [],\n      _value: [],\n      deselectButtons: []\n    };\n  },\n  computed: {\n    isReducingValues() {\n      return this.$props.reduce !== this.$options.props.reduce.default;\n    },\n    isTrackingValues() {\n      return typeof this.modelValue == \"undefined\" || this.isReducingValues;\n    },\n    selectedValue() {\n      let e = this.modelValue;\n      return this.isTrackingValues && (e = this.$data._value), e != null && e !== \"\" ? [].concat(e) : [];\n    },\n    optionList() {\n      return this.options.concat(this.pushTags ? this.pushedTags : []);\n    },\n    searchEl() {\n      return this.$slots.search ? this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector) : this.$refs.search;\n    },\n    scope() {\n      const e = {\n        search: this.search,\n        loading: this.loading,\n        searching: this.searching,\n        filteredOptions: this.filteredOptions\n      };\n      return {\n        search: {\n          attributes: f({\n            disabled: this.disabled,\n            placeholder: this.searchPlaceholder,\n            tabindex: this.tabindex,\n            readonly: !this.searchable,\n            id: this.inputId,\n            \"aria-autocomplete\": \"list\",\n            \"aria-labelledby\": `vs${this.uid}__combobox`,\n            \"aria-controls\": `vs${this.uid}__listbox`,\n            ref: \"search\",\n            type: \"search\",\n            autocomplete: this.autocomplete,\n            value: this.search\n          }, this.dropdownOpen && this.filteredOptions[this.typeAheadPointer] ? {\n            \"aria-activedescendant\": `vs${this.uid}__option-${this.typeAheadPointer}`\n          } : {}),\n          events: {\n            compositionstart: () => this.isComposing = !0,\n            compositionend: () => this.isComposing = !1,\n            keydown: this.onSearchKeyDown,\n            blur: this.onSearchBlur,\n            focus: this.onSearchFocus,\n            input: (t) => this.search = t.target.value\n          }\n        },\n        spinner: {\n          loading: this.mutableLoading\n        },\n        noOptions: {\n          search: this.search,\n          loading: this.mutableLoading,\n          searching: this.searching\n        },\n        openIndicator: {\n          attributes: {\n            ref: \"openIndicator\",\n            role: \"presentation\",\n            class: \"vs__open-indicator\"\n          }\n        },\n        listHeader: e,\n        listFooter: e,\n        header: m(f({}, e), { deselect: this.deselect }),\n        footer: m(f({}, e), { deselect: this.deselect })\n      };\n    },\n    childComponents() {\n      return f(f({}, T), this.components);\n    },\n    stateClasses() {\n      return {\n        \"vs--open\": this.dropdownOpen,\n        \"vs--single\": !this.multiple,\n        \"vs--multiple\": this.multiple,\n        \"vs--searching\": this.searching && !this.noDrop,\n        \"vs--searchable\": this.searchable && !this.noDrop,\n        \"vs--unsearchable\": !this.searchable,\n        \"vs--loading\": this.mutableLoading,\n        \"vs--disabled\": this.disabled\n      };\n    },\n    searching() {\n      return !!this.search;\n    },\n    dropdownOpen() {\n      return this.dropdownShouldOpen(this);\n    },\n    searchPlaceholder() {\n      return this.isValueEmpty && this.placeholder ? this.placeholder : void 0;\n    },\n    filteredOptions() {\n      const e = [].concat(this.optionList);\n      if (!this.filterable && !this.taggable)\n        return e;\n      const t = this.search.length ? this.filter(e, this.search, this) : e;\n      if (this.taggable && this.search.length) {\n        const s = this.createOption(this.search);\n        this.optionExists(s) || t.unshift(s);\n      }\n      return t;\n    },\n    isValueEmpty() {\n      return this.selectedValue.length === 0;\n    },\n    showClearButton() {\n      return !this.multiple && this.clearable && !this.open && !this.isValueEmpty;\n    }\n  },\n  watch: {\n    options(e, t) {\n      const s = () => typeof this.resetOnOptionsChange == \"function\" ? this.resetOnOptionsChange(e, t, this.selectedValue) : this.resetOnOptionsChange;\n      !this.taggable && s() && this.clearSelection(), this.modelValue && this.isTrackingValues && this.setInternalValueFromOptions(this.modelValue);\n    },\n    modelValue: {\n      immediate: !0,\n      handler(e) {\n        this.isTrackingValues && this.setInternalValueFromOptions(e);\n      }\n    },\n    multiple() {\n      this.clearSelection();\n    },\n    open(e) {\n      this.$emit(e ? \"open\" : \"close\");\n    }\n  },\n  created() {\n    this.mutableLoading = this.loading;\n  },\n  methods: {\n    setInternalValueFromOptions(e) {\n      Array.isArray(e) ? this.$data._value = e.map((t) => this.findOptionFromReducedValue(t)) : this.$data._value = this.findOptionFromReducedValue(e);\n    },\n    select(e) {\n      this.$emit(\"option:selecting\", e), this.isOptionSelected(e) ? this.deselectFromDropdown && (this.clearable || this.multiple && this.selectedValue.length > 1) && this.deselect(e) : (this.taggable && !this.optionExists(e) && (this.$emit(\"option:created\", e), this.pushTag(e)), this.multiple && (e = this.selectedValue.concat(e)), this.updateValue(e), this.$emit(\"option:selected\", e)), this.onAfterSelect(e);\n    },\n    deselect(e) {\n      this.$emit(\"option:deselecting\", e), this.updateValue(this.selectedValue.filter((t) => !this.optionComparator(t, e))), this.$emit(\"option:deselected\", e);\n    },\n    clearSelection() {\n      this.updateValue(this.multiple ? [] : null);\n    },\n    onAfterSelect(e) {\n      this.closeOnSelect && (this.open = !this.open, this.searchEl.blur()), this.clearSearchOnSelect && (this.search = \"\");\n    },\n    updateValue(e) {\n      typeof this.modelValue == \"undefined\" && (this.$data._value = e), e !== null && (Array.isArray(e) ? e = e.map((t) => this.reduce(t)) : e = this.reduce(e)), this.$emit(\"update:modelValue\", e);\n    },\n    toggleDropdown(e) {\n      const t = e.target !== this.searchEl;\n      t && e.preventDefault();\n      const s = [\n        ...this.deselectButtons || [],\n        this.$refs.clearButton\n      ];\n      if (this.searchEl === void 0 || s.filter(Boolean).some((n) => n.contains(e.target) || n === e.target)) {\n        e.preventDefault();\n        return;\n      }\n      this.open && t ? this.searchEl.blur() : this.disabled || (this.open = !0, this.searchEl.focus());\n    },\n    isOptionSelected(e) {\n      return this.selectedValue.some((t) => this.optionComparator(t, e));\n    },\n    isOptionDeselectable(e) {\n      return this.isOptionSelected(e) && this.deselectFromDropdown;\n    },\n    optionComparator(e, t) {\n      return this.getOptionKey(e) === this.getOptionKey(t);\n    },\n    findOptionFromReducedValue(e) {\n      const t = (n) => JSON.stringify(this.reduce(n)) === JSON.stringify(e), s = [...this.options, ...this.pushedTags].filter(t);\n      return s.length === 1 ? s[0] : s.find((n) => this.optionComparator(n, this.$data._value)) || e;\n    },\n    closeSearchOptions() {\n      this.open = !1, this.$emit(\"search:blur\");\n    },\n    maybeDeleteValue() {\n      if (!this.searchEl.value.length && this.selectedValue && this.selectedValue.length && this.clearable) {\n        let e = null;\n        this.multiple && (e = [\n          ...this.selectedValue.slice(0, this.selectedValue.length - 1)\n        ]), this.updateValue(e);\n      }\n    },\n    optionExists(e) {\n      return this.optionList.some((t) => this.optionComparator(t, e));\n    },\n    normalizeOptionForSlot(e) {\n      return typeof e == \"object\" ? e : { [this.label]: e };\n    },\n    pushTag(e) {\n      this.pushedTags.push(e);\n    },\n    onEscape() {\n      this.search.length ? this.search = \"\" : this.searchEl.blur();\n    },\n    onSearchBlur() {\n      if (this.mousedown && !this.searching)\n        this.mousedown = !1;\n      else {\n        const { clearSearchOnSelect: e, multiple: t } = this;\n        this.clearSearchOnBlur({ clearSearchOnSelect: e, multiple: t }) && (this.search = \"\"), this.closeSearchOptions();\n        return;\n      }\n      if (this.search.length === 0 && this.options.length === 0) {\n        this.closeSearchOptions();\n        return;\n      }\n    },\n    onSearchFocus() {\n      this.open = !0, this.$emit(\"search:focus\");\n    },\n    onMousedown() {\n      this.mousedown = !0;\n    },\n    onMouseUp() {\n      this.mousedown = !1;\n    },\n    onSearchKeyDown(e) {\n      const t = (l) => (l.preventDefault(), !this.isComposing && this.typeAheadSelect()), s = {\n        8: (l) => this.maybeDeleteValue(),\n        9: (l) => this.onTab(),\n        27: (l) => this.onEscape(),\n        38: (l) => (l.preventDefault(), this.typeAheadUp()),\n        40: (l) => (l.preventDefault(), this.typeAheadDown())\n      };\n      this.selectOnKeyCodes.forEach((l) => s[l] = t);\n      const n = this.mapKeydown(s, this);\n      if (typeof n[e.keyCode] == \"function\")\n        return n[e.keyCode](e);\n    }\n  }\n}, he = [\"dir\"], ce = [\"id\", \"aria-expanded\", \"aria-owns\"], ue = {\n  ref: \"selectedOptions\",\n  class: \"vs__selected-options\"\n}, pe = [\"disabled\", \"title\", \"aria-label\", \"onClick\"], fe = {\n  ref: \"actions\",\n  class: \"vs__actions\"\n}, ge = [\"disabled\"], ye = { class: \"vs__spinner\" }, me = [\"id\"], be = [\"id\", \"aria-selected\", \"onMouseover\", \"onClick\"], _e = {\n  key: 0,\n  class: \"vs__no-options\"\n}, Oe = /* @__PURE__ */ v(\" Sorry, no matching options. \"), we = [\"id\"];\nfunction ve(e, t, s, n, l, i) {\n  const y = K(\"append-to-body\");\n  return a(), h(\"div\", {\n    dir: s.dir,\n    class: A([\"v-select\", i.stateClasses])\n  }, [\n    r(e.$slots, \"header\", d(c(i.scope.header))),\n    u(\"div\", {\n      id: `vs${s.uid}__combobox`,\n      ref: \"toggle\",\n      class: \"vs__dropdown-toggle\",\n      role: \"combobox\",\n      \"aria-expanded\": i.dropdownOpen.toString(),\n      \"aria-owns\": `vs${s.uid}__listbox`,\n      \"aria-label\": \"Search for option\",\n      onMousedown: t[1] || (t[1] = (o) => i.toggleDropdown(o))\n    }, [\n      u(\"div\", ue, [\n        (a(!0), h(B, null, L(i.selectedValue, (o, p) => r(e.$slots, \"selected-option-container\", {\n          option: i.normalizeOptionForSlot(o),\n          deselect: i.deselect,\n          multiple: s.multiple,\n          disabled: s.disabled\n        }, () => [\n          (a(), h(\"span\", {\n            key: s.getOptionKey(o),\n            class: \"vs__selected\"\n          }, [\n            r(e.$slots, \"selected-option\", d(c(i.normalizeOptionForSlot(o))), () => [\n              v(D(s.getOptionLabel(o)), 1)\n            ]),\n            s.multiple ? (a(), h(\"button\", {\n              key: 0,\n              ref_for: !0,\n              ref: (g) => l.deselectButtons[p] = g,\n              disabled: s.disabled,\n              type: \"button\",\n              class: \"vs__deselect\",\n              title: `Deselect ${s.getOptionLabel(o)}`,\n              \"aria-label\": `Deselect ${s.getOptionLabel(o)}`,\n              onClick: (g) => i.deselect(o)\n            }, [\n              (a(), b(_(i.childComponents.Deselect)))\n            ], 8, pe)) : O(\"\", !0)\n          ]))\n        ])), 256)),\n        r(e.$slots, \"search\", d(c(i.scope.search)), () => [\n          u(\"input\", k({ class: \"vs__search\" }, i.scope.search.attributes, j(i.scope.search.events)), null, 16)\n        ])\n      ], 512),\n      u(\"div\", fe, [\n        w(u(\"button\", {\n          ref: \"clearButton\",\n          disabled: s.disabled,\n          type: \"button\",\n          class: \"vs__clear\",\n          title: \"Clear Selected\",\n          \"aria-label\": \"Clear Selected\",\n          onClick: t[0] || (t[0] = (...o) => i.clearSelection && i.clearSelection(...o))\n        }, [\n          (a(), b(_(i.childComponents.Deselect)))\n        ], 8, ge), [\n          [P, i.showClearButton]\n        ]),\n        r(e.$slots, \"open-indicator\", d(c(i.scope.openIndicator)), () => [\n          s.noDrop ? O(\"\", !0) : (a(), b(_(i.childComponents.OpenIndicator), d(k({ key: 0 }, i.scope.openIndicator.attributes)), null, 16))\n        ]),\n        r(e.$slots, \"spinner\", d(c(i.scope.spinner)), () => [\n          w(u(\"div\", ye, \"Loading...\", 512), [\n            [P, e.mutableLoading]\n          ])\n        ])\n      ], 512)\n    ], 40, ce),\n    $(R, { name: s.transition }, {\n      default: z(() => [\n        i.dropdownOpen ? w((a(), h(\"ul\", {\n          id: `vs${s.uid}__listbox`,\n          ref: \"dropdownMenu\",\n          key: `vs${s.uid}__listbox`,\n          class: \"vs__dropdown-menu\",\n          role: \"listbox\",\n          tabindex: \"-1\",\n          onMousedown: t[2] || (t[2] = F((...o) => i.onMousedown && i.onMousedown(...o), [\"prevent\"])),\n          onMouseup: t[3] || (t[3] = (...o) => i.onMouseUp && i.onMouseUp(...o))\n        }, [\n          r(e.$slots, \"list-header\", d(c(i.scope.listHeader))),\n          (a(!0), h(B, null, L(i.filteredOptions, (o, p) => (a(), h(\"li\", {\n            id: `vs${s.uid}__option-${p}`,\n            key: s.getOptionKey(o),\n            role: \"option\",\n            class: A([\"vs__dropdown-option\", {\n              \"vs__dropdown-option--deselect\": i.isOptionDeselectable(o) && p === e.typeAheadPointer,\n              \"vs__dropdown-option--selected\": i.isOptionSelected(o),\n              \"vs__dropdown-option--highlight\": p === e.typeAheadPointer,\n              \"vs__dropdown-option--disabled\": !s.selectable(o)\n            }]),\n            \"aria-selected\": p === e.typeAheadPointer ? !0 : null,\n            onMouseover: (g) => s.selectable(o) ? e.typeAheadPointer = p : null,\n            onClick: F((g) => s.selectable(o) ? i.select(o) : null, [\"prevent\", \"stop\"])\n          }, [\n            r(e.$slots, \"option\", d(c(i.normalizeOptionForSlot(o))), () => [\n              v(D(s.getOptionLabel(o)), 1)\n            ])\n          ], 42, be))), 128)),\n          i.filteredOptions.length === 0 ? (a(), h(\"li\", _e, [\n            r(e.$slots, \"no-options\", d(c(i.scope.noOptions)), () => [\n              Oe\n            ])\n          ])) : O(\"\", !0),\n          r(e.$slots, \"list-footer\", d(c(i.scope.listFooter)))\n        ], 40, me)), [\n          [y]\n        ]) : (a(), h(\"ul\", {\n          key: 1,\n          id: `vs${s.uid}__listbox`,\n          role: \"listbox\",\n          style: { display: \"none\", visibility: \"hidden\" }\n        }, null, 8, we))\n      ]),\n      _: 3\n    }, 8, [\"name\"]),\n    r(e.$slots, \"footer\", d(c(i.scope.footer)))\n  ], 10, he);\n}\nconst Ce = /* @__PURE__ */ S(de, [[\"render\", ve]]);\nexport {\n  Ce as default\n};\n","<template>\n  <div class=\"d-flex h-100\">\n    <div class=\"flex-fill w-100 flex-column align-items-stretch d-flex h-100\">\n      <div class=\"d-flex me-0\">\n        <div class=\"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto\">\n          <span class=\"ms-2 text-nowrap\">{{ strategyName }} | {{ timeframe || '' }}</span>\n          <v-select\n            v-model=\"pair\"\n            class=\"ms-2\"\n            :options=\"availablePairs\"\n            style=\"min-width: 7em\"\n            size=\"sm\"\n            :clearable=\"false\"\n            @input=\"refresh\"\n          >\n          </v-select>\n\n          <b-button class=\"ms-2\" :disabled=\"!!!pair\" size=\"sm\" @click=\"refresh\">&#x21bb;</b-button>\n          <small v-if=\"dataset\" class=\"ms-2 text-nowrap\" title=\"Long entry signals\"\n            >Long signals: {{ dataset.enter_long_signals || dataset.buy_signals }}</small\n          >\n          <small v-if=\"dataset\" class=\"ms-2 text-nowrap\" title=\"Long exit signals\"\n            >Long exit: {{ dataset.exit_long_signals || dataset.sell_signals }}</small\n          >\n          <small v-if=\"dataset && dataset.enter_short_signals\" class=\"ms-2 text-nowrap\"\n            >Short entries: {{ dataset.enter_short_signals }}</small\n          >\n          <small v-if=\"dataset && dataset.exit_short_signals\" class=\"ms-2 text-nowrap\"\n            >Short exits: {{ dataset.exit_short_signals }}</small\n          >\n        </div>\n        <div class=\"ms-auto d-flex align-items-center w-auto\">\n          <b-form-checkbox v-model=\"settingsStore.useHeikinAshiCandles\"\n            >Heikin Ashi</b-form-checkbox\n          >\n\n          <div class=\"ms-2\">\n            <b-form-select\n              v-model=\"plotStore.plotConfigName\"\n              :options=\"plotStore.availablePlotConfigNames\"\n              size=\"sm\"\n              @change=\"plotStore.plotConfigChanged\"\n            >\n            </b-form-select>\n          </div>\n\n          <div class=\"ms-2 me-0 me-md-1\">\n            <b-button size=\"sm\" title=\"Plot configurator\" @click=\"showConfigurator\">\n              &#9881;\n            </b-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"me-1 ms-1 h-100\">\n        <CandleChart\n          v-if=\"hasDataset\"\n          :dataset=\"dataset\"\n          :trades=\"trades\"\n          :plot-config=\"plotStore.plotConfig\"\n          :heikin-ashi=\"settingsStore.useHeikinAshiCandles\"\n          :use-u-t-c=\"settingsStore.timezone === 'UTC'\"\n          :theme=\"settingsStore.chartTheme\"\n          :slider-position=\"sliderPosition\"\n        >\n        </CandleChart>\n        <div v-else class=\"m-auto\">\n          <b-spinner v-if=\"isLoadingDataset\" label=\"Spinning\" />\n\n          <div v-else style=\"font-size: 1.5rem\">\n            {{ noDatasetText }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <transition name=\"fade\" mode=\"in-out\">\n      <div v-if=\"!plotConfigModal\" v-show=\"showPlotConfig\" class=\"w-25 config-sidebar\">\n        <PlotConfigurator :columns=\"datasetColumns\" :as-modal=\"false\" />\n      </div>\n    </transition>\n    <b-modal\n      v-if=\"plotConfigModal\"\n      id=\"plotConfiguratorModal\"\n      v-model=\"showPlotConfigModal\"\n      title=\"Plot Configurator\"\n      ok-only\n      hide-backdrop\n    >\n      <PlotConfigurator v-if=\"showPlotConfigModal\" :columns=\"datasetColumns\" />\n    </b-modal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Trade, PairHistory, LoadingStatus, ChartSliderPosition } from '@/types';\nimport CandleChart from '@/components/charts/CandleChart.vue';\nimport PlotConfigurator from '@/components/charts/PlotConfigurator.vue';\nimport vSelect from 'vue-select';\nimport { useSettingsStore } from '@/stores/settings';\nimport { usePlotConfigStore } from '@/stores/plotConfig';\n\nimport { ref, computed, onMounted, watch } from 'vue';\nimport { useBotStore } from '@/stores/ftbotwrapper';\n\nconst props = defineProps({\n  trades: { required: false, default: () => [], type: Array as () => Trade[] },\n  availablePairs: { required: true, type: Array as () => string[] },\n  timeframe: { required: true, type: String },\n  historicView: { required: false, default: false, type: Boolean },\n  plotConfigModal: { required: false, default: true, type: Boolean },\n  /** Only required if historicView is true */\n  timerange: { required: false, default: '', type: String },\n  /** Only required if historicView is true */\n  strategy: { required: false, default: '', type: String },\n  sliderPosition: {\n    required: false,\n    type: Object as () => ChartSliderPosition,\n    default: () => undefined,\n  },\n});\nconst settingsStore = useSettingsStore();\nconst botStore = useBotStore();\nconst plotStore = usePlotConfigStore();\n\nconst pair = ref('');\nconst showPlotConfig = ref(props.plotConfigModal);\n\nconst dataset = computed((): PairHistory => {\n  if (props.historicView) {\n    return botStore.activeBot.history[`${pair.value}__${props.timeframe}`]?.data;\n  }\n  return botStore.activeBot.candleData[`${pair.value}__${props.timeframe}`]?.data;\n});\nconst strategyName = computed(() => props.strategy || dataset.value?.strategy || '');\nconst datasetColumns = computed(() => (dataset.value ? dataset.value.columns : []));\nconst hasDataset = computed(() => dataset.value && dataset.value.data.length > 0);\nconst isLoadingDataset = computed((): boolean => {\n  if (props.historicView) {\n    return botStore.activeBot.historyStatus === LoadingStatus.loading;\n  }\n\n  return botStore.activeBot.candleDataStatus === LoadingStatus.loading;\n});\nconst noDatasetText = computed((): string => {\n  const status = props.historicView\n    ? botStore.activeBot.historyStatus\n    : botStore.activeBot.candleDataStatus;\n\n  switch (status) {\n    case LoadingStatus.loading:\n      return 'Loading...';\n\n    case LoadingStatus.success:\n      return 'No data available';\n\n    case LoadingStatus.error:\n      return 'Failed to load data';\n\n    default:\n      return 'Unknown';\n  }\n});\nconst showPlotConfigModal = ref(false);\nconst showConfigurator = () => {\n  if (props.plotConfigModal) {\n    showPlotConfigModal.value = !showPlotConfigModal.value;\n  } else {\n    showPlotConfig.value = !showPlotConfig.value;\n  }\n};\nconst refresh = () => {\n  console.log('refresh', pair.value, props.timeframe);\n  if (pair.value && props.timeframe) {\n    if (props.historicView) {\n      botStore.activeBot.getPairHistory({\n        pair: pair.value,\n        timeframe: props.timeframe,\n        timerange: props.timerange,\n        strategy: props.strategy,\n      });\n    } else {\n      botStore.activeBot.getPairCandles({\n        pair: pair.value,\n        timeframe: props.timeframe,\n        limit: 500,\n      });\n    }\n  }\n};\n\nwatch(\n  () => props.availablePairs,\n  () => {\n    if (!props.availablePairs.find((p) => p === pair.value)) {\n      [pair.value] = props.availablePairs;\n      refresh();\n    }\n  },\n);\n\nwatch(\n  () => botStore.activeBot.selectedPair,\n  () => {\n    pair.value = botStore.activeBot.selectedPair;\n    refresh();\n  },\n);\n\nonMounted(() => {\n  if (botStore.activeBot.selectedPair) {\n    pair.value = botStore.activeBot.selectedPair;\n  } else if (props.availablePairs.length > 0) {\n    [pair.value] = props.availablePairs;\n  }\n  plotStore.plotConfigChanged();\n  if (!hasDataset.value) {\n    refresh();\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 0.2s;\n}\n\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n"],"names":["ChartType","EMPTY_PLOTCONFIG","ScatterSeriesModel","_super","__extends","_this","option","ecModel","createSeriesData","progressive","progressiveThreshold","dataIndex","data","selectors","SeriesModel","ScatterSeriesModel$1","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","opts","path","shape","points","size","symbolProxy","symbolProxyShape","ctx","canBoost","softClipShape","i","x","y","w","h","idx","x0","y0","localPos","rect","dataIdx","minX","minY","maxX","maxY","graphic.BoundingRect","graphic.Path","LargeSymbolDraw","graphic.Group","opt","symbolEl","child","len","byteOffset","taskParams","lastAdded","oldPoints","oldLen","newPoints","cb","hostModel","createSymbol","extrudeShadow","globalStyle","visualColor","ecData","getECData","e","LargeSymbolDraw$1","ScatterView","seriesModel","api","symbolDraw","res","pointsLayout","coordSys","clipArea","pipelineContext","isLargeDraw","SymbolDraw","ChartView","ScatterView$1","install","registers","use","installGridSimple","layoutPoints","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","model","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","DEFAULT_BRUSH_OPT","baseUID","BrushController","zr","each","pointerHandlers","handler","eventName","bind","brushOption","interactionMutex.take","merge","clone","interactionMutex.release","panelOpts","panels_1","thisGroup","coverConfigList","map","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","DataDiffer","oldGetKey","getKey","addOrUpdate","remove","index","cover","newIndex","oldIndex","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","z","el","getPanelByPoint","localCursorPoint","panels","panel","transform","pn","getPanelByCover","panelId","covers","originalLength","trigger","areas","range","shouldShowCover","track","p2","p1","dx","dy","dist","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","graphic.Rect","makeStyle","curry","driftRect","nameSequence","updateBaseRect","localRange","lineWidth","handleSize","xa","ya","x2","y2","x2a","y2a","width","height","widtha","heighta","updateRectShape","updateCommon","transformable","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","name","pointsToRect","clipByPanel","defaults","formatRectRange","min","max","getTransform","graphic.getTransform","localDirName","inverseMap","dir","graphic.transformDirection","localDirNameSeq","dirNameSequence","rectRange","localDelta","toLocalDelta","dirName","ind","driftPolygon","point","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","preventDefault","rawE","mainShapeContain","updateCoverByMouse","isEnd","thisBrushOption","eventParams","determineBrushType","coverBrushOption","brushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","graphic.Polyline","graphic.Polygon","xyIndex","otherExtent","BrushController$1","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","BoundingRect","WhiskerBoxCommonMixin","ordinalMeta","xAxisModel","yAxisModel","xAxisType","yAxisType","addOrdinal","coordDims","baseAxisDimIndex","baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","zrUtil.each","item","newItem","zrUtil.isArray","zrUtil.extend","defaultValueDimensions","coordDimensions","getDimensionTypeByAxis","createSeriesDataSimply","zrUtil.curry","makeSeriesEncodeForAxisCoordSys","dim","SKIP_PROPS","CandlestickView","params","graphic.traverseElements","oldData","group","isSimpleBox","needsClip","coord","newIdx","itemLayout","isNormalBoxClipped","createNormalBox","graphic.initProps","setBoxCommon","oldIdx","graphic.updateProps","saveOldStyle","createLarge","clipPath","createClipPath","NormalBoxPathShape","NormalBoxPath","Path","isInit","transInit","clipped","itemModel","setStatesStylesFromModel","zrUtil.map","LargeBoxPathShape","LargeBoxPath","progressiveEls","incremental","largePoints","elP","elN","elDoji","setLargeStyle","sign","borderColor","itemStyle","CandlestickView$1","CandlestickSeriesModel","mixin","CandlestickSeriesModel$1","candlestickPreprocessor","seriesItem","zrUtil.isObject","positiveBorderColorQuery","negativeBorderColorQuery","dojiBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","createRenderPlanner","getColor","getBorderColor","isLargeRender","style","existsStyle","extend","candlestickVisual$1","candlestickLayout","candleWidth","calculateCandleWidth","cDimIdx","vDimIdx","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","largeProgress","normalProgress","store","axisDimVal","openVal","closeVal","lowestVal","highestVal","ocLow","ocHigh","ocLowPoint","getPoint","ocHighPoint","lowestPoint","highestPoint","addBodyEnd","subPixelOptimizePoint","hasDojiColor","getSign","makeBrushRect","val","p","start","point1","point2","subPixelOptimize","pmin","pmax","createFloat32Array","offset","tmpIn","tmpOut","baseAxis","extent","bandWidth","barMaxWidth","parsePercent","retrieve2","barMinWidth","barWidth","candlestickLayout$1","preprocessor","CalendarModel","parentModel","inputPositionParams","getLayoutParams","mergeAndNormalizeLayoutParams","ComponentModel","target","raw","cellSize","cellSizeArr","ignoreSize","hvIdx","sizeCalculable","mergeLayoutParam","CalendarModel$1","CalendarView","calendarModel","rangeData","orient","localeModel","itemRectStyleModel","sw","sh","self","lineStyleModel","show","firstDay","addPoints","date","rs","lineStyle","poyline","parsedDate","tmpD","formatter","isString","formatTplSimple","isFunction","textEl","position","margin","aligns","rotate","yearLabel","pos","xc","yc","posPoints","content","yearText","graphic.Text","createTextStyle","isCenter","align","vAlign","monthLabel","nameMap","termPoints","getLocaleModel","axis","tmp","firstDayPoints","name_1","monthText","isStart","dayLabel","firstDayOfWeek","dayOfWeekShort","day","weekText","ComponentView","CalendarView$1","PROXIMATE_ONE_DAY","Calendar","numberUtil.parseDate","m","mStr","d","dStr","n","weeks","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","layout.getLayoutRect","clamp","dayInfo","week","nthWeek","nthX","nthY","finder","value","getCoordSys","pixel","normalizedRange","rangeStr","end","parsedRange","reversed","allDay","startDateNum","endDateNum","dateNum","rangeInfo","nthDay","calendarList","calendar","calendarSeries","Calendar$1","SelectDataZoomModel","DataZoomModel","SelectZoomModel","SelectDataZoomView","DataZoomView","SelectZoomView","installCommon","ToolboxFeature","features","registerFeature","ctor","getFeature","ToolboxModel","featureOpt","featureName","Feature","featureManager.getFeature","zrUtil.merge","ToolboxModel$1","ToolboxView","toolboxModel","payload","itemSize","isVertical","featureOpts","featureNames","processFeature","oldName","featureModel","Model","feature","isUserFeatureName","getUID","isToolboxFeature","createIconPaths","iconName","status","iconPaths","enterEmphasis","leaveEmphasis","iconStyleModel","iconStyleEmphasisModel","icons","titles","iconsMap","titlesMap","zrUtil.isString","iconStr","graphic.createIcon","pathEmphasisState","textContent","ZRText","graphic.setTooltipConfig","hoverStyle","defaultTextPosition","zrUtil.bind","listComponentHelper.layout","listComponentHelper.makeBackground","icon","titleText","emphasisState","emphasisTextConfig","emphasisTextState","zrUtil.isFunction","emphasisTextStyle","textContain.getBoundingRect","offsetX","offsetY","needPutOnTop","topOffset","ToolboxView$1","SaveAsImage","title","isSvg","type","url","browser","env","$a","evt","parts","base64Encoded","bstr","filename","u8arr","blob","frame","cw","doc","lang","html","tab","defaultOption","SaveAsImage$1","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesIndex","seriesOptGenreator","newOption","generateNewSeriesTypes","seriesType","seriesId","newSeriesOpt","zrUtil.defaults","categoryAxis","axisDim","axisType","axisModel","SINGLE_REFERRING","axisIndex","radio","zrUtil.indexOf","newTitle","currentType","isStack","echarts.registerAction","MagicType$1","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","key","assembleSeriesWithCategoryAxis","groups","tables","valueAxis","valueAxisDim","headers","series","columns","rawData","lines","items","j","assembleOtherSeries","vals","argLen","getContentFromModel","result","zrUtil.filter","str","trim","isTSVFormat","block","firstLine","itemSplitRegex","parseTSVContents","tsv","tsvLines","categories","header","parseListContents","seriesName","line","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","root","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","zrUtil.isDom","buttonContainer","buttonStyle","closeButton","refreshButton","close","addEventListener","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","DataView$1","inner","makeInner","push","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","dataZoomModel","percentRange","pop","head","clear","count","RestoreOption","history.clear","Restore","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","foundCpts","parseFinder","targetInfoBuilders","builder","indexOf","area","coordRange","coordConvert","diffProcessor","targetInfo","rangeOffset","getScales","getDefaultBrushType","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","minMax","modelUtilParseFinder","xAxisModels","yAxisModels","gridModels","gridModelMap","createHashMap","xAxesHas","yAxesHas","gridModel","grid","cartesians","cartesian","panelRectBuilders","geoModel","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","values","xyMinMax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","BrushTargetManager$1","DATA_ZOOM_ID_BASE","makeInternalComponentId","DataZoomFeature","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","history.push","dimName","findDataZoom","minMaxSpan","sliderMove","found","dzModel","has","batch","zrUtil.clone","nextActive","history.pop","dzFeatureModel","setting","history.count","view","zoomActive","registerInternalOptionCreator","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisMainType","axisIndexPropName","newOpt","DataZoom","installDataZoomSelect","TimelineModel","currentIndex","state","thisOption","dataArr","names","processedDataArr","convertOptionIdName","getDataItemValue","isObject","dimType","SeriesData","TimelineModel$1","SliderTimelineModel","inheritDefaultOption","DataFormatMixin","SliderTimelineModel$1","TimelineView","TimelineView$1","TimelineAxis","scale","coordExtent","Axis","TimelineAxis$1","PI","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","mainGroup_1","labelGroup","axis_1","createTooltipMarkup","labelPosOpt","viewRect","getViewRect","parsedLabelPos","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","playPosition","prevBtnPosition","nextBtnPosition","controlPosition","showPlayBtn","showPrevBtn","showNextBtn","xLeft","xRight","axisExtent","layoutInfo","mainGroup","matrix.create","rotateOriginX","rotateOriginY","matrix.translate","matrix.rotate","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","fromPos","from","dimIdx","boundIdx","createScaleByModel","dataExtent","newGroup","graphic.Line","progressLine","ticks","tick","tickCoord","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","giveSymbol","enableHoverEmphasis","labelModel","labels","labelItem","normalLabelModel","hoverLabelModel","progressLabelModel","rotation","playState","inverse","makeBtn","onclick","willRotate","iconSize","btn","makeControlIcon","pointerModel","me","callback","pointer","pointerMoveTo","nextState","mousePos","toCoord","numberUtil.asc","targetDataIndex","vertex","trans","graphic.applyTransform","axisCoord","nextIndex","tickSymbols","tickLabels","OrdinalScale","TimeScale","IntervalScale","objPath","symbol","color","symbolType","symbolSize","normalizeSymbolSize","symbolOffset","normalizeSymbolOffset","symbolRotate","noAnimation","animationCfg","SliderTimelineView$1","installTimelineAction","timelinePreprocessor","timelineOpt","compatibleEC2","ec2Types","transferItem","controlStyle","dataItem","itemStyleEmphasis","label","labelNormal","excludeLabelAttr","obj","attr","randomColor","heikinAshiDataset","openIdx","closeIdx","highIdx","lowIdx","prevCandle","candle","open","high","low","ROUND_UP","ROUND_DOWN","roundTimeframe","timeframems","timestamp","direction","buildTooltipCost","trade","order","formatPriceCurrency","buildToolTip","side","formatPercent","buildAdjustmentToolTip","ADJUSTMENT_SYMBOL","OPEN_CLOSE_SYMBOL","SHORT_COLOR","LONG_COLOR","getTradeEntries","dataset","filteredTrades","tradeData","AxisPointerComponent","CalendarComponent","DatasetComponent","DataZoomComponent","GridComponent","LegendComponent","TimelineComponent","TitleComponent","ToolboxComponent","TooltipComponent","VisualMapComponent","VisualMapPiecewiseComponent","CandlestickChart","BarChart","LineChart","ScatterChart","CanvasRenderer","MARGINLEFT","MARGINRIGHT","NAMEGAP","SUBPLOTHEIGHT","upColor","upBorderColor","downColor","downBorderColor","buySignalColor","shortEntrySignalColor","sellSignalColor","shortexitSignalColor","_sfc_main$4","defineComponent","ECharts","props","candleChart","ref","buyData","sellData","chartOptions","strategy","computed","pair","timeframe","datasetColumns","hasData","chartTitle","updateChart","initial","_a","colDate","colOpen","colHigh","colLow","colClose","colVolume","colEntryData","colExitData","colShortEntryData","colShortExitData","subplotCount","_b","startingZoom","heikinashi","newArray","options","col","_c","sp","_d","_e","plotIndex","currGridIdx","sk","sv","nameTrades","tradesSeries","v","initializeChartOptions","dom","mouseIsLeft","updateSliderPosition","format","onMounted","watch","_component_v_chart","_resolveComponent","_createElementBlock","_hoisted_1","_ctx","_openBlock","_createBlock","PLOT_CONFIG","PLOT_CONFIG_NAME","getPlotConfigName","storePlotConfigName","plotConfigName","getAllCustomPlotConfig","getAllPlotConfigNames","getCustomPlotConfig","configName","configs","storeCustomPlotConfig","plotConfig","finalPlotConfig","_sfc_main","_hoisted_3","_mergeProps","$props","_cache","$event","_createElementVNode","selColor","graphType","availableGraphTypes","indicatorFilter","selAvailableIndicator","cancelled","filteredIndicators","newColor","combinedIndicator","emitIndicator","emit","clickCancel","usePlotConfigStore","defineStore","plotStore","botStore","useBotStore","plotConfigNameLoc","newSubplotName","selIndicatorName","addNewIndicator","showConfig","selSubPlot","tempPlotConfig","tempPlotConfigValid","isMainPlot","currentPlotConfig","subplots","usedColumns","addIndicator","newIndicator","indicator","selIndicator","newValue","plotConfigJson","removeIndicator","addSubplot","delSubplot","loadPlotConfig","loadConfigFromString","resetConfig","loadPlotConfigFromStrategy","showAlert","savePlotConfig","E","M","V","I","N","C","t","s","f","U","l","q","J","S","H","X","Y","u","Q","G","a","W","Z","ee","te","se","ie","oe","T","ne","o","le","ae","re","de","he","ce","ue","pe","fe","ge","ye","be","Oe","we","ve","K","A","r","c","B","L","D","g","b","_","O","k","P","$","R","F","Ce","settingsStore","useSettingsStore","showPlotConfig","strategyName","hasDataset","isLoadingDataset","LoadingStatus","noDatasetText","showPlotConfigModal","showConfigurator","refresh"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,47,51]}