import{g as Ve,o as E,c as j,a as B,t as ne,h as se,m as ot,d as lt,am as Ct,i as me,y as Fe,j as ye,n as $e,u as Mt,r as Tt,b as Pe,w as De,k as $,C as At,f as wt,x as Pt}from"./index-5b12648a.js";import{b1 as Dt,bW as D,c5 as He,J as Ee,f as ct,j as kt,bb as Ze,bm as It,P as Nt,c6 as We,c7 as ke,c8 as Bt,c9 as Ot,ca as fe,cb as Rt,B as Je,T as Ke,bw as $t,g as Ie,I as G,cc as Et,ae as Ne,cd as Vt,ce as vt,cf as Gt,e as re,cg as zt,b9 as Yt,s as ie,a9 as Qe,v as be,ch as Xt,af as _e,aT as jt,Y as Ut,n as et,b0 as ut,_ as Ge,Z as qt,o as W,bf as ge,w as Ft,x as Ht,aZ as Zt,aY as Wt,aW as Jt,ci as Kt,b4 as ft,be as Qt,C as ea,b as tt,i as gt,cj as ta,ck as aa,cl as ra,S as na,cm as ia,aD as sa,u as oa,aJ as la,aF as ca,aG as va,aH as ua,aI as fa}from"./install-ae7f4e90.js";import{c as ga}from"./createSeriesDataSimply-a509c4ad.js";const ha={name:"EyeOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},da=["aria-hidden","aria-label"],pa=["fill","width","height"],ma={d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"},ya={key:0};function ba(n,a,t,e,r,o){return E(),j("span",ot(n.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-off-icon",role:"img",onClick:a[0]||(a[0]=i=>n.$emit("click",i))}),[(E(),j("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[B("path",ma,[t.title?(E(),j("title",ya,ne(t.title),1)):se("",!0)])],8,pa))],16,da)}const La=Ve(ha,[["render",ba]]),Sa={name:"EyeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},_a=["aria-hidden","aria-label"],xa=["fill","width","height"],Ca={d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},Ma={key:0};function Ta(n,a,t,e,r,o){return E(),j("span",ot(n.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-icon",role:"img",onClick:a[0]||(a[0]=i=>n.$emit("click",i))}),[(E(),j("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[B("path",Ca,[t.title?(E(),j("title",Ma,ne(t.title),1)):se("",!0)])],8,xa))],16,_a)}const Aa=Ve(Sa,[["render",Ta]]);var ae=Math.PI*2,q=Dt.CMD,wa=["top","right","bottom","left"];function Pa(n,a,t,e,r){var o=t.width,i=t.height;switch(n){case"top":e.set(t.x+o/2,t.y-a),r.set(0,-1);break;case"bottom":e.set(t.x+o/2,t.y+i+a),r.set(0,1);break;case"left":e.set(t.x-a,t.y+i/2),r.set(-1,0);break;case"right":e.set(t.x+o+a,t.y+i/2),r.set(1,0);break}}function Da(n,a,t,e,r,o,i,l,v){i-=n,l-=a;var u=Math.sqrt(i*i+l*l);i/=u,l/=u;var s=i*t+n,h=l*t+a;if(Math.abs(e-r)%ae<1e-4)return v[0]=s,v[1]=h,u-t;if(o){var g=e;e=fe(r),r=fe(g)}else e=fe(e),r=fe(r);e>r&&(r+=ae);var c=Math.atan2(l,i);if(c<0&&(c+=ae),c>=e&&c<=r||c+ae>=e&&c+ae<=r)return v[0]=s,v[1]=h,u-t;var f=t*Math.cos(e)+n,d=t*Math.sin(e)+a,p=t*Math.cos(r)+n,m=t*Math.sin(r)+a,y=(f-i)*(f-i)+(d-l)*(d-l),b=(p-i)*(p-i)+(m-l)*(m-l);return y<b?(v[0]=f,v[1]=d,Math.sqrt(y)):(v[0]=p,v[1]=m,Math.sqrt(b))}function Le(n,a,t,e,r,o,i,l){var v=r-n,u=o-a,s=t-n,h=e-a,g=Math.sqrt(s*s+h*h);s/=g,h/=g;var c=v*s+u*h,f=c/g;l&&(f=Math.min(Math.max(f,0),1)),f*=g;var d=i[0]=n+f*s,p=i[1]=a+f*h;return Math.sqrt((d-r)*(d-r)+(p-o)*(p-o))}function ht(n,a,t,e,r,o,i){t<0&&(n=n+t,t=-t),e<0&&(a=a+e,e=-e);var l=n+t,v=a+e,u=i[0]=Math.min(Math.max(r,n),l),s=i[1]=Math.min(Math.max(o,a),v);return Math.sqrt((u-r)*(u-r)+(s-o)*(s-o))}var V=[];function ka(n,a,t){var e=ht(a.x,a.y,a.width,a.height,n.x,n.y,V);return t.set(V[0],V[1]),e}function Ia(n,a,t){for(var e=0,r=0,o=0,i=0,l,v,u=1/0,s=a.data,h=n.x,g=n.y,c=0;c<s.length;){var f=s[c++];c===1&&(e=s[c],r=s[c+1],o=e,i=r);var d=u;switch(f){case q.M:o=s[c++],i=s[c++],e=o,r=i;break;case q.L:d=Le(e,r,s[c],s[c+1],h,g,V,!0),e=s[c++],r=s[c++];break;case q.C:d=Ot(e,r,s[c++],s[c++],s[c++],s[c++],s[c],s[c+1],h,g,V),e=s[c++],r=s[c++];break;case q.Q:d=Bt(e,r,s[c++],s[c++],s[c],s[c+1],h,g,V),e=s[c++],r=s[c++];break;case q.A:var p=s[c++],m=s[c++],y=s[c++],b=s[c++],x=s[c++],_=s[c++];c+=1;var A=!!(1-s[c++]);l=Math.cos(x)*y+p,v=Math.sin(x)*b+m,c<=1&&(o=l,i=v);var M=(h-p)*b/y+p;d=Da(p,m,b,x,x+_,A,M,g,V),e=Math.cos(x+_)*y+p,r=Math.sin(x+_)*b+m;break;case q.R:o=e=s[c++],i=r=s[c++];var L=s[c++],C=s[c++];d=ht(o,i,L,C,h,g,V);break;case q.Z:d=Le(e,r,o,i,h,g,V,!0),e=o,r=i;break}d<u&&(u=d,t.set(V[0],V[1]))}return u}var z=new D,S=new D,T=new D,X=new D,Y=new D;function at(n,a){if(n){var t=n.getTextGuideLine(),e=n.getTextContent();if(e&&t){var r=n.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],i=r.candidates||wa,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var v=1/0,u=r.anchor,s=n.getComputedTransform(),h=s&&It([],s),g=a.get("length2")||0;u&&T.copy(u);for(var c=0;c<i.length;c++){var f=i[c];Pa(f,0,l,z,X),D.scaleAndAdd(S,z,X,g),S.transform(h);var d=n.getBoundingRect(),p=u?u.distance(S):n instanceof Nt?Ia(S,n.path,T):ka(S,d,T);p<v&&(v=p,S.transform(s),T.transform(s),T.toArray(o[0]),S.toArray(o[1]),z.toArray(o[2]))}dt(o,a.get("minTurnAngle")),t.setShape({points:o})}}}var Se=[],k=new D;function dt(n,a){if(a<=180&&a>0){a=a/180*Math.PI,z.fromArray(n[0]),S.fromArray(n[1]),T.fromArray(n[2]),D.sub(X,z,S),D.sub(Y,T,S);var t=X.len(),e=Y.len();if(!(t<.001||e<.001)){X.scale(1/t),Y.scale(1/e);var r=X.dot(Y),o=Math.cos(a);if(o<r){var i=Le(S.x,S.y,T.x,T.y,z.x,z.y,Se,!1);k.fromArray(Se),k.scaleAndAdd(Y,i/Math.tan(Math.PI-a));var l=T.x!==S.x?(k.x-S.x)/(T.x-S.x):(k.y-S.y)/(T.y-S.y);if(isNaN(l))return;l<0?D.copy(k,S):l>1&&D.copy(k,T),k.toArray(n[1])}}}}function Na(n,a,t){if(t<=180&&t>0){t=t/180*Math.PI,z.fromArray(n[0]),S.fromArray(n[1]),T.fromArray(n[2]),D.sub(X,S,z),D.sub(Y,T,S);var e=X.len(),r=Y.len();if(!(e<.001||r<.001)){X.scale(1/e),Y.scale(1/r);var o=X.dot(a),i=Math.cos(t);if(o<i){var l=Le(S.x,S.y,T.x,T.y,z.x,z.y,Se,!1);k.fromArray(Se);var v=Math.PI/2,u=Math.acos(Y.dot(a)),s=v+u-t;if(s>=v)D.copy(k,T);else{k.scaleAndAdd(Y,l/Math.tan(Math.PI/2-s));var h=T.x!==S.x?(k.x-S.x)/(T.x-S.x):(k.y-S.y)/(T.y-S.y);if(isNaN(h))return;h<0?D.copy(k,S):h>1&&D.copy(k,T)}k.toArray(n[1])}}}}function rt(n,a,t,e){var r=t==="normal",o=r?n:n.ensureState(t);o.ignore=a;var i=e.get("smooth");i&&i===!0&&(i=.3),o.shape=o.shape||{},i>0&&(o.shape.smooth=i);var l=e.getModel("lineStyle").getLineStyle();r?n.useStyle(l):o.style=l}function Ba(n,a){var t=a.smooth,e=a.points;if(e)if(n.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var r=We(e[0],e[1]),o=We(e[1],e[2]);if(!r||!o){n.lineTo(e[1][0],e[1][1]),n.lineTo(e[2][0],e[2][1]);return}var i=Math.min(r,o)*t,l=ke([],e[1],e[0],i/r),v=ke([],e[1],e[2],i/o),u=ke([],l,v,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),n.bezierCurveTo(v[0],v[1],v[0],v[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)n.lineTo(e[s][0],e[s][1])}function pt(n,a,t){var e=n.getTextGuideLine(),r=n.getTextContent();if(!r){e&&n.removeTextGuideLine();return}for(var o=a.normal,i=o.get("show"),l=r.ignore,v=0;v<He.length;v++){var u=He[v],s=a[u],h=u==="normal";if(s){var g=s.get("show"),c=h?l:Ee(r.states[u]&&r.states[u].ignore,l);if(c||!Ee(g,i)){var f=h?e:e&&e.states[u];f&&(f.ignore=!0);continue}e||(e=new ct,n.setTextGuideLine(e),!h&&(l||!i)&&rt(e,!0,"normal",a.normal),n.stateProxy&&(e.stateProxy=n.stateProxy)),rt(e,!1,u,s)}}if(e){kt(e.style,t),e.style.fill=null;var d=o.get("showAbove"),p=n.textGuideLineConfig=n.textGuideLineConfig||{};p.showAbove=d||!1,e.buildPath=Ba}}function mt(n,a){a=a||"labelLine";for(var t={normal:n.getModel(a)},e=0;e<Ze.length;e++){var r=Ze[e];t[r]=n.getModel([r,a])}return t}function Oa(n){if(n){for(var a=[],t=0;t<n.length;t++)a.push(n[t].slice());return a}}function Ra(n,a){var t=n.label,e=a&&a.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:Oa(e&&e.shape.points)}}var nt=["align","verticalAlign","width","height","fontSize"],N=new Rt,Be=_e(),$a=_e();function he(n,a,t){for(var e=0;e<t.length;e++){var r=t[e];a[r]!=null&&(n[r]=a[r])}}var de=["x","y","rotation"],Ea=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(a,t,e,r,o){var i=r.style,l=r.__hostTarget,v=l.textConfig||{},u=r.getComputedTransform(),s=r.getBoundingRect().plain();Je.applyTransform(s,s,u),u?N.setLocalTransform(u):(N.x=N.y=N.rotation=N.originX=N.originY=0,N.scaleX=N.scaleY=1);var h=r.__hostTarget,g;if(h){g=h.getBoundingRect().plain();var c=h.getComputedTransform();Je.applyTransform(g,g,c)}var f=g&&h.getTextGuideLine();this._labelList.push({label:r,labelLine:f,seriesModel:e,dataIndex:a,dataType:t,layoutOption:o,computedLayoutOption:null,rect:s,hostRect:g,priority:g?g.width*g.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:f&&f.ignore,x:N.x,y:N.y,scaleX:N.scaleX,scaleY:N.scaleY,rotation:N.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:r.cursor,attachedPos:v.position,attachedRot:v.rotation}})},n.prototype.addLabelsOfSeries=function(a){var t=this;this._chartViewList.push(a);var e=a.__model,r=e.get("labelLayout");(Ke(r)||$t(r).length)&&a.group.traverse(function(o){if(o.ignore)return!0;var i=o.getTextContent(),l=Ie(o);i&&!i.disableLabelLayout&&t._addLabel(l.dataIndex,l.dataType,e,i,r)})},n.prototype.updateLayoutConfig=function(a){var t=a.getWidth(),e=a.getHeight();function r(b,x){return function(){at(b,x)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],l=i.label,v=l.__hostTarget,u=i.defaultAttr,s=void 0;Ke(i.layoutOption)?s=i.layoutOption(Ra(i,v)):s=i.layoutOption,s=s||{},i.computedLayoutOption=s;var h=Math.PI/180;v&&v.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:u.attachedPos,rotation:s.rotate!=null?s.rotate*h:u.attachedRot,offset:[s.dx||0,s.dy||0]});var g=!1;if(s.x!=null?(l.x=G(s.x,t),l.setStyle("x",0),g=!0):(l.x=u.x,l.setStyle("x",u.style.x)),s.y!=null?(l.y=G(s.y,e),l.setStyle("y",0),g=!0):(l.y=u.y,l.setStyle("y",u.style.y)),s.labelLinePoints){var c=v.getTextGuideLine();c&&(c.setShape({points:s.labelLinePoints}),g=!1)}var f=Be(l);f.needsUpdateLabelLine=g,l.rotation=s.rotate!=null?s.rotate*h:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var d=0;d<nt.length;d++){var p=nt[d];l.setStyle(p,s[p]!=null?s[p]:u.style[p])}if(s.draggable){if(l.draggable=!0,l.cursor="move",v){var m=i.seriesModel;if(i.dataIndex!=null){var y=i.seriesModel.getData(i.dataType);m=y.getItemModel(i.dataIndex)}l.on("drag",r(v,m.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},n.prototype.layout=function(a){var t=a.getWidth(),e=a.getHeight(),r=Et(this._labelList),o=Ne(r,function(v){return v.layoutOption.moveOverlap==="shiftX"}),i=Ne(r,function(v){return v.layoutOption.moveOverlap==="shiftY"});Vt(o,0,t),vt(i,0,e);var l=Ne(r,function(v){return v.layoutOption.hideOverlap});Gt(l)},n.prototype.processLabelsOverall=function(){var a=this;re(this._chartViewList,function(t){var e=t.__model,r=t.ignoreLabelLineUpdate,o=e.isAnimationEnabled();t.group.traverse(function(i){if(i.ignore&&!i.forceLabelAnimation)return!0;var l=!r,v=i.getTextContent();!l&&v&&(l=Be(v).needsUpdateLabelLine),l&&a._updateLabelLine(i,e),o&&a._animateLabels(i,e)})})},n.prototype._updateLabelLine=function(a,t){var e=a.getTextContent(),r=Ie(a),o=r.dataIndex;if(e&&o!=null){var i=t.getData(r.dataType),l=i.getItemModel(o),v={},u=i.getItemVisual(o,"style"),s=i.getVisual("drawType");v.stroke=u[s];var h=l.getModel("labelLine");pt(a,mt(l),v),at(a,h)}},n.prototype._animateLabels=function(a,t){var e=a.getTextContent(),r=a.getTextGuideLine();if(e&&(a.forceLabelAnimation||!e.ignore&&!e.invisible&&!a.disableLabelAnimation&&!zt(a))){var o=Be(e),i=o.oldLayout,l=Ie(a),v=l.dataIndex,u={x:e.x,y:e.y,rotation:e.rotation},s=t.getData(l.dataType);if(i){e.attr(i);var g=a.prevStates;g&&(Qe(g,"select")>=0&&e.attr(o.oldLayoutSelect),Qe(g,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),be(e,u,t,v)}else if(e.attr(u),!Yt(e).valueAnimation){var h=Ee(e.style.opacity,1);e.style.opacity=0,ie(e,{style:{opacity:h}},t,v)}if(o.oldLayout=u,e.states.select){var c=o.oldLayoutSelect={};he(c,u,de),he(c,e.states.select,de)}if(e.states.emphasis){var f=o.oldLayoutEmphasis={};he(f,u,de),he(f,e.states.emphasis,de)}Xt(e,v,s,t,t)}if(r&&!r.ignore&&!r.invisible){var o=$a(r),i=o.oldLayout,d={points:r.shape.points};i?(r.attr({shape:i}),be(r,{shape:d},t)):(r.setShape(d),r.style.strokePercent=0,ie(r,{style:{strokePercent:1}},t)),o.oldLayout=d}},n}();const Va=Ea;var Oe=_e();function Ga(n){n.registerUpdateLifecycle("series:beforeupdate",function(a,t,e){var r=Oe(t).labelManager;r||(r=Oe(t).labelManager=new Va),r.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(a,t,e){var r=Oe(t).labelManager;e.updatedSeries.forEach(function(o){r.addLabelsOfSeries(t.getViewOfSeriesModel(o))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}var pe=Math.PI*2,it=Math.PI/180;function yt(n,a){return Ut(n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function bt(n,a){var t=yt(n,a),e=n.get("center"),r=n.get("radius");et(r)||(r=[0,r]);var o=G(t.width,a.getWidth()),i=G(t.height,a.getHeight()),l=Math.min(o,i),v=G(r[0],l/2),u=G(r[1],l/2),s,h,g=n.coordinateSystem;if(g){var c=g.dataToPoint(e);s=c[0]||0,h=c[1]||0}else et(e)||(e=[e,e]),s=G(e[0],o)+t.x,h=G(e[1],i)+t.y;return{cx:s,cy:h,r0:v,r:u}}function za(n,a,t){a.eachSeriesByType(n,function(e){var r=e.getData(),o=r.mapDimension("value"),i=yt(e,t),l=bt(e,t),v=l.cx,u=l.cy,s=l.r,h=l.r0,g=-e.get("startAngle")*it,c=e.get("minAngle")*it,f=0;r.each(o,function(P){!isNaN(P)&&f++});var d=r.getSum(o),p=Math.PI/(d||f)*2,m=e.get("clockwise"),y=e.get("roseType"),b=e.get("stillShowZeroSum"),x=r.getDataExtent(o);x[0]=0;var _=pe,A=0,M=g,L=m?1:-1;if(r.setLayout({viewRect:i,r:s}),r.each(o,function(P,O){var w;if(isNaN(P)){r.setItemLayout(O,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:v,cy:u,r0:h,r:y?NaN:s});return}y!=="area"?w=d===0&&b?p:P*p:w=pe/f,w<c?(w=c,_-=c):A+=P;var I=M+L*w;r.setItemLayout(O,{angle:w,startAngle:M,endAngle:I,clockwise:m,cx:v,cy:u,r0:h,r:y?jt(P,x,[h,s]):s}),M=I}),_<pe&&f)if(_<=.001){var C=pe/f;r.each(o,function(P,O){if(!isNaN(P)){var w=r.getItemLayout(O);w.angle=C,w.startAngle=g+L*O*C,w.endAngle=g+L*(O+1)*C}})}else p=_/A,M=g,r.each(o,function(P,O){if(!isNaN(P)){var w=r.getItemLayout(O),I=w.angle===c?c:P*p;w.startAngle=M,w.endAngle=M+L*I,M+=L*I}})})}function Ya(n){return{seriesType:n,reset:function(a,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var r=a.getData();r.filterSelf(function(o){for(var i=r.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(i))return!1;return!0})}}}}var Xa=Math.PI/180;function st(n,a,t,e,r,o,i,l,v,u){if(n.length<2)return;function s(d){for(var p=d.rB,m=p*p,y=0;y<d.list.length;y++){var b=d.list[y],x=Math.abs(b.label.y-t),_=e+b.len,A=_*_,M=Math.sqrt((1-Math.abs(x*x/m))*A),L=a+(M+b.len2)*r,C=L-b.label.x,P=b.targetTextWidth-C*r;Lt(b,P,!0),b.label.x=L}}function h(d){for(var p={list:[],maxY:0},m={list:[],maxY:0},y=0;y<d.length;y++)if(d[y].labelAlignTo==="none"){var b=d[y],x=b.label.y>t?m:p,_=Math.abs(b.label.y-t);if(_>=x.maxY){var A=b.label.x-a-b.len2*r,M=e+b.len,L=Math.abs(A)<M?Math.sqrt(_*_/(1-A*A/M/M)):M;x.rB=L,x.maxY=_}x.list.push(b)}s(p),s(m)}for(var g=n.length,c=0;c<g;c++)if(n[c].position==="outer"&&n[c].labelAlignTo==="labelLine"){var f=n[c].label.x-u;n[c].linePoints[1][0]+=f,n[c].label.x=u}vt(n,v,v+i)&&h(n)}function ja(n,a,t,e,r,o,i,l){for(var v=[],u=[],s=Number.MAX_VALUE,h=-Number.MAX_VALUE,g=0;g<n.length;g++){var c=n[g].label;Re(n[g])||(c.x<a?(s=Math.min(s,c.x),v.push(n[g])):(h=Math.max(h,c.x),u.push(n[g])))}for(var g=0;g<n.length;g++){var f=n[g];if(!Re(f)&&f.linePoints){if(f.labelStyleWidth!=null)continue;var c=f.label,d=f.linePoints,p=void 0;f.labelAlignTo==="edge"?c.x<a?p=d[2][0]-f.labelDistance-i-f.edgeDistance:p=i+r-f.edgeDistance-d[2][0]-f.labelDistance:f.labelAlignTo==="labelLine"?c.x<a?p=s-i-f.bleedMargin:p=i+r-h-f.bleedMargin:c.x<a?p=c.x-i-f.bleedMargin:p=i+r-c.x-f.bleedMargin,f.targetTextWidth=p,Lt(f,p)}}st(u,a,t,e,1,r,o,i,l,h),st(v,a,t,e,-1,r,o,i,l,s);for(var g=0;g<n.length;g++){var f=n[g];if(!Re(f)&&f.linePoints){var c=f.label,d=f.linePoints,m=f.labelAlignTo==="edge",y=c.style.padding,b=y?y[1]+y[3]:0,x=c.style.backgroundColor?0:b,_=f.rect.width+x,A=d[1][0]-d[2][0];m?c.x<a?d[2][0]=i+f.edgeDistance+_+f.labelDistance:d[2][0]=i+r-f.edgeDistance-_-f.labelDistance:(c.x<a?d[2][0]=c.x+f.labelDistance:d[2][0]=c.x-f.labelDistance,d[1][0]=d[2][0]+A),d[1][1]=d[2][1]=c.y}}}function Lt(n,a,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var e=n.label,r=e.style,o=n.rect,i=r.backgroundColor,l=r.padding,v=l?l[1]+l[3]:0,u=r.overflow,s=o.width+(i?0:v);if(a<s||t){var h=o.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-v);var g=e.getBoundingRect();e.setStyle("width",Math.ceil(g.width)),e.setStyle("backgroundColor",i)}else{var c=a-v,f=a<s?c:t?c>n.unconstrainedWidth?null:c:null;e.setStyle("width",f)}var d=e.getBoundingRect();o.width=d.width;var p=(e.style.margin||0)+2.1;o.height=d.height+p,o.y-=(o.height-h)/2}}}function Re(n){return n.position==="center"}function Ua(n){var a=n.getData(),t=[],e,r,o=!1,i=(n.get("minShowLabelAngle")||0)*Xa,l=a.getLayout("viewRect"),v=a.getLayout("r"),u=l.width,s=l.x,h=l.y,g=l.height;function c(A){A.ignore=!0}function f(A){if(!A.ignore)return!0;for(var M in A.states)if(A.states[M].ignore===!1)return!0;return!1}a.each(function(A){var M=a.getItemGraphicEl(A),L=M.shape,C=M.getTextContent(),P=M.getTextGuideLine(),O=a.getItemModel(A),w=O.getModel("label"),I=w.get("position")||O.get(["emphasis","label","position"]),xe=w.get("distanceToLabelLine"),Ce=w.get("alignTo"),Me=G(w.get("edgeDistance"),u),St=w.get("bleedMargin"),oe=O.getModel("labelLine"),J=oe.get("length");J=G(J,u);var le=oe.get("length2");if(le=G(le,u),Math.abs(L.endAngle-L.startAngle)<i){re(C.states,c),C.ignore=!0,P&&(re(P.states,c),P.ignore=!0);return}if(f(C)){var ce=(L.startAngle+L.endAngle)/2,R=Math.cos(ce),U=Math.sin(ce),K,ve,ze,ue;e=L.cx,r=L.cy;var F=I==="inside"||I==="inner";if(I==="center")K=L.cx,ve=L.cy,ue="center";else{var Te=(F?(L.r+L.r0)/2*R:L.r*R)+e,Ae=(F?(L.r+L.r0)/2*U:L.r*U)+r;if(K=Te+R*3,ve=Ae+U*3,!F){var Ye=Te+R*(J+v-L.r),Xe=Ae+U*(J+v-L.r),je=Ye+(R<0?-1:1)*le,Ue=Xe;Ce==="edge"?K=R<0?s+Me:s+u-Me:K=je+(R<0?-xe:xe),ve=Ue,ze=[[Te,Ae],[Ye,Xe],[je,Ue]]}ue=F?"center":Ce==="edge"?R>0?"right":"left":R>0?"left":"right"}var Q=Math.PI,H=0,ee=w.get("rotate");if(ut(ee))H=ee*(Q/180);else if(I==="center")H=0;else if(ee==="radial"||ee===!0){var _t=R<0?-ce+Q:-ce;H=_t}else if(ee==="tangential"&&I!=="outside"&&I!=="outer"){var Z=Math.atan2(R,U);Z<0&&(Z=Q*2+Z);var xt=U>0;xt&&(Z=Q+Z),H=Z-Q}if(o=!!H,C.x=K,C.y=ve,C.rotation=H,C.setStyle({verticalAlign:"middle"}),F){C.setStyle({align:ue});var we=C.states.select;we&&(we.x+=C.x,we.y+=C.y)}else{var te=C.getBoundingRect().clone();te.applyTransform(C.getComputedTransform());var qe=(C.style.margin||0)+2.1;te.y-=qe/2,te.height+=qe,t.push({label:C,labelLine:P,position:I,len:J,len2:le,minTurnAngle:oe.get("minTurnAngle"),maxSurfaceAngle:oe.get("maxSurfaceAngle"),surfaceNormal:new D(R,U),linePoints:ze,textAlign:ue,labelDistance:xe,labelAlignTo:Ce,edgeDistance:Me,bleedMargin:St,rect:te,unconstrainedWidth:te.width,labelStyleWidth:C.style.width})}M.setTextConfig({inside:F})}}),!o&&n.get("avoidLabelOverlap")&&ja(t,e,r,v,u,g,s,h);for(var d=0;d<t.length;d++){var p=t[d],m=p.label,y=p.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),b&&(re(m.states,c),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var _=p.linePoints;b||!_?(re(y.states,c),y.ignore=!0):(dt(_,p.minTurnAngle),Na(_,p.surfaceNormal,p.maxSurfaceAngle),y.setShape({points:_}),m.__hostTarget.textGuideLineConfig={anchor:new D(_[0][0],_[0][1])})}}}var qa=function(n){Ge(a,n);function a(t,e,r){var o=n.call(this)||this;o.z2=2;var i=new qt;return o.setTextContent(i),o.updateData(t,e,r,!0),o}return a.prototype.updateData=function(t,e,r,o){var i=this,l=t.hostModel,v=t.getItemModel(e),u=v.getModel("emphasis"),s=t.getItemLayout(e),h=W(ge(v.getModel("itemStyle"),s,!0),s);if(isNaN(h.startAngle)){i.setShape(h);return}if(o){i.setShape(h);var g=l.getShallow("animationType");l.ecModel.ssr?(ie(i,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),i.originX=h.cx,i.originY=h.cy):g==="scale"?(i.shape.r=s.r0,ie(i,{shape:{r:s.r}},l,e)):r!=null?(i.setShape({startAngle:r,endAngle:r}),ie(i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(i.shape.endAngle=s.startAngle,be(i,{shape:{endAngle:s.endAngle}},l,e))}else Ft(i),be(i,{shape:h},l,e);i.useStyle(t.getItemVisual(e,"style")),Ht(i,v);var c=(s.startAngle+s.endAngle)/2,f=l.get("selectedOffset"),d=Math.cos(c)*f,p=Math.sin(c)*f,m=v.getShallow("cursor");m&&i.attr("cursor",m),this._updateLabel(l,t,e),i.ensureState("emphasis").shape=W({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},ge(u.getModel("itemStyle"),s)),W(i.ensureState("select"),{x:d,y:p,shape:ge(v.getModel(["select","itemStyle"]),s)}),W(i.ensureState("blur"),{shape:ge(v.getModel(["blur","itemStyle"]),s)});var y=i.getTextGuideLine(),b=i.getTextContent();y&&W(y.ensureState("select"),{x:d,y:p}),W(b.ensureState("select"),{x:d,y:p}),Zt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},a.prototype._updateLabel=function(t,e,r){var o=this,i=e.getItemModel(r),l=i.getModel("labelLine"),v=e.getItemVisual(r,"style"),u=v&&v.fill,s=v&&v.opacity;Wt(o,Jt(i),{labelFetcher:e.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:s,defaultText:t.getFormattedLabel(r,"normal")||e.getName(r)});var h=o.getTextContent();o.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var g=t.get(["label","position"]);if(g!=="outside"&&g!=="outer")o.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new ct,this.setTextGuideLine(c)),pt(this,mt(i),{stroke:u,opacity:Kt(l.get(["lineStyle","opacity"]),s,1)})}},a}(ft),Fa=function(n){Ge(a,n);function a(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a.prototype.render=function(t,e,r,o){var i=t.getData(),l=this._data,v=this.group,u;if(!l&&i.count()>0){for(var s=i.getItemLayout(0),h=1;isNaN(s&&s.startAngle)&&h<i.count();++h)s=i.getItemLayout(h);s&&(u=s.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),i.count()===0&&t.get("showEmptyCircle")){var g=new ft({shape:bt(t,r)});g.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=g,v.add(g)}i.diff(l).add(function(c){var f=new qa(i,c,u);i.setItemGraphicEl(c,f),v.add(f)}).update(function(c,f){var d=l.getItemGraphicEl(f);d.updateData(i,c,u),d.off("click"),v.add(d),i.setItemGraphicEl(c,d)}).remove(function(c){var f=l.getItemGraphicEl(c);Qt(f,t,c)}).execute(),Ua(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,e){var r=e.getData(),o=r.getItemLayout(0);if(o){var i=t[0]-o.cx,l=t[1]-o.cy,v=Math.sqrt(i*i+l*l);return v<=o.r&&v>=o.r0}},a.type="pie",a}(ea);const Ha=Fa;var Za=function(){function n(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return n.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},n.prototype.containName=function(a){var t=this._getRawData();return t.indexOfName(a)>=0},n.prototype.indexOfName=function(a){var t=this._getDataWithEncodedVisual();return t.indexOfName(a)},n.prototype.getItemVisual=function(a,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,t)},n}();const Wa=Za;var Ja=_e(),Ka=function(n){Ge(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Wa(tt(this.getData,this),tt(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return ga(this,{coordDimensions:["value"],encodeDefaulter:gt(ta,this)})},a.prototype.getDataParams=function(t){var e=this.getData(),r=Ja(e),o=r.seats;if(!o){var i=[];e.each(e.mapDimension("value"),function(v){i.push(v)}),o=r.seats=aa(i,e.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,t);return l.percent=o[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){ra(t,"labelLine",["show"]);var e=t.labelLine,r=t.emphasis.labelLine;e.show=e.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(na);const Qa=Ka;function er(n){return{seriesType:n,reset:function(a,t){var e=a.getData();e.filterSelf(function(r){var o=e.mapDimension("value"),i=e.get(o,r);return!(ut(i)&&!isNaN(i)&&i<0)})}}}function tr(n){n.registerChartView(Ha),n.registerSeriesModel(Qa),ia("pie",n.registerAction),n.registerLayout(gt(za,"pie")),n.registerProcessor(Ya("pie")),n.registerProcessor(er("pie"))}oa([tr,la,ca,va,ua,fa,Ga]);const ar=lt({name:"BalanceChart",components:{"v-chart":sa},props:{currencies:{required:!0,type:Array},showTitle:{required:!1,type:Boolean}},setup(n){const a=Ct();return{balanceChartOptions:me(()=>({title:{text:"Balance",show:n.showTitle},center:["50%","50%"],backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["balance","currency","est_stake","free","used","stake"],source:n.currencies},tooltip:{trigger:"item",formatter:e=>`${Fe(e.value.balance,e.value.currency,8)}<br />${e.percent}% (${Fe(e.value.est_stake,e.value.stake)})`},series:[{type:"pie",radius:["40%","70%"],encode:{value:"est_stake",itemName:"currency",tooltip:["balance","currency"]},label:{formatter:"{b} - {d}%"},tooltip:{show:!0}}]})),settingsStore:a}}});function rr(n,a,t,e,r,o){const i=$e("v-chart");return n.currencies?(E(),ye(i,{key:0,option:n.balanceChartOptions,theme:n.settingsStore.chartTheme,autoresize:""},null,8,["option","theme"])):se("",!0)}const nr=Ve(ar,[["render",rr],["__scopeId","data-v-ee06b227"]]),ir={class:"mb-2"},sr=B("label",{class:"me-auto h3"},"Balance",-1),or={class:"float-end d-flex flex-row"},lr={key:0},cr=B("td",null,[B("strong",null,"Total")],-1),vr=["title"],hr=lt({__name:"BotBalance",setup(n){const a=Mt(),t=Tt(!0),e=me(()=>Number((.1**a.activeBot.stakeCurrencyDecimals).toFixed(8))),r=me(()=>{var l;return t.value?(l=a.activeBot.balance.currencies)==null?void 0:l.filter(v=>v.est_stake>=e.value):a.activeBot.balance.currencies}),o=l=>l?At(l,5):"",i=me(()=>[{key:"currency",label:"Currency"},{key:"free",label:"Available",formatter:o},{key:"est_stake",label:`in ${a.activeBot.balance.stake}`,formatter:o}]);return(l,v)=>{const u=$e("b-button"),s=$e("b-table");return E(),j("div",null,[B("div",ir,[sr,B("div",or,[Pe(u,{size:"sm",title:"Hide small balances",onClick:v[0]||(v[0]=h=>t.value=!t.value)},{default:De(()=>[t.value?(E(),ye(La,{key:0,size:16})):(E(),ye(Aa,{key:1,size:16}))]),_:1}),Pe(u,{class:"float-end",size:"sm",onClick:$(a).activeBot.getBalance},{default:De(()=>[wt("â†»")]),_:1},8,["onClick"])])]),$(r)?(E(),ye(nr,{key:0,currencies:$(r)},null,8,["currencies"])):se("",!0),B("div",null,[$(a).activeBot.balance.note?(E(),j("p",lr,[B("strong",null,ne($(a).activeBot.balance.note),1)])):se("",!0),Pe(s,{class:"table-sm",items:$(r),fields:$(i)},{"custom-foot":De(()=>[cr,B("td",null,[B("span",{class:"font-italic",title:`Increase over initial capital of ${o($(a).activeBot.balance.starting_capital)} ${$(a).activeBot.balance.stake}`},ne($(Pt)($(a).activeBot.balance.starting_capital_ratio)),9,vr)]),B("td",null,[B("strong",null,ne(o($(a).activeBot.balance.total)),1)])]),_:1},8,["items","fields"])])])}}});export{hr as _};
//# sourceMappingURL=BotBalance.vue_vue_type_script_setup_true_lang-98b508d7.js.map
