import{a as W,b as q,_ as H}from"./TradesLogChart-9Xt2Wu3s.js";import{a as Q}from"./TradeList-uvoEglTB.js";import{b as X,c as Y}from"./InfoBox.vue_vue_type_script_setup_true_lang-gGmBMyPN.js";import{g as z,u as A,m as _,o as m,y as B,w as s,h as e,x,e as D,A as C,z as Z,c as I,a as L,n as ee,a6 as te,l as oe,J as ae,r as se,K as S,b1 as v,v as re,M as j,b as r,N as k}from"./index-UoLg79PO.js";import{_ as le,a as ne}from"./TimePeriodChart-Vg3PA7mh.js";import"./installCanvasRenderer-SLNNinUm.js";import"./install-pXQv93Vf.js";const ie={class:"d-flex flex-row"},de={key:2},ce={key:0},ue=["title"],_e={class:"text-small"},pe={key:0},fe={class:"text-profit"},me={class:"text-loss"},ye=z({__name:"BotComparisonList",setup(E){const c=(d,a)=>!d.profitClosed||!a.profitClosed?-1:d.profitClosed-a.profitClosed,o=A(),T=_({get:()=>Object.values(o.botStores).every(d=>d.isSelected),set:d=>{for(const a in o.botStores)o.botStores[a].isSelected=d}}),R=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],O=_(()=>{const d=[],a={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(o.allProfit).forEach(([l,n])=>{var f,h,b,V,g,$,N;const y=o.allOpenTrades[l].reduce((u,i)=>u+i.stake_amount,0),t=o.allOpenTrades[l].reduce((u,i)=>u+(i.total_profit_ratio??i.profit_ratio)*i.stake_amount,0)/y,p=o.allOpenTrades[l].reduce((u,i)=>u+(i.total_profit_abs??i.profit_abs??0),0);d.push({botId:l,botName:o.availableBots[l].botName||o.availableBots[l].botId,trades:`${o.allOpenTradeCount[l]} / ${((f=o.allBotState[l])==null?void 0:f.max_open_trades)||"N/A"}`,profitClosed:n.profit_closed_coin,profitClosedRatio:n.profit_closed_ratio||0,stakeCurrency:((h=o.allBotState[l])==null?void 0:h.stake_currency)||"",profitOpenRatio:t,profitOpen:p,wins:n.winning_trades,losses:n.losing_trades,balance:((b=o.allBalance[l])==null?void 0:b.total_bot)??((V=o.allBalance[l])==null?void 0:V.total),stakeCurrencyDecimals:((g=o.allBotState[l])==null?void 0:g.stake_currency_decimals)||3,isDryRun:($=o.allBotState[l])==null?void 0:$.dry_run}),n.profit_closed_coin!==void 0&&o.botStores[l].isSelected&&(a.profitClosed+=n.profit_closed_coin,a.profitOpen+=p,a.wins+=n.winning_trades,a.losses+=n.losing_trades,a.stakeCurrency=((N=o.allBotState[l])==null?void 0:N.stake_currency)||a.stakeCurrency)}),d.sort(c),d.push(a),d});return(d,a)=>{const l=te,n=X,y=oe;return m(),B(y,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:e(O),fields:R},{"cell(botName)":s(({item:t,value:p})=>[L("div",ie,[t.botId&&e(o).botCount>1?(m(),B(l,{key:0,modelValue:e(o).botStores[t.botId??""].isSelected,"onUpdate:modelValue":f=>e(o).botStores[t.botId??""].isSelected=f,title:"Show this bot in Dashboard"},{default:s(()=>[D(x(p),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):C("",!0),!t.botId&&e(o).botCount>1?(m(),B(l,{key:1,modelValue:e(T),"onUpdate:modelValue":a[0]||(a[0]=f=>Z(T)?T.value=f:null),title:"Toggle all bots"},{default:s(()=>[D(x(p),1)]),_:2},1032,["modelValue"])):C("",!0),e(o).botCount<=1?(m(),I("span",de,x(p),1)):C("",!0)])]),"cell(profitOpen)":s(({item:t})=>[t.profitOpen&&t.botId!="Summary"?(m(),B(n,{key:0,"profit-ratio":t.profitOpenRatio,"profit-abs":t.profitOpen,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):C("",!0)]),"cell(profitClosed)":s(({item:t})=>[t.profitClosed&&t.botId!="Summary"?(m(),B(n,{key:0,"profit-ratio":t.profitClosedRatio,"profit-abs":t.profitClosed,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):C("",!0)]),"cell(balance)":s(({item:t})=>[t.balance?(m(),I("div",ce,[L("span",{title:t.stakeCurrency},x(e(ee)(t.balance??0,t.stakeCurrencyDecimals)),9,ue),L("span",_e,x(` ${t.stakeCurrency}${t.isDryRun?" (dry)":""}`),1)])):C("",!0)]),"cell(winVsLoss)":s(({item:t})=>[t.losses!==void 0?(m(),I("div",pe,[L("span",fe,x(t.wins),1),D(" / "),L("span",me,x(t.losses),1)])):C("",!0)]),_:1},8,["items"])}}}),he={class:"d-flex justify-content-center"},be={class:"d-flex justify-content-center"},Be=z({__name:"DashboardView",setup(E){const c=A(),o=ae(),T=se(""),R=g=>{T.value=g},O=_(()=>["","sm","md","lg","xl"].includes(T.value)),d=_(()=>o.layoutLocked||!O.value),a=_(()=>O.value?o.dashboardLayout:[...o.getDashboardLayoutSm]),l=g=>{O.value&&(console.log("newlayout",g),console.log("saving dashboard"),o.dashboardLayout=g)},n=_(()=>S(a.value,v.dailyChart)),y=_(()=>S(a.value,v.botComparison)),t=_(()=>S(a.value,v.allOpenTrades)),p=_(()=>S(a.value,v.allClosedTrades)),f=_(()=>S(a.value,v.cumChartChart)),h=_(()=>S(a.value,v.profitDistributionChart)),b=_(()=>S(a.value,v.tradesLogChart)),V=_(()=>({sm:o.getDashboardLayoutSm}));return re(async()=>{c.allGetDaily({timescale:30}),c.activeBot.getOpenTrades(),c.activeBot.getProfit()}),(g,$)=>{const N=le,u=ne,i=j("grid-item"),G=ye,P=Y,U=Q,F=W,M=q,J=H,K=j("grid-layout");return m(),B(K,{class:"h-100 w-100","row-height":50,layout:e(a),"vertical-compact":!1,margin:[5,5],"responsive-layouts":e(V),"is-resizable":!e(d),"is-draggable":!e(d),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:l,"onUpdate:breakpoint":R},{default:s(({gridItemProps:w})=>[r(i,k(w,{i:e(n).i,x:e(n).x,y:e(n).y,w:e(n).w,h:e(n).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,{header:`Daily Profit ${e(c).botCount>1?"combined":""}`},{default:s(()=>[e(c).allDailyStatsSelectedBots?(m(),B(N,{key:0,"daily-stats":e(c).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):C("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(y).i,x:e(y).x,y:e(y).y,w:e(y).w,h:e(y).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,{header:"Bot comparison"},{default:s(()=>[r(G)]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,null,{header:s(()=>[L("div",he,[D(" Open Trades "),r(P,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[r(U,{"active-trades":"",trades:e(c).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(f).i,x:e(f).x,y:e(f).y,w:e(f).w,h:e(f).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,{header:"Cumulative Profit"},{default:s(()=>[r(F,{trades:e(c).allTradesSelectedBots,"open-trades":e(c).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(p).i,x:e(p).x,y:e(p).y,w:e(p).w,h:e(p).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,null,{header:s(()=>[L("div",be,[D(" Closed Trades "),r(P,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[r(U,{"active-trades":!1,"show-filter":"",trades:e(c).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,{header:"Profit Distribution"},{default:s(()=>[r(M,{trades:e(c).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),r(i,k(w,{i:e(b).i,x:e(b).x,y:e(b).y,w:e(b).w,h:e(b).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[r(u,{header:"Trades Log"},{default:s(()=>[r(J,{trades:e(c).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Be as default};
//# sourceMappingURL=DashboardView-ge4axedQ.js.map
