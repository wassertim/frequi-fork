import{x as $a,y as Lo,d as Ye,r as E,i as F,z as St,M as pe,c as B,k as D,j as X,h as $,o as O,ar as Gt,g as $e,a as z,t as se,m as dt,b as P,w as M,ai as Mo,f as W,n as Z,p as Fa,e as Wa,as as Bo,u as Za,l as jt,B as qt,at as zo,ad as te,ae,af as ie,I as Yt,K as Kt,ag as Qe,au as Vo,G as Ze,N as pt,s as Xt,L as Jt,P as Ua,an as No,av as Be}from"./index-a26190e4.js";import{_ as N,S as Ha,B as wt,P as At,G as Fe,c as Ga,g as ja,C as qa,u as Tt,e as A,b as le,m as he,a as fe,d as K,D as Ya,E as Ro,f as Ka,h as Eo,i as J,R as ht,j as Ie,t as $o,k as Xa,l as Fo,n as ne,o as Pe,p as Qt,q as Wo,r as Zo,s as Uo,v as Ho,w as Go,x as jo,y as Ja,z as Ve,A as Qa,F as et,H as qo,I as Ue,J as ft,K as Yo,L as Pt,M as Ko,N as Xo,O as ve,Q as Jo,T as Ne,Z as Ae,U as Te,V as ea,W as Dt,X as Qo,Y as eo,$ as en,a0 as tn,a1 as ta,a2 as aa,a3 as to,a4 as an,a5 as on,a6 as nn,a7 as rn,a8 as sn,a9 as Re,aa as Ot,ab as ln,ac as un,ad as oa,ae as cn,af as ao,ag as oo,ah as dn,ai as pn,aj as hn,ak as fn,al as vn,am as gn,an as mn,ao as yn,ap as _n,aq as na,ar as bn,as as ra,at as tt,au as xn,av as Cn,aw as Sn,ax as wn,ay as An,az as Tn,aA as Pn,aB as Dn,aC as On,aD as In,aE as kn,aF as Ln,aG as Mn,aH as Bn,aI as zn,aJ as Vn}from"./install-10b53263.js";import{c as Nn,p as no,S as Rn,i as En,t as $n,r as Fn,a as Wn,D as Zn,b as Un,d as Hn,s as Gn,A as jn,e as qn,f as Yn,g as Kn,h as Xn,j as Jn,k as Qn,l as er}from"./chartZoom-16ae2117.js";import{c as tr}from"./createSeriesDataSimply-7d1d5dcf.js";var He=(a=>(a.line="line",a.bar="bar",a.scatter="scatter",a))(He||{});const je={main_plot:{},subplots:{}};var ar=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,o){return Nn(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,o,n){return n.point(o.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Ha);const or=ar;var ro=4,nr=function(){function a(){}return a}(),rr=function(a){N(t,a);function t(e){var o=a.call(this,e)||this;return o._off=0,o.hoverDataIdx=-1,o}return t.prototype.getDefaultShape=function(){return new nr},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,o){var n=o.points,r=o.size,i=this.symbolProxy,s=i.shape,l=e.getContext?e.getContext():e,u=l&&r[0]<ro,c=this.softClipShape,d;if(u){this._ctx=l;return}for(this._ctx=null,d=this._off;d<n.length;){var h=n[d++],g=n[d++];isNaN(h)||isNaN(g)||c&&!c.contain(h,g)||(s.x=h-r[0]/2,s.y=g-r[1]/2,s.width=r[0],s.height=r[1],i.buildPath(e,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},t.prototype.afterBrush=function(){var e=this.shape,o=e.points,n=e.size,r=this._ctx,i=this.softClipShape,s;if(r){for(s=this._off;s<o.length;){var l=o[s++],u=o[s++];isNaN(l)||isNaN(u)||i&&!i.contain(l,u)||r.fillRect(l-n[0]/2,u-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(e,o){for(var n=this.shape,r=n.points,i=n.size,s=Math.max(i[0],4),l=Math.max(i[1],4),u=r.length/2-1;u>=0;u--){var c=u*2,d=r[c]-s/2,h=r[c+1]-l/2;if(e>=d&&o>=h&&e<=d+s&&o<=h+l)return u}return-1},t.prototype.contain=function(e,o){var n=this.transformCoordToLocal(e,o),r=this.getBoundingRect();if(e=n[0],o=n[1],r.contain(e,o)){var i=this.hoverDataIdx=this.findDataIndex(e,o);return i>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var o=this.shape,n=o.points,r=o.size,i=r[0],s=r[1],l=1/0,u=1/0,c=-1/0,d=-1/0,h=0;h<n.length;){var g=n[h++],f=n[h++];l=Math.min(g,l),c=Math.max(g,c),u=Math.min(f,u),d=Math.max(f,d)}e=this._rect=new wt(l-i/2,u-s/2,c-l+i,d-u+s)}return e},t}(At),ir=function(){function a(){this.group=new Fe}return a.prototype.updateData=function(t,e){this._clear();var o=this._create();o.setShape({points:t.getLayout("points")}),this._setCommon(o,t,e)},a.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var n=(o.endIndex-o.startIndex)*2,r=o.startIndex*4*2;e=new Float32Array(e.buffer,r,n)}o.setShape("points",e),o.reset()})},a.prototype.incrementalPrepareUpdate=function(t){this._clear()},a.prototype.incrementalUpdate=function(t,e,o){var n=this._newAdded[0],r=e.getLayout("points"),i=n&&n.shape.points;if(i&&i.length<2e4){var s=i.length,l=new Float32Array(s+r.length);l.set(i),l.set(r,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:r}),this._setCommon(u,e,o)}},a.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},a.prototype._create=function(){var t=new rr({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},a.prototype._setCommon=function(t,e,o){var n=e.hostModel;o=o||{};var r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.softClipShape=o.clipShape||null,t.symbolProxy=Ga(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var i=t.shape.size[0]<ro;t.useStyle(n.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ja(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var d=t.hoverDataIdx;d>=0&&(u.dataIndex=d+(t.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}();const sr=ir;var lr=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){var r=e.getData(),i=this._updateSymbolDraw(r,e);i.updateData(r,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,o,n){var r=e.getData(),i=this._updateSymbolDraw(r,e);i.incrementalPrepareUpdate(r),this._finished=!1},t.prototype.incrementalRender=function(e,o,n){this._symbolDraw.incrementalUpdate(e,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=e.end===o.getData().count()},t.prototype.updateTransform=function(e,o,n){var r=e.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var i=no("").reset(e,o,n);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var o=e.coordinateSystem,n=o&&o.getArea&&o.getArea();return e.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(e,o){var n=this._symbolDraw,r=o.pipelineContext,i=r.large;return(!n||i!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=i?new sr:new Rn,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(qa);const ur=lr;function cr(a){Tt(En),a.registerSeriesModel(or),a.registerChartView(ur),a.registerLayout(no("scatter"))}var dr={axisPointer:1,tooltip:1,brush:1};function pr(a,t,e){var o=t.getComponentByElement(a.topTarget),n=o&&o.coordinateSystem;return o&&o!==e&&!dr.hasOwnProperty(o.mainType)&&n&&n.model!==e}var _e=!0,Ee=Math.min,De=Math.max,hr=Math.pow,fr=1e4,vr=6,gr=6,ia="globalPan",mr={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},yr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},sa={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},_r=0,br=function(a){N(t,a);function t(e){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=e,o.group=new Fe,o._uid="brushController_"+_r++,A(Pr,function(n,r){this._handlers[r]=le(n,this)},o),o}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var o=this._zr;this._enableGlobalPan||$n(o,ia,this._uid),A(this._handlers,function(n,r){o.on(r,n)}),this._brushType=e.brushType,this._brushOption=he(fe(sa),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Fn(e,ia,this._uid),A(this._handlers,function(o,n){e.off(n,o)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var o=this._panels={};A(e,function(n){o[n.panelId]=fe(n)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=o.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=K(e,function(h){return he(fe(sa),h,!0)});var o="\0-brush-index-",n=this._covers,r=this._covers=[],i=this,s=this._creatingCover;return new Ya(n,e,u,l).add(c).update(c).remove(d).execute(),this;function l(h,g){return(h.id!=null?h.id:o+g)+"-"+h.brushType}function u(h,g){return l(h.__brushOption,g)}function c(h,g){var f=e[h];if(g!=null&&n[g]===s)r[h]=n[g];else{var p=r[h]=g!=null?(n[g].__brushOption=f,n[g]):so(i,io(i,f));It(i,p)}}function d(h){n[h]!==s&&i.group.remove(n[h])}},t.prototype.unmount=function(){return this.enableBrush(!1),vt(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Ro);function io(a,t){var e=Ke[t.brushType].createCover(a,t);return e.__brushOption=t,uo(e,t),a.group.add(e),e}function so(a,t){var e=kt(t);return e.endCreating&&(e.endCreating(a,t),uo(t,t.__brushOption)),t}function lo(a,t){var e=t.__brushOption;kt(t).updateCoverShape(a,t,e.range,e)}function uo(a,t){var e=t.z;e==null&&(e=fr),a.traverse(function(o){o.z=e,o.z2=e})}function It(a,t){kt(t).updateCommon(a,t),lo(a,t)}function kt(a){return Ke[a.__brushOption.brushType]}function Lt(a,t,e){var o=a._panels;if(!o)return _e;var n,r=a._transform;return A(o,function(i){i.isTargetByCursor(t,e,r)&&(n=i)}),n}function co(a,t){var e=a._panels;if(!e)return _e;var o=t.__brushOption.panelId;return o!=null?e[o]:_e}function vt(a){var t=a._covers,e=t.length;return A(t,function(o){a.group.remove(o)},a),t.length=0,!!e}function be(a,t){var e=K(a._covers,function(o){var n=o.__brushOption,r=fe(n.range);return{brushType:n.brushType,panelId:n.panelId,range:r}});a.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function xr(a){var t=a._track;if(!t.length)return!1;var e=t[t.length-1],o=t[0],n=e[0]-o[0],r=e[1]-o[1],i=hr(n*n+r*r,.5);return i>vr}function po(a){var t=a.length-1;return t<0&&(t=0),[a[0],a[t]]}function ho(a,t,e,o){var n=new Fe;return n.add(new ht({name:"main",style:Mt(e),silent:!0,draggable:!0,cursor:"move",drift:J(la,a,t,n,["n","s","w","e"]),ondragend:J(be,t,{isEnd:!0})})),A(o,function(r){n.add(new ht({name:r.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:J(la,a,t,n,r),ondragend:J(be,t,{isEnd:!0})}))}),n}function fo(a,t,e,o){var n=o.brushStyle.lineWidth||0,r=De(n,gr),i=e[0][0],s=e[1][0],l=i-n/2,u=s-n/2,c=e[0][1],d=e[1][1],h=c-r+n/2,g=d-r+n/2,f=c-i,p=d-s,m=f+n,v=p+n;de(a,t,"main",i,s,f,p),o.transformable&&(de(a,t,"w",l,u,r,v),de(a,t,"e",h,u,r,v),de(a,t,"n",l,u,m,r),de(a,t,"s",l,g,m,r),de(a,t,"nw",l,u,r,r),de(a,t,"ne",h,u,r,r),de(a,t,"sw",l,g,r,r),de(a,t,"se",h,g,r,r))}function gt(a,t){var e=t.__brushOption,o=e.transformable,n=t.childAt(0);n.useStyle(Mt(e)),n.attr({silent:!o,cursor:o?"move":"default"}),A([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(r){var i=t.childOfName(r.join("")),s=r.length===1?mt(a,r[0]):Sr(a,r);i&&i.attr({silent:!o,invisible:!o,cursor:o?yr[s]+"-resize":null})})}function de(a,t,e,o,n,r,i){var s=t.childOfName(e);s&&s.setShape(Ar(Bt(a,t,[[o,n],[o+r,n+i]])))}function Mt(a){return Ie({strokeNoScale:!0},a.brushStyle)}function vo(a,t,e,o){var n=[Ee(a,e),Ee(t,o)],r=[De(a,e),De(t,o)];return[[n[0],r[0]],[n[1],r[1]]]}function Cr(a){return Xa(a.group)}function mt(a,t){var e={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},n=$o(e[t],Cr(a));return o[n]}function Sr(a,t){var e=[mt(a,t[0]),mt(a,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function la(a,t,e,o,n,r){var i=e.__brushOption,s=a.toRectRange(i.range),l=go(t,n,r);A(o,function(u){var c=mr[u];s[c[0]][c[1]]+=l[c[0]]}),i.range=a.fromRectRange(vo(s[0][0],s[1][0],s[0][1],s[1][1])),It(t,e),be(t,{isEnd:!1})}function wr(a,t,e,o){var n=t.__brushOption.range,r=go(a,e,o);A(n,function(i){i[0]+=r[0],i[1]+=r[1]}),It(a,t),be(a,{isEnd:!1})}function go(a,t,e){var o=a.group,n=o.transformCoordToLocal(t,e),r=o.transformCoordToLocal(0,0);return[n[0]-r[0],n[1]-r[1]]}function Bt(a,t,e){var o=co(a,t);return o&&o!==_e?o.clipPath(e,a._transform):fe(e)}function Ar(a){var t=Ee(a[0][0],a[1][0]),e=Ee(a[0][1],a[1][1]),o=De(a[0][0],a[1][0]),n=De(a[0][1],a[1][1]);return{x:t,y:e,width:o-t,height:n-e}}function Tr(a,t,e){if(!(!a._brushType||Dr(a,t.offsetX,t.offsetY))){var o=a._zr,n=a._covers,r=Lt(a,t,e);if(!a._dragging)for(var i=0;i<n.length;i++){var s=n[i].__brushOption;if(r&&(r===_e||s.panelId===r.panelId)&&Ke[s.brushType].contain(n[i],e[0],e[1]))return}r&&o.setCursorStyle("crosshair")}}function yt(a){var t=a.event;t.preventDefault&&t.preventDefault()}function _t(a,t,e){return a.childOfName("main").contain(t,e)}function mo(a,t,e,o){var n=a._creatingCover,r=a._creatingPanel,i=a._brushOption,s;if(a._track.push(e.slice()),xr(a)||n){if(r&&!n){i.brushMode==="single"&&vt(a);var l=fe(i);l.brushType=ua(l.brushType,r),l.panelId=r===_e?null:r.panelId,n=a._creatingCover=io(a,l),a._covers.push(n)}if(n){var u=Ke[ua(a._brushType,r)],c=n.__brushOption;c.range=u.getCreatingRange(Bt(a,n,a._track)),o&&(so(a,n),u.updateCommon(a,n)),lo(a,n),s={isEnd:o}}}else o&&i.brushMode==="single"&&i.removeOnClick&&Lt(a,t,e)&&vt(a)&&(s={isEnd:o,removeOnClick:!0});return s}function ua(a,t){return a==="auto"?t.defaultBrushType:a}var Pr={mousedown:function(a){if(this._dragging)ca(this,a);else if(!a.target||!a.target.draggable){yt(a);var t=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var e=this._creatingPanel=Lt(this,a,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(a){var t=a.offsetX,e=a.offsetY,o=this.group.transformCoordToLocal(t,e);if(Tr(this,a,o),this._dragging){yt(a);var n=mo(this,a,o,!1);n&&be(this,n)}},mouseup:function(a){ca(this,a)}};function ca(a,t){if(a._dragging){yt(t);var e=t.offsetX,o=t.offsetY,n=a.group.transformCoordToLocal(e,o),r=mo(a,t,n,!0);a._dragging=!1,a._track=[],a._creatingCover=null,r&&be(a,r)}}function Dr(a,t,e){var o=a._zr;return t<0||t>o.getWidth()||e<0||e>o.getHeight()}var Ke={lineX:da(0),lineY:da(1),rect:{createCover:function(a,t){function e(o){return o}return ho({toRectRange:e,fromRectRange:e},a,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var t=po(a);return vo(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(a,t,e,o){fo(a,t,e,o)},updateCommon:gt,contain:_t},polygon:{createCover:function(a,t){var e=new Fe;return e.add(new Ka({name:"main",style:Mt(t),silent:!0})),e},getCreatingRange:function(a){return a},endCreating:function(a,t){t.remove(t.childAt(0)),t.add(new Eo({name:"main",draggable:!0,drift:J(wr,a,t),ondragend:J(be,a,{isEnd:!0})}))},updateCoverShape:function(a,t,e,o){t.childAt(0).setShape({points:Bt(a,t,e)})},updateCommon:gt,contain:_t}};function da(a){return{createCover:function(t,e){return ho({toRectRange:function(o){var n=[o,[0,100]];return a&&n.reverse(),n},fromRectRange:function(o){return o[a]}},t,e,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(t){var e=po(t),o=Ee(e[0][a],e[1][a]),n=De(e[0][a],e[1][a]);return[o,n]},updateCoverShape:function(t,e,o,n){var r,i=co(t,e);if(i!==_e&&i.getLinearBrushOtherExtent)r=i.getLinearBrushOtherExtent(a);else{var s=t._zr;r=[0,[s.getWidth(),s.getHeight()][1-a]]}var l=[o,r];a&&l.reverse(),fo(t,e,l,n)},updateCommon:gt,contain:_t}}const Or=br;function Ir(a){return a=zt(a),function(t){return Fo(t,a)}}function kr(a,t){return a=zt(a),function(e){var o=t??e,n=o?a.width:a.height,r=o?a.x:a.y;return[r,r+(n||0)]}}function Lr(a,t,e){var o=zt(a);return function(n,r){return o.contain(r[0],r[1])&&!pr(n,t,e)}}function zt(a){return wt.create(a)}var Mr=function(){function a(){}return a.prototype.getInitialData=function(t,e){var o,n=e.getComponent("xAxis",this.get("xAxisIndex")),r=e.getComponent("yAxis",this.get("yAxisIndex")),i=n.get("type"),s=r.get("type"),l;i==="category"?(t.layout="horizontal",o=n.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",o=r.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],c=t.layout==="horizontal"?0:1,d=this._baseAxisDim=u[c],h=u[1-c],g=[n,r],f=g[c].get("type"),p=g[1-c].get("type"),m=t.data;if(m&&l){var v=[];A(m,function(y,S){var x;ne(y)?(x=y.slice(),y.unshift(S)):ne(y.value)?(x=Pe({},y),x.value=x.value.slice(),y.value.unshift(S)):x=y,v.push(x)}),t.data=v}var _=this.defaultValueDimensions,b=[{name:d,type:Qt(f),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Qt(p),dimsDef:_.slice()}];return tr(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:J(Wo,b,this)})},a.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},a}(),Br=["color","borderColor"],zr=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,o,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,o,n,r){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,o):this._incrementalRenderNormal(e,o)},t.prototype.eachRendered=function(e){Zo(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var o=e.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},t.prototype._renderNormal=function(e){var o=e.getData(),n=this._data,r=this.group,i=o.getLayout("isSimpleBox"),s=e.get("clip",!0),l=e.coordinateSystem,u=l.getArea&&l.getArea();this._data||r.removeAll(),o.diff(n).add(function(c){if(o.hasValue(c)){var d=o.getItemLayout(c);if(s&&pa(u,d))return;var h=at(d,c,!0);Uo(h,{shape:{points:d.ends}},e,c),ot(h,o,c,i),r.add(h),o.setItemGraphicEl(c,h)}}).update(function(c,d){var h=n.getItemGraphicEl(d);if(!o.hasValue(c)){r.remove(h);return}var g=o.getItemLayout(c);if(s&&pa(u,g)){r.remove(h);return}h?(Ho(h,{shape:{points:g.ends}},e,c),Go(h)):h=at(g),ot(h,o,c,i),r.add(h),o.setItemGraphicEl(c,h)}).remove(function(c){var d=n.getItemGraphicEl(c);d&&r.remove(d)}).execute(),this._data=o},t.prototype._renderLarge=function(e){this._clear(),ha(e,this.group);var o=e.get("clip",!0)?Wn(e.coordinateSystem,!1,e):null;o?this.group.setClipPath(o):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,o){for(var n=o.getData(),r=n.getLayout("isSimpleBox"),i;(i=e.next())!=null;){var s=n.getItemLayout(i),l=at(s);ot(l,n,i,r),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,o){ha(o,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(qa),Vr=function(){function a(){}return a}(),Nr=function(a){N(t,a);function t(e){var o=a.call(this,e)||this;return o.type="normalCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new Vr},t.prototype.buildPath=function(e,o){var n=o.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(At);function at(a,t,e){var o=a.ends;return new Nr({shape:{points:e?Rr(o,a):o},z2:100})}function pa(a,t){for(var e=!0,o=0;o<t.ends.length;o++)if(a.contain(t.ends[o][0],t.ends[o][1])){e=!1;break}return e}function ot(a,t,e,o){var n=t.getItemModel(e);a.useStyle(t.getItemVisual(e,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,jo(a,n)}function Rr(a,t){return K(a,function(e){return e=e.slice(),e[1]=t.initBaseline,e})}var Er=function(){function a(){}return a}(),nt=function(a){N(t,a);function t(e){var o=a.call(this,e)||this;return o.type="largeCandlestickBox",o}return t.prototype.getDefaultShape=function(){return new Er},t.prototype.buildPath=function(e,o){for(var n=o.points,r=0;r<n.length;)if(this.__sign===n[r++]){var i=n[r++];e.moveTo(i,n[r++]),e.lineTo(i,n[r++])}else r+=3},t}(At);function ha(a,t,e,o){var n=a.getData(),r=n.getLayout("largePoints"),i=new nt({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});t.add(i);var s=new nt({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new nt({shape:{points:r},__sign:0,ignoreCoarsePointer:!0});t.add(l),rt(1,i,a),rt(-1,s,a),rt(0,l,a),o&&(i.incremental=!0,s.incremental=!0),e&&e.push(i,s)}function rt(a,t,e,o){var n=e.get(["itemStyle",a>0?"borderColor":"borderColor0"])||e.get(["itemStyle",a>0?"color":"color0"]);a===0&&(n=e.get(["itemStyle","borderColorDoji"]));var r=e.getModel("itemStyle").getItemStyle(Br);t.useStyle(r),t.style.fill=null,t.style.stroke=n}const $r=zr;var yo=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,o,n){var r=o.getItemLayout(e);return r&&n.rect(r.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Ha);Ja(yo,Mr,!0);const Fr=yo;function Wr(a){!a||!ne(a.series)||A(a.series,function(t){Ve(t)&&t.type==="k"&&(t.type="candlestick")})}var Zr=["itemStyle","borderColor"],Ur=["itemStyle","borderColor0"],Hr=["itemStyle","borderColorDoji"],Gr=["itemStyle","color"],jr=["itemStyle","color0"],qr={seriesType:"candlestick",plan:Qa(),performRawSeries:!0,reset:function(a,t){function e(r,i){return i.get(r>0?Gr:jr)}function o(r,i){return i.get(r===0?Hr:r>0?Zr:Ur)}if(!t.isSeriesFiltered(a)){var n=a.pipelineContext.large;return!n&&{progress:function(r,i){for(var s;(s=r.next())!=null;){var l=i.getItemModel(s),u=i.getItemLayout(s).sign,c=l.getItemStyle();c.fill=e(u,l),c.stroke=o(u,l)||c.fill;var d=i.ensureUniqueItemVisual(s,"style");Pe(d,c)}}}}}};const Yr=qr;var Kr={seriesType:"candlestick",plan:Qa(),reset:function(a){var t=a.coordinateSystem,e=a.getData(),o=Xr(a,e),n=0,r=1,i=["x","y"],s=e.getDimensionIndex(e.mapDimension(i[n])),l=K(e.mapDimensionsAll(i[r]),e.getDimensionIndex,e),u=l[0],c=l[1],d=l[2],h=l[3];if(e.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),s<0||l.length<4)return;return{progress:a.pipelineContext.large?f:g};function g(p,m){for(var v,_=m.getStore();(v=p.next())!=null;){var b=_.get(s,v),y=_.get(u,v),S=_.get(c,v),x=_.get(d,v),C=_.get(h,v),V=Math.min(y,S),I=Math.max(y,S),w=re(V,b),L=re(I,b),k=re(x,b),H=re(C,b),j=[];ge(j,L,0),ge(j,w,1),j.push(R(H),R(L),R(k),R(w));var ue=m.getItemModel(v),U=!!ue.get(["itemStyle","borderColorDoji"]);m.setItemLayout(v,{sign:fa(_,v,y,S,c,U),initBaseline:y>S?L[r]:w[r],ends:j,brushRect:xe(x,C,b)})}function re(q,Y){var Q=[];return Q[n]=Y,Q[r]=q,isNaN(Y)||isNaN(q)?[NaN,NaN]:t.dataToPoint(Q)}function ge(q,Y,Q){var G=Y.slice(),ce=Y.slice();G[n]=et(G[n]+o/2,1,!1),ce[n]=et(ce[n]-o/2,1,!0),Q?q.push(G,ce):q.push(ce,G)}function xe(q,Y,Q){var G=re(q,Q),ce=re(Y,Q);return G[n]-=o/2,ce[n]-=o/2,{x:G[0],y:G[1],width:o,height:ce[1]-G[1]}}function R(q){return q[n]=et(q[n],1),q}}function f(p,m){for(var v=qo(p.count*4),_=0,b,y=[],S=[],x,C=m.getStore(),V=!!a.get(["itemStyle","borderColorDoji"]);(x=p.next())!=null;){var I=C.get(s,x),w=C.get(u,x),L=C.get(c,x),k=C.get(d,x),H=C.get(h,x);if(isNaN(I)||isNaN(k)||isNaN(H)){v[_++]=NaN,_+=3;continue}v[_++]=fa(C,x,w,L,c,V),y[n]=I,y[r]=k,b=t.dataToPoint(y,null,S),v[_++]=b?b[0]:NaN,v[_++]=b?b[1]:NaN,y[r]=H,b=t.dataToPoint(y,null,S),v[_++]=b?b[1]:NaN}m.setLayout("largePoints",v)}}};function fa(a,t,e,o,n,r){var i;return e>o?i=-1:e<o?i=1:i=r?0:t>0?a.get(n,t-1)<=o?1:-1:1,i}function Xr(a,t){var e=a.getBaseAxis(),o,n=e.type==="category"?e.getBandWidth():(o=e.getExtent(),Math.abs(o[1]-o[0])/t.count()),r=Ue(ft(a.get("barMaxWidth"),n),n),i=Ue(ft(a.get("barMinWidth"),1),n),s=a.get("barWidth");return s!=null?Ue(s,n):Math.max(Math.min(n/2,r),i)}const Jr=Kr;function Qr(a){a.registerChartView($r),a.registerSeriesModel(Fr),a.registerPreprocessor(Wr),a.registerVisual(Yr),a.registerLayout(Jr)}var ei=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,o,n){var r=Yo(e);a.prototype.init.apply(this,arguments),va(e,r)},t.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),va(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(Pt);function va(a,t){var e=a.cellSize,o;ne(e)?o=e:o=a.cellSize=[e,e],o.length===1&&(o[1]=o[0]);var n=K([0,1],function(r){return Ko(t,r)&&(o[r]="auto"),o[r]!=null&&o[r]!=="auto"});Xo(a,t,{type:"box",ignoreSize:n})}const ti=ei;var ai=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,o,n){var r=this.group;r.removeAll();var i=e.coordinateSystem,s=i.getRangeInfo(),l=i.getOrient(),u=o.getLocaleModel();this._renderDayRect(e,s,r),this._renderLines(e,s,l,r),this._renderYearText(e,s,l,r),this._renderMonthText(e,u,l,r),this._renderWeekText(e,u,s,l,r)},t.prototype._renderDayRect=function(e,o,n){for(var r=e.coordinateSystem,i=e.getModel("itemStyle").getItemStyle(),s=r.getCellWidth(),l=r.getCellHeight(),u=o.start.time;u<=o.end.time;u=r.getNextNDay(u,1).time){var c=r.dataToRect([u],!1).tl,d=new ht({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:i});n.add(d)}},t.prototype._renderLines=function(e,o,n,r){var i=this,s=e.coordinateSystem,l=e.getModel(["splitLine","lineStyle"]).getLineStyle(),u=e.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=o.start,h=0;d.time<=o.end.time;h++){f(d.formatedDate),h===0&&(d=s.getDateInfo(o.start.y+"-"+o.start.m));var g=d.date;g.setMonth(g.getMonth()+1),d=s.getDateInfo(g)}f(s.getNextNDay(o.end.time,1).formatedDate);function f(p){i._firstDayOfMonth.push(s.getDateInfo(p)),i._firstDayPoints.push(s.dataToRect([p],!1).tl);var m=i._getLinePointsOfOneWeek(e,p,n);i._tlpoints.push(m[0]),i._blpoints.push(m[m.length-1]),u&&i._drawSplitline(m,l,r)}u&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,c,n),l,r),u&&this._drawSplitline(i._getEdgesPoints(i._blpoints,c,n),l,r)},t.prototype._getEdgesPoints=function(e,o,n){var r=[e[0].slice(),e[e.length-1].slice()],i=n==="horizontal"?0:1;return r[0][i]=r[0][i]-o/2,r[1][i]=r[1][i]+o/2,r},t.prototype._drawSplitline=function(e,o,n){var r=new Ka({z2:20,shape:{points:e},style:o});n.add(r)},t.prototype._getLinePointsOfOneWeek=function(e,o,n){for(var r=e.coordinateSystem,i=r.getDateInfo(o),s=[],l=0;l<7;l++){var u=r.getNextNDay(i.time,l),c=r.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(e,o){return ve(e)&&e?Jo(e,o):Ne(e)?e(o):o.nameMap},t.prototype._yearTextPositionControl=function(e,o,n,r,i){var s=o[0],l=o[1],u=["center","bottom"];r==="bottom"?(l+=i,u=["center","top"]):r==="left"?s-=i:r==="right"?(s+=i,u=["center","top"]):l-=i;var c=0;return(r==="left"||r==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(e,o,n,r){var i=e.getModel("yearLabel");if(i.get("show")){var s=i.get("margin"),l=i.get("position");l||(l=n!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,d=(u[0][1]+u[1][1])/2,h=n==="horizontal"?0:1,g={top:[c,u[h][1]],bottom:[c,u[1-h][1]],left:[u[1-h][0],d],right:[u[h][0],d]},f=o.start.y;+o.end.y>+o.start.y&&(f=f+"-"+o.end.y);var p=i.get("formatter"),m={start:o.start.y,end:o.end.y,nameMap:f},v=this._formatterLabel(p,m),_=new Ae({z2:30,style:Te(i,{text:v})});_.attr(this._yearTextPositionControl(_,g[l],n,l,s)),r.add(_)}},t.prototype._monthTextPositionControl=function(e,o,n,r,i){var s="left",l="top",u=e[0],c=e[1];return n==="horizontal"?(c=c+i,o&&(s="center"),r==="start"&&(l="bottom")):(u=u+i,o&&(l="middle"),r==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(e,o,n,r){var i=e.getModel("monthLabel");if(i.get("show")){var s=i.get("nameMap"),l=i.get("margin"),u=i.get("position"),c=i.get("align"),d=[this._tlpoints,this._blpoints];(!s||ve(s))&&(s&&(o=ea(s)||o),s=o.get(["time","monthAbbr"])||[]);var h=u==="start"?0:1,g=n==="horizontal"?0:1;l=u==="start"?-l:l;for(var f=c==="center",p=0;p<d[h].length-1;p++){var m=d[h][p].slice(),v=this._firstDayOfMonth[p];if(f){var _=this._firstDayPoints[p];m[g]=(_[g]+d[0][p+1][g])/2}var b=i.get("formatter"),y=s[+v.m-1],S={yyyy:v.y,yy:(v.y+"").slice(2),MM:v.m,M:+v.m,nameMap:y},x=this._formatterLabel(b,S),C=new Ae({z2:30,style:Pe(Te(i,{text:x}),this._monthTextPositionControl(m,f,n,u,l))});r.add(C)}}},t.prototype._weekTextPositionControl=function(e,o,n,r,i){var s="center",l="middle",u=e[0],c=e[1],d=n==="start";return o==="horizontal"?(u=u+r+(d?1:-1)*i[0]/2,s=d?"right":"left"):(c=c+r+(d?1:-1)*i[1]/2,l=d?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(e,o,n,r,i){var s=e.getModel("dayLabel");if(s.get("show")){var l=e.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!c||ve(c)){c&&(o=ea(c)||o);var g=o.get(["time","dayOfWeekShort"]);c=g||K(o.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var f=l.getNextNDay(n.end.time,7-n.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];d=Ue(d,Math.min(p[1],p[0])),u==="start"&&(f=l.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var m=0;m<7;m++){var v=l.getNextNDay(f,m),_=l.dataToRect([v.time],!1).center,b=m;b=Math.abs((m+h)%7);var y=new Ae({z2:30,style:Pe(Te(s,{text:c[b]}),this._weekTextPositionControl(_,r,u,d,p))});i.add(y)}}},t.type="calendar",t}(Dt);const oi=ai;var it=864e5,ni=function(){function a(t,e,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=t}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(t){t=Qo(t);var e=t.getFullYear(),o=t.getMonth()+1,n=o<10?"0"+o:""+o,r=t.getDate(),i=r<10?"0"+r:""+r,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:i,day:s,time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},a.prototype.getNextNDay=function(t,e){return e=e||0,e===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},a.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,n=["width","height"],r=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[o,7]:[7,o];A([0,1],function(d){c(r,d)&&(i[n[d]]=r[d]*s[d])});var l={width:e.getWidth(),height:e.getHeight()},u=this._rect=eo(i,l);A([0,1],function(d){c(r,d)||(r[d]=u[n[d]]/s[d])});function c(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=r[0],this._sh=r[1]},a.prototype.dataToPoint=function(t,e){ne(t)&&(t=t[0]),e==null&&(e=!0);var o=this.getDateInfo(t),n=this._rangeInfo,r=o.formatedDate;if(e&&!(o.time>=n.start.time&&o.time<n.end.time+it))return[NaN,NaN];var i=o.day,s=this._getRangeInfo([n.start.time,r]).nthWeek;return this._orient==="vertical"?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},a.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},a.prototype.dataToRect=function(t,e){var o=this.dataToPoint(t,e);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,o=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,e-1,n):this._getDateByWeeksAndDay(e,o-1,n)},a.prototype.convertToPixel=function(t,e,o){var n=ga(e);return n===this?n.dataToPoint(o):null},a.prototype.convertFromPixel=function(t,e,o){var n=ga(e);return n===this?n.pointToData(o):null},a.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var t=this._model.get("range"),e;if(ne(t)&&t.length===1&&(t=t[0]),ne(t))e=t;else{var o=t.toString();if(/^\d{4}$/.test(o)&&(e=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var n=this.getDateInfo(o),r=n.date;r.setMonth(r.getMonth()+1);var i=this.getNextNDay(r,-1);e=[n.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(e=[o,o])}if(!e)return t;var s=this._getRangeInfo(e);return s.start.time>s.end.time&&e.reverse(),e},a.prototype._getRangeInfo=function(t){var e=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],o;e[0].time>e[1].time&&(o=!0,e.reverse());var n=Math.floor(e[1].time/it)-Math.floor(e[0].time/it)+1,r=new Date(e[0].time),i=r.getDate(),s=e[1].date.getDate();r.setDate(i+n-1);var l=r.getDate();if(l!==s)for(var u=r.getTime()-e[1].time>0?1:-1;(l=r.getDate())!==s&&(r.getTime()-e[1].time)*u>0;)n-=u,r.setDate(l-u);var c=Math.floor((n+e[0].day+6)/7),d=o?-c+1:c-1;return o&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:c,nthWeek:d,fweek:e[0].day,lweek:e[1].day}},a.prototype._getDateByWeeksAndDay=function(t,e,o){var n=this._getRangeInfo(o);if(t>n.weeks||t===0&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var r=(t-1)*7-n.fweek+e,i=new Date(n.start.time);return i.setDate(+n.start.d+r),this.getDateInfo(i)},a.create=function(t,e){var o=[];return t.eachComponent("calendar",function(n){var r=new a(n);o.push(r),n.coordinateSystem=r}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=o[n.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function ga(a){var t=a.calendarModel,e=a.seriesModel,o=t?t.coordinateSystem:e?e.coordinateSystem:null;return o}const ri=ni;function ii(a){a.registerComponentModel(ti),a.registerComponentView(oi),a.registerCoordinateSystem("calendar",ri)}var si=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Zn);const li=si;var ui=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(Un);const ci=ui;function di(a){a.registerComponentModel(li),a.registerComponentView(ci),Hn(a)}var oe=function(){function a(){}return a}(),_o={};function ze(a,t){_o[a]=t}function bo(a){return _o[a]}var pi=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;A(this.option.feature,function(o,n){var r=bo(n);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(e)),he(o,r.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Pt);const hi=pi;var fi=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(e,o,n,r){var i=this.group;if(i.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("orient")==="vertical",u=e.get("feature")||{},c=this._features||(this._features={}),d=[];A(u,function(f,p){d.push(p)}),new Ya(this._featureNames||[],d).add(h).update(h).remove(J(h,null)).execute(),this._featureNames=d;function h(f,p){var m=d[f],v=d[p],_=u[m],b=new en(_,e,e.ecModel),y;if(r&&r.newTitle!=null&&r.featureName===m&&(_.title=r.newTitle),m&&!v){if(vi(m))y={onclick:b.option.onclick,featureName:m};else{var S=bo(m);if(!S)return;y=new S}c[m]=y}else if(y=c[v],!y)return;y.uid=tn("toolbox-feature"),y.model=b,y.ecModel=o,y.api=n;var x=y instanceof oe;if(!m&&v){x&&y.dispose&&y.dispose(o,n);return}if(!b.get("show")||x&&y.unusable){x&&y.remove&&y.remove(o,n);return}g(b,y,m),b.setIconStatus=function(C,V){var I=this.option,w=this.iconPaths;I.iconStatus=I.iconStatus||{},I.iconStatus[C]=V,w[C]&&(V==="emphasis"?ta:aa)(w[C])},y instanceof oe&&y.render&&y.render(b,o,n,r)}function g(f,p,m){var v=f.getModel("iconStyle"),_=f.getModel(["emphasis","iconStyle"]),b=p instanceof oe&&p.getIcons?p.getIcons():f.get("icon"),y=f.get("title")||{},S,x;ve(b)?(S={},S[m]=b):S=b,ve(y)?(x={},x[m]=y):x=y;var C=f.iconPaths={};A(S,function(V,I){var w=to(V,{},{x:-s/2,y:-s/2,width:s,height:s});w.setStyle(v.getItemStyle());var L=w.ensureState("emphasis");L.style=_.getItemStyle();var k=new Ae({style:{text:x[I],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});w.setTextContent(k),an({el:w,componentModel:e,itemName:I,formatterParamsExtra:{title:x[I]}}),w.__title=x[I],w.on("mouseover",function(){var H=_.getItemStyle(),j=l?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";k.setStyle({fill:_.get("textFill")||H.fill||H.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),w.setTextConfig({position:_.get("textPosition")||j}),k.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){f.get(["iconStatus",I])!=="emphasis"&&n.leaveEmphasis(this),k.hide()}),(f.get(["iconStatus",I])==="emphasis"?ta:aa)(w),i.add(w),w.on("click",le(p.onclick,p,o,n,I)),C[I]=w})}on(i,e,n),i.add(nn(i.getBoundingRect(),e)),l||i.eachChild(function(f){var p=f.__title,m=f.ensureState("emphasis"),v=m.textConfig||(m.textConfig={}),_=f.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!Ne(b)&&p){var y=b.style||(b.style={}),S=rn(p,Ae.makeFont(y)),x=f.x+i.x,C=f.y+i.y+s,V=!1;C+S.height>n.getHeight()&&(v.position="top",V=!0);var I=V?-5-S.height:s+10;x+S.width/2>n.getWidth()?(v.position=["100%",I],y.align="right"):x-S.width/2<0&&(v.position=[0,I],y.align="left")}})},t.prototype.updateView=function(e,o,n,r){A(this._features,function(i){i instanceof oe&&i.updateView&&i.updateView(i.model,o,n,r)})},t.prototype.remove=function(e,o){A(this._features,function(n){n instanceof oe&&n.remove&&n.remove(e,o)}),this.group.removeAll()},t.prototype.dispose=function(e,o){A(this._features,function(n){n instanceof oe&&n.dispose&&n.dispose(e,o)})},t.type="toolbox",t}(Dt);function vi(a){return a.indexOf("my")===0}const gi=fi;var mi=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",i=o.getZr().painter.getType()==="svg",s=i?"svg":n.get("type",!0)||"png",l=o.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),u=sn.browser;if(Ne(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=r+"."+s,c.target="_blank",c.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||i){var h=l.split(","),g=h[0].indexOf("base64")>-1,f=i?decodeURIComponent(h[1]):h[1];g&&(f=window.atob(f));var p=r+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=f.length,v=new Uint8Array(m);m--;)v[m]=f.charCodeAt(m);var _=new Blob([v]);window.navigator.msSaveOrOpenBlob(_,p)}else{var b=document.createElement("iframe");document.body.appendChild(b);var y=b.contentWindow,S=y.document;S.open("image/svg+xml","replace"),S.write(f),S.close(),y.focus(),S.execCommand("SaveAs",!0,p),document.body.removeChild(b)}}else{var x=n.get("lang"),C='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',V=window.open();V.document.write(C),V.document.title=r}},t.getDefaultOption=function(e){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},t}(oe);const yi=mi;var ma="__ec_magicType_stack__",_i=[["line","bar"],["stack"]],bi=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,o=e.get("icon"),n={};return A(e.get("type"),function(r){o[r]&&(n[r]=o[r])}),n},t.getDefaultOption=function(e){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},t.prototype.onclick=function(e,o,n){var r=this.model,i=r.get(["seriesIndex",n]);if(ya[n]){var s={series:[]},l=function(d){var h=d.subType,g=d.id,f=ya[n](h,g,d,r);f&&(Ie(f,d.option),s.series.push(f));var p=d.coordinateSystem;if(p&&p.type==="cartesian2d"&&(n==="line"||n==="bar")){var m=p.getAxesByScale("ordinal")[0];if(m){var v=m.dim,_=v+"Axis",b=d.getReferringComponents(_,ln).models[0],y=b.componentIndex;s[_]=s[_]||[];for(var S=0;S<=y;S++)s[_][y]=s[_][y]||{};s[_][y].boundaryGap=n==="bar"}}};A(_i,function(d){Re(d,n)>=0&&A(d,function(h){r.setIconStatus(h,"normal")})}),r.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},l);var u,c=n;n==="stack"&&(u=he({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),r.get(["iconStatus",n])!=="emphasis"&&(c="tiled")),o.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},t}(oe),ya={line:function(a,t,e,o){if(a==="bar")return he({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,t,e,o){if(a==="line")return he({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,t,e,o){var n=e.get("stack")===ma;if(a==="line"||a==="bar")return o.setIconStatus("stack",n?"normal":"emphasis"),he({id:t,stack:n?"":ma},o.get(["option","stack"])||{},!0)}};Ot({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,t){t.mergeOption(a.newOption)});const xi=bi;var Xe=new Array(60).join("-"),Oe="	";function Ci(a){var t={},e=[],o=[];return a.eachRawSeries(function(n){var r=n.coordinateSystem;if(r&&(r.type==="cartesian2d"||r.type==="polar")){var i=r.getBaseAxis();if(i.type==="category"){var s=i.dim+"_"+i.index;t[s]||(t[s]={categoryAxis:i,valueAxis:r.getOtherAxis(i),series:[]},o.push({axisDim:i.dim,axisIndex:i.index})),t[s].series.push(n)}else e.push(n)}else e.push(n)}),{seriesGroupByCategoryAxis:t,other:e,meta:o}}function Si(a){var t=[];return A(a,function(e,o){var n=e.categoryAxis,r=e.valueAxis,i=r.dim,s=[" "].concat(K(e.series,function(g){return g.name})),l=[n.model.getCategories()];A(e.series,function(g){var f=g.getRawData();l.push(g.getRawData().mapArray(f.mapDimension(i),function(p){return p}))});for(var u=[s.join(Oe)],c=0;c<l[0].length;c++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][c]);u.push(d.join(Oe))}t.push(u.join(`
`))}),t.join(`

`+Xe+`

`)}function wi(a){return K(a,function(t){var e=t.getRawData(),o=[t.name],n=[];return e.each(e.dimensions,function(){for(var r=arguments.length,i=arguments[r-1],s=e.getName(i),l=0;l<r-1;l++)n[l]=arguments[l];o.push((s?s+Oe:"")+n.join(Oe))}),o.join(`
`)}).join(`

`+Xe+`

`)}function Ai(a){var t=Ci(a);return{value:cn([Si(t.seriesGroupByCategoryAxis),wi(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+Xe+`

`),meta:t.meta}}function qe(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ti(a){var t=a.slice(0,a.indexOf(`
`));if(t.indexOf(Oe)>=0)return!0}var bt=new RegExp("["+Oe+"]+","g");function Pi(a){for(var t=a.split(/\n+/g),e=qe(t.shift()).split(bt),o=[],n=K(e,function(l){return{name:l,data:[]}}),r=0;r<t.length;r++){var i=qe(t[r]).split(bt);o.push(i.shift());for(var s=0;s<i.length;s++)n[s]&&(n[s].data[r]=i[s])}return{series:n,categories:o}}function Di(a){for(var t=a.split(/\n+/g),e=qe(t.shift()),o=[],n=0;n<t.length;n++){var r=qe(t[n]);if(r){var i=r.split(bt),s="",l=void 0,u=!1;isNaN(i[0])?(u=!0,s=i[0],i=i.slice(1),o[n]={name:s,value:[]},l=o[n].value):l=o[n]=[];for(var c=0;c<i.length;c++)l.push(+i[c]);l.length===1&&(u?o[n].value=l[0]:o[n]=l[0])}}return{name:e,data:o}}function Oi(a,t){var e=a.split(new RegExp(`
*`+Xe+`
*`,"g")),o={series:[]};return A(e,function(n,r){if(Ti(n)){var i=Pi(n),s=t[r],l=s.axisDim+"Axis";s&&(o[l]=o[l]||[],o[l][s.axisIndex]={data:i.categories},o.series=o.series.concat(i.series))}else{var i=Di(n);o.series.push(i)}}),o}var Ii=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var n=o.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=r.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=r.get("lang")||[];s.innerHTML=l[0]||r.get("title"),s.style.cssText="margin:10px 20px",s.style.color=r.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var d=r.get("optionToContent"),h=r.get("contentToOption"),g=Ai(e);if(Ne(d)){var f=d(o.getOption());ve(f)?u.innerHTML=f:un(f)&&u.appendChild(f)}else{c.readOnly=r.get("readOnly");var p=c.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=r.get("textColor"),p.borderColor=r.get("textareaBorderColor"),p.backgroundColor=r.get("textareaColor"),c.value=g.value,u.appendChild(c)}var m=g.meta,v=document.createElement("div");v.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),y=document.createElement("div");_+=";background-color:"+r.get("buttonColor"),_+=";color:"+r.get("buttonTextColor");var S=this;function x(){n.removeChild(i),S._dom=null}oa(b,"click",x),oa(y,"click",function(){if(h==null&&d!=null||h!=null&&d==null){x();return}var C;try{Ne(h)?C=h(u,o.getOption()):C=Oi(c.value,m)}catch(V){throw x(),new Error("Data view format error "+V)}C&&o.dispatchAction({type:"changeDataView",newOption:C}),x()}),b.innerHTML=l[1],y.innerHTML=l[2],y.style.cssText=b.style.cssText=_,!r.get("readOnly")&&v.appendChild(y),v.appendChild(b),i.appendChild(s),i.appendChild(u),i.appendChild(v),u.style.height=n.clientHeight-80+"px",n.appendChild(i),this._dom=i},t.prototype.remove=function(e,o){this._dom&&o.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,o){this.remove(e,o)},t.getDefaultOption=function(e){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},t}(oe);function ki(a,t){return K(a,function(e,o){var n=t&&t[o];if(Ve(n)&&!ne(n)){var r=Ve(e)&&!ne(e);r||(e={value:e});var i=n.name!=null&&e.name==null;return e=Ie(e,n),i&&delete e.name,e}else return e})}Ot({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,t){var e=[];A(a.newOption.series,function(o){var n=t.getSeriesByName(o.name)[0];if(!n)e.push(Pe({type:"scatter"},o));else{var r=n.get("data");e.push({name:o.name,data:ki(o.data,r)})}}),t.mergeOption(Ie({series:e},a.newOption))});const Li=Ii;var xo=A,Co=ao();function Mi(a,t){var e=Vt(a);xo(t,function(o,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i[n])break}if(r<0){var s=a.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();e[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),e.push(t)}function Bi(a){var t=Vt(a),e=t[t.length-1];t.length>1&&t.pop();var o={};return xo(e,function(n,r){for(var i=t.length-1;i>=0;i--)if(n=t[i][r],n){o[r]=n;break}}),o}function zi(a){Co(a).snapshots=null}function Vi(a){return Vt(a).length}function Vt(a){var t=Co(a);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Ni=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.onclick=function(e,o){zi(e),o.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return o},t}(oe);Ot({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,t){t.resetOption("recreate")});const Ri=Ni;var Ei=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],$i=function(){function a(t,e,o){var n=this;this._targetInfoList=[];var r=_a(e,t);A(Fi,function(i,s){(!o||!o.include||Re(o.include,s)>=0)&&i(r,n._targetInfoList)})}return a.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(o,n,r){if((o.coordRanges||(o.coordRanges=[])).push(n),!o.coordRange){o.coordRange=n;var i=st[o.brushType](0,r,n);o.__rangeOffset={offset:Sa[o.brushType](i.values,o.range,[1,1]),xyMinMax:i.xyMinMax}}}),t},a.prototype.matchOutputRanges=function(t,e,o){A(t,function(n){var r=this.findTargetInfo(n,e);r&&r!==!0&&A(r.coordSyses,function(i){var s=st[n.brushType](1,i,n.range,!0);o(n,s.values,i,e)})},this)},a.prototype.setInputRanges=function(t,e){A(t,function(o){var n=this.findTargetInfo(o,e);if(o.range=o.range||[],n&&n!==!0){o.panelId=n.panelId;var r=st[o.brushType](0,n.coordSys,o.coordRange),i=o.__rangeOffset;o.range=i?Sa[o.brushType](r.values,i.offset,Wi(r.xyMinMax,i.xyMinMax)):r.values}},this)},a.prototype.makePanelOpts=function(t,e){return K(this._targetInfoList,function(o){var n=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:e?e(o):null,clipPath:Ir(n),isTargetByCursor:Lr(n,t,o.coordSysModel),getLinearBrushOtherExtent:kr(n)}})},a.prototype.controlSeries=function(t,e,o){var n=this.findTargetInfo(t,o);return n===!0||n&&Re(n.coordSyses,e.coordinateSystem)>=0},a.prototype.findTargetInfo=function(t,e){for(var o=this._targetInfoList,n=_a(e,t),r=0;r<o.length;r++){var i=o[r],s=t.panelId;if(s){if(i.panelId===s)return i}else for(var l=0;l<ba.length;l++)if(ba[l](n,i))return i}return!0},a}();function xt(a){return a[0]>a[1]&&a.reverse(),a}function _a(a,t){return oo(a,t,{includeMainTypes:Ei})}var Fi={grid:function(a,t){var e=a.xAxisModels,o=a.yAxisModels,n=a.gridModels,r=dn(),i={},s={};!e&&!o&&!n||(A(e,function(l){var u=l.axis.grid.model;r.set(u.id,u),i[u.id]=!0}),A(o,function(l){var u=l.axis.grid.model;r.set(u.id,u),s[u.id]=!0}),A(n,function(l){r.set(l.id,l),i[l.id]=!0,s[l.id]=!0}),r.each(function(l){var u=l.coordinateSystem,c=[];A(u.getCartesians(),function(d,h){(Re(e,d.getAxis("x").model)>=0||Re(o,d.getAxis("y").model)>=0)&&c.push(d)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:xa.grid,xAxisDeclared:i[l.id],yAxisDeclared:s[l.id]})}))},geo:function(a,t){A(a.geoModels,function(e){var o=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:o,coordSyses:[o],getPanelRect:xa.geo})})}},ba=[function(a,t){var e=a.xAxisModel,o=a.yAxisModel,n=a.gridModel;return!n&&e&&(n=e.axis.grid.model),!n&&o&&(n=o.axis.grid.model),n&&n===t.gridModel},function(a,t){var e=a.geoModel;return e&&e===t.geoModel}],xa={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,t=a.getBoundingRect().clone();return t.applyTransform(Xa(a)),t}},st={lineX:J(Ca,0),lineY:J(Ca,1),rect:function(a,t,e,o){var n=a?t.pointToData([e[0][0],e[1][0]],o):t.dataToPoint([e[0][0],e[1][0]],o),r=a?t.pointToData([e[0][1],e[1][1]],o):t.dataToPoint([e[0][1],e[1][1]],o),i=[xt([n[0],r[0]]),xt([n[1],r[1]])];return{values:i,xyMinMax:i}},polygon:function(a,t,e,o){var n=[[1/0,-1/0],[1/0,-1/0]],r=K(e,function(i){var s=a?t.pointToData(i,o):t.dataToPoint(i,o);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:r,xyMinMax:n}}};function Ca(a,t,e,o){var n=e.getAxis(["x","y"][a]),r=xt(K([0,1],function(s){return t?n.coordToData(n.toLocalCoord(o[s]),!0):n.toGlobalCoord(n.dataToCoord(o[s]))})),i=[];return i[a]=r,i[1-a]=[NaN,NaN],{values:r,xyMinMax:i}}var Sa={lineX:J(wa,0),lineY:J(wa,1),rect:function(a,t,e){return[[a[0][0]-e[0]*t[0][0],a[0][1]-e[0]*t[0][1]],[a[1][0]-e[1]*t[1][0],a[1][1]-e[1]*t[1][1]]]},polygon:function(a,t,e){return K(a,function(o,n){return[o[0]-e[0]*t[n][0],o[1]-e[1]*t[n][1]]})}};function wa(a,t,e,o){return[t[0]-o[a]*e[0],t[1]-o[a]*e[1]]}function Wi(a,t){var e=Aa(a),o=Aa(t),n=[e[0]/o[0],e[1]/o[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function Aa(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}const So=$i;var Ct=A,Zi=hn("toolbox-dataZoom_"),Ui=function(a){N(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.prototype.render=function(e,o,n,r){this._brushController||(this._brushController=new Or(n.getZr()),this._brushController.on("brush",le(this._onBrush,this)).mount()),ji(e,o,this,r,n),Gi(e,o)},t.prototype.onclick=function(e,o,n){Hi[n].call(this)},t.prototype.remove=function(e,o){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,o){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var o=e.areas;if(!e.isEnd||!o.length)return;var n={},r=this.ecModel;this._brushController.updateCovers([]);var i=new So(Nt(this.model),r,{include:["grid"]});i.matchOutputRanges(o,r,function(u,c,d){if(d.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[h],d,c)}}),Mi(r,n),this._dispatchZoomAction(n);function s(u,c,d){var h=c.getAxis(u),g=h.model,f=l(u,g,r),p=f.findRepresentativeAxisProxy(g).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(d=Gn(0,d.slice(),h.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),f&&(n[f.id]={dataZoomId:f.id,startValue:d[0],endValue:d[1]})}function l(u,c,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var f=g.getAxisModel(u,c.componentIndex);f&&(h=g)}),h}},t.prototype._dispatchZoomAction=function(e){var o=[];Ct(e,function(n,r){o.push(fe(n))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},t.getDefaultOption=function(e){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},t}(oe),Hi={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(Bi(this.ecModel))}};function Nt(a){var t={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function Gi(a,t){a.setIconStatus("back",Vi(t)>1?"emphasis":"normal")}function ji(a,t,e,o,n){var r=e._isZoomActive;o&&o.type==="takeGlobalCursor"&&(r=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),e._isZoomActive=r,a.setIconStatus("zoom",r?"emphasis":"normal");var i=new So(Nt(a),t,{include:["grid"]}),s=i.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(r&&s.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}pn("dataZoom",function(a){var t=a.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var o=t.getModel(e),n=[],r=Nt(o),i=oo(a,r);Ct(i.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Ct(i.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:Zi+u+d};h[c]=d,n.push(h)}return n});const qi=Ui;function Yi(a){a.registerComponentModel(hi),a.registerComponentView(gi),ze("saveAsImage",yi),ze("magicType",xi),ze("dataView",Li),ze("dataZoom",qi),ze("restore",Ri),Tt(di)}var Ki=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return t.prototype.init=function(e,o,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var o=this._data.count();this.option.loop?e=(e%o+o)%o:(e>=o&&(e=o-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e=this.option,o=e.data||[],n=e.axisType,r=this._names=[],i;n==="category"?(i=[],A(o,function(u,c){var d=fn(vn(u),""),h;Ve(u)?(h=fe(u),h.value=c):h=c,i.push(h),r.push(d)})):i=o;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new gn([{name:"value",type:s}],this);l.initData(i,r)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Pt);const Ta=Ki;var wo=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline.slider",t.defaultOption=mn(Ta.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(Ta);Ja(wo,yn.prototype);const Xi=wo;var Ji=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.type="timeline",t}(Dt);const Qi=Ji;var es=function(a){N(t,a);function t(e,o,n,r){var i=a.call(this,e,o,n)||this;return i.type=r||"value",i}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(jn);const ts=es;var lt=Math.PI,Pa=ao(),as=function(a){N(t,a);function t(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,o){this.api=o},t.prototype.render=function(e,o,n){if(this.model=e,this.api=n,this.ecModel=o,this.group.removeAll(),e.get("show",!0)){var r=this._layout(e,n),i=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(r,e);e.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return _n("nameValue",{noName:!0,value:c})},A(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](r,i,l,e)},this),this._renderAxisLabel(r,s,l,e),this._position(r,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,o){var n=e.get(["label","position"]),r=e.get("orient"),i=ns(e,o),s;n==null||n==="auto"?s=r==="horizontal"?i.y+i.height/2<o.getHeight()/2?"-":"+":i.x+i.width/2<o.getWidth()/2?"+":"-":ve(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:lt/2},d=r==="vertical"?i.height:i.width,h=e.getModel("controlStyle"),g=h.get("show",!0),f=g?h.get("itemSize"):0,p=g?h.get("itemGap"):0,m=f+p,v=e.get(["label","rotate"])||0;v=v*lt/180;var _,b,y,S=h.get("position",!0),x=g&&h.get("showPlayBtn",!0),C=g&&h.get("showPrevBtn",!0),V=g&&h.get("showNextBtn",!0),I=0,w=d;S==="left"||S==="bottom"?(x&&(_=[0,0],I+=m),C&&(b=[I,0],I+=m),V&&(y=[w-f,0],w-=m)):(x&&(_=[w-f,0],w-=m),C&&(b=[0,0],I+=m),V&&(y=[w-f,0],w-=m));var L=[I,w];return e.get("inverse")&&L.reverse(),{viewRect:i,mainLength:d,orient:r,rotation:c[r],labelRotation:v,labelPosOpt:s,labelAlign:e.get(["label","align"])||l[r],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||u[r],playPosition:_,prevBtnPosition:b,nextBtnPosition:y,axisExtent:L,controlSize:f,controlGap:p}},t.prototype._position=function(e,o){var n=this._mainGroup,r=this._labelGroup,i=e.viewRect;if(e.orient==="vertical"){var s=On(),l=i.x,u=i.y+i.height;na(s,s,[-l,-u]),bn(s,s,-lt/2),na(s,s,[l,u]),i=i.clone(),i.applyTransform(s)}var c=_(i),d=_(n.getBoundingRect()),h=_(r.getBoundingRect()),g=[n.x,n.y],f=[r.x,r.y];f[0]=g[0]=c[0][0];var p=e.labelPosOpt;if(p==null||ve(p)){var m=p==="+"?0:1;b(g,d,c,1,m),b(f,h,c,1,1-m)}else{var m=p>=0?0:1;b(g,d,c,1,m),f[1]=g[1]+p}n.setPosition(g),r.setPosition(f),n.rotation=r.rotation=e.rotation,v(n),v(r);function v(y){y.originX=c[0][0]-y.x,y.originY=c[1][0]-y.y}function _(y){return[[y.x,y.x+y.width],[y.y,y.y+y.height]]}function b(y,S,x,C,V){y[C]+=x[C][V]-S[C][V]}},t.prototype._createAxis=function(e,o){var n=o.getData(),r=o.get("axisType"),i=os(o,r);i.getTicks=function(){return n.mapArray(["value"],function(u){return{value:u}})};var s=n.getDataExtent("value");i.setExtent(s[0],s[1]),i.calcNiceTicks();var l=new ts("value",i,e.axisExtent,r);return l.model=o,l},t.prototype._createGroup=function(e){var o=this[e]=new Fe;return this.group.add(o),o},t.prototype._renderAxisLine=function(e,o,n,r){var i=n.getExtent();if(r.get(["lineStyle","show"])){var s=new ra({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:Pe({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(s);var l=this._progressLine=new ra({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:Ie({lineCap:"round",lineWidth:s.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(l)}},t.prototype._renderAxisTick=function(e,o,n,r){var i=this,s=r.getData(),l=n.scale.getTicks();this._tickSymbols=[],A(l,function(u){var c=n.dataToCoord(u.value),d=s.getItemModel(u.value),h=d.getModel("itemStyle"),g=d.getModel(["emphasis","itemStyle"]),f=d.getModel(["progress","itemStyle"]),p={x:c,y:0,onclick:le(i._changeTimeline,i,u.value)},m=Da(d,h,o,p);m.ensureState("emphasis").style=g.getItemStyle(),m.ensureState("progress").style=f.getItemStyle(),tt(m);var v=ja(m);d.get("tooltip")?(v.dataIndex=u.value,v.dataModel=r):v.dataIndex=v.dataModel=null,i._tickSymbols.push(m)})},t.prototype._renderAxisLabel=function(e,o,n,r){var i=this,s=n.getLabelModel();if(s.get("show")){var l=r.getData(),u=n.getViewLabels();this._tickLabels=[],A(u,function(c){var d=c.tickValue,h=l.getItemModel(d),g=h.getModel("label"),f=h.getModel(["emphasis","label"]),p=h.getModel(["progress","label"]),m=n.dataToCoord(c.tickValue),v=new Ae({x:m,y:0,rotation:e.labelRotation-e.rotation,onclick:le(i._changeTimeline,i,d),silent:!1,style:Te(g,{text:c.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});v.ensureState("emphasis").style=Te(f),v.ensureState("progress").style=Te(p),o.add(v),tt(v),Pa(v).dataIndex=d,i._tickLabels.push(v)})}},t.prototype._renderControl=function(e,o,n,r){var i=e.controlSize,s=e.rotation,l=r.getModel("controlStyle").getItemStyle(),u=r.getModel(["emphasis","controlStyle"]).getItemStyle(),c=r.getPlayState(),d=r.get("inverse",!0);h(e.nextBtnPosition,"next",le(this._changeTimeline,this,d?"-":"+")),h(e.prevBtnPosition,"prev",le(this._changeTimeline,this,d?"+":"-")),h(e.playPosition,c?"stop":"play",le(this._handlePlayClick,this,!c),!0);function h(g,f,p,m){if(g){var v=xn(ft(r.get(["controlStyle",f+"BtnSize"]),i),i),_=[0,-v/2,v,v],b=rs(r,f+"Icon",_,{x:g[0],y:g[1],originX:i/2,originY:0,rotation:m?-s:0,rectHover:!0,style:l,onclick:p});b.ensureState("emphasis").style=u,o.add(b),tt(b)}}},t.prototype._renderCurrentPointer=function(e,o,n,r){var i=r.getData(),s=r.getCurrentIndex(),l=i.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(d){d.draggable=!0,d.drift=le(u._handlePointerDrag,u),d.ondragend=le(u._handlePointerDragend,u),Oa(d,u._progressLine,s,n,r,!0)},onUpdate:function(d){Oa(d,u._progressLine,s,n,r)}};this._currentPointer=Da(l,l,this._mainGroup,{},this._currentPointer,c)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,o,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,o){var n=this._toAxisCoord(e)[0],r=this._axis,i=Cn(r.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),u=this.model;(o||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=e.model;e._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){var o=this._mainGroup.getLocalTransform();return Sn(e,o,!0)},t.prototype._findNearestTick=function(e){var o=this.model.getData(),n=1/0,r,i=this._axis;return o.each(["value"],function(s,l){var u=i.dataToCoord(s),c=Math.abs(u-e);c<n&&(n=c,r=l)}),r},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var o=this.model.getCurrentIndex();e==="+"?e=o+1:e==="-"&&(e=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),o=this._tickSymbols,n=this._tickLabels;if(o)for(var r=0;r<o.length;r++)o&&o[r]&&o[r].toggleState("progress",r<e);if(n)for(var r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",Pa(n[r]).dataIndex<=e)},t.type="timeline.slider",t}(Qi);function os(a,t){if(t=t||a.get("type"),t)switch(t){case"category":return new Tn({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new An({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new wn}}function ns(a,t){return eo(a.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},a.get("padding"))}function rs(a,t,e,o){var n=o.style,r=to(a.get(["controlStyle",t]),o||{},new wt(e[0],e[1],e[2],e[3]));return n&&r.setStyle(n),r}function Da(a,t,e,o,n,r){var i=t.get("color");if(n)n.setColor(i),e.add(n),r&&r.onUpdate(n);else{var s=a.get("symbol");n=Ga(s,-1,-1,2,2,i),n.setStyle("strokeNoScale",!0),e.add(n),r&&r.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),o=he({rectHover:!0,z2:100},o,!0);var u=Pn(a.get("symbolSize"));o.scaleX=u[0]/2,o.scaleY=u[1]/2;var c=Dn(a.get("symbolOffset"),u);c&&(o.x=(o.x||0)+c[0],o.y=(o.y||0)+c[1]);var d=a.get("symbolRotate");return o.rotation=(d||0)*Math.PI/180||0,n.attr(o),n.updateTransform(),n}function Oa(a,t,e,o,n,r){if(!a.dragging){var i=n.getModel("checkpointStyle"),s=o.dataToCoord(n.getData().get("value",e));if(r||!i.get("animation",!0))a.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:i.get("animationDuration",!0),easing:i.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}const is=as;function ss(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,o){var n=e.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Ie({currentIndex:n.option.currentIndex},t)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var o=e.getComponent("timeline");o&&t.playState!=null&&o.setPlayState(t.playState)})}function ls(a){var t=a&&a.timeline;ne(t)||(t=t?[t]:[]),A(t,function(e){e&&us(e)})}function us(a){var t=a.type,e={number:"value",time:"time"};if(e[t]&&(a.axisType=e[t],delete a.type),Ia(a),ye(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});ye(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!ye(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}A(a.data||[],function(n){Ve(n)&&!ne(n)&&(!ye(n,"value")&&ye(n,"name")&&(n.value=n.name),Ia(n))})}function Ia(a){var t=a.itemStyle||(a.itemStyle={}),e=t.emphasis||(t.emphasis={}),o=a.label||a.label||{},n=o.normal||(o.normal={}),r={normal:1,emphasis:1};A(o,function(i,s){!r[s]&&!ye(n,s)&&(n[s]=i)}),e.label&&!ye(o,"emphasis")&&(o.emphasis=e.label,delete e.label)}function ye(a,t){return a.hasOwnProperty(t)}function cs(a){a.registerComponentModel(Xi),a.registerComponentView(is),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),ss(a),a.registerPreprocessor(ls)}function Ge(){return`#${(Math.random()*16777215<<0).toString(16)}`}function ka(a,t,e,o,n=0){return{name:e,type:o.type||"line",xAxisIndex:n,yAxisIndex:n,itemStyle:{color:o.color||Ge()},encode:{x:a,y:t},showSymbol:!1}}function ds(a,t){const e=a.indexOf("open"),o=a.indexOf("close"),n=a.indexOf("high"),r=a.indexOf("low");let i;return t.map((s,l)=>{const u=s.slice(),c=l===0?(u[e]+u[o])/2:(i[e]+i[o])/2,d=(u[e]+u[n]+u[r]+u[o])/4,h=Math.max(u[n],u[e],u[o]),g=Math.min(u[r],u[e],u[o]);return u[e]=c,u[o]=d,u[n]=h,u[r]=g,i=u.slice(),u})}const ps=2,hs=3;function Se(a,t,e=hs){const o=t%a;return t-o+(e===ps?a:0)}function Ao(a,t){return`${t.ft_order_side==="buy"?"+":"-"}${Lo("cost"in t?t.cost:t.amount*t.safe_price,a.quote_currency??"<stake_currency>")}`}function La(a,t,e){return`${a.is_short?"Short":"Long"} ${e}  ${$a(a.profit_ratio)}
  ${Ao(a,t)}
  Enter-tag: ${a.enter_tag??""}
  Exit-Tag: ${a.exit_reason??""}`}function fs(a,t){return`${a.is_short?"Short":"Long"} adjustment
  ${Ao(a,t)}
  Enter-tag: ${a.enter_tag??""}`}const vs="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",Ma="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",ut="#AD00FF",ct="#0066FF";function gs(a,t){const e=[];for(let o=0,n=t.length;o<n;o+=1){const r=t[o];if((Se(a.timeframe_ms??0,r.open_timestamp)<=a.data_stop_ts||!r.close_timestamp||r.close_timestamp&&r.close_timestamp>=a.data_start_ts)&&r.orders)for(let i=0;i<r.orders.length;i++){const s=r.orders[i];s.order_filled_timestamp&&Se(a.timeframe_ms??0,s.order_filled_timestamp)<=a.data_stop_ts&&s.order_filled_timestamp>a.data_start_ts&&(i===0?e.push([Se(a.timeframe_ms??0,r.open_timestamp),s.safe_price,Ma,s.ft_order_side=="sell"?180:0,r.is_short?ut:ct,r.is_short?"Short":"Long",La(r,s,"entry")]):i===r.orders.length-1&&r.close_timestamp?Se(a.timeframe_ms??0,r.close_timestamp)<=a.data_stop_ts&&r.close_timestamp>a.data_start_ts&&r.is_open===!1&&e.push([Se(a.timeframe_ms??0,r.close_timestamp),s.safe_price,Ma,r.is_short?0:180,r.is_short?ut:ct,$a(r.profit_ratio,2),La(r,s,"exit")]):e.push([Se(a.timeframe_ms??0,s.order_filled_timestamp),s.safe_price,vs,s.ft_order_side=="sell"?180:0,r.is_short?ut:ct,"",fs(r,s)]))}}return{tradeData:e}}const ms={class:"d-flex flex-grow-1 chart-wrapper"},ys=Ye({__name:"CandleChart",props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(a){const t=a;Tt([In,ii,kn,qn,Yn,Ln,cs,Mn,Yi,Bn,Kn,Xn,Qr,Jn,Qn,cr,zn]);const e="5.5%",o="1%",n=55,r=8,i="#26A69A",s="#26A69A",l="#EF5350",u="#EF5350",c="#00ff26",d="#00ff26",h="#faba25",g="#faba25",f=E(),p=E({}),m=F(()=>t.dataset?t.dataset.strategy:""),v=F(()=>t.dataset?t.dataset.pair:""),_=F(()=>t.dataset?t.dataset.timeframe:""),b=F(()=>t.dataset!==null&&typeof t.dataset=="object"),y=F(()=>t.trades.filter(I=>I.pair===v.value)),S=F(()=>`${m.value} - ${v.value} - ${_.value}`);function x(I=!1){var Wt,Zt,Ut,Ht;if(!b.value)return;(Wt=p.value)!=null&&Wt.title&&(p.value.title[0].text=S.value);const w=t.dataset.columns,L=w.findIndex(T=>T==="__date_ts"),k=w.findIndex(T=>T==="open"),H=w.findIndex(T=>T==="high"),j=w.findIndex(T=>T==="low"),ue=w.findIndex(T=>T==="close"),U=w.findIndex(T=>T==="volume"),re=w.findIndex(T=>T==="_buy_signal_close"||T==="_enter_long_signal_close"),ge=w.findIndex(T=>T==="_sell_signal_close"||T==="_exit_long_signal_close"),xe=w.findIndex(T=>T==="_enter_short_signal_close"),R=w.findIndex(T=>T==="_exit_short_signal_close"),q="subplots"in t.plotConfig?Object.keys(t.plotConfig.subplots).length+1:1;if(Array.isArray((Zt=p.value)==null?void 0:Zt.dataZoom))if(I){const T=(1-250/t.dataset.length)*100;p.value.dataZoom.forEach((me,Ce)=>{p.value&&p.value.dataZoom&&(p.value.dataZoom[Ce].start=T)})}else p.value.dataZoom.forEach((T,me)=>{p.value&&p.value.dataZoom&&(delete p.value.dataZoom[me].start,delete p.value.dataZoom[me].end)});const Y=t.heikinAshi?ds(w,t.dataset.data):t.dataset.data.slice(),Q=Array(Y.length>0?Y[Y.length-2].length:0);Q[L]=Y[Y.length-1][L]+t.dataset.timeframe_ms*3,Y.push(Q);const G={dataset:{source:Y},grid:[{left:e,right:o,bottom:`${q*r+2}%`},{left:e,right:o,bottom:`${q*r}%`,height:`${r}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:i,color0:l,borderColor:s,borderColor0:u},encode:{x:L,y:[k,ue,j,H]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:L,y:U}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:c},encode:{x:L,y:re}}]};if(ge>=0&&Array.isArray(G.series)&&G.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:h},encode:{x:L,y:ge}}),Array.isArray(G.series)&&(xe>=0&&G.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:d},tooltip:{},encode:{x:L,y:xe}}),R>=0&&G.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:g},tooltip:{},encode:{x:L,y:R}})),Object.assign(p.value,G),"main_plot"in t.plotConfig&&Object.entries(t.plotConfig.main_plot).forEach(([T,me])=>{var ke,ee,We,Le,Me;const Ce=w.findIndex(Je=>Je===T);Ce>1?(!Array.isArray((ke=p.value)==null?void 0:ke.legend)&&((We=(ee=p.value)==null?void 0:ee.legend)!=null&&We.data)&&p.value.legend.data.push(T),Array.isArray((Le=p.value)==null?void 0:Le.series)&&((Me=p.value)==null||Me.series.push(ka(L,Ce,T,me)))):console.log(`element ${T} for main plot not found in columns.`)}),"subplots"in t.plotConfig){let T=2;Object.entries(t.plotConfig.subplots).forEach(([me,Ce])=>{const ke=T;Array.isArray(p.value.yAxis)&&p.value.yAxis.length<=T&&p.value.yAxis.push({scale:!0,gridIndex:ke,name:me,nameLocation:"middle",nameGap:n,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(p.value.xAxis)&&p.value.xAxis.length<=T&&p.value.xAxis.push({type:"time",scale:!0,gridIndex:ke,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(p.value.dataZoom)&&p.value.dataZoom.forEach(ee=>ee.xAxisIndex&&Array.isArray(ee.xAxisIndex)?ee.xAxisIndex.push(T):null),p.value.grid&&Array.isArray(p.value.grid)&&p.value.grid.push({left:e,right:o,bottom:`${(q-T+1)*r}%`,height:`${r}%`}),Object.entries(Ce).forEach(([ee,We])=>{var Me;const Le=w.findIndex(Je=>Je===ee);Le>0?(!Array.isArray(p.value.legend)&&((Me=p.value.legend)!=null&&Me.data)&&p.value.legend.data.push(ee),p.value.series&&Array.isArray(p.value.series)&&p.value.series.push(ka(L,Le,ee,We,T))):console.log(`element ${ee} was not found in the columns.`)}),T+=1})}Array.isArray(p.value.grid)&&(p.value.grid[p.value.grid.length-1].bottom="50px",delete p.value.grid[p.value.grid.length-1].top);const{tradeData:ce}=gs(t.dataset,y.value),Ft="Trades";!Array.isArray(p.value.legend)&&((Ut=p.value.legend)!=null&&Ut.data)&&p.value.legend.data.push(Ft);const ko={name:Ft,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:t.theme!=="dark"?"#fff":"#000",padding:2,color:t.theme==="dark"?"#fff":"#000"},labelLayout:{rotate:75,align:"left",dx:10},itemStyle:{color:T=>T.data[4],opacity:.9},symbol:T=>T[2],symbolRotate:T=>T[3],symbolSize:13,data:ce};Array.isArray(p.value.series)&&p.value.series.push(ko),(Ht=f.value)==null||Ht.setOption(p.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!I})}function C(){var I;(I=f.value)==null||I.setOption({},{noMerge:!0}),p.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:t.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(w,L,k,H,j){const ue={top:60},U=w[0]<j.viewSize[0]/2;return ue[["left","right"][+U]]=U?5:60,ue}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:n,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{xAxisIndex:[0,1],bottom:10,start:80,end:100,...er}]},console.log("Initialized"),x(!0)}function V(){if(!t.sliderPosition)return;const I=Gt(t.sliderPosition.startValue-t.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),w=Gt(t.sliderPosition.endValue?t.sliderPosition.endValue+t.dataset.timeframe_ms*40:t.sliderPosition.startValue+t.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");f.value&&f.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:I,endValue:w})}return St(()=>{C()}),pe(()=>t.useUTC,()=>C()),pe(()=>t.dataset,()=>x()),pe(()=>t.plotConfig,()=>C()),pe(()=>t.heikinAshi,()=>x()),pe(()=>t.sliderPosition,()=>V()),(I,w)=>(O(),B("div",ms,[D(b)?(O(),X(D(Vn),{key:0,ref_key:"candleChart",ref:f,theme:a.theme,autoresize:"","manual-update":""},null,8,["theme"])):$("",!0)]))}});const _s=$e(ys,[["__scopeId","data-v-b55af75d"]]),To="ft_custom_plot_config",Po="ft_selected_plot_config";function bs(){return localStorage.getItem(Po)||"default"}function Do(a){localStorage.setItem(Po,a)}function Rt(){return JSON.parse(localStorage.getItem(To)||"{}")}function Ba(){return Object.keys(Rt())}function Oo(a){const t=Rt();return a in t?t[a]:{...je}}function xs(a){const e={...Rt(),...a};localStorage.setItem(To,JSON.stringify(e)),Do(Object.keys(a)[0])}const Cs={name:"CloseCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ss=["aria-hidden","aria-label"],ws=["fill","width","height"],As={d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},Ts={key:0};function Ps(a,t,e,o,n,r){return O(),B("span",dt(a.$attrs,{"aria-hidden":!e.title,"aria-label":e.title,class:"material-design-icon close-circle-outline-icon",role:"img",onClick:t[0]||(t[0]=i=>a.$emit("click",i))}),[(O(),B("svg",{fill:e.fillColor,class:"material-design-icon__svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[z("path",As,[e.title?(O(),B("title",Ts,se(e.title),1)):$("",!0)])],8,ws))],16,Ss)}const Ds=$e(Cs,[["render",Ps]]),Os=a=>(Fa("data-v-6dd49f6f"),a=a(),Wa(),a),Is={key:0},ks=Os(()=>z("hr",null,null,-1)),Ls={class:"d-flex d-flex-columns"},Ms=Ye({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array},addNew:{required:!0,type:Boolean}},emits:["update:modelValue"],setup(a,{emit:t}){const e=a,o=E(Ge()),n=E(He.line),r=E(Object.keys(He)),i=E(""),s=E(""),l=E(!1),u=F(()=>e.columns.filter(f=>f.toLowerCase().includes(i.value.toLowerCase()))),c=()=>{o.value=Ge()},d=F(()=>l.value||!s.value?{}:{[s.value]:{color:o.value,type:n.value}}),h=()=>{t("update:modelValue",d.value)},g=()=>{l.value=!0,h()};return pe(()=>e.modelValue,()=>{[s.value]=Object.keys(e.modelValue),l.value=!1,s.value&&e.modelValue&&(o.value=e.modelValue[s.value].color||Ge(),n.value=e.modelValue[s.value].type||He.line)}),pe(o,()=>{e.addNew||h()}),(f,p)=>{const m=Z("b-form-input"),v=Z("b-input-group-append"),_=Z("b-input-group"),b=Z("b-form-select"),y=Z("b-form-group"),S=Z("b-input-group-prepend"),x=Z("b-button");return O(),B("div",null,[a.addNew?(O(),B("div",Is,[P(y,{label:"Add indicator","label-for":"indicatorSelector"},{default:M(()=>[P(_,{size:"sm"},{default:M(()=>[P(m,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=C=>i.value=C),placeholder:"Filter indicators"},null,8,["modelValue"]),P(v,null,{default:M(()=>[P(Ds,{class:"pointer align-self-center ms-1",size:18,onClick:p[1]||(p[1]=C=>i.value="")})]),_:1})]),_:1}),P(b,{id:"indicatorSelector",modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=C=>s.value=C),options:D(u),"select-size":4},null,8,["modelValue","options"])]),_:1})])):$("",!0),P(y,{label:"Type","label-for":"plotTypeSelector"},{default:M(()=>[P(b,{id:"plotTypeSelector",modelValue:n.value,"onUpdate:modelValue":p[3]||(p[3]=C=>n.value=C),size:"sm",options:r.value,onChange:p[4]||(p[4]=C=>h())},null,8,["modelValue","options"])]),_:1}),ks,P(y,{label:"Color","label-for":"colsel",size:"sm"},{default:M(()=>[P(_,null,{default:M(()=>[P(S,null,{default:M(()=>[z("div",{style:Mo({"background-color":o.value}),class:"colorbox me-2"},null,4)]),_:1}),P(m,{id:"colsel",modelValue:o.value,"onUpdate:modelValue":p[5]||(p[5]=C=>o.value=C),size:"sm"},null,8,["modelValue"]),P(v,null,{default:M(()=>[P(x,{variant:"primary",size:"sm",onClick:c},{default:M(()=>[W("↻")]),_:1})]),_:1})]),_:1})]),_:1}),z("div",Ls,[a.addNew?(O(),X(x,{key:0,class:"flex-grow-1",variant:"primary",title:"Add ",size:"sm",onClick:h},{default:M(()=>[W(" Save indicator ")]),_:1})):$("",!0),a.addNew?(O(),X(x,{key:1,class:"ms-1 flex-grow-1",variant:"secondary",title:"Add ",size:"sm",onClick:g},{default:M(()=>[W(" Cancel ")]),_:1})):$("",!0)])])}}});const Bs=$e(Ms,[["__scopeId","data-v-6dd49f6f"]]),Io=Bo("plotConfig",{state:()=>({customPlotConfig:{},plotConfigName:bs(),availablePlotConfigNames:Ba(),plotConfig:{...je}}),getters:{},actions:{saveCustomPlotConfig(a){this.customPlotConfig=a,xs(a),this.availablePlotConfigNames=Ba()},setPlotConfigName(a){this.plotConfigName=a,Do(a)},plotConfigChanged(a=""){console.log("plotConfigChanged"),this.setPlotConfigName(a||this.plotConfigName),this.plotConfig=Oo(this.plotConfigName)},setPlotConfig(a){console.log("emit..."),this.plotConfig={...a}}}}),Et=a=>(Fa("data-v-02ea3f44"),a=a(),Wa(),a),zs={key:0},Vs={class:"col-mb-3"},Ns=Et(()=>z("hr",null,null,-1)),Rs=Et(()=>z("hr",null,null,-1)),Es=Et(()=>z("hr",null,null,-1)),$s={key:1,class:"col-mb-5 ms-1 mt-2"},Fs=Ye({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},setup(a){const t=Io(),e=Za(),o=E(je),n=E("default"),r=E(""),i=E(""),s=E(!1),l=E(!1),u=E("main_plot"),c=E(),d=E(!0),h=F(()=>u.value==="main_plot"),g=F(()=>h.value?o.value.main_plot:o.value.subplots[u.value]),f=F(()=>["main_plot",...Object.keys(o.value.subplots)]),p=F(()=>h.value?Object.keys(o.value.main_plot):u.value in o.value.subplots?Object.keys(o.value.subplots[u.value]):[]);function m(L){console.log(o.value);const k=Object.keys(L)[0],H=L[k];h.value?(console.log(`Adding ${k} to MainPlot`),o.value.main_plot[k]={...H}):(console.log(`Adding ${k} to ${u.value}`),o.value.subplots[u.value][k]={...H}),o.value={...o.value},s.value=!1,t.setPlotConfig(o.value)}const v=F({get(){return s.value?{}:i.value?{[i.value]:g.value[i.value]}:{}},set(L){Object.keys(L)[0]&&L?m(L):s.value=!1}}),_=F({get(){return JSON.stringify(o.value,null,2)},set(L){try{c.value=JSON.parse(L),d.value=!0}catch{d.value=!1}}});function b(){console.log(o.value),h.value?(console.log(`Removing ${i.value} from MainPlot`),delete o.value.main_plot[i.value]):(console.log(`Removing ${i.value} from ${u.value}`),delete o.value.subplots[u.value][i.value]),o.value={...o.value},console.log(o.value),i.value="",t.setPlotConfig(o.value)}function y(){o.value.subplots={...o.value.subplots,[r.value]:{}},u.value=r.value,r.value="",t.setPlotConfig(o.value)}function S(){delete o.value.subplots[u.value],o.value.subplots={...o.value.subplots},u.value="",t.setPlotConfig(o.value)}function x(){o.value=Oo(n.value),console.log(o.value),console.log("loading config"),t.setPlotConfig(o.value)}function C(){c.value!==void 0&&d.value&&(o.value=c.value,t.setPlotConfig(o.value))}function V(){o.value={...je}}async function I(){if(e.activeBot.isWebserverMode&&!e.activeBot.strategy.strategy){qt("No strategy selected, can't load plot config.");return}try{await e.activeBot.getStrategyPlotConfig(),e.activeBot.strategyPlotConfig&&(o.value=e.activeBot.strategyPlotConfig,t.setPlotConfig(o.value))}catch{qt("Failed to load Plot configuration from Strategy.")}}function w(){t.saveCustomPlotConfig({[n.value]:o.value})}return St(()=>{o.value=t.plotConfig,n.value=t.plotConfigName}),(L,k)=>{const H=Z("b-form-input"),j=Z("b-form-group"),ue=Z("b-form-select"),U=Z("b-button"),re=Z("b-input-group-append"),ge=Z("b-input-group"),xe=Z("b-form-textarea");return a.columns?(O(),B("div",zs,[P(j,{label:"Plot config name","label-for":"idPlotConfigName"},{default:M(()=>[P(H,{id:"idPlotConfigName",modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=R=>n.value=R),size:"sm"},null,8,["modelValue"])]),_:1}),z("div",Vs,[Ns,P(j,{label:"Target","label-for":"FieldSel"},{default:M(()=>[P(ue,{id:"FieldSel",modelValue:u.value,"onUpdate:modelValue":k[1]||(k[1]=R=>u.value=R),options:D(f),"select-size":3},null,8,["modelValue","options"])]),_:1})]),P(j,{label:"Add new plot","label-for":"newSubPlot"},{default:M(()=>[P(ge,{size:"sm"},{default:M(()=>[P(H,{id:"newSubPlot",modelValue:r.value,"onUpdate:modelValue":k[2]||(k[2]=R=>r.value=R),class:"addPlot"},null,8,["modelValue"]),P(re,null,{default:M(()=>[P(U,{disabled:!r.value,onClick:y},{default:M(()=>[W("+")]),_:1},8,["disabled"]),u.value&&u.value!="main_plot"?(O(),X(U,{key:0,onClick:S},{default:M(()=>[W("-")]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1}),Rs,z("div",null,[P(j,{label:"Used indicators","label-for":"selectedIndicators"},{default:M(()=>[P(ue,{id:"selectedIndicators",modelValue:i.value,"onUpdate:modelValue":k[3]||(k[3]=R=>i.value=R),options:D(p),"select-size":4},null,8,["modelValue","options"])]),_:1})]),z("div",null,[P(U,{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:s.value,onClick:k[4]||(k[4]=R=>s.value=!s.value)},{default:M(()=>[W(" Add new indicator ")]),_:1},8,["disabled"]),P(U,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!i.value,class:"ms-1",onClick:b},{default:M(()=>[W(" Remove indicator ")]),_:1},8,["disabled"])]),i.value||s.value?(O(),X(Bs,{key:0,modelValue:D(v),"onUpdate:modelValue":k[5]||(k[5]=R=>jt(v)?v.value=R:null),class:"mt-1",columns:a.columns,"add-new":s.value},null,8,["modelValue","columns","add-new"])):$("",!0),Es,z("div",null,[P(U,{class:"ms-1",variant:"secondary",size:"sm",onClick:x},{default:M(()=>[W("Load")]),_:1}),P(U,{disabled:D(e).activeBot.isWebserverMode&&D(e).activeBot.botApiVersion<2.23||!D(e).activeBot.isBotOnline,class:"ms-1",variant:"secondary",size:"sm",onClick:I},{default:M(()=>[W(" From strategy ")]),_:1},8,["disabled"]),P(U,{class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:V},{default:M(()=>[W("Reset")]),_:1}),P(U,{id:"showButton",class:"ms-1",variant:"secondary",size:"sm",title:"Show configuration for easy transfer to a strategy",onClick:k[6]||(k[6]=R=>l.value=!l.value)},{default:M(()=>[W("Show")]),_:1}),l.value?(O(),X(U,{key:0,class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:C},{default:M(()=>[W("Load from String")]),_:1})):$("",!0),P(U,{class:"ms-1",variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration",onClick:w},{default:M(()=>[W("Save")]),_:1})]),l.value?(O(),B("div",$s,[P(xe,{id:"TextArea",modelValue:D(_),"onUpdate:modelValue":k[7]||(k[7]=R=>jt(_)?_.value=R:null),class:"textArea",size:"sm",state:d.value},null,8,["modelValue","state"])])):$("",!0)])):$("",!0)}}});const za=$e(Fs,[["__scopeId","data-v-02ea3f44"]]);var Ws=Object.defineProperty,Zs=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,Va=Object.getOwnPropertySymbols,Hs=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Na=(a,t,e)=>t in a?Ws(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,we=(a,t)=>{for(var e in t||(t={}))Hs.call(t,e)&&Na(a,e,t[e]);if(Va)for(var e of Va(t))Gs.call(t,e)&&Na(a,e,t[e]);return a},Ra=(a,t)=>Zs(a,Us(t));const js={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(a){this.autoscroll&&a&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var a;const t=((a=this.$refs.dropdownMenu)==null?void 0:a.children[this.typeAheadPointer])||!1;if(t){const e=this.getDropdownViewport(),{top:o,bottom:n,height:r}=t.getBoundingClientRect();if(o<e.top)return this.$refs.dropdownMenu.scrollTop=t.offsetTop;if(n>e.bottom)return this.$refs.dropdownMenu.scrollTop=t.offsetTop-(e.height-r)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},qs={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let a=0;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},open(a){a&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let a=this.typeAheadPointer-1;a>=0;a--)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadDown(){for(let a=this.typeAheadPointer+1;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadSelect(){const a=this.filteredOptions[this.typeAheadPointer];a&&this.selectable(a)&&this.select(a)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},Ys={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(a){this.mutableLoading=a}},methods:{toggleLoading(a=null){return a==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=a}}},$t=(a,t)=>{const e=a.__vccOpts||a;for(const[o,n]of t)e[o]=n;return e},Ks={},Xs={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},Js=z("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),Qs=[Js];function el(a,t){return O(),B("svg",Xs,Qs)}const tl=$t(Ks,[["render",el]]),al={},ol={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},nl=z("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),rl=[nl];function il(a,t){return O(),B("svg",ol,rl)}const sl=$t(al,[["render",il]]),Ea={Deselect:tl,OpenIndicator:sl},ll={mounted(a,{instance:t}){if(t.appendToBody){const{height:e,top:o,left:n,width:r}=t.$refs.toggle.getBoundingClientRect();let i=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;a.unbindPosition=t.calculatePosition(a,t,{width:r+"px",left:i+n+"px",top:s+o+e+"px"}),document.body.appendChild(a)}},unmounted(a,{instance:t}){t.appendToBody&&(a.unbindPosition&&typeof a.unbindPosition=="function"&&a.unbindPosition(),a.parentNode&&a.parentNode.removeChild(a))}};function ul(a){const t={};return Object.keys(a).sort().forEach(e=>{t[e]=a[e]}),JSON.stringify(t)}let cl=0;function dl(){return++cl}const pl={components:we({},Ea),directives:{appendToBody:ll},mixins:[js,qs,Ys],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:a=>a},selectable:{type:Function,default:a=>!0},getOptionLabel:{type:Function,default(a){return typeof a=="object"?a.hasOwnProperty(this.label)?a[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(a)}.
https://vue-select.org/api/props.html#getoptionlabel`):a}},getOptionKey:{type:Function,default(a){if(typeof a!="object")return a;try{return a.hasOwnProperty("id")?a.id:ul(a)}catch(t){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,a,t)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(a,t,e){return(t||"").toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}},filter:{type:Function,default(a,t){return a.filter(e=>{let o=this.getOptionLabel(e);return typeof o=="number"&&(o=o.toString()),this.filterBy(e,o,t)})}},createOption:{type:Function,default(a){return typeof this.optionList[0]=="object"?{[this.label]:a}:a}},resetOnOptionsChange:{default:!1,validator:a=>["function","boolean"].includes(typeof a)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:a,multiple:t}){return a&&!t}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(a,t)=>a},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(a,t,{width:e,top:o,left:n}){a.style.top=o,a.style.left=n,a.style.width=e}},dropdownShouldOpen:{type:Function,default({noDrop:a,open:t,mutableLoading:e}){return a?!1:t&&!e}},uid:{type:[String,Number],default:()=>dl()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let a=this.modelValue;return this.isTrackingValues&&(a=this.$data._value),a!=null&&a!==""?[].concat(a):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const a={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:we({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:t=>this.search=t.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:a,listFooter:a,header:Ra(we({},a),{deselect:this.deselect}),footer:Ra(we({},a),{deselect:this.deselect})}},childComponents(){return we(we({},Ea),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const a=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return a;const t=this.search.length?this.filter(a,this.search,this):a;if(this.taggable&&this.search.length){const e=this.createOption(this.search);this.optionExists(e)||t.unshift(e)}return t},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(a,t){const e=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(a,t,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&e()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(a){this.isTrackingValues&&this.setInternalValueFromOptions(a)}},multiple(){this.clearSelection()},open(a){this.$emit(a?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(a){Array.isArray(a)?this.$data._value=a.map(t=>this.findOptionFromReducedValue(t)):this.$data._value=this.findOptionFromReducedValue(a)},select(a){this.$emit("option:selecting",a),this.isOptionSelected(a)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(a):(this.taggable&&!this.optionExists(a)&&(this.$emit("option:created",a),this.pushTag(a)),this.multiple&&(a=this.selectedValue.concat(a)),this.updateValue(a),this.$emit("option:selected",a)),this.onAfterSelect(a)},deselect(a){this.$emit("option:deselecting",a),this.updateValue(this.selectedValue.filter(t=>!this.optionComparator(t,a))),this.$emit("option:deselected",a)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(a){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(a){typeof this.modelValue>"u"&&(this.$data._value=a),a!==null&&(Array.isArray(a)?a=a.map(t=>this.reduce(t)):a=this.reduce(a)),this.$emit("update:modelValue",a)},toggleDropdown(a){const t=a.target!==this.searchEl;t&&a.preventDefault();const e=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||e.filter(Boolean).some(o=>o.contains(a.target)||o===a.target)){a.preventDefault();return}this.open&&t?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(a){return this.selectedValue.some(t=>this.optionComparator(t,a))},isOptionDeselectable(a){return this.isOptionSelected(a)&&this.deselectFromDropdown},optionComparator(a,t){return this.getOptionKey(a)===this.getOptionKey(t)},findOptionFromReducedValue(a){const t=o=>JSON.stringify(this.reduce(o))===JSON.stringify(a),e=[...this.options,...this.pushedTags].filter(t);return e.length===1?e[0]:e.find(o=>this.optionComparator(o,this.$data._value))||a},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let a=null;this.multiple&&(a=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(a)}},optionExists(a){return this.optionList.some(t=>this.optionComparator(t,a))},normalizeOptionForSlot(a){return typeof a=="object"?a:{[this.label]:a}},pushTag(a){this.pushedTags.push(a)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:a,multiple:t}=this;this.clearSearchOnBlur({clearSearchOnSelect:a,multiple:t})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(a){const t=n=>(n.preventDefault(),!this.isComposing&&this.typeAheadSelect()),e={8:n=>this.maybeDeleteValue(),9:n=>this.onTab(),27:n=>this.onEscape(),38:n=>(n.preventDefault(),this.typeAheadUp()),40:n=>(n.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(n=>e[n]=t);const o=this.mapKeydown(e,this);if(typeof o[a.keyCode]=="function")return o[a.keyCode](a)}}},hl=["dir"],fl=["id","aria-expanded","aria-owns"],vl={ref:"selectedOptions",class:"vs__selected-options"},gl=["disabled","title","aria-label","onClick"],ml={ref:"actions",class:"vs__actions"},yl=["disabled"],_l={class:"vs__spinner"},bl=["id"],xl=["id","aria-selected","onMouseover","onClick"],Cl={key:0,class:"vs__no-options"},Sl=W(" Sorry, no matching options. "),wl=["id"];function Al(a,t,e,o,n,r){const i=zo("append-to-body");return O(),B("div",{dir:e.dir,class:Jt(["v-select",r.stateClasses])},[te(a.$slots,"header",ae(ie(r.scope.header))),z("div",{id:`vs${e.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":r.dropdownOpen.toString(),"aria-owns":`vs${e.uid}__listbox`,"aria-label":"Search for option",onMousedown:t[1]||(t[1]=s=>r.toggleDropdown(s))},[z("div",vl,[(O(!0),B(Yt,null,Kt(r.selectedValue,(s,l)=>te(a.$slots,"selected-option-container",{option:r.normalizeOptionForSlot(s),deselect:r.deselect,multiple:e.multiple,disabled:e.disabled},()=>[(O(),B("span",{key:e.getOptionKey(s),class:"vs__selected"},[te(a.$slots,"selected-option",ae(ie(r.normalizeOptionForSlot(s))),()=>[W(se(e.getOptionLabel(s)),1)]),e.multiple?(O(),B("button",{key:0,ref_for:!0,ref:u=>n.deselectButtons[l]=u,disabled:e.disabled,type:"button",class:"vs__deselect",title:`Deselect ${e.getOptionLabel(s)}`,"aria-label":`Deselect ${e.getOptionLabel(s)}`,onClick:u=>r.deselect(s)},[(O(),X(Qe(r.childComponents.Deselect)))],8,gl)):$("",!0)]))])),256)),te(a.$slots,"search",ae(ie(r.scope.search)),()=>[z("input",dt({class:"vs__search"},r.scope.search.attributes,Vo(r.scope.search.events)),null,16)])],512),z("div",ml,[Ze(z("button",{ref:"clearButton",disabled:e.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:t[0]||(t[0]=(...s)=>r.clearSelection&&r.clearSelection(...s))},[(O(),X(Qe(r.childComponents.Deselect)))],8,yl),[[pt,r.showClearButton]]),te(a.$slots,"open-indicator",ae(ie(r.scope.openIndicator)),()=>[e.noDrop?$("",!0):(O(),X(Qe(r.childComponents.OpenIndicator),ae(dt({key:0},r.scope.openIndicator.attributes)),null,16))]),te(a.$slots,"spinner",ae(ie(r.scope.spinner)),()=>[Ze(z("div",_l,"Loading...",512),[[pt,a.mutableLoading]])])],512)],40,fl),P(Ua,{name:e.transition},{default:M(()=>[r.dropdownOpen?Ze((O(),B("ul",{id:`vs${e.uid}__listbox`,ref:"dropdownMenu",key:`vs${e.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:t[2]||(t[2]=Xt((...s)=>r.onMousedown&&r.onMousedown(...s),["prevent"])),onMouseup:t[3]||(t[3]=(...s)=>r.onMouseUp&&r.onMouseUp(...s))},[te(a.$slots,"list-header",ae(ie(r.scope.listHeader))),(O(!0),B(Yt,null,Kt(r.filteredOptions,(s,l)=>(O(),B("li",{id:`vs${e.uid}__option-${l}`,key:e.getOptionKey(s),role:"option",class:Jt(["vs__dropdown-option",{"vs__dropdown-option--deselect":r.isOptionDeselectable(s)&&l===a.typeAheadPointer,"vs__dropdown-option--selected":r.isOptionSelected(s),"vs__dropdown-option--highlight":l===a.typeAheadPointer,"vs__dropdown-option--disabled":!e.selectable(s)}]),"aria-selected":l===a.typeAheadPointer?!0:null,onMouseover:u=>e.selectable(s)?a.typeAheadPointer=l:null,onClick:Xt(u=>e.selectable(s)?r.select(s):null,["prevent","stop"])},[te(a.$slots,"option",ae(ie(r.normalizeOptionForSlot(s))),()=>[W(se(e.getOptionLabel(s)),1)])],42,xl))),128)),r.filteredOptions.length===0?(O(),B("li",Cl,[te(a.$slots,"no-options",ae(ie(r.scope.noOptions)),()=>[Sl])])):$("",!0),te(a.$slots,"list-footer",ae(ie(r.scope.listFooter)))],40,bl)),[[i]]):(O(),B("ul",{key:1,id:`vs${e.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,wl))]),_:3},8,["name"]),te(a.$slots,"footer",ae(ie(r.scope.footer)))],10,hl)}const Tl=$t(pl,[["render",Al]]),Pl={class:"d-flex h-100"},Dl={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},Ol={class:"d-flex me-0"},Il={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},kl={class:"ms-2 text-nowrap"},Ll={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},Ml={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Bl={key:2,class:"ms-2 text-nowrap"},zl={key:3,class:"ms-2 text-nowrap"},Vl={class:"ms-auto d-flex align-items-center w-auto"},Nl={class:"ms-2"},Rl={class:"ms-2 me-0 me-md-1"},El={class:"me-1 ms-1 h-100"},$l={key:1,class:"m-auto"},Fl={key:1,style:{"font-size":"1.5rem"}},Wl={key:0,class:"w-25 config-sidebar"},Zl=Ye({__name:"CandleChartContainer",props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},freqaiModel:{required:!1,default:void 0,type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(a){const t=a,e=No(),o=Za(),n=Io(),r=E(""),i=E(t.plotConfigModal),s=F(()=>{var m,v;return t.historicView?(m=o.activeBot.history[`${r.value}__${t.timeframe}`])==null?void 0:m.data:(v=o.activeBot.candleData[`${r.value}__${t.timeframe}`])==null?void 0:v.data}),l=F(()=>{var m;return t.strategy||((m=s.value)==null?void 0:m.strategy)||""}),u=F(()=>s.value?s.value.columns:[]),c=F(()=>s.value&&s.value.data.length>0),d=F(()=>t.historicView?o.activeBot.historyStatus===Be.loading:o.activeBot.candleDataStatus===Be.loading),h=F(()=>{switch(t.historicView?o.activeBot.historyStatus:o.activeBot.candleDataStatus){case Be.loading:return"Loading...";case Be.success:return"No data available";case Be.error:return"Failed to load data";default:return"Unknown"}}),g=E(!1),f=()=>{t.plotConfigModal?g.value=!g.value:i.value=!i.value},p=()=>{console.log("refresh",r.value,t.timeframe),r.value&&t.timeframe&&(t.historicView?o.activeBot.getPairHistory({pair:r.value,timeframe:t.timeframe,timerange:t.timerange,strategy:t.strategy,freqaimodel:t.freqaiModel}):o.activeBot.getPairCandles({pair:r.value,timeframe:t.timeframe,limit:500}))};return pe(()=>t.availablePairs,()=>{t.availablePairs.find(m=>m===r.value)||([r.value]=t.availablePairs,p())}),pe(()=>o.activeBot.selectedPair,()=>{r.value=o.activeBot.selectedPair,p()}),St(()=>{o.activeBot.selectedPair?r.value=o.activeBot.selectedPair:t.availablePairs.length>0&&([r.value]=t.availablePairs),n.plotConfigChanged(),c.value||p()}),(m,v)=>{const _=Z("b-button"),b=Z("b-form-checkbox"),y=Z("b-form-select"),S=Z("b-spinner"),x=Z("b-modal");return O(),B("div",Pl,[z("div",Dl,[z("div",Ol,[z("div",Il,[z("span",kl,se(D(l))+" | "+se(a.timeframe||""),1),P(D(Tl),{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=C=>r.value=C),class:"ms-2",options:a.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:p},null,8,["modelValue","options"]),P(_,{class:"ms-2",disabled:!r.value,size:"sm",onClick:p},{default:M(()=>[W("↻")]),_:1},8,["disabled"]),D(s)?(O(),B("small",Ll,"Long signals: "+se(D(s).enter_long_signals||D(s).buy_signals),1)):$("",!0),D(s)?(O(),B("small",Ml,"Long exit: "+se(D(s).exit_long_signals||D(s).sell_signals),1)):$("",!0),D(s)&&D(s).enter_short_signals?(O(),B("small",Bl,"Short entries: "+se(D(s).enter_short_signals),1)):$("",!0),D(s)&&D(s).exit_short_signals?(O(),B("small",zl,"Short exits: "+se(D(s).exit_short_signals),1)):$("",!0)]),z("div",Vl,[P(b,{modelValue:D(e).useHeikinAshiCandles,"onUpdate:modelValue":v[1]||(v[1]=C=>D(e).useHeikinAshiCandles=C)},{default:M(()=>[W("Heikin Ashi")]),_:1},8,["modelValue"]),z("div",Nl,[P(y,{modelValue:D(n).plotConfigName,"onUpdate:modelValue":v[2]||(v[2]=C=>D(n).plotConfigName=C),options:D(n).availablePlotConfigNames,size:"sm",onChange:D(n).plotConfigChanged},null,8,["modelValue","options","onChange"])]),z("div",Rl,[P(_,{size:"sm",title:"Plot configurator",onClick:f},{default:M(()=>[W(" ⚙ ")]),_:1})])])]),z("div",El,[D(c)?(O(),X(_s,{key:0,dataset:D(s),trades:a.trades,"plot-config":D(n).plotConfig,"heikin-ashi":D(e).useHeikinAshiCandles,"use-u-t-c":D(e).timezone==="UTC",theme:D(e).chartTheme,"slider-position":a.sliderPosition},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position"])):(O(),B("div",$l,[D(d)?(O(),X(S,{key:0,label:"Spinning"})):(O(),B("div",Fl,se(D(h)),1))]))])]),P(Ua,{name:"fade",mode:"in-out"},{default:M(()=>[a.plotConfigModal?$("",!0):Ze((O(),B("div",Wl,[P(za,{columns:D(u),"as-modal":!1},null,8,["columns"])],512)),[[pt,i.value]])]),_:1}),a.plotConfigModal?(O(),X(x,{key:0,id:"plotConfiguratorModal",modelValue:g.value,"onUpdate:modelValue":v[3]||(v[3]=C=>g.value=C),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:M(()=>[g.value?(O(),X(za,{key:0,columns:D(u)},null,8,["columns"])):$("",!0)]),_:1},8,["modelValue"])):$("",!0)])}}});const ql=$e(Zl,[["__scopeId","data-v-4f051521"]]);export{ql as C};
//# sourceMappingURL=CandleChartContainer-e56c166d.js.map
