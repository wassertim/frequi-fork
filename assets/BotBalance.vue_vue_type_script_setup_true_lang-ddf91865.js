import{g as xe,o as D,c as Y,a as N,t as ee,h as F,m as Ee,d as ct,an as Ct,i as Q,y as qe,j as q,k as P,u as Mt,r as Fe,w as de,b as De,C as Tt,n as Ze,az as wt,f as kt,x as Pt}from"./index-a26190e4.js";import{b1 as Dt,bW as I,c5 as We,J as $e,f as vt,j as It,bb as Je,bm as Bt,P as Nt,c6 as Ke,c7 as Ie,c8 as Ot,c9 as Vt,ca as he,cb as Rt,B as Qe,T as et,bw as $t,g as Be,I as z,cc as Et,ae as Ne,cd as zt,ce as ut,cf as Gt,e as oe,cg as Yt,b9 as Ht,s as le,a9 as tt,v as Le,ch as Xt,af as Ae,aT as jt,Y as Ut,n as at,b0 as ft,_ as ze,Z as qt,o as K,bf as pe,w as Ft,x as Zt,aZ as Wt,aY as Jt,aW as Kt,ci as Qt,b4 as gt,be as ea,C as ta,b as rt,i as dt,cj as aa,ck as ra,cl as na,S as ia,cm as sa,u as oa,aI as la,aE as ca,aF as va,aG as ua,aH as fa,aJ as ga}from"./install-10b53263.js";import{c as da}from"./createSeriesDataSimply-7d1d5dcf.js";const ha={name:"EyeOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},pa=["aria-hidden","aria-label"],ma=["fill","width","height"],ya={d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"},ba={key:0};function La(i,a,t,e,r,o){return D(),Y("span",Ee(i.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-off-icon",role:"img",onClick:a[0]||(a[0]=n=>i.$emit("click",n))}),[(D(),Y("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[N("path",ya,[t.title?(D(),Y("title",ba,ee(t.title),1)):F("",!0)])],8,ma))],16,pa)}const _a=xe(ha,[["render",La]]),Sa={name:"EyeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},xa=["aria-hidden","aria-label"],Aa=["fill","width","height"],Ca={d:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},Ma={key:0};function Ta(i,a,t,e,r,o){return D(),Y("span",Ee(i.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon eye-icon",role:"img",onClick:a[0]||(a[0]=n=>i.$emit("click",n))}),[(D(),Y("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[N("path",Ca,[t.title?(D(),Y("title",Ma,ee(t.title),1)):F("",!0)])],8,Aa))],16,xa)}const wa=xe(Sa,[["render",Ta]]),ka={name:"RobotIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Pa=["aria-hidden","aria-label"],Da=["fill","width","height"],Ia={d:"M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A2.5,2.5 0 0,0 5,15.5A2.5,2.5 0 0,0 7.5,18A2.5,2.5 0 0,0 10,15.5A2.5,2.5 0 0,0 7.5,13M16.5,13A2.5,2.5 0 0,0 14,15.5A2.5,2.5 0 0,0 16.5,18A2.5,2.5 0 0,0 19,15.5A2.5,2.5 0 0,0 16.5,13Z"},Ba={key:0};function Na(i,a,t,e,r,o){return D(),Y("span",Ee(i.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon robot-icon",role:"img",onClick:a[0]||(a[0]=n=>i.$emit("click",n))}),[(D(),Y("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[N("path",Ia,[t.title?(D(),Y("title",Ba,ee(t.title),1)):F("",!0)])],8,Da))],16,Pa)}const Oa=xe(ka,[["render",Na]]);var se=Math.PI*2,U=Dt.CMD,Va=["top","right","bottom","left"];function Ra(i,a,t,e,r){var o=t.width,n=t.height;switch(i){case"top":e.set(t.x+o/2,t.y-a),r.set(0,-1);break;case"bottom":e.set(t.x+o/2,t.y+n+a),r.set(0,1);break;case"left":e.set(t.x-a,t.y+n/2),r.set(-1,0);break;case"right":e.set(t.x+o+a,t.y+n/2),r.set(1,0);break}}function $a(i,a,t,e,r,o,n,l,v){n-=i,l-=a;var u=Math.sqrt(n*n+l*l);n/=u,l/=u;var s=n*t+i,f=l*t+a;if(Math.abs(e-r)%se<1e-4)return v[0]=s,v[1]=f,u-t;if(o){var d=e;e=he(r),r=he(d)}else e=he(e),r=he(r);e>r&&(r+=se);var c=Math.atan2(l,n);if(c<0&&(c+=se),c>=e&&c<=r||c+se>=e&&c+se<=r)return v[0]=s,v[1]=f,u-t;var g=t*Math.cos(e)+i,h=t*Math.sin(e)+a,p=t*Math.cos(r)+i,m=t*Math.sin(r)+a,y=(g-n)*(g-n)+(h-l)*(h-l),b=(p-n)*(p-n)+(m-l)*(m-l);return y<b?(v[0]=g,v[1]=h,Math.sqrt(y)):(v[0]=p,v[1]=m,Math.sqrt(b))}function _e(i,a,t,e,r,o,n,l){var v=r-i,u=o-a,s=t-i,f=e-a,d=Math.sqrt(s*s+f*f);s/=d,f/=d;var c=v*s+u*f,g=c/d;l&&(g=Math.min(Math.max(g,0),1)),g*=d;var h=n[0]=i+g*s,p=n[1]=a+g*f;return Math.sqrt((h-r)*(h-r)+(p-o)*(p-o))}function ht(i,a,t,e,r,o,n){t<0&&(i=i+t,t=-t),e<0&&(a=a+e,e=-e);var l=i+t,v=a+e,u=n[0]=Math.min(Math.max(r,i),l),s=n[1]=Math.min(Math.max(o,a),v);return Math.sqrt((u-r)*(u-r)+(s-o)*(s-o))}var E=[];function Ea(i,a,t){var e=ht(a.x,a.y,a.width,a.height,i.x,i.y,E);return t.set(E[0],E[1]),e}function za(i,a,t){for(var e=0,r=0,o=0,n=0,l,v,u=1/0,s=a.data,f=i.x,d=i.y,c=0;c<s.length;){var g=s[c++];c===1&&(e=s[c],r=s[c+1],o=e,n=r);var h=u;switch(g){case U.M:o=s[c++],n=s[c++],e=o,r=n;break;case U.L:h=_e(e,r,s[c],s[c+1],f,d,E,!0),e=s[c++],r=s[c++];break;case U.C:h=Vt(e,r,s[c++],s[c++],s[c++],s[c++],s[c],s[c+1],f,d,E),e=s[c++],r=s[c++];break;case U.Q:h=Ot(e,r,s[c++],s[c++],s[c],s[c+1],f,d,E),e=s[c++],r=s[c++];break;case U.A:var p=s[c++],m=s[c++],y=s[c++],b=s[c++],x=s[c++],S=s[c++];c+=1;var T=!!(1-s[c++]);l=Math.cos(x)*y+p,v=Math.sin(x)*b+m,c<=1&&(o=l,n=v);var C=(f-p)*b/y+p;h=$a(p,m,b,x,x+S,T,C,d,E),e=Math.cos(x+S)*y+p,r=Math.sin(x+S)*b+m;break;case U.R:o=e=s[c++],n=r=s[c++];var L=s[c++],A=s[c++];h=ht(o,n,L,A,f,d,E);break;case U.Z:h=_e(e,r,o,n,f,d,E,!0),e=o,r=n;break}h<u&&(u=h,t.set(E[0],E[1]))}return u}var G=new I,_=new I,M=new I,X=new I,H=new I;function nt(i,a){if(i){var t=i.getTextGuideLine(),e=i.getTextContent();if(e&&t){var r=i.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],n=r.candidates||Va,l=e.getBoundingRect().clone();l.applyTransform(e.getComputedTransform());var v=1/0,u=r.anchor,s=i.getComputedTransform(),f=s&&Bt([],s),d=a.get("length2")||0;u&&M.copy(u);for(var c=0;c<n.length;c++){var g=n[c];Ra(g,0,l,G,X),I.scaleAndAdd(_,G,X,d),_.transform(f);var h=i.getBoundingRect(),p=u?u.distance(_):i instanceof Nt?za(_,i.path,M):Ea(_,h,M);p<v&&(v=p,_.transform(s),M.transform(s),M.toArray(o[0]),_.toArray(o[1]),G.toArray(o[2]))}pt(o,a.get("minTurnAngle")),t.setShape({points:o})}}}var Se=[],B=new I;function pt(i,a){if(a<=180&&a>0){a=a/180*Math.PI,G.fromArray(i[0]),_.fromArray(i[1]),M.fromArray(i[2]),I.sub(X,G,_),I.sub(H,M,_);var t=X.len(),e=H.len();if(!(t<.001||e<.001)){X.scale(1/t),H.scale(1/e);var r=X.dot(H),o=Math.cos(a);if(o<r){var n=_e(_.x,_.y,M.x,M.y,G.x,G.y,Se,!1);B.fromArray(Se),B.scaleAndAdd(H,n/Math.tan(Math.PI-a));var l=M.x!==_.x?(B.x-_.x)/(M.x-_.x):(B.y-_.y)/(M.y-_.y);if(isNaN(l))return;l<0?I.copy(B,_):l>1&&I.copy(B,M),B.toArray(i[1])}}}}function Ga(i,a,t){if(t<=180&&t>0){t=t/180*Math.PI,G.fromArray(i[0]),_.fromArray(i[1]),M.fromArray(i[2]),I.sub(X,_,G),I.sub(H,M,_);var e=X.len(),r=H.len();if(!(e<.001||r<.001)){X.scale(1/e),H.scale(1/r);var o=X.dot(a),n=Math.cos(t);if(o<n){var l=_e(_.x,_.y,M.x,M.y,G.x,G.y,Se,!1);B.fromArray(Se);var v=Math.PI/2,u=Math.acos(H.dot(a)),s=v+u-t;if(s>=v)I.copy(B,M);else{B.scaleAndAdd(H,l/Math.tan(Math.PI/2-s));var f=M.x!==_.x?(B.x-_.x)/(M.x-_.x):(B.y-_.y)/(M.y-_.y);if(isNaN(f))return;f<0?I.copy(B,_):f>1&&I.copy(B,M)}B.toArray(i[1])}}}}function it(i,a,t,e){var r=t==="normal",o=r?i:i.ensureState(t);o.ignore=a;var n=e.get("smooth");n&&n===!0&&(n=.3),o.shape=o.shape||{},n>0&&(o.shape.smooth=n);var l=e.getModel("lineStyle").getLineStyle();r?i.useStyle(l):o.style=l}function Ya(i,a){var t=a.smooth,e=a.points;if(e)if(i.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var r=Ke(e[0],e[1]),o=Ke(e[1],e[2]);if(!r||!o){i.lineTo(e[1][0],e[1][1]),i.lineTo(e[2][0],e[2][1]);return}var n=Math.min(r,o)*t,l=Ie([],e[1],e[0],n/r),v=Ie([],e[1],e[2],n/o),u=Ie([],l,v,.5);i.bezierCurveTo(l[0],l[1],l[0],l[1],u[0],u[1]),i.bezierCurveTo(v[0],v[1],v[0],v[1],e[2][0],e[2][1])}else for(var s=1;s<e.length;s++)i.lineTo(e[s][0],e[s][1])}function mt(i,a,t){var e=i.getTextGuideLine(),r=i.getTextContent();if(!r){e&&i.removeTextGuideLine();return}for(var o=a.normal,n=o.get("show"),l=r.ignore,v=0;v<We.length;v++){var u=We[v],s=a[u],f=u==="normal";if(s){var d=s.get("show"),c=f?l:$e(r.states[u]&&r.states[u].ignore,l);if(c||!$e(d,n)){var g=f?e:e&&e.states[u];g&&(g.ignore=!0);continue}e||(e=new vt,i.setTextGuideLine(e),!f&&(l||!n)&&it(e,!0,"normal",a.normal),i.stateProxy&&(e.stateProxy=i.stateProxy)),it(e,!1,u,s)}}if(e){It(e.style,t),e.style.fill=null;var h=o.get("showAbove"),p=i.textGuideLineConfig=i.textGuideLineConfig||{};p.showAbove=h||!1,e.buildPath=Ya}}function yt(i,a){a=a||"labelLine";for(var t={normal:i.getModel(a)},e=0;e<Je.length;e++){var r=Je[e];t[r]=i.getModel([r,a])}return t}function Ha(i){if(i){for(var a=[],t=0;t<i.length;t++)a.push(i[t].slice());return a}}function Xa(i,a){var t=i.label,e=a&&a.getTextGuideLine();return{dataIndex:i.dataIndex,dataType:i.dataType,seriesIndex:i.seriesModel.seriesIndex,text:i.label.style.text,rect:i.hostRect,labelRect:i.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:Ha(e&&e.shape.points)}}var st=["align","verticalAlign","width","height","fontSize"],V=new Rt,Oe=Ae(),ja=Ae();function me(i,a,t){for(var e=0;e<t.length;e++){var r=t[e];a[r]!=null&&(i[r]=a[r])}}var ye=["x","y","rotation"],Ua=function(){function i(){this._labelList=[],this._chartViewList=[]}return i.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},i.prototype._addLabel=function(a,t,e,r,o){var n=r.style,l=r.__hostTarget,v=l.textConfig||{},u=r.getComputedTransform(),s=r.getBoundingRect().plain();Qe.applyTransform(s,s,u),u?V.setLocalTransform(u):(V.x=V.y=V.rotation=V.originX=V.originY=0,V.scaleX=V.scaleY=1);var f=r.__hostTarget,d;if(f){d=f.getBoundingRect().plain();var c=f.getComputedTransform();Qe.applyTransform(d,d,c)}var g=d&&f.getTextGuideLine();this._labelList.push({label:r,labelLine:g,seriesModel:e,dataIndex:a,dataType:t,layoutOption:o,computedLayoutOption:null,rect:s,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:g&&g.ignore,x:V.x,y:V.y,scaleX:V.scaleX,scaleY:V.scaleY,rotation:V.rotation,style:{x:n.x,y:n.y,align:n.align,verticalAlign:n.verticalAlign,width:n.width,height:n.height,fontSize:n.fontSize},cursor:r.cursor,attachedPos:v.position,attachedRot:v.rotation}})},i.prototype.addLabelsOfSeries=function(a){var t=this;this._chartViewList.push(a);var e=a.__model,r=e.get("labelLayout");(et(r)||$t(r).length)&&a.group.traverse(function(o){if(o.ignore)return!0;var n=o.getTextContent(),l=Be(o);n&&!n.disableLabelLayout&&t._addLabel(l.dataIndex,l.dataType,e,n,r)})},i.prototype.updateLayoutConfig=function(a){var t=a.getWidth(),e=a.getHeight();function r(b,x){return function(){nt(b,x)}}for(var o=0;o<this._labelList.length;o++){var n=this._labelList[o],l=n.label,v=l.__hostTarget,u=n.defaultAttr,s=void 0;et(n.layoutOption)?s=n.layoutOption(Xa(n,v)):s=n.layoutOption,s=s||{},n.computedLayoutOption=s;var f=Math.PI/180;v&&v.setTextConfig({local:!1,position:s.x!=null||s.y!=null?null:u.attachedPos,rotation:s.rotate!=null?s.rotate*f:u.attachedRot,offset:[s.dx||0,s.dy||0]});var d=!1;if(s.x!=null?(l.x=z(s.x,t),l.setStyle("x",0),d=!0):(l.x=u.x,l.setStyle("x",u.style.x)),s.y!=null?(l.y=z(s.y,e),l.setStyle("y",0),d=!0):(l.y=u.y,l.setStyle("y",u.style.y)),s.labelLinePoints){var c=v.getTextGuideLine();c&&(c.setShape({points:s.labelLinePoints}),d=!1)}var g=Oe(l);g.needsUpdateLabelLine=d,l.rotation=s.rotate!=null?s.rotate*f:u.rotation,l.scaleX=u.scaleX,l.scaleY=u.scaleY;for(var h=0;h<st.length;h++){var p=st[h];l.setStyle(p,s[p]!=null?s[p]:u.style[p])}if(s.draggable){if(l.draggable=!0,l.cursor="move",v){var m=n.seriesModel;if(n.dataIndex!=null){var y=n.seriesModel.getData(n.dataType);m=y.getItemModel(n.dataIndex)}l.on("drag",r(v,m.getModel("labelLine")))}}else l.off("drag"),l.cursor=u.cursor}},i.prototype.layout=function(a){var t=a.getWidth(),e=a.getHeight(),r=Et(this._labelList),o=Ne(r,function(v){return v.layoutOption.moveOverlap==="shiftX"}),n=Ne(r,function(v){return v.layoutOption.moveOverlap==="shiftY"});zt(o,0,t),ut(n,0,e);var l=Ne(r,function(v){return v.layoutOption.hideOverlap});Gt(l)},i.prototype.processLabelsOverall=function(){var a=this;oe(this._chartViewList,function(t){var e=t.__model,r=t.ignoreLabelLineUpdate,o=e.isAnimationEnabled();t.group.traverse(function(n){if(n.ignore&&!n.forceLabelAnimation)return!0;var l=!r,v=n.getTextContent();!l&&v&&(l=Oe(v).needsUpdateLabelLine),l&&a._updateLabelLine(n,e),o&&a._animateLabels(n,e)})})},i.prototype._updateLabelLine=function(a,t){var e=a.getTextContent(),r=Be(a),o=r.dataIndex;if(e&&o!=null){var n=t.getData(r.dataType),l=n.getItemModel(o),v={},u=n.getItemVisual(o,"style"),s=n.getVisual("drawType");v.stroke=u[s];var f=l.getModel("labelLine");mt(a,yt(l),v),nt(a,f)}},i.prototype._animateLabels=function(a,t){var e=a.getTextContent(),r=a.getTextGuideLine();if(e&&(a.forceLabelAnimation||!e.ignore&&!e.invisible&&!a.disableLabelAnimation&&!Yt(a))){var o=Oe(e),n=o.oldLayout,l=Be(a),v=l.dataIndex,u={x:e.x,y:e.y,rotation:e.rotation},s=t.getData(l.dataType);if(n){e.attr(n);var d=a.prevStates;d&&(tt(d,"select")>=0&&e.attr(o.oldLayoutSelect),tt(d,"emphasis")>=0&&e.attr(o.oldLayoutEmphasis)),Le(e,u,t,v)}else if(e.attr(u),!Ht(e).valueAnimation){var f=$e(e.style.opacity,1);e.style.opacity=0,le(e,{style:{opacity:f}},t,v)}if(o.oldLayout=u,e.states.select){var c=o.oldLayoutSelect={};me(c,u,ye),me(c,e.states.select,ye)}if(e.states.emphasis){var g=o.oldLayoutEmphasis={};me(g,u,ye),me(g,e.states.emphasis,ye)}Xt(e,v,s,t,t)}if(r&&!r.ignore&&!r.invisible){var o=ja(r),n=o.oldLayout,h={points:r.shape.points};n?(r.attr({shape:n}),Le(r,{shape:h},t)):(r.setShape(h),r.style.strokePercent=0,le(r,{style:{strokePercent:1}},t)),o.oldLayout=h}},i}();const qa=Ua;var Ve=Ae();function Fa(i){i.registerUpdateLifecycle("series:beforeupdate",function(a,t,e){var r=Ve(t).labelManager;r||(r=Ve(t).labelManager=new qa),r.clearLabels()}),i.registerUpdateLifecycle("series:layoutlabels",function(a,t,e){var r=Ve(t).labelManager;e.updatedSeries.forEach(function(o){r.addLabelsOfSeries(t.getViewOfSeriesModel(o))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}var be=Math.PI*2,ot=Math.PI/180;function bt(i,a){return Ut(i.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function Lt(i,a){var t=bt(i,a),e=i.get("center"),r=i.get("radius");at(r)||(r=[0,r]);var o=z(t.width,a.getWidth()),n=z(t.height,a.getHeight()),l=Math.min(o,n),v=z(r[0],l/2),u=z(r[1],l/2),s,f,d=i.coordinateSystem;if(d){var c=d.dataToPoint(e);s=c[0]||0,f=c[1]||0}else at(e)||(e=[e,e]),s=z(e[0],o)+t.x,f=z(e[1],n)+t.y;return{cx:s,cy:f,r0:v,r:u}}function Za(i,a,t){a.eachSeriesByType(i,function(e){var r=e.getData(),o=r.mapDimension("value"),n=bt(e,t),l=Lt(e,t),v=l.cx,u=l.cy,s=l.r,f=l.r0,d=-e.get("startAngle")*ot,c=e.get("minAngle")*ot,g=0;r.each(o,function(k){!isNaN(k)&&g++});var h=r.getSum(o),p=Math.PI/(h||g)*2,m=e.get("clockwise"),y=e.get("roseType"),b=e.get("stillShowZeroSum"),x=r.getDataExtent(o);x[0]=0;var S=be,T=0,C=d,L=m?1:-1;if(r.setLayout({viewRect:n,r:s}),r.each(o,function(k,R){var w;if(isNaN(k)){r.setItemLayout(R,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:m,cx:v,cy:u,r0:f,r:y?NaN:s});return}y!=="area"?w=h===0&&b?p:k*p:w=be/g,w<c?(w=c,S-=c):T+=k;var O=C+L*w;r.setItemLayout(R,{angle:w,startAngle:C,endAngle:O,clockwise:m,cx:v,cy:u,r0:f,r:y?jt(k,x,[f,s]):s}),C=O}),S<be&&g)if(S<=.001){var A=be/g;r.each(o,function(k,R){if(!isNaN(k)){var w=r.getItemLayout(R);w.angle=A,w.startAngle=d+L*R*A,w.endAngle=d+L*(R+1)*A}})}else p=S/T,C=d,r.each(o,function(k,R){if(!isNaN(k)){var w=r.getItemLayout(R),O=w.angle===c?c:k*p;w.startAngle=C,w.endAngle=C+L*O,C+=L*O}})})}function Wa(i){return{seriesType:i,reset:function(a,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var r=a.getData();r.filterSelf(function(o){for(var n=r.getName(o),l=0;l<e.length;l++)if(!e[l].isSelected(n))return!1;return!0})}}}}var Ja=Math.PI/180;function lt(i,a,t,e,r,o,n,l,v,u){if(i.length<2)return;function s(h){for(var p=h.rB,m=p*p,y=0;y<h.list.length;y++){var b=h.list[y],x=Math.abs(b.label.y-t),S=e+b.len,T=S*S,C=Math.sqrt((1-Math.abs(x*x/m))*T),L=a+(C+b.len2)*r,A=L-b.label.x,k=b.targetTextWidth-A*r;_t(b,k,!0),b.label.x=L}}function f(h){for(var p={list:[],maxY:0},m={list:[],maxY:0},y=0;y<h.length;y++)if(h[y].labelAlignTo==="none"){var b=h[y],x=b.label.y>t?m:p,S=Math.abs(b.label.y-t);if(S>=x.maxY){var T=b.label.x-a-b.len2*r,C=e+b.len,L=Math.abs(T)<C?Math.sqrt(S*S/(1-T*T/C/C)):C;x.rB=L,x.maxY=S}x.list.push(b)}s(p),s(m)}for(var d=i.length,c=0;c<d;c++)if(i[c].position==="outer"&&i[c].labelAlignTo==="labelLine"){var g=i[c].label.x-u;i[c].linePoints[1][0]+=g,i[c].label.x=u}ut(i,v,v+n)&&f(i)}function Ka(i,a,t,e,r,o,n,l){for(var v=[],u=[],s=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=0;d<i.length;d++){var c=i[d].label;Re(i[d])||(c.x<a?(s=Math.min(s,c.x),v.push(i[d])):(f=Math.max(f,c.x),u.push(i[d])))}for(var d=0;d<i.length;d++){var g=i[d];if(!Re(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var c=g.label,h=g.linePoints,p=void 0;g.labelAlignTo==="edge"?c.x<a?p=h[2][0]-g.labelDistance-n-g.edgeDistance:p=n+r-g.edgeDistance-h[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?c.x<a?p=s-n-g.bleedMargin:p=n+r-f-g.bleedMargin:c.x<a?p=c.x-n-g.bleedMargin:p=n+r-c.x-g.bleedMargin,g.targetTextWidth=p,_t(g,p)}}lt(u,a,t,e,1,r,o,n,l,f),lt(v,a,t,e,-1,r,o,n,l,s);for(var d=0;d<i.length;d++){var g=i[d];if(!Re(g)&&g.linePoints){var c=g.label,h=g.linePoints,m=g.labelAlignTo==="edge",y=c.style.padding,b=y?y[1]+y[3]:0,x=c.style.backgroundColor?0:b,S=g.rect.width+x,T=h[1][0]-h[2][0];m?c.x<a?h[2][0]=n+g.edgeDistance+S+g.labelDistance:h[2][0]=n+r-g.edgeDistance-S-g.labelDistance:(c.x<a?h[2][0]=c.x+g.labelDistance:h[2][0]=c.x-g.labelDistance,h[1][0]=h[2][0]+T),h[1][1]=h[2][1]=c.y}}}function _t(i,a,t){if(t===void 0&&(t=!1),i.labelStyleWidth==null){var e=i.label,r=e.style,o=i.rect,n=r.backgroundColor,l=r.padding,v=l?l[1]+l[3]:0,u=r.overflow,s=o.width+(n?0:v);if(a<s||t){var f=o.height;if(u&&u.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",a-v);var d=e.getBoundingRect();e.setStyle("width",Math.ceil(d.width)),e.setStyle("backgroundColor",n)}else{var c=a-v,g=a<s?c:t?c>i.unconstrainedWidth?null:c:null;e.setStyle("width",g)}var h=e.getBoundingRect();o.width=h.width;var p=(e.style.margin||0)+2.1;o.height=h.height+p,o.y-=(o.height-f)/2}}}function Re(i){return i.position==="center"}function Qa(i){var a=i.getData(),t=[],e,r,o=!1,n=(i.get("minShowLabelAngle")||0)*Ja,l=a.getLayout("viewRect"),v=a.getLayout("r"),u=l.width,s=l.x,f=l.y,d=l.height;function c(T){T.ignore=!0}function g(T){if(!T.ignore)return!0;for(var C in T.states)if(T.states[C].ignore===!1)return!0;return!1}a.each(function(T){var C=a.getItemGraphicEl(T),L=C.shape,A=C.getTextContent(),k=C.getTextGuideLine(),R=a.getItemModel(T),w=R.getModel("label"),O=w.get("position")||R.get(["emphasis","label","position"]),Ce=w.get("distanceToLabelLine"),Me=w.get("alignTo"),Te=z(w.get("edgeDistance"),u),St=w.get("bleedMargin"),ce=R.getModel("labelLine"),te=ce.get("length");te=z(te,u);var ve=ce.get("length2");if(ve=z(ve,u),Math.abs(L.endAngle-L.startAngle)<n){oe(A.states,c),A.ignore=!0,k&&(oe(k.states,c),k.ignore=!0);return}if(g(A)){var ue=(L.startAngle+L.endAngle)/2,$=Math.cos(ue),j=Math.sin(ue),ae,fe,Ge,ge;e=L.cx,r=L.cy;var Z=O==="inside"||O==="inner";if(O==="center")ae=L.cx,fe=L.cy,ge="center";else{var we=(Z?(L.r+L.r0)/2*$:L.r*$)+e,ke=(Z?(L.r+L.r0)/2*j:L.r*j)+r;if(ae=we+$*3,fe=ke+j*3,!Z){var Ye=we+$*(te+v-L.r),He=ke+j*(te+v-L.r),Xe=Ye+($<0?-1:1)*ve,je=He;Me==="edge"?ae=$<0?s+Te:s+u-Te:ae=Xe+($<0?-Ce:Ce),fe=je,Ge=[[we,ke],[Ye,He],[Xe,je]]}ge=Z?"center":Me==="edge"?$>0?"right":"left":$>0?"left":"right"}var re=Math.PI,W=0,ne=w.get("rotate");if(ft(ne))W=ne*(re/180);else if(O==="center")W=0;else if(ne==="radial"||ne===!0){var xt=$<0?-ue+re:-ue;W=xt}else if(ne==="tangential"&&O!=="outside"&&O!=="outer"){var J=Math.atan2($,j);J<0&&(J=re*2+J);var At=j>0;At&&(J=re+J),W=J-re}if(o=!!W,A.x=ae,A.y=fe,A.rotation=W,A.setStyle({verticalAlign:"middle"}),Z){A.setStyle({align:ge});var Pe=A.states.select;Pe&&(Pe.x+=A.x,Pe.y+=A.y)}else{var ie=A.getBoundingRect().clone();ie.applyTransform(A.getComputedTransform());var Ue=(A.style.margin||0)+2.1;ie.y-=Ue/2,ie.height+=Ue,t.push({label:A,labelLine:k,position:O,len:te,len2:ve,minTurnAngle:ce.get("minTurnAngle"),maxSurfaceAngle:ce.get("maxSurfaceAngle"),surfaceNormal:new I($,j),linePoints:Ge,textAlign:ge,labelDistance:Ce,labelAlignTo:Me,edgeDistance:Te,bleedMargin:St,rect:ie,unconstrainedWidth:ie.width,labelStyleWidth:A.style.width})}C.setTextConfig({inside:Z})}}),!o&&i.get("avoidLabelOverlap")&&Ka(t,e,r,v,u,d,s,f);for(var h=0;h<t.length;h++){var p=t[h],m=p.label,y=p.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),b&&(oe(m.states,c),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var S=p.linePoints;b||!S?(oe(y.states,c),y.ignore=!0):(pt(S,p.minTurnAngle),Ga(S,p.surfaceNormal,p.maxSurfaceAngle),y.setShape({points:S}),m.__hostTarget.textGuideLineConfig={anchor:new I(S[0][0],S[0][1])})}}}var er=function(i){ze(a,i);function a(t,e,r){var o=i.call(this)||this;o.z2=2;var n=new qt;return o.setTextContent(n),o.updateData(t,e,r,!0),o}return a.prototype.updateData=function(t,e,r,o){var n=this,l=t.hostModel,v=t.getItemModel(e),u=v.getModel("emphasis"),s=t.getItemLayout(e),f=K(pe(v.getModel("itemStyle"),s,!0),s);if(isNaN(f.startAngle)){n.setShape(f);return}if(o){n.setShape(f);var d=l.getShallow("animationType");l.ecModel.ssr?(le(n,{scaleX:0,scaleY:0},l,{dataIndex:e,isFrom:!0}),n.originX=f.cx,n.originY=f.cy):d==="scale"?(n.shape.r=s.r0,le(n,{shape:{r:s.r}},l,e)):r!=null?(n.setShape({startAngle:r,endAngle:r}),le(n,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},l,e)):(n.shape.endAngle=s.startAngle,Le(n,{shape:{endAngle:s.endAngle}},l,e))}else Ft(n),Le(n,{shape:f},l,e);n.useStyle(t.getItemVisual(e,"style")),Zt(n,v);var c=(s.startAngle+s.endAngle)/2,g=l.get("selectedOffset"),h=Math.cos(c)*g,p=Math.sin(c)*g,m=v.getShallow("cursor");m&&n.attr("cursor",m),this._updateLabel(l,t,e),n.ensureState("emphasis").shape=K({r:s.r+(u.get("scale")&&u.get("scaleSize")||0)},pe(u.getModel("itemStyle"),s)),K(n.ensureState("select"),{x:h,y:p,shape:pe(v.getModel(["select","itemStyle"]),s)}),K(n.ensureState("blur"),{shape:pe(v.getModel(["blur","itemStyle"]),s)});var y=n.getTextGuideLine(),b=n.getTextContent();y&&K(y.ensureState("select"),{x:h,y:p}),K(b.ensureState("select"),{x:h,y:p}),Wt(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},a.prototype._updateLabel=function(t,e,r){var o=this,n=e.getItemModel(r),l=n.getModel("labelLine"),v=e.getItemVisual(r,"style"),u=v&&v.fill,s=v&&v.opacity;Jt(o,Kt(n),{labelFetcher:e.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:s,defaultText:t.getFormattedLabel(r,"normal")||e.getName(r)});var f=o.getTextContent();o.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var d=t.get(["label","position"]);if(d!=="outside"&&d!=="outer")o.removeTextGuideLine();else{var c=this.getTextGuideLine();c||(c=new vt,this.setTextGuideLine(c)),mt(this,yt(n),{stroke:u,opacity:Qt(l.get(["lineStyle","opacity"]),s,1)})}},a}(gt),tr=function(i){ze(a,i);function a(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return a.prototype.render=function(t,e,r,o){var n=t.getData(),l=this._data,v=this.group,u;if(!l&&n.count()>0){for(var s=n.getItemLayout(0),f=1;isNaN(s&&s.startAngle)&&f<n.count();++f)s=n.getItemLayout(f);s&&(u=s.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),n.count()===0&&t.get("showEmptyCircle")){var d=new gt({shape:Lt(t,r)});d.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,v.add(d)}n.diff(l).add(function(c){var g=new er(n,c,u);n.setItemGraphicEl(c,g),v.add(g)}).update(function(c,g){var h=l.getItemGraphicEl(g);h.updateData(n,c,u),h.off("click"),v.add(h),n.setItemGraphicEl(c,h)}).remove(function(c){var g=l.getItemGraphicEl(c);ea(g,t,c)}).execute(),Qa(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=n)},a.prototype.dispose=function(){},a.prototype.containPoint=function(t,e){var r=e.getData(),o=r.getItemLayout(0);if(o){var n=t[0]-o.cx,l=t[1]-o.cy,v=Math.sqrt(n*n+l*l);return v<=o.r&&v>=o.r0}},a.type="pie",a}(ta);const ar=tr;var rr=function(){function i(a,t){this._getDataWithEncodedVisual=a,this._getRawData=t}return i.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},i.prototype.containName=function(a){var t=this._getRawData();return t.indexOfName(a)>=0},i.prototype.indexOfName=function(a){var t=this._getDataWithEncodedVisual();return t.indexOfName(a)},i.prototype.getItemVisual=function(a,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(a,t)},i}();const nr=rr;var ir=Ae(),sr=function(i){ze(a,i);function a(){return i!==null&&i.apply(this,arguments)||this}return a.prototype.init=function(t){i.prototype.init.apply(this,arguments),this.legendVisualProvider=new nr(rt(this.getData,this),rt(this.getRawData,this)),this._defaultLabelLine(t)},a.prototype.mergeOption=function(){i.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return da(this,{coordDimensions:["value"],encodeDefaulter:dt(aa,this)})},a.prototype.getDataParams=function(t){var e=this.getData(),r=ir(e),o=r.seats;if(!o){var n=[];e.each(e.mapDimension("value"),function(v){n.push(v)}),o=r.seats=ra(n,e.hostModel.get("percentPrecision"))}var l=i.prototype.getDataParams.call(this,t);return l.percent=o[t]||0,l.$vars.push("percent"),l},a.prototype._defaultLabelLine=function(t){na(t,"labelLine",["show"]);var e=t.labelLine,r=t.emphasis.labelLine;e.show=e.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(ia);const or=sr;function lr(i){return{seriesType:i,reset:function(a,t){var e=a.getData();e.filterSelf(function(r){var o=e.mapDimension("value"),n=e.get(o,r);return!(ft(n)&&!isNaN(n)&&n<0)})}}}function cr(i){i.registerChartView(ar),i.registerSeriesModel(or),sa("pie",i.registerAction),i.registerLayout(dt(Za,"pie")),i.registerProcessor(Wa("pie")),i.registerProcessor(lr("pie"))}const vr=ct({__name:"BalanceChart",props:{currencies:{required:!0,type:Array},showTitle:{required:!1,type:Boolean}},setup(i){const a=i;oa([cr,la,ca,va,ua,fa,Fa]);const t=Ct(),e=Q(()=>({title:{text:"Balance",show:a.showTitle},center:["50%","50%"],backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["balance","currency","est_stake","free","used","stake"],source:a.currencies},tooltip:{trigger:"item",formatter:r=>`${qe(r.value.balance,r.value.currency,8)}<br />${r.percent}% (${qe(r.value.est_stake,r.value.stake)})`},series:[{type:"pie",radius:["40%","70%"],encode:{value:"est_stake",itemName:"currency",tooltip:["balance","currency"]},label:{formatter:"{b} - {d}%"},tooltip:{show:!0}}]}));return(r,o)=>i.currencies?(D(),q(P(ga),{key:0,option:P(e),theme:P(t).chartTheme,autoresize:""},null,8,["option","theme"])):F("",!0)}});const ur=xe(vr,[["__scopeId","data-v-b9db5d4a"]]),fr={class:"mb-2"},gr=N("label",{class:"me-auto h3"},"Balance",-1),dr={class:"float-end d-flex flex-row"},hr={key:0},pr=N("td",null,[N("strong",null,"Total")],-1),mr=["title"],_r=ct({__name:"BotBalance",setup(i){const a=Mt(),t=Fe(!0),e=Fe(!0),r=Q(()=>Number((1.1**a.activeBot.stakeCurrencyDecimals).toFixed(8))),o=Q(()=>a.activeBot.botApiVersion>=2.26),n=Q(()=>{var s;return(s=a.activeBot.balance.currencies)==null?void 0:s.filter(f=>(!t.value||f.est_stake>=r.value)&&(!o.value||!e.value||(f.is_bot_managed??!0)===!0))}),l=s=>s?Tt(s,a.activeBot.stakeCurrencyDecimals):"",v=Q(()=>{var s;return(s=n.value)==null?void 0:s.map(f=>({balance:f.balance,currency:f.currency,est_stake:e.value&&o.value?f.est_stake_bot??f.est_stake:f.est_stake,free:e.value&&o.value?f.bot_owned??f.free:f.free,used:f.used,stake:f.stake}))}),u=Q(()=>[{key:"currency",label:"Currency"},{key:e.value&&o.value?"bot_owned":"free",label:"Available",formatter:l},{key:e.value&&o.value?"est_stake_bot":"est_stake",label:`in ${a.activeBot.balance.stake}`,formatter:l}]);return(s,f)=>{const d=Ze("b-button"),c=Ze("b-table");return D(),Y("div",null,[N("div",fr,[gr,N("div",dr,[P(o)?(D(),q(d,{key:0,size:"sm",title:e.value?"Showing Bot balance":"Showing Account balance",onClick:f[0]||(f[0]=g=>e.value=!e.value)},{default:de(()=>[e.value?(D(),q(Oa,{key:0,size:16})):(D(),q(wt,{key:1,size:16}))]),_:1},8,["title"])):F("",!0),De(d,{size:"sm",title:t.value?"Show all balances":"Hide small balances",onClick:f[1]||(f[1]=g=>t.value=!t.value)},{default:de(()=>[t.value?(D(),q(_a,{key:0,size:16})):(D(),q(wa,{key:1,size:16}))]),_:1},8,["title"]),De(d,{class:"float-end",size:"sm",onClick:P(a).activeBot.getBalance},{default:de(()=>[kt("â†»")]),_:1},8,["onClick"])])]),P(n)?(D(),q(ur,{key:0,currencies:P(v)},null,8,["currencies"])):F("",!0),N("div",null,[P(a).activeBot.balance.note?(D(),Y("p",hr,[N("strong",null,ee(P(a).activeBot.balance.note),1)])):F("",!0),De(c,{class:"table-sm",items:P(n),fields:P(u)},{"custom-foot":de(()=>[pr,N("td",null,[N("span",{class:"font-italic",title:`Increase over initial capital of ${l(P(a).activeBot.balance.starting_capital)} ${P(a).activeBot.balance.stake}`},ee(P(Pt)(P(a).activeBot.balance.starting_capital_ratio)),9,mr)]),N("td",null,[N("strong",null,ee(e.value&&P(o)?l(P(a).activeBot.balance.total_bot):l(P(a).activeBot.balance.total)),1)])]),_:1},8,["items","fields"])])])}}});export{_r as _};
//# sourceMappingURL=BotBalance.vue_vue_type_script_setup_true_lang-ddf91865.js.map
