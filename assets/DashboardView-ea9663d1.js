import{a as v,D as G}from"./DraggableContainer-bee91022.js";import{C as M,P as W,T as q}from"./TradesLog-5e271b1c.js";import{P as $,I}from"./InfoBox-bb0b0dfe.js";import{d as z,u as E,i as c,o as _,j as T,w as s,a as b,k as e,h as B,t as D,c as U,C as H,f as R,n as N,E as J,r as K,F as k,aw as S,z as Q,b as o,m as L}from"./index-a26190e4.js";import{T as j}from"./TradeList-20a3052b.js";import"./install-10b53263.js";import"./chartZoom-16ae2117.js";const X={class:"d-flex flex-row"},Y={key:0},Z=["title"],ee={class:"text-small"},te={key:0},ae={class:"text-profit"},oe={class:"text-loss"},se=z({__name:"BotComparisonList",setup(A){const l=(n,d)=>!n.profitClosed||!d.profitClosed?-1:n.profitClosed-d.profitClosed,r=E(),O=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],P=c(()=>{const n=[],d={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(r.allProfit).forEach(([a,i])=>{var f,p,h,y,V;const t=r.allOpenTrades[a].reduce((u,g)=>u+g.stake_amount,0),m=r.allOpenTrades[a].reduce((u,g)=>u+g.profit_ratio*g.stake_amount,0)/t,C=r.allOpenTrades[a].reduce((u,g)=>u+(g.profit_abs??0),0);n.push({botId:a,botName:r.availableBots[a].botName,trades:`${r.allOpenTradeCount[a]} / ${((f=r.allBotState[a])==null?void 0:f.max_open_trades)||"N/A"}`,profitClosed:i.profit_closed_coin,profitClosedRatio:i.profit_closed_ratio||0,stakeCurrency:((p=r.allBotState[a])==null?void 0:p.stake_currency)||"",profitOpenRatio:m,profitOpen:C,wins:i.winning_trades,losses:i.losing_trades,balance:((h=r.allBalance[a])==null?void 0:h.total_bot)??((y=r.allBalance[a])==null?void 0:y.total),stakeCurrencyDecimals:((V=r.allBotState[a])==null?void 0:V.stake_currency_decimals)||3}),i.profit_closed_coin!==void 0&&(d.profitClosed+=i.profit_closed_coin,d.profitOpen+=i.profit_all_coin,d.wins+=i.winning_trades,d.losses+=i.losing_trades)}),n.sort(l),n.push(d),n});return(n,d)=>{const a=N("b-form-checkbox"),i=N("b-table");return _(),T(i,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:e(P),fields:O},{"cell(botName)":s(t=>[b("div",X,[t.item.botId&&e(r).botCount>1?(_(),T(a,{key:0,modelValue:e(r).botStores[t.item.botId].isSelected,"onUpdate:modelValue":m=>e(r).botStores[t.item.botId].isSelected=m,title:"Show bot in Dashboard"},null,8,["modelValue","onUpdate:modelValue"])):B("",!0),b("span",null,D(t.value),1)])]),"cell(profitOpen)":s(t=>[t.item.profitOpen&&t.item.botId!="Summary"?(_(),T($,{key:0,"profit-ratio":t.item.profitOpenRatio,"profit-abs":t.item.profitOpen,"stake-currency":t.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):B("",!0)]),"cell(profitClosed)":s(t=>[t.item.profitClosed&&t.item.botId!="Summary"?(_(),T($,{key:0,"profit-ratio":t.item.profitClosedRatio,"profit-abs":t.item.profitClosed,"stake-currency":t.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):B("",!0)]),"cell(balance)":s(t=>[t.item.balance?(_(),U("div",Y,[b("span",{title:t.item.stakeCurrency},D(e(H)(t.item.balance,t.item.stakeCurrencyDecimals)),9,Z),b("span",ee,D(t.item.stakeCurrency),1)])):B("",!0)]),"cell(winVsLoss)":s(t=>[t.item.losses!==void 0?(_(),U("div",te,[b("span",ae,D(t.item.wins),1),R(" / "),b("span",oe,D(t.item.losses),1)])):B("",!0)]),_:1},8,["items"])}}}),re={class:"d-flex justify-content-center"},le={class:"d-flex justify-content-center"},pe=z({__name:"DashboardView",setup(A){const l=E(),r=J(),O=K(""),P=u=>{O.value=u},n=c(()=>["","sm","md","lg","xl"].includes(O.value)),d=c(()=>r.layoutLocked||!n.value),a=c(()=>n.value?r.dashboardLayout:[...r.getDashboardLayoutSm]),i=u=>{n.value&&(console.log("newlayout",u),console.log("saving dashboard"),r.dashboardLayout=u)},t=c(()=>k(a.value,S.dailyChart)),m=c(()=>k(a.value,S.botComparison)),C=c(()=>k(a.value,S.allOpenTrades)),f=c(()=>k(a.value,S.allClosedTrades)),p=c(()=>k(a.value,S.cumChartChart)),h=c(()=>k(a.value,S.profitDistributionChart)),y=c(()=>k(a.value,S.tradesLogChart)),V=c(()=>({sm:r.getDashboardLayoutSm}));return Q(async()=>{await l.allGetDaily({timescale:30}),l.activeBot.getOpenTrades(),l.activeBot.getProfit()}),(u,g)=>{const w=N("grid-item"),F=N("grid-layout");return _(),T(F,{class:"h-100 w-100","row-height":50,layout:e(a),"vertical-compact":!1,margin:[5,5],"responsive-layouts":e(V),"is-resizable":!e(d),"is-draggable":!e(d),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:i,onBreakpointChanged:P},{default:s(({gridItemProps:x})=>[o(w,L(x,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:`Daily Profit ${e(l).botCount>1?"combined":""}`},{default:s(()=>[e(l).allDailyStatsSelectedBots?(_(),T(G,{key:0,"daily-stats":e(l).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):B("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Bot comparison"},{default:s(()=>[o(se)]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(C).i,x:e(C).x,y:e(C).y,w:e(C).w,h:e(C).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,null,{header:s(()=>[b("div",re,[R(" Open Trades "),o(I,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[o(j,{"active-trades":"",trades:e(l).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(p).i,x:e(p).x,y:e(p).y,w:e(p).w,h:e(p).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Cumulative Profit"},{default:s(()=>[o(M,{trades:e(l).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(f).i,x:e(f).x,y:e(f).y,w:e(f).w,h:e(f).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,null,{header:s(()=>[b("div",le,[R(" Closed Trades "),o(I,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[o(j,{"active-trades":!1,"show-filter":"",trades:e(l).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Profit Distribution"},{default:s(()=>[o(W,{trades:e(l).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),o(w,L(x,{i:e(y).i,x:e(y).x,y:e(y).y,w:e(y).w,h:e(y).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[o(v,{header:"Trades Log"},{default:s(()=>[o(q,{trades:e(l).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{pe as default};
//# sourceMappingURL=DashboardView-ea9663d1.js.map
