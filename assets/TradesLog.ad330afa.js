import{a4 as f,a5 as b,a6 as g,a7 as y,a8 as v,a9 as C,aa as $}from"./install.870b0ea5.js";import{d as T,E as x,i as p,_ as w,r as d,o as u,c as B,a as R,j as k,g as P,b as L,w as D,V as z,y as N}from"./index.dc3313a3.js";import{j as O,e as S,k as I,g as V,h as G}from"./install.07e0ac58.js";function M(t,a){const r=Math.min(...t),n=(Math.max(...t)-r)*1.01/a,e=[...Array(a).keys()].map(o=>[Math.round((r+o*n)*1e3)/1e3,0]);for(let o=0;o<t.length;o++){const l=Math.min(Math.floor((t[o]-r)/n),a-1);isNaN(l)||e[l][1]++}return e}f([O,g,y,S,v,C,$]);const h="Trade count",j=T({name:"ProfitDistributionChart",components:{"v-chart":b},props:{trades:{required:!0,type:Array},showTitle:{default:!0,type:Boolean}},setup(t){const a=x(),r=[10,15,20,25,50],c=p(()=>{const e=t.trades.map(o=>o.profit_ratio);return M(e,a.profitDistributionBins)}),n=p(()=>({title:{text:"Profit distribution",show:t.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:{source:c.value},tooltip:{trigger:"axis",axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},legend:{data:[h],right:"5%"},xAxis:{type:"category",name:"Profit %",nameLocation:"middle",nameGap:25},yAxis:[{type:"value",name:h,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:35,position:"left"}],series:[{type:"bar",name:h,animation:!0,encode:{x:"x0",y:"y0"}}]}));return{settingsStore:a,chartOptions:n,binOptions:r}}}),F={class:"d-flex flex-column h-100 position-relative"},H={class:"flex-grow-1 order-2"};function q(t,a,r,c,n,e){const o=d("v-chart"),l=d("b-form-select"),i=d("b-form-group");return u(),B("div",F,[R("div",H,[t.trades?(u(),k(o,{key:0,option:t.chartOptions,autoresize:"",theme:t.settingsStore.chartTheme},null,8,["option","theme"])):P("",!0)]),L(i,{class:z(["w-25 order-1",t.showTitle?"ms-5 ps-5":"position-absolute"]),label:"Bins","label-for":"input-bins","label-cols":"6","content-cols":"6",size:"sm"},{default:D(()=>[L(l,{id:"input-bins",modelValue:t.settingsStore.profitDistributionBins,"onUpdate:modelValue":a[0]||(a[0]=m=>t.settingsStore.profitDistributionBins=m),size:"sm",options:t.binOptions},null,8,["modelValue","options"])]),_:1},8,["class"])])}var Y=w(j,[["render",q],["__scopeId","data-v-737db32a"]]);f([O,I,g,y,S,v,C,$]);const _="Profit",E=T({name:"CumProfitChart",components:{"v-chart":b},props:{trades:{required:!0,type:Array},showTitle:{default:!0,type:Boolean},profitColumn:{default:"close_profit_abs",type:String}},setup(t){const a=x(),r=p(()=>{const n=[],e={},o=t.trades.slice().sort((i,m)=>i.close_timestamp>m.close_timestamp?1:-1);let l=0;for(let i=0,m=o.length;i<m;i+=1){const s=o[i];s.close_timestamp&&s[t.profitColumn]&&(l+=s[t.profitColumn],e[s.close_timestamp]?(e[s.close_timestamp].profit+=s[t.profitColumn],e[s.close_timestamp][s.botId]?e[s.close_timestamp][s.botId]+=s[t.profitColumn]:e[s.close_timestamp][s.botId]=l):e[s.close_timestamp]={profit:l,[s.botId]:l},n.push({date:s.close_timestamp,profit:l,[s.botId]:l}))}return Object.entries(e).map(([i,m])=>({date:parseInt(i,10),profit:m.profit}))}),c=p(()=>({title:{text:"Cumulative Profit",show:t.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["date","profit"],source:r.value},tooltip:{trigger:"axis",axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},legend:{data:[_],right:"5%"},useUTC:!1,xAxis:{type:"time"},yAxis:[{type:"value",name:_,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:40}],grid:{bottom:80},dataZoom:[{type:"inside",start:0,end:100},{show:!0,type:"slider",bottom:10,start:0,end:100}],series:[{type:"line",name:_,animation:!0,step:"end",lineStyle:{color:a.chartTheme==="dark"?"#c2c2c2":"black"},itemStyle:{color:a.chartTheme==="dark"?"#c2c2c2":"black"}}]}));return{settingsStore:a,cumulativeData:r,chartOptions:c}}});function U(t,a,r,c,n,e){const o=d("v-chart");return t.trades?(u(),k(o,{key:0,option:t.chartOptions,autoresize:"",theme:t.settingsStore.chartTheme},null,8,["option","theme"])):P("",!0)}var tt=w(E,[["render",U],["__scopeId","data-v-8f8c1356"]]);f([O,I,g,y,S,v,C,$,V,G]);const A="Profit %",Z="#9be0a8",J=T({name:"TradesLogChart",components:{"v-chart":b},props:{trades:{required:!0,type:Array},showTitle:{default:!0,type:Boolean}},setup(t){const a=x(),r=p(()=>{const n=[],e=t.trades.slice(0).sort((o,l)=>o.close_timestamp>l.close_timestamp?1:-1);for(let o=0,l=e.length;o<l;o+=1){const i=e[o],m=[o,(i.profit_ratio*100).toFixed(2),i.pair,i.botName,N(i.close_timestamp),i.is_short===void 0||!i.is_short?"Long":"Short"];n.push(m)}return n}),c=p(()=>{const n=r.value.length>0?(1-50/r.value.length)*100:100;return{title:{text:"Trades log",show:t.showTitle},backgroundColor:"rgba(0, 0, 0, 0)",dataset:{dimensions:["date","profit"],source:r.value},tooltip:{trigger:"axis",formatter:e=>{const o=e[0].data[3]?` | ${e[0].data[3]}`:"";return`${e[0].data[2]} | ${e[0].data[5]} ${o}<br>${e[0].data[4]}<br>Profit ${e[0].data[1]} %`},axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},xAxis:{type:"value",show:!1},yAxis:[{type:"value",name:A,splitLine:{show:!1},nameRotate:90,nameLocation:"middle",nameGap:30}],grid:{bottom:80},dataZoom:[{type:"inside",start:n,end:100},{show:!0,type:"slider",bottom:10,start:n,end:100}],visualMap:[{show:!0,seriesIndex:0,pieces:[{max:0,color:"#f84960"},{min:0,color:"#2ed191"}]}],series:[{type:"bar",name:A,barGap:"0%",barCategoryGap:"0%",animation:!1,label:{show:!0,position:"top",rotate:90,offset:[7.5,7.5],formatter:"{@[1]} %",color:a.chartTheme==="dark"?"#c2c2c2":"#3c3c3c"},encode:{x:0,y:1},itemStyle:{color:Z}}]}});return{settingsStore:a,chartData:r,chartOptions:c}}});function K(t,a,r,c,n,e){const o=d("v-chart");return t.trades.length>0?(u(),k(o,{key:0,option:t.chartOptions,autoresize:"",theme:t.settingsStore.chartTheme},null,8,["option","theme"])):P("",!0)}var et=w(J,[["render",K],["__scopeId","data-v-e48229b4"]]);export{tt as C,Y as P,et as T};
//# sourceMappingURL=TradesLog.ad330afa.js.map
