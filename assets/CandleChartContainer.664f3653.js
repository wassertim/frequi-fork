import{q as La,s as xn,d as He,h as $,i as E,v as _t,F as ue,_ as Ne,r as R,o as P,c as B,j as J,g as W,G as Nt,a as z,t as re,m as st,b as T,w as I,H as fe,I as Cn,f as F,p as ka,e as Ma,J as Sn,u as Ba,K as Rt,z as wn,L as An,M as ee,N as te,P as oe,Q as $t,R as Et,S as Ye,U as Tn,V as $e,W as lt,k as Ft,X as Wt,Y as za,E as Pn,Z as Ie}from"./index.cf317eb3.js";import{_ as N,a2 as Va,B as bt,c as xt,ab as Re,ac as Na,h as Ra,W as $a,a4 as Ct,u as A,X as ie,ad as de,ae as ce,I as Y,af as Ea,ag as Dn,b as Fa,ah as On,Y as X,ai as ut,d as Ae,aj as In,ak as Wa,al as Ln,G as ne,K as Ce,am as Zt,an as kn,ao as Mn,x as Bn,z as zn,L as Vn,M as Nn,ap as Za,aq as Me,ar as Ua,as as qe,at as Rn,p as Ee,r as dt,au as $n,av as St,aw as En,ax as Fn,ay as he,az as Wn,g as Be,Z as be,aA as xe,aB as Ut,aC as wt,aD as Zn,F as Ha,aE as Un,aF as Hn,aG as Ht,aH as Gt,aI as Ga,aJ as Gn,aK as jn,aL as Yn,aM as qn,aN as Kn,y as ze,aO as At,aP as Xn,aQ as Jn,aR as jt,m as Qn,C as ja,aS as Ya,aT as eo,aU as to,aV as ao,aW as no,aX as oo,aY as ro,aZ as io,a_ as so,a$ as lo,b0 as Yt,b1 as uo,b2 as qt,b3 as Ke,J as co,b4 as ho,b5 as po,b6 as fo,b7 as vo,b8 as go,b9 as mo,ba as yo,bb as _o,a5 as bo,bc as xo,a7 as Co,a8 as So,a9 as wo,aa as Ao,a6 as To}from"./install.819b1beb.js";import{c as Po,p as qa,S as Do,i as Oo,t as Io,r as Lo,a as ko,D as Mo,b as Bo,d as zo,s as Vo,A as No,e as Ro,f as $o,g as Eo,h as Fo,j as Wo,k as Zo}from"./install.9003a60d.js";import{c as Uo}from"./createSeriesDataSimply.9325bed0.js";var Fe=(e=>(e.line="line",e.bar="bar",e.scatter="scatter",e))(Fe||{});const Ze={main_plot:{},subplots:{}};var Ho=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.hasSymbolVisual=!0,t}return a.prototype.getInitialData=function(t,n){return Po(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},a.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},a.prototype.brushSelector=function(t,n,o){return o.point(n.getItemLayout(t))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(Va),Go=Ho,Ka=4,jo=function(){function e(){}return e}(),Yo=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return a.prototype.getDefaultShape=function(){return new jo},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(t,n){var o=n.points,r=n.size,i=this.symbolProxy,s=i.shape,l=t.getContext?t.getContext():t,u=l&&r[0]<Ka,d=this.softClipShape,c;if(u){this._ctx=l;return}for(this._ctx=null,c=this._off;c<o.length;){var h=o[c++],g=o[c++];isNaN(h)||isNaN(g)||d&&!d.contain(h,g)||(s.x=h-r[0]/2,s.y=g-r[1]/2,s.width=r[0],s.height=r[1],i.buildPath(t,s,!0))}this.incremental&&(this._off=c,this.notClear=!0)},a.prototype.afterBrush=function(){var t=this.shape,n=t.points,o=t.size,r=this._ctx,i=this.softClipShape,s;if(!!r){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||i&&!i.contain(l,u)||r.fillRect(l-o[0]/2,u-o[1]/2,o[0],o[1])}this.incremental&&(this._off=s,this.notClear=!0)}},a.prototype.findDataIndex=function(t,n){for(var o=this.shape,r=o.points,i=o.size,s=Math.max(i[0],4),l=Math.max(i[1],4),u=r.length/2-1;u>=0;u--){var d=u*2,c=r[d]-s/2,h=r[d+1]-l/2;if(t>=c&&n>=h&&t<=c+s&&n<=h+l)return u}return-1},a.prototype.contain=function(t,n){var o=this.transformCoordToLocal(t,n),r=this.getBoundingRect();if(t=o[0],n=o[1],r.contain(t,n)){var i=this.hoverDataIdx=this.findDataIndex(t,n);return i>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,o=n.points,r=n.size,i=r[0],s=r[1],l=1/0,u=1/0,d=-1/0,c=-1/0,h=0;h<o.length;){var g=o[h++],f=o[h++];l=Math.min(g,l),d=Math.max(g,d),u=Math.min(f,u),c=Math.max(f,c)}t=this._rect=new bt(l-i/2,u-s/2,d-l+i,c-u+s)}return t},a}(xt),qo=function(){function e(){this.group=new Re}return e.prototype.updateData=function(a,t){this._clear();var n=this._create();n.setShape({points:a.getLayout("points")}),this._setCommon(n,a,t)},e.prototype.updateLayout=function(a){var t=a.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,r=n.startIndex*4*2;t=new Float32Array(t.buffer,r,o)}n.setShape("points",t),n.reset()})},e.prototype.incrementalPrepareUpdate=function(a){this._clear()},e.prototype.incrementalUpdate=function(a,t,n){var o=this._newAdded[0],r=t.getLayout("points"),i=o&&o.shape.points;if(i&&i.length<2e4){var s=i.length,l=new Float32Array(s+r.length);l.set(i),l.set(r,s),o.endIndex=a.end,o.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=a.start,u.endIndex=a.end,u.incremental=!0,u.setShape({points:r}),this._setCommon(u,t,n)}},e.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},e.prototype._create=function(){var a=new Yo({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},e.prototype._setCommon=function(a,t,n){var o=t.hostModel;n=n||{};var r=t.getVisual("symbolSize");a.setShape("size",r instanceof Array?r:[r,r]),a.softClipShape=n.clipShape||null,a.symbolProxy=Na(t.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var i=a.shape.size[0]<Ka;a.useStyle(o.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&a.setColor(l);var u=Ra(a);u.seriesIndex=o.seriesIndex,a.on("mousemove",function(d){u.dataIndex=null;var c=a.hoverDataIdx;c>=0&&(u.dataIndex=c+(a.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Ko=qo,Xo=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){var r=t.getData(),i=this._updateSymbolDraw(r,t);i.updateData(r,{clipShape:this._getClipShape(t)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(t,n,o){var r=t.getData(),i=this._updateSymbolDraw(r,t);i.incrementalPrepareUpdate(r),this._finished=!1},a.prototype.incrementalRender=function(t,n,o){this._symbolDraw.incrementalUpdate(t,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=t.end===n.getData().count()},a.prototype.updateTransform=function(t,n,o){var r=t.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var i=qa("").reset(t,n,o);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},a.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},a.prototype._getClipShape=function(t){var n=t.coordinateSystem,o=n&&n.getArea&&n.getArea();return t.get("clip",!0)?o:null},a.prototype._updateSymbolDraw=function(t,n){var o=this._symbolDraw,r=n.pipelineContext,i=r.large;return(!o||i!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=i?new Ko:new Do,this._isLargeDraw=i,this.group.removeAll()),this.group.add(o.group),o},a.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}($a),Jo=Xo;function Qo(e){Ct(Oo),e.registerSeriesModel(Go),e.registerChartView(Jo),e.registerLayout(qa("scatter"))}var er={axisPointer:1,tooltip:1,brush:1};function tr(e,a,t){var n=a.getComponentByElement(e.topTarget),o=n&&n.coordinateSystem;return n&&n!==t&&!er.hasOwnProperty(n.mainType)&&o&&o.model!==t}var ge=!0,Ve=Math.min,Se=Math.max,ar=Math.pow,nr=1e4,or=6,rr=6,Kt="globalPan",ir={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},sr={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Xt={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},lr=0,ur=function(e){N(a,e);function a(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Re,n._uid="brushController_"+lr++,A(gr,function(o,r){this._handlers[r]=ie(o,this)},n),n}return a.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},a.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||Io(n,Kt,this._uid),A(this._handlers,function(o,r){n.on(r,o)}),this._brushType=t.brushType,this._brushOption=de(ce(Xt),t,!0)},a.prototype._doDisableBrush=function(){var t=this._zr;Lo(t,Kt,this._uid),A(this._handlers,function(n,o){t.off(o,n)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};A(t,function(o){n[o.panelId]=ce(o)})}else this._panels=null;return this},a.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},a.prototype.updateCovers=function(t){t=Y(t,function(h){return de(ce(Xt),h,!0)});var n="\0-brush-index-",o=this._covers,r=this._covers=[],i=this,s=this._creatingCover;return new Ea(o,t,u,l).add(d).update(d).remove(c).execute(),this;function l(h,g){return(h.id!=null?h.id:n+g)+"-"+h.brushType}function u(h,g){return l(h.__brushOption,g)}function d(h,g){var f=t[h];if(g!=null&&o[g]===s)r[h]=o[g];else{var p=r[h]=g!=null?(o[g].__brushOption=f,o[g]):Ja(i,Xa(i,f));Tt(i,p)}}function c(h){o[h]!==s&&i.group.remove(o[h])}},a.prototype.unmount=function(){return this.enableBrush(!1),ct(this),this._zr.remove(this.group),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(Dn);function Xa(e,a){var t=Ge[a.brushType].createCover(e,a);return t.__brushOption=a,en(t,a),e.group.add(t),t}function Ja(e,a){var t=Pt(a);return t.endCreating&&(t.endCreating(e,a),en(a,a.__brushOption)),a}function Qa(e,a){var t=a.__brushOption;Pt(a).updateCoverShape(e,a,t.range,t)}function en(e,a){var t=a.z;t==null&&(t=nr),e.traverse(function(n){n.z=t,n.z2=t})}function Tt(e,a){Pt(a).updateCommon(e,a),Qa(e,a)}function Pt(e){return Ge[e.__brushOption.brushType]}function Dt(e,a,t){var n=e._panels;if(!n)return ge;var o,r=e._transform;return A(n,function(i){i.isTargetByCursor(a,t,r)&&(o=i)}),o}function tn(e,a){var t=e._panels;if(!t)return ge;var n=a.__brushOption.panelId;return n!=null?t[n]:ge}function ct(e){var a=e._covers,t=a.length;return A(a,function(n){e.group.remove(n)},e),a.length=0,!!t}function me(e,a){var t=Y(e._covers,function(n){var o=n.__brushOption,r=ce(o.range);return{brushType:o.brushType,panelId:o.panelId,range:r}});e.trigger("brush",{areas:t,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function dr(e){var a=e._track;if(!a.length)return!1;var t=a[a.length-1],n=a[0],o=t[0]-n[0],r=t[1]-n[1],i=ar(o*o+r*r,.5);return i>or}function an(e){var a=e.length-1;return a<0&&(a=0),[e[0],e[a]]}function nn(e,a,t,n){var o=new Re;return o.add(new ut({name:"main",style:Ot(t),silent:!0,draggable:!0,cursor:"move",drift:X(Jt,e,a,o,["n","s","w","e"]),ondragend:X(me,a,{isEnd:!0})})),A(n,function(r){o.add(new ut({name:r.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:X(Jt,e,a,o,r),ondragend:X(me,a,{isEnd:!0})}))}),o}function on(e,a,t,n){var o=n.brushStyle.lineWidth||0,r=Se(o,rr),i=t[0][0],s=t[1][0],l=i-o/2,u=s-o/2,d=t[0][1],c=t[1][1],h=d-r+o/2,g=c-r+o/2,f=d-i,p=c-s,v=f+o,y=p+o;le(e,a,"main",i,s,f,p),n.transformable&&(le(e,a,"w",l,u,r,y),le(e,a,"e",h,u,r,y),le(e,a,"n",l,u,v,r),le(e,a,"s",l,g,v,r),le(e,a,"nw",l,u,r,r),le(e,a,"ne",h,u,r,r),le(e,a,"sw",l,g,r,r),le(e,a,"se",h,g,r,r))}function ht(e,a){var t=a.__brushOption,n=t.transformable,o=a.childAt(0);o.useStyle(Ot(t)),o.attr({silent:!n,cursor:n?"move":"default"}),A([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(r){var i=a.childOfName(r.join("")),s=r.length===1?pt(e,r[0]):hr(e,r);i&&i.attr({silent:!n,invisible:!n,cursor:n?sr[s]+"-resize":null})})}function le(e,a,t,n,o,r,i){var s=a.childOfName(t);s&&s.setShape(fr(It(e,a,[[n,o],[n+r,o+i]])))}function Ot(e){return Ae({strokeNoScale:!0},e.brushStyle)}function rn(e,a,t,n){var o=[Ve(e,t),Ve(a,n)],r=[Se(e,t),Se(a,n)];return[[o[0],r[0]],[o[1],r[1]]]}function cr(e){return Wa(e.group)}function pt(e,a){var t={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=In(t[a],cr(e));return n[o]}function hr(e,a){var t=[pt(e,a[0]),pt(e,a[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Jt(e,a,t,n,o,r){var i=t.__brushOption,s=e.toRectRange(i.range),l=sn(a,o,r);A(n,function(u){var d=ir[u];s[d[0]][d[1]]+=l[d[0]]}),i.range=e.fromRectRange(rn(s[0][0],s[1][0],s[0][1],s[1][1])),Tt(a,t),me(a,{isEnd:!1})}function pr(e,a,t,n){var o=a.__brushOption.range,r=sn(e,t,n);A(o,function(i){i[0]+=r[0],i[1]+=r[1]}),Tt(e,a),me(e,{isEnd:!1})}function sn(e,a,t){var n=e.group,o=n.transformCoordToLocal(a,t),r=n.transformCoordToLocal(0,0);return[o[0]-r[0],o[1]-r[1]]}function It(e,a,t){var n=tn(e,a);return n&&n!==ge?n.clipPath(t,e._transform):ce(t)}function fr(e){var a=Ve(e[0][0],e[1][0]),t=Ve(e[0][1],e[1][1]),n=Se(e[0][0],e[1][0]),o=Se(e[0][1],e[1][1]);return{x:a,y:t,width:n-a,height:o-t}}function vr(e,a,t){if(!(!e._brushType||mr(e,a.offsetX,a.offsetY))){var n=e._zr,o=e._covers,r=Dt(e,a,t);if(!e._dragging)for(var i=0;i<o.length;i++){var s=o[i].__brushOption;if(r&&(r===ge||s.panelId===r.panelId)&&Ge[s.brushType].contain(o[i],t[0],t[1]))return}r&&n.setCursorStyle("crosshair")}}function ft(e){var a=e.event;a.preventDefault&&a.preventDefault()}function vt(e,a,t){return e.childOfName("main").contain(a,t)}function ln(e,a,t,n){var o=e._creatingCover,r=e._creatingPanel,i=e._brushOption,s;if(e._track.push(t.slice()),dr(e)||o){if(r&&!o){i.brushMode==="single"&&ct(e);var l=ce(i);l.brushType=Qt(l.brushType,r),l.panelId=r===ge?null:r.panelId,o=e._creatingCover=Xa(e,l),e._covers.push(o)}if(o){var u=Ge[Qt(e._brushType,r)],d=o.__brushOption;d.range=u.getCreatingRange(It(e,o,e._track)),n&&(Ja(e,o),u.updateCommon(e,o)),Qa(e,o),s={isEnd:n}}}else n&&i.brushMode==="single"&&i.removeOnClick&&Dt(e,a,t)&&ct(e)&&(s={isEnd:n,removeOnClick:!0});return s}function Qt(e,a){return e==="auto"?a.defaultBrushType:e}var gr={mousedown:function(e){if(this._dragging)ea(this,e);else if(!e.target||!e.target.draggable){ft(e);var a=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var t=this._creatingPanel=Dt(this,e,a);t&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(e){var a=e.offsetX,t=e.offsetY,n=this.group.transformCoordToLocal(a,t);if(vr(this,e,n),this._dragging){ft(e);var o=ln(this,e,n,!1);o&&me(this,o)}},mouseup:function(e){ea(this,e)}};function ea(e,a){if(e._dragging){ft(a);var t=a.offsetX,n=a.offsetY,o=e.group.transformCoordToLocal(t,n),r=ln(e,a,o,!0);e._dragging=!1,e._track=[],e._creatingCover=null,r&&me(e,r)}}function mr(e,a,t){var n=e._zr;return a<0||a>n.getWidth()||t<0||t>n.getHeight()}var Ge={lineX:ta(0),lineY:ta(1),rect:{createCover:function(e,a){function t(n){return n}return nn({toRectRange:t,fromRectRange:t},e,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var a=an(e);return rn(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(e,a,t,n){on(e,a,t,n)},updateCommon:ht,contain:vt},polygon:{createCover:function(e,a){var t=new Re;return t.add(new Fa({name:"main",style:Ot(a),silent:!0})),t},getCreatingRange:function(e){return e},endCreating:function(e,a){a.remove(a.childAt(0)),a.add(new On({name:"main",draggable:!0,drift:X(pr,e,a),ondragend:X(me,e,{isEnd:!0})}))},updateCoverShape:function(e,a,t,n){a.childAt(0).setShape({points:It(e,a,t)})},updateCommon:ht,contain:vt}};function ta(e){return{createCover:function(a,t){return nn({toRectRange:function(n){var o=[n,[0,100]];return e&&o.reverse(),o},fromRectRange:function(n){return n[e]}},a,t,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(a){var t=an(a),n=Ve(t[0][e],t[1][e]),o=Se(t[0][e],t[1][e]);return[n,o]},updateCoverShape:function(a,t,n,o){var r,i=tn(a,t);if(i!==ge&&i.getLinearBrushOtherExtent)r=i.getLinearBrushOtherExtent(e);else{var s=a._zr;r=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[n,r];e&&l.reverse(),on(a,t,l,o)},updateCommon:ht,contain:vt}}var yr=ur;function _r(e){return e=Lt(e),function(a){return Ln(a,e)}}function br(e,a){return e=Lt(e),function(t){var n=a!=null?a:t,o=n?e.width:e.height,r=n?e.x:e.y;return[r,r+(o||0)]}}function xr(e,a,t){var n=Lt(e);return function(o,r){return n.contain(r[0],r[1])&&!tr(o,a,t)}}function Lt(e){return bt.create(e)}var Cr=function(){function e(){}return e.prototype.getInitialData=function(a,t){var n,o=t.getComponent("xAxis",this.get("xAxisIndex")),r=t.getComponent("yAxis",this.get("yAxisIndex")),i=o.get("type"),s=r.get("type"),l;i==="category"?(a.layout="horizontal",n=o.getOrdinalMeta(),l=!0):s==="category"?(a.layout="vertical",n=r.getOrdinalMeta(),l=!0):a.layout=a.layout||"horizontal";var u=["x","y"],d=a.layout==="horizontal"?0:1,c=this._baseAxisDim=u[d],h=u[1-d],g=[o,r],f=g[d].get("type"),p=g[1-d].get("type"),v=a.data;if(v&&l){var y=[];A(v,function(m,S){var x;ne(m)?(x=m.slice(),m.unshift(S)):ne(m.value)?(x=Ce({},m),x.value=x.value.slice(),m.value.unshift(S)):x=m,y.push(x)}),a.data=y}var _=this.defaultValueDimensions,b=[{name:c,type:Zt(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Zt(p),dimsDef:_.slice()}];return Uo(this,{coordDimensions:b,dimensionsCount:_.length+1,encodeDefaulter:X(kn,b,this)})},e.prototype.getBaseAxis=function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+"Axis",this.get(a+"AxisIndex")).axis},e}(),Sr=["color","borderColor"],wr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},a.prototype.incrementalPrepareRender=function(t,n,o){this._clear(),this._updateDrawMode(t)},a.prototype.incrementalRender=function(t,n,o,r){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,n):this._incrementalRenderNormal(t,n)},a.prototype.eachRendered=function(t){Mn(this._progressiveEls||this.group,t)},a.prototype._updateDrawMode=function(t){var n=t.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},a.prototype._renderNormal=function(t){var n=t.getData(),o=this._data,r=this.group,i=n.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||r.removeAll(),n.diff(o).add(function(d){if(n.hasValue(d)){var c=n.getItemLayout(d);if(s&&aa(u,c))return;var h=Xe(c,d,!0);Bn(h,{shape:{points:c.ends}},t,d),Je(h,n,d,i),r.add(h),n.setItemGraphicEl(d,h)}}).update(function(d,c){var h=o.getItemGraphicEl(c);if(!n.hasValue(d)){r.remove(h);return}var g=n.getItemLayout(d);if(s&&aa(u,g)){r.remove(h);return}h?(zn(h,{shape:{points:g.ends}},t,d),Vn(h)):h=Xe(g),Je(h,n,d,i),r.add(h),n.setItemGraphicEl(d,h)}).remove(function(d){var c=o.getItemGraphicEl(d);c&&r.remove(c)}).execute(),this._data=n},a.prototype._renderLarge=function(t){this._clear(),oa(t,this.group);var n=t.get("clip",!0)?ko(t.coordinateSystem,!1,t):null;n?this.group.setClipPath(n):this.group.removeClipPath()},a.prototype._incrementalRenderNormal=function(t,n){for(var o=n.getData(),r=o.getLayout("isSimpleBox"),i;(i=t.next())!=null;){var s=o.getItemLayout(i),l=Xe(s);Je(l,o,i,r),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},a.prototype._incrementalRenderLarge=function(t,n){oa(n,this.group,this._progressiveEls,!0)},a.prototype.remove=function(t){this._clear()},a.prototype._clear=function(){this.group.removeAll(),this._data=null},a.type="candlestick",a}($a),Ar=function(){function e(){}return e}(),Tr=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return a.prototype.getDefaultShape=function(){return new Ar},a.prototype.buildPath=function(t,n){var o=n.points;this.__simpleBox?(t.moveTo(o[4][0],o[4][1]),t.lineTo(o[6][0],o[6][1])):(t.moveTo(o[0][0],o[0][1]),t.lineTo(o[1][0],o[1][1]),t.lineTo(o[2][0],o[2][1]),t.lineTo(o[3][0],o[3][1]),t.closePath(),t.moveTo(o[4][0],o[4][1]),t.lineTo(o[5][0],o[5][1]),t.moveTo(o[6][0],o[6][1]),t.lineTo(o[7][0],o[7][1]))},a}(xt);function Xe(e,a,t){var n=e.ends;return new Tr({shape:{points:t?Pr(n,e):n},z2:100})}function aa(e,a){for(var t=!0,n=0;n<a.ends.length;n++)if(e.contain(a.ends[n][0],a.ends[n][1])){t=!1;break}return t}function Je(e,a,t,n){var o=a.getItemModel(t);e.useStyle(a.getItemVisual(t,"style")),e.style.strokeNoScale=!0,e.__simpleBox=n,Nn(e,o)}function Pr(e,a){return Y(e,function(t){return t=t.slice(),t[1]=a.initBaseline,t})}var Dr=function(){function e(){}return e}(),na=function(e){N(a,e);function a(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return a.prototype.getDefaultShape=function(){return new Dr},a.prototype.buildPath=function(t,n){for(var o=n.points,r=0;r<o.length;)if(this.__sign===o[r++]){var i=o[r++];t.moveTo(i,o[r++]),t.lineTo(i,o[r++])}else r+=3},a}(xt);function oa(e,a,t,n){var o=e.getData(),r=o.getLayout("largePoints"),i=new na({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});a.add(i);var s=new na({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});a.add(s),ra(1,i,e),ra(-1,s,e),n&&(i.incremental=!0,s.incremental=!0),t&&t.push(i,s)}function ra(e,a,t,n){var o=t.get(["itemStyle",e>0?"borderColor":"borderColor0"])||t.get(["itemStyle",e>0?"color":"color0"]),r=t.getModel("itemStyle").getItemStyle(Sr);a.useStyle(r),a.style.fill=null,a.style.stroke=o}var Or=wr,un=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return a.prototype.getShadowDim=function(){return"open"},a.prototype.brushSelector=function(t,n,o){var r=n.getItemLayout(t);return r&&o.rect(r.brushRect)},a.type="series.candlestick",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},a}(Va);Za(un,Cr,!0);var Ir=un;function Lr(e){!e||!ne(e.series)||A(e.series,function(a){Me(a)&&a.type==="k"&&(a.type="candlestick")})}var kr=["itemStyle","borderColor"],Mr=["itemStyle","borderColor0"],Br=["itemStyle","color"],zr=["itemStyle","color0"],Vr={seriesType:"candlestick",plan:Ua(),performRawSeries:!0,reset:function(e,a){function t(r,i){return i.get(r>0?Br:zr)}function n(r,i){return i.get(r>0?kr:Mr)}if(!a.isSeriesFiltered(e)){var o=e.pipelineContext.large;return!o&&{progress:function(r,i){for(var s;(s=r.next())!=null;){var l=i.getItemModel(s),u=i.getItemLayout(s).sign,d=l.getItemStyle();d.fill=t(u,l),d.stroke=n(u,l)||d.fill;var c=i.ensureUniqueItemVisual(s,"style");Ce(c,d)}}}}}},Nr=Vr,Rr={seriesType:"candlestick",plan:Ua(),reset:function(e){var a=e.coordinateSystem,t=e.getData(),n=$r(e,t),o=0,r=1,i=["x","y"],s=t.getDimensionIndex(t.mapDimension(i[o])),l=Y(t.mapDimensionsAll(i[r]),t.getDimensionIndex,t),u=l[0],d=l[1],c=l[2],h=l[3];if(t.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?f:g};function g(p,v){for(var y,_=v.getStore();(y=p.next())!=null;){var b=_.get(s,y),m=_.get(u,y),S=_.get(d,y),x=_.get(c,y),w=_.get(h,y),M=Math.min(m,S),L=Math.max(m,S),O=K(M,b),k=K(L,b),D=K(x,b),U=K(w,b),q=[];G(q,k,0),G(q,O,1),q.push(se(U),se(k),se(D),se(O)),v.setItemLayout(y,{sign:ia(_,y,m,S,d),initBaseline:m>S?k[r]:O[r],ends:q,brushRect:ye(x,w,b)})}function K(H,V){var C=[];return C[o]=V,C[r]=H,isNaN(V)||isNaN(H)?[NaN,NaN]:a.dataToPoint(C)}function G(H,V,C){var Z=V.slice(),j=V.slice();Z[o]=qe(Z[o]+n/2,1,!1),j[o]=qe(j[o]-n/2,1,!0),C?H.push(Z,j):H.push(j,Z)}function ye(H,V,C){var Z=K(H,C),j=K(V,C);return Z[o]-=n/2,j[o]-=n/2,{x:Z[0],y:Z[1],width:n,height:j[1]-Z[1]}}function se(H){return H[o]=qe(H[o],1),H}}function f(p,v){for(var y=Rn(p.count*4),_=0,b,m=[],S=[],x,w=v.getStore();(x=p.next())!=null;){var M=w.get(s,x),L=w.get(u,x),O=w.get(d,x),k=w.get(c,x),D=w.get(h,x);if(isNaN(M)||isNaN(k)||isNaN(D)){y[_++]=NaN,_+=3;continue}y[_++]=ia(w,x,L,O,d),m[o]=M,m[r]=k,b=a.dataToPoint(m,null,S),y[_++]=b?b[0]:NaN,y[_++]=b?b[1]:NaN,m[r]=D,b=a.dataToPoint(m,null,S),y[_++]=b?b[1]:NaN}v.setLayout("largePoints",y)}}};function ia(e,a,t,n,o){var r;return t>n?r=-1:t<n?r=1:r=a>0?e.get(o,a-1)<=n?1:-1:1,r}function $r(e,a){var t=e.getBaseAxis(),n,o=t.type==="category"?t.getBandWidth():(n=t.getExtent(),Math.abs(n[1]-n[0])/a.count()),r=Ee(dt(e.get("barMaxWidth"),o),o),i=Ee(dt(e.get("barMinWidth"),1),o),s=e.get("barWidth");return s!=null?Ee(s,o):Math.max(Math.min(o/2,r),i)}var Er=Rr;function Fr(e){e.registerChartView(Or),e.registerSeriesModel(Ir),e.registerPreprocessor(Lr),e.registerVisual(Nr),e.registerLayout(Er)}var Wr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.init=function(t,n,o){var r=$n(t);e.prototype.init.apply(this,arguments),sa(t,r)},a.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),sa(this.option,t)},a.prototype.getCellSize=function(){return this.option.cellSize},a.type="calendar",a.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},a}(St);function sa(e,a){var t=e.cellSize,n;ne(t)?n=t:n=e.cellSize=[t,t],n.length===1&&(n[1]=n[0]);var o=Y([0,1],function(r){return En(a,r)&&(n[r]="auto"),n[r]!=null&&n[r]!=="auto"});Fn(e,a,{type:"box",ignoreSize:o})}var Zr=Wr,Ur=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,n,o){var r=this.group;r.removeAll();var i=t.coordinateSystem,s=i.getRangeInfo(),l=i.getOrient(),u=n.getLocaleModel();this._renderDayRect(t,s,r),this._renderLines(t,s,l,r),this._renderYearText(t,s,l,r),this._renderMonthText(t,u,l,r),this._renderWeekText(t,u,s,l,r)},a.prototype._renderDayRect=function(t,n,o){for(var r=t.coordinateSystem,i=t.getModel("itemStyle").getItemStyle(),s=r.getCellWidth(),l=r.getCellHeight(),u=n.start.time;u<=n.end.time;u=r.getNextNDay(u,1).time){var d=r.dataToRect([u],!1).tl,c=new ut({shape:{x:d[0],y:d[1],width:s,height:l},cursor:"default",style:i});o.add(c)}},a.prototype._renderLines=function(t,n,o,r){var i=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),d=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=n.start,h=0;c.time<=n.end.time;h++){f(c.formatedDate),h===0&&(c=s.getDateInfo(n.start.y+"-"+n.start.m));var g=c.date;g.setMonth(g.getMonth()+1),c=s.getDateInfo(g)}f(s.getNextNDay(n.end.time,1).formatedDate);function f(p){i._firstDayOfMonth.push(s.getDateInfo(p)),i._firstDayPoints.push(s.dataToRect([p],!1).tl);var v=i._getLinePointsOfOneWeek(t,p,o);i._tlpoints.push(v[0]),i._blpoints.push(v[v.length-1]),u&&i._drawSplitline(v,l,r)}u&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,d,o),l,r),u&&this._drawSplitline(i._getEdgesPoints(i._blpoints,d,o),l,r)},a.prototype._getEdgesPoints=function(t,n,o){var r=[t[0].slice(),t[t.length-1].slice()],i=o==="horizontal"?0:1;return r[0][i]=r[0][i]-n/2,r[1][i]=r[1][i]+n/2,r},a.prototype._drawSplitline=function(t,n,o){var r=new Fa({z2:20,shape:{points:t},style:n});o.add(r)},a.prototype._getLinePointsOfOneWeek=function(t,n,o){for(var r=t.coordinateSystem,i=r.getDateInfo(n),s=[],l=0;l<7;l++){var u=r.getNextNDay(i.time,l),d=r.dataToRect([u.time],!1);s[2*u.day]=d.tl,s[2*u.day+1]=d[o==="horizontal"?"bl":"tr"]}return s},a.prototype._formatterLabel=function(t,n){return he(t)&&t?Wn(t,n):Be(t)?t(n):n.nameMap},a.prototype._yearTextPositionControl=function(t,n,o,r,i){var s=n[0],l=n[1],u=["center","bottom"];r==="bottom"?(l+=i,u=["center","top"]):r==="left"?s-=i:r==="right"?(s+=i,u=["center","top"]):l-=i;var d=0;return(r==="left"||r==="right")&&(d=Math.PI/2),{rotation:d,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},a.prototype._renderYearText=function(t,n,o,r){var i=t.getModel("yearLabel");if(!!i.get("show")){var s=i.get("margin"),l=i.get("position");l||(l=o!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],d=(u[0][0]+u[1][0])/2,c=(u[0][1]+u[1][1])/2,h=o==="horizontal"?0:1,g={top:[d,u[h][1]],bottom:[d,u[1-h][1]],left:[u[1-h][0],c],right:[u[h][0],c]},f=n.start.y;+n.end.y>+n.start.y&&(f=f+"-"+n.end.y);var p=i.get("formatter"),v={start:n.start.y,end:n.end.y,nameMap:f},y=this._formatterLabel(p,v),_=new be({z2:30,style:xe(i,{text:y})});_.attr(this._yearTextPositionControl(_,g[l],o,l,s)),r.add(_)}},a.prototype._monthTextPositionControl=function(t,n,o,r,i){var s="left",l="top",u=t[0],d=t[1];return o==="horizontal"?(d=d+i,n&&(s="center"),r==="start"&&(l="bottom")):(u=u+i,n&&(l="middle"),r==="start"&&(s="right")),{x:u,y:d,align:s,verticalAlign:l}},a.prototype._renderMonthText=function(t,n,o,r){var i=t.getModel("monthLabel");if(!!i.get("show")){var s=i.get("nameMap"),l=i.get("margin"),u=i.get("position"),d=i.get("align"),c=[this._tlpoints,this._blpoints];(!s||he(s))&&(s&&(n=Ut(s)||n),s=n.get(["time","monthAbbr"])||[]);var h=u==="start"?0:1,g=o==="horizontal"?0:1;l=u==="start"?-l:l;for(var f=d==="center",p=0;p<c[h].length-1;p++){var v=c[h][p].slice(),y=this._firstDayOfMonth[p];if(f){var _=this._firstDayPoints[p];v[g]=(_[g]+c[0][p+1][g])/2}var b=i.get("formatter"),m=s[+y.m-1],S={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:m},x=this._formatterLabel(b,S),w=new be({z2:30,style:Ce(xe(i,{text:x}),this._monthTextPositionControl(v,f,o,u,l))});r.add(w)}}},a.prototype._weekTextPositionControl=function(t,n,o,r,i){var s="center",l="middle",u=t[0],d=t[1],c=o==="start";return n==="horizontal"?(u=u+r+(c?1:-1)*i[0]/2,s=c?"right":"left"):(d=d+r+(c?1:-1)*i[1]/2,l=c?"bottom":"top"),{x:u,y:d,align:s,verticalAlign:l}},a.prototype._renderWeekText=function(t,n,o,r,i){var s=t.getModel("dayLabel");if(!!s.get("show")){var l=t.coordinateSystem,u=s.get("position"),d=s.get("nameMap"),c=s.get("margin"),h=l.getFirstDayOfWeek();if(!d||he(d)){d&&(n=Ut(d)||n);var g=n.get(["time","dayOfWeekShort"]);d=g||Y(n.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var f=l.getNextNDay(o.end.time,7-o.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];c=Ee(c,Math.min(p[1],p[0])),u==="start"&&(f=l.getNextNDay(o.start.time,-(7+o.fweek)).time,c=-c);for(var v=0;v<7;v++){var y=l.getNextNDay(f,v),_=l.dataToRect([y.time],!1).center,b=v;b=Math.abs((v+h)%7);var m=new be({z2:30,style:Ce(xe(s,{text:d[b]}),this._weekTextPositionControl(_,r,u,c,p))});i.add(m)}}},a.type="calendar",a}(wt),Hr=Ur,Qe=864e5,Gr=function(){function e(a,t,n){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=a}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(a){a=Zn(a);var t=a.getFullYear(),n=a.getMonth()+1,o=n<10?"0"+n:""+n,r=a.getDate(),i=r<10?"0"+r:""+r,s=a.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:o,d:i,day:s,time:a.getTime(),formatedDate:t+"-"+o+"-"+i,date:a}},e.prototype.getNextNDay=function(a,t){return t=t||0,t===0?this.getDateInfo(a):(a=new Date(this.getDateInfo(a).time),a.setDate(a.getDate()+t),this.getDateInfo(a))},e.prototype.update=function(a,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],r=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[n,7]:[7,n];A([0,1],function(c){d(r,c)&&(i[o[c]]=r[c]*s[c])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=Ha(i,l);A([0,1],function(c){d(r,c)||(r[c]=u[o[c]]/s[c])});function d(c,h){return c[h]!=null&&c[h]!=="auto"}this._sw=r[0],this._sh=r[1]},e.prototype.dataToPoint=function(a,t){ne(a)&&(a=a[0]),t==null&&(t=!0);var n=this.getDateInfo(a),o=this._rangeInfo,r=n.formatedDate;if(t&&!(n.time>=o.start.time&&n.time<o.end.time+Qe))return[NaN,NaN];var i=n.day,s=this._getRangeInfo([o.start.time,r]).nthWeek;return this._orient==="vertical"?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},e.prototype.pointToData=function(a){var t=this.pointToDate(a);return t&&t.time},e.prototype.dataToRect=function(a,t){var n=this.dataToPoint(a,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},e.prototype.pointToDate=function(a){var t=Math.floor((a[0]-this._rect.x)/this._sw)+1,n=Math.floor((a[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,t-1,o):this._getDateByWeeksAndDay(t,n-1,o)},e.prototype.convertToPixel=function(a,t,n){var o=la(t);return o===this?o.dataToPoint(n):null},e.prototype.convertFromPixel=function(a,t,n){var o=la(t);return o===this?o.pointToData(n):null},e.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var a=this._model.get("range"),t;if(ne(a)&&a.length===1&&(a=a[0]),ne(a))t=a;else{var n=a.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),r=o.date;r.setMonth(r.getMonth()+1);var i=this.getNextNDay(r,-1);t=[o.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return a;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},e.prototype._getRangeInfo=function(a){var t=[this.getDateInfo(a[0]),this.getDateInfo(a[1])],n;t[0].time>t[1].time&&(n=!0,t.reverse());var o=Math.floor(t[1].time/Qe)-Math.floor(t[0].time/Qe)+1,r=new Date(t[0].time),i=r.getDate(),s=t[1].date.getDate();r.setDate(i+o-1);var l=r.getDate();if(l!==s)for(var u=r.getTime()-t[1].time>0?1:-1;(l=r.getDate())!==s&&(r.getTime()-t[1].time)*u>0;)o-=u,r.setDate(l-u);var d=Math.floor((o+t[0].day+6)/7),c=n?-d+1:d-1;return n&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:o,weeks:d,nthWeek:c,fweek:t[0].day,lweek:t[1].day}},e.prototype._getDateByWeeksAndDay=function(a,t,n){var o=this._getRangeInfo(n);if(a>o.weeks||a===0&&t<o.fweek||a===o.weeks&&t>o.lweek)return null;var r=(a-1)*7-o.fweek+t,i=new Date(o.start.time);return i.setDate(+o.start.d+r),this.getDateInfo(i)},e.create=function(a,t){var n=[];return a.eachComponent("calendar",function(o){var r=new e(o);n.push(r),o.coordinateSystem=r}),a.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},e.dimensions=["time","value"],e}();function la(e){var a=e.calendarModel,t=e.seriesModel,n=a?a.coordinateSystem:t?t.coordinateSystem:null;return n}var jr=Gr;function Yr(e){e.registerComponentModel(Zr),e.registerComponentView(Hr),e.registerCoordinateSystem("calendar",jr)}var qr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.select",a}(Mo),Kr=qr,Xr=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.select",a}(Bo),Jr=Xr;function Qr(e){e.registerComponentModel(Kr),e.registerComponentView(Jr),zo(e)}var ae=function(){function e(){}return e}(),dn={};function Le(e,a){dn[e]=a}function cn(e){return dn[e]}var ei=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;A(this.option.feature,function(n,o){var r=cn(o);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(t)),de(n,r.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(St),ti=ei,ai=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.render=function(t,n,o,r){var i=this.group;if(i.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},d=this._features||(this._features={}),c=[];A(u,function(f,p){c.push(p)}),new Ea(this._featureNames||[],c).add(h).update(h).remove(X(h,null)).execute(),this._featureNames=c;function h(f,p){var v=c[f],y=c[p],_=u[v],b=new Un(_,t,t.ecModel),m;if(r&&r.newTitle!=null&&r.featureName===v&&(_.title=r.newTitle),v&&!y){if(ni(v))m={onclick:b.option.onclick,featureName:v};else{var S=cn(v);if(!S)return;m=new S}d[v]=m}else if(m=d[y],!m)return;m.uid=Hn("toolbox-feature"),m.model=b,m.ecModel=n,m.api=o;var x=m instanceof ae;if(!v&&y){x&&m.dispose&&m.dispose(n,o);return}if(!b.get("show")||x&&m.unusable){x&&m.remove&&m.remove(n,o);return}g(b,m,v),b.setIconStatus=function(w,M){var L=this.option,O=this.iconPaths;L.iconStatus=L.iconStatus||{},L.iconStatus[w]=M,O[w]&&(M==="emphasis"?Ht:Gt)(O[w])},m instanceof ae&&m.render&&m.render(b,n,o,r)}function g(f,p,v){var y=f.getModel("iconStyle"),_=f.getModel(["emphasis","iconStyle"]),b=p instanceof ae&&p.getIcons?p.getIcons():f.get("icon"),m=f.get("title")||{},S,x;he(b)?(S={},S[v]=b):S=b,he(m)?(x={},x[v]=m):x=m;var w=f.iconPaths={};A(S,function(M,L){var O=Ga(M,{},{x:-s/2,y:-s/2,width:s,height:s});O.setStyle(y.getItemStyle());var k=O.ensureState("emphasis");k.style=_.getItemStyle();var D=new be({style:{text:x[L],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null},ignore:!0});O.setTextContent(D),Gn({el:O,componentModel:t,itemName:L,formatterParamsExtra:{title:x[L]}}),O.__title=x[L],O.on("mouseover",function(){var U=_.getItemStyle(),q=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";D.setStyle({fill:_.get("textFill")||U.fill||U.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),O.setTextConfig({position:_.get("textPosition")||q}),D.ignore=!t.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){f.get(["iconStatus",L])!=="emphasis"&&o.leaveEmphasis(this),D.hide()}),(f.get(["iconStatus",L])==="emphasis"?Ht:Gt)(O),i.add(O),O.on("click",ie(p.onclick,p,n,o,L)),w[L]=O})}jn(i,t,o),i.add(Yn(i.getBoundingRect(),t)),l||i.eachChild(function(f){var p=f.__title,v=f.ensureState("emphasis"),y=v.textConfig||(v.textConfig={}),_=f.getTextContent(),b=_&&_.ensureState("emphasis");if(b&&!Be(b)&&p){var m=b.style||(b.style={}),S=qn(p,be.makeFont(m)),x=f.x+i.x,w=f.y+i.y+s,M=!1;w+S.height>o.getHeight()&&(y.position="top",M=!0);var L=M?-5-S.height:s+10;x+S.width/2>o.getWidth()?(y.position=["100%",L],m.align="right"):x-S.width/2<0&&(y.position=[0,L],m.align="left")}})},a.prototype.updateView=function(t,n,o,r){A(this._features,function(i){i instanceof ae&&i.updateView&&i.updateView(i.model,n,o,r)})},a.prototype.remove=function(t,n){A(this._features,function(o){o instanceof ae&&o.remove&&o.remove(t,n)}),this.group.removeAll()},a.prototype.dispose=function(t,n){A(this._features,function(o){o instanceof ae&&o.dispose&&o.dispose(t,n)})},a.type="toolbox",a}(wt);function ni(e){return e.indexOf("my")===0}var oi=ai,ri=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){var o=this.model,r=o.get("name")||t.get("title.0.text")||"echarts",i=n.getZr().painter.getType()==="svg",s=i?"svg":o.get("type",!0)||"png",l=n.getConnectedDataURL({type:s,backgroundColor:o.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),u=Kn.browser;if(Be(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var d=document.createElement("a");d.download=r+"."+s,d.target="_blank",d.href=l;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});d.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||i){var h=l.split(","),g=h[0].indexOf("base64")>-1,f=i?decodeURIComponent(h[1]):h[1];g&&(f=window.atob(f));var p=r+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=f.length,y=new Uint8Array(v);v--;)y[v]=f.charCodeAt(v);var _=new Blob([y]);window.navigator.msSaveOrOpenBlob(_,p)}else{var b=document.createElement("iframe");document.body.appendChild(b);var m=b.contentWindow,S=m.document;S.open("image/svg+xml","replace"),S.write(f),S.close(),m.focus(),S.execCommand("SaveAs",!0,p),document.body.removeChild(b)}}else{var x=o.get("lang"),w='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>',M=window.open();M.document.write(w),M.document.title=r}},a.getDefaultOption=function(t){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},a}(ae),ii=ri,ua="__ec_magicType_stack__",si=[["line","bar"],["stack"]],li=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),o={};return A(t.get("type"),function(r){n[r]&&(o[r]=n[r])}),o},a.getDefaultOption=function(t){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},a.prototype.onclick=function(t,n,o){var r=this.model,i=r.get(["seriesIndex",o]);if(!!da[o]){var s={series:[]},l=function(c){var h=c.subType,g=c.id,f=da[o](h,g,c,r);f&&(Ae(f,c.option),s.series.push(f));var p=c.coordinateSystem;if(p&&p.type==="cartesian2d"&&(o==="line"||o==="bar")){var v=p.getAxesByScale("ordinal")[0];if(v){var y=v.dim,_=y+"Axis",b=c.getReferringComponents(_,Xn).models[0],m=b.componentIndex;s[_]=s[_]||[];for(var S=0;S<=m;S++)s[_][m]=s[_][m]||{};s[_][m].boundaryGap=o==="bar"}}};A(si,function(c){ze(c,o)>=0&&A(c,function(h){r.setIconStatus(h,"normal")})}),r.setIconStatus(o,"emphasis"),t.eachComponent({mainType:"series",query:i==null?null:{seriesIndex:i}},l);var u,d=o;o==="stack"&&(u=de({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),r.get(["iconStatus",o])!=="emphasis"&&(d="tiled")),n.dispatchAction({type:"changeMagicType",currentType:d,newOption:s,newTitle:u,featureName:"magicType"})}},a}(ae),da={line:function(e,a,t,n){if(e==="bar")return de({id:a,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(e,a,t,n){if(e==="line")return de({id:a,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(e,a,t,n){var o=t.get("stack")===ua;if(e==="line"||e==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),de({id:a,stack:o?"":ua},n.get(["option","stack"])||{},!0)}};At({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,a){a.mergeOption(e.newOption)});var ui=li,je=new Array(60).join("-"),we="	";function di(e){var a={},t=[],n=[];return e.eachRawSeries(function(o){var r=o.coordinateSystem;if(r&&(r.type==="cartesian2d"||r.type==="polar")){var i=r.getBaseAxis();if(i.type==="category"){var s=i.dim+"_"+i.index;a[s]||(a[s]={categoryAxis:i,valueAxis:r.getOtherAxis(i),series:[]},n.push({axisDim:i.dim,axisIndex:i.index})),a[s].series.push(o)}else t.push(o)}else t.push(o)}),{seriesGroupByCategoryAxis:a,other:t,meta:n}}function ci(e){var a=[];return A(e,function(t,n){var o=t.categoryAxis,r=t.valueAxis,i=r.dim,s=[" "].concat(Y(t.series,function(g){return g.name})),l=[o.model.getCategories()];A(t.series,function(g){var f=g.getRawData();l.push(g.getRawData().mapArray(f.mapDimension(i),function(p){return p}))});for(var u=[s.join(we)],d=0;d<l[0].length;d++){for(var c=[],h=0;h<l.length;h++)c.push(l[h][d]);u.push(c.join(we))}a.push(u.join(`
`))}),a.join(`

`+je+`

`)}function hi(e){return Y(e,function(a){var t=a.getRawData(),n=[a.name],o=[];return t.each(t.dimensions,function(){for(var r=arguments.length,i=arguments[r-1],s=t.getName(i),l=0;l<r-1;l++)o[l]=arguments[l];n.push((s?s+we:"")+o.join(we))}),n.join(`
`)}).join(`

`+je+`

`)}function pi(e){var a=di(e);return{value:Qn([ci(a.seriesGroupByCategoryAxis),hi(a.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+je+`

`),meta:a.meta}}function Ue(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function fi(e){var a=e.slice(0,e.indexOf(`
`));if(a.indexOf(we)>=0)return!0}var gt=new RegExp("["+we+"]+","g");function vi(e){for(var a=e.split(/\n+/g),t=Ue(a.shift()).split(gt),n=[],o=Y(t,function(l){return{name:l,data:[]}}),r=0;r<a.length;r++){var i=Ue(a[r]).split(gt);n.push(i.shift());for(var s=0;s<i.length;s++)o[s]&&(o[s].data[r]=i[s])}return{series:o,categories:n}}function gi(e){for(var a=e.split(/\n+/g),t=Ue(a.shift()),n=[],o=0;o<a.length;o++){var r=Ue(a[o]);if(!!r){var i=r.split(gt),s="",l=void 0,u=!1;isNaN(i[0])?(u=!0,s=i[0],i=i.slice(1),n[o]={name:s,value:[]},l=n[o].value):l=n[o]=[];for(var d=0;d<i.length;d++)l.push(+i[d]);l.length===1&&(u?n[o].value=l[0]:n[o]=l[0])}}return{name:t,data:n}}function mi(e,a){var t=e.split(new RegExp(`
*`+je+`
*`,"g")),n={series:[]};return A(t,function(o,r){if(fi(o)){var i=vi(o),s=a[r],l=s.axisDim+"Axis";s&&(n[l]=n[l]||[],n[l][s.axisIndex]={data:i.categories},n.series=n.series.concat(i.series))}else{var i=gi(o);n.series.push(i)}}),n}var yi=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),r=this.model;this._dom&&o.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",i.style.backgroundColor=r.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=r.get("lang")||[];s.innerHTML=l[0]||r.get("title"),s.style.cssText="margin:10px 20px",s.style.color=r.get("textColor");var u=document.createElement("div"),d=document.createElement("textarea");u.style.cssText="overflow:auto";var c=r.get("optionToContent"),h=r.get("contentToOption"),g=pi(t);if(Be(c)){var f=c(n.getOption());he(f)?u.innerHTML=f:Jn(f)&&u.appendChild(f)}else{d.readOnly=r.get("readOnly");var p=d.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=r.get("textColor"),p.borderColor=r.get("textareaBorderColor"),p.backgroundColor=r.get("textareaColor"),d.value=g.value,u.appendChild(d)}var v=g.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),m=document.createElement("div");_+=";background-color:"+r.get("buttonColor"),_+=";color:"+r.get("buttonTextColor");var S=this;function x(){o.removeChild(i),S._dom=null}jt(b,"click",x),jt(m,"click",function(){if(h==null&&c!=null||h!=null&&c==null){x();return}var w;try{Be(h)?w=h(u,n.getOption()):w=mi(d.value,v)}catch(M){throw x(),new Error("Data view format error "+M)}w&&n.dispatchAction({type:"changeDataView",newOption:w}),x()}),b.innerHTML=l[1],m.innerHTML=l[2],m.style.cssText=b.style.cssText=_,!r.get("readOnly")&&y.appendChild(m),y.appendChild(b),i.appendChild(s),i.appendChild(u),i.appendChild(y),u.style.height=o.clientHeight-80+"px",o.appendChild(i),this._dom=i},a.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},a.prototype.dispose=function(t,n){this.remove(t,n)},a.getDefaultOption=function(t){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},a}(ae);function _i(e,a){return Y(e,function(t,n){var o=a&&a[n];if(Me(o)&&!ne(o)){var r=Me(t)&&!ne(t);r||(t={value:t});var i=o.name!=null&&t.name==null;return t=Ae(t,o),i&&delete t.name,t}else return t})}At({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,a){var t=[];A(e.newOption.series,function(n){var o=a.getSeriesByName(n.name)[0];if(!o)t.push(Ce({type:"scatter"},n));else{var r=o.get("data");t.push({name:n.name,data:_i(n.data,r)})}}),a.mergeOption(Ae({series:t},e.newOption))});var bi=yi,hn=A,pn=ja();function xi(e,a){var t=kt(e);hn(a,function(n,o){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i[o])break}if(r<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(s){var l=s.getPercentRange();t[0][o]={dataZoomId:o,start:l[0],end:l[1]}}}}),t.push(a)}function Ci(e){var a=kt(e),t=a[a.length-1];a.length>1&&a.pop();var n={};return hn(t,function(o,r){for(var i=a.length-1;i>=0;i--)if(o=a[i][r],o){n[r]=o;break}}),n}function Si(e){pn(e).snapshots=null}function wi(e){return kt(e).length}function kt(e){var a=pn(e);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var Ai=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.onclick=function(t,n){Si(t),n.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(t){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return n},a}(ae);At({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,a){a.resetOption("recreate")});var Ti=Ai,Pi=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Di=function(){function e(a,t,n){var o=this;this._targetInfoList=[];var r=ca(t,a);A(Oi,function(i,s){(!n||!n.include||ze(n.include,s)>=0)&&i(r,o._targetInfoList)})}return e.prototype.setOutputRanges=function(a,t){return this.matchOutputRanges(a,t,function(n,o,r){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var i=et[n.brushType](0,r,o);n.__rangeOffset={offset:va[n.brushType](i.values,n.range,[1,1]),xyMinMax:i.xyMinMax}}}),a},e.prototype.matchOutputRanges=function(a,t,n){A(a,function(o){var r=this.findTargetInfo(o,t);r&&r!==!0&&A(r.coordSyses,function(i){var s=et[o.brushType](1,i,o.range,!0);n(o,s.values,i,t)})},this)},e.prototype.setInputRanges=function(a,t){A(a,function(n){var o=this.findTargetInfo(n,t);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var r=et[n.brushType](0,o.coordSys,n.coordRange),i=n.__rangeOffset;n.range=i?va[n.brushType](r.values,i.offset,Ii(r.xyMinMax,i.xyMinMax)):r.values}},this)},e.prototype.makePanelOpts=function(a,t){return Y(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:_r(o),isTargetByCursor:xr(o,a,n.coordSysModel),getLinearBrushOtherExtent:br(o)}})},e.prototype.controlSeries=function(a,t,n){var o=this.findTargetInfo(a,n);return o===!0||o&&ze(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(a,t){for(var n=this._targetInfoList,o=ca(t,a),r=0;r<n.length;r++){var i=n[r],s=a.panelId;if(s){if(i.panelId===s)return i}else for(var l=0;l<ha.length;l++)if(ha[l](o,i))return i}return!0},e}();function mt(e){return e[0]>e[1]&&e.reverse(),e}function ca(e,a){return Ya(e,a,{includeMainTypes:Pi})}var Oi={grid:function(e,a){var t=e.xAxisModels,n=e.yAxisModels,o=e.gridModels,r=eo(),i={},s={};!t&&!n&&!o||(A(t,function(l){var u=l.axis.grid.model;r.set(u.id,u),i[u.id]=!0}),A(n,function(l){var u=l.axis.grid.model;r.set(u.id,u),s[u.id]=!0}),A(o,function(l){r.set(l.id,l),i[l.id]=!0,s[l.id]=!0}),r.each(function(l){var u=l.coordinateSystem,d=[];A(u.getCartesians(),function(c,h){(ze(t,c.getAxis("x").model)>=0||ze(n,c.getAxis("y").model)>=0)&&d.push(c)}),a.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:d[0],coordSyses:d,getPanelRect:pa.grid,xAxisDeclared:i[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,a){A(e.geoModels,function(t){var n=t.coordinateSystem;a.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:pa.geo})})}},ha=[function(e,a){var t=e.xAxisModel,n=e.yAxisModel,o=e.gridModel;return!o&&t&&(o=t.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===a.gridModel},function(e,a){var t=e.geoModel;return t&&t===a.geoModel}],pa={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,a=e.getBoundingRect().clone();return a.applyTransform(Wa(e)),a}},et={lineX:X(fa,0),lineY:X(fa,1),rect:function(e,a,t,n){var o=e?a.pointToData([t[0][0],t[1][0]],n):a.dataToPoint([t[0][0],t[1][0]],n),r=e?a.pointToData([t[0][1],t[1][1]],n):a.dataToPoint([t[0][1],t[1][1]],n),i=[mt([o[0],r[0]]),mt([o[1],r[1]])];return{values:i,xyMinMax:i}},polygon:function(e,a,t,n){var o=[[1/0,-1/0],[1/0,-1/0]],r=Y(t,function(i){var s=e?a.pointToData(i,n):a.dataToPoint(i,n);return o[0][0]=Math.min(o[0][0],s[0]),o[1][0]=Math.min(o[1][0],s[1]),o[0][1]=Math.max(o[0][1],s[0]),o[1][1]=Math.max(o[1][1],s[1]),s});return{values:r,xyMinMax:o}}};function fa(e,a,t,n){var o=t.getAxis(["x","y"][e]),r=mt(Y([0,1],function(s){return a?o.coordToData(o.toLocalCoord(n[s]),!0):o.toGlobalCoord(o.dataToCoord(n[s]))})),i=[];return i[e]=r,i[1-e]=[NaN,NaN],{values:r,xyMinMax:i}}var va={lineX:X(ga,0),lineY:X(ga,1),rect:function(e,a,t){return[[e[0][0]-t[0]*a[0][0],e[0][1]-t[0]*a[0][1]],[e[1][0]-t[1]*a[1][0],e[1][1]-t[1]*a[1][1]]]},polygon:function(e,a,t){return Y(e,function(n,o){return[n[0]-t[0]*a[o][0],n[1]-t[1]*a[o][1]]})}};function ga(e,a,t,n){return[a[0]-n[e]*t[0],a[1]-n[e]*t[1]]}function Ii(e,a){var t=ma(e),n=ma(a),o=[t[0]/n[0],t[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function ma(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var fn=Di,yt=A,Li=ao("toolbox-dataZoom_"),ki=function(e){N(a,e);function a(){return e!==null&&e.apply(this,arguments)||this}return a.prototype.render=function(t,n,o,r){this._brushController||(this._brushController=new yr(o.getZr()),this._brushController.on("brush",ie(this._onBrush,this)).mount()),zi(t,n,this,r,o),Bi(t,n)},a.prototype.onclick=function(t,n,o){Mi[o].call(this)},a.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(t){var n=t.areas;if(!t.isEnd||!n.length)return;var o={},r=this.ecModel;this._brushController.updateCovers([]);var i=new fn(Mt(this.model),r,{include:["grid"]});i.matchOutputRanges(n,r,function(u,d,c){if(c.type==="cartesian2d"){var h=u.brushType;h==="rect"?(s("x",c,d[0]),s("y",c,d[1])):s({lineX:"x",lineY:"y"}[h],c,d)}}),xi(r,o),this._dispatchZoomAction(o);function s(u,d,c){var h=d.getAxis(u),g=h.model,f=l(u,g,r),p=f.findRepresentativeAxisProxy(g).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(c=Vo(0,c.slice(),h.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),f&&(o[f.id]={dataZoomId:f.id,startValue:c[0],endValue:c[1]})}function l(u,d,c){var h;return c.eachComponent({mainType:"dataZoom",subType:"select"},function(g){var f=g.getAxisModel(u,d.componentIndex);f&&(h=g)}),h}},a.prototype._dispatchZoomAction=function(t){var n=[];yt(t,function(o,r){n.push(ce(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},a.getDefaultOption=function(t){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},a}(ae),Mi={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(Ci(this.ecModel))}};function Mt(e){var a={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return a.xAxisIndex==null&&a.xAxisId==null&&(a.xAxisIndex="all"),a.yAxisIndex==null&&a.yAxisId==null&&(a.yAxisIndex="all"),a}function Bi(e,a){e.setIconStatus("back",wi(a)>1?"emphasis":"normal")}function zi(e,a,t,n,o){var r=t._isZoomActive;n&&n.type==="takeGlobalCursor"&&(r=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),t._isZoomActive=r,e.setIconStatus("zoom",r?"emphasis":"normal");var i=new fn(Mt(e),a,{include:["grid"]}),s=i.makePanelOpts(o,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(r&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}to("dataZoom",function(e){var a=e.getComponent("toolbox",0),t=["feature","dataZoom"];if(!a||a.get(t)==null)return;var n=a.getModel(t),o=[],r=Mt(n),i=Ya(e,r);yt(i.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),yt(i.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,d){var c=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:Li+u+c};h[d]=c,o.push(h)}return o});var Vi=ki;function Ni(e){e.registerComponentModel(ti),e.registerComponentView(oi),Le("saveAsImage",ii),Le("magicType",ui),Le("dataView",bi),Le("dataZoom",Vi),Le("restore",Ti),Ct(Qr)}var Ri=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t.layoutMode="box",t}return a.prototype.init=function(t,n,o){this.mergeDefaultAndTheme(t,o),this._initData()},a.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},a.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var n=this._data.count();this.option.loop?t=(t%n+n)%n:(t>=n&&(t=n-1),t<0&&(t=0)),this.option.currentIndex=t},a.prototype.getCurrentIndex=function(){return this.option.currentIndex},a.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},a.prototype.setPlayState=function(t){this.option.autoPlay=!!t},a.prototype.getPlayState=function(){return!!this.option.autoPlay},a.prototype._initData=function(){var t=this.option,n=t.data||[],o=t.axisType,r=this._names=[],i;o==="category"?(i=[],A(n,function(u,d){var c=no(oo(u),""),h;Me(u)?(h=ce(u),h.value=d):h=d,i.push(h),r.push(c)})):i=n;var s={category:"ordinal",time:"time",value:"number"}[o]||"number",l=this._data=new ro([{name:"value",type:s}],this);l.initData(i,r)},a.prototype.getData=function(){return this._data},a.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},a.type="timeline",a.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},a}(St),ya=Ri,vn=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="timeline.slider",a.defaultOption=io(ya.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),a}(ya);Za(vn,so.prototype);var $i=vn,Ei=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.type="timeline",a}(wt),Fi=Ei,Wi=function(e){N(a,e);function a(t,n,o,r){var i=e.call(this,t,n,o)||this;return i.type=r||"value",i}return a.prototype.getLabelModel=function(){return this.model.getModel("label")},a.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},a}(No),Zi=Wi,tt=Math.PI,_a=ja(),Ui=function(e){N(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.init=function(t,n){this.api=n},a.prototype.render=function(t,n,o){if(this.model=t,this.api=o,this.ecModel=n,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,o),i=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(r,t);t.formatTooltip=function(u){var d=l.scale.getLabel({value:u});return lo("nameValue",{noName:!0,value:d})},A(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](r,i,l,t)},this),this._renderAxisLabel(r,s,l,t),this._position(r,t)}this._doPlayStop(),this._updateTicksStatus()},a.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},a.prototype.dispose=function(){this._clearTimer()},a.prototype._layout=function(t,n){var o=t.get(["label","position"]),r=t.get("orient"),i=Gi(t,n),s;o==null||o==="auto"?s=r==="horizontal"?i.y+i.height/2<n.getHeight()/2?"-":"+":i.x+i.width/2<n.getWidth()/2?"+":"-":he(o)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][o]:s=o;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:tt/2},c=r==="vertical"?i.height:i.width,h=t.getModel("controlStyle"),g=h.get("show",!0),f=g?h.get("itemSize"):0,p=g?h.get("itemGap"):0,v=f+p,y=t.get(["label","rotate"])||0;y=y*tt/180;var _,b,m,S=h.get("position",!0),x=g&&h.get("showPlayBtn",!0),w=g&&h.get("showPrevBtn",!0),M=g&&h.get("showNextBtn",!0),L=0,O=c;S==="left"||S==="bottom"?(x&&(_=[0,0],L+=v),w&&(b=[L,0],L+=v),M&&(m=[O-f,0],O-=v)):(x&&(_=[O-f,0],O-=v),w&&(b=[0,0],L+=v),M&&(m=[O-f,0],O-=v));var k=[L,O];return t.get("inverse")&&k.reverse(),{viewRect:i,mainLength:c,orient:r,rotation:d[r],labelRotation:y,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[r],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[r],playPosition:_,prevBtnPosition:b,nextBtnPosition:m,axisExtent:k,controlSize:f,controlGap:p}},a.prototype._position=function(t,n){var o=this._mainGroup,r=this._labelGroup,i=t.viewRect;if(t.orient==="vertical"){var s=_o(),l=i.x,u=i.y+i.height;Yt(s,s,[-l,-u]),uo(s,s,-tt/2),Yt(s,s,[l,u]),i=i.clone(),i.applyTransform(s)}var d=_(i),c=_(o.getBoundingRect()),h=_(r.getBoundingRect()),g=[o.x,o.y],f=[r.x,r.y];f[0]=g[0]=d[0][0];var p=t.labelPosOpt;if(p==null||he(p)){var v=p==="+"?0:1;b(g,c,d,1,v),b(f,h,d,1,1-v)}else{var v=p>=0?0:1;b(g,c,d,1,v),f[1]=g[1]+p}o.setPosition(g),r.setPosition(f),o.rotation=r.rotation=t.rotation,y(o),y(r);function y(m){m.originX=d[0][0]-m.x,m.originY=d[1][0]-m.y}function _(m){return[[m.x,m.x+m.width],[m.y,m.y+m.height]]}function b(m,S,x,w,M){m[w]+=x[w][M]-S[w][M]}},a.prototype._createAxis=function(t,n){var o=n.getData(),r=n.get("axisType"),i=Hi(n,r);i.getTicks=function(){return o.mapArray(["value"],function(u){return{value:u}})};var s=o.getDataExtent("value");i.setExtent(s[0],s[1]),i.calcNiceTicks();var l=new Zi("value",i,t.axisExtent,r);return l.model=n,l},a.prototype._createGroup=function(t){var n=this[t]=new Re;return this.group.add(n),n},a.prototype._renderAxisLine=function(t,n,o,r){var i=o.getExtent();if(!!r.get(["lineStyle","show"])){var s=new qt({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:Ce({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(s);var l=this._progressLine=new qt({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:Ae({lineCap:"round",lineWidth:s.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},a.prototype._renderAxisTick=function(t,n,o,r){var i=this,s=r.getData(),l=o.scale.getTicks();this._tickSymbols=[],A(l,function(u){var d=o.dataToCoord(u.value),c=s.getItemModel(u.value),h=c.getModel("itemStyle"),g=c.getModel(["emphasis","itemStyle"]),f=c.getModel(["progress","itemStyle"]),p={x:d,y:0,onclick:ie(i._changeTimeline,i,u.value)},v=ba(c,h,n,p);v.ensureState("emphasis").style=g.getItemStyle(),v.ensureState("progress").style=f.getItemStyle(),Ke(v);var y=Ra(v);c.get("tooltip")?(y.dataIndex=u.value,y.dataModel=r):y.dataIndex=y.dataModel=null,i._tickSymbols.push(v)})},a.prototype._renderAxisLabel=function(t,n,o,r){var i=this,s=o.getLabelModel();if(!!s.get("show")){var l=r.getData(),u=o.getViewLabels();this._tickLabels=[],A(u,function(d){var c=d.tickValue,h=l.getItemModel(c),g=h.getModel("label"),f=h.getModel(["emphasis","label"]),p=h.getModel(["progress","label"]),v=o.dataToCoord(d.tickValue),y=new be({x:v,y:0,rotation:t.labelRotation-t.rotation,onclick:ie(i._changeTimeline,i,c),silent:!1,style:xe(g,{text:d.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});y.ensureState("emphasis").style=xe(f),y.ensureState("progress").style=xe(p),n.add(y),Ke(y),_a(y).dataIndex=c,i._tickLabels.push(y)})}},a.prototype._renderControl=function(t,n,o,r){var i=t.controlSize,s=t.rotation,l=r.getModel("controlStyle").getItemStyle(),u=r.getModel(["emphasis","controlStyle"]).getItemStyle(),d=r.getPlayState(),c=r.get("inverse",!0);h(t.nextBtnPosition,"next",ie(this._changeTimeline,this,c?"-":"+")),h(t.prevBtnPosition,"prev",ie(this._changeTimeline,this,c?"+":"-")),h(t.playPosition,d?"stop":"play",ie(this._handlePlayClick,this,!d),!0);function h(g,f,p,v){if(!!g){var y=co(dt(r.get(["controlStyle",f+"BtnSize"]),i),i),_=[0,-y/2,y,y],b=ji(r,f+"Icon",_,{x:g[0],y:g[1],originX:i/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:p});b.ensureState("emphasis").style=u,n.add(b),Ke(b)}}},a.prototype._renderCurrentPointer=function(t,n,o,r){var i=r.getData(),s=r.getCurrentIndex(),l=i.getItemModel(s).getModel("checkpointStyle"),u=this,d={onCreate:function(c){c.draggable=!0,c.drift=ie(u._handlePointerDrag,u),c.ondragend=ie(u._handlePointerDragend,u),xa(c,u._progressLine,s,o,r,!0)},onUpdate:function(c){xa(c,u._progressLine,s,o,r)}};this._currentPointer=ba(l,l,this._mainGroup,{},this._currentPointer,d)},a.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},a.prototype._handlePointerDrag=function(t,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},a.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},a.prototype._pointerChangeTimeline=function(t,n){var o=this._toAxisCoord(t)[0],r=this._axis,i=ho(r.getExtent().slice());o>i[1]&&(o=i[1]),o<i[0]&&(o=i[0]),this._currentPointer.x=o,this._currentPointer.markRedraw(),this._progressLine.shape.x2=o,this._progressLine.dirty();var s=this._findNearestTick(o),l=this.model;(n||s!==l.getCurrentIndex()&&l.get("realtime"))&&this._changeTimeline(s)},a.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=t.model;t._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},a.prototype._toAxisCoord=function(t){var n=this._mainGroup.getLocalTransform();return po(t,n,!0)},a.prototype._findNearestTick=function(t){var n=this.model.getData(),o=1/0,r,i=this._axis;return n.each(["value"],function(s,l){var u=i.dataToCoord(s),d=Math.abs(u-t);d<o&&(o=d,r=l)}),r},a.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},a.prototype._changeTimeline=function(t){var n=this.model.getCurrentIndex();t==="+"?t=n+1:t==="-"&&(t=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},a.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",r<t);if(o)for(var r=0;r<o.length;r++)o&&o[r]&&o[r].toggleState("progress",_a(o[r]).dataIndex<=t)},a.type="timeline.slider",a}(Fi);function Hi(e,a){if(a=a||e.get("type"),a)switch(a){case"category":return new go({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new vo({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new fo}}function Gi(e,a){return Ha(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()},e.get("padding"))}function ji(e,a,t,n){var o=n.style,r=Ga(e.get(["controlStyle",a]),n||{},new bt(t[0],t[1],t[2],t[3]));return o&&r.setStyle(o),r}function ba(e,a,t,n,o,r){var i=a.get("color");if(o)o.setColor(i),t.add(o),r&&r.onUpdate(o);else{var s=e.get("symbol");o=Na(s,-1,-1,2,2,i),o.setStyle("strokeNoScale",!0),t.add(o),r&&r.onCreate(o)}var l=a.getItemStyle(["color"]);o.setStyle(l),n=de({rectHover:!0,z2:100},n,!0);var u=mo(e.get("symbolSize"));n.scaleX=u[0]/2,n.scaleY=u[1]/2;var d=yo(e.get("symbolOffset"),u);d&&(n.x=(n.x||0)+d[0],n.y=(n.y||0)+d[1]);var c=e.get("symbolRotate");return n.rotation=(c||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function xa(e,a,t,n,o,r){if(!e.dragging){var i=o.getModel("checkpointStyle"),s=n.dataToCoord(o.getData().get("value",t));if(r||!i.get("animation",!0))e.attr({x:s,y:0}),a&&a.attr({shape:{x2:s}});else{var l={duration:i.get("animationDuration",!0),easing:i.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),a&&a.animateTo({shape:{x2:s}},l)}}}var Yi=Ui;function qi(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(a,t,n){var o=t.getComponent("timeline");return o&&a.currentIndex!=null&&(o.setCurrentIndex(a.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:a.from}))),t.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),Ae({currentIndex:o.option.currentIndex},a)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(a,t){var n=t.getComponent("timeline");n&&a.playState!=null&&n.setPlayState(a.playState)})}function Ki(e){var a=e&&e.timeline;ne(a)||(a=a?[a]:[]),A(a,function(t){!t||Xi(t)})}function Xi(e){var a=e.type,t={number:"value",time:"time"};if(t[a]&&(e.axisType=t[a],delete e.type),Ca(e),ve(e,"controlPosition")){var n=e.controlStyle||(e.controlStyle={});ve(n,"position")||(n.position=e.controlPosition),n.position==="none"&&!ve(n,"show")&&(n.show=!1,delete n.position),delete e.controlPosition}A(e.data||[],function(o){Me(o)&&!ne(o)&&(!ve(o,"value")&&ve(o,"name")&&(o.value=o.name),Ca(o))})}function Ca(e){var a=e.itemStyle||(e.itemStyle={}),t=a.emphasis||(a.emphasis={}),n=e.label||e.label||{},o=n.normal||(n.normal={}),r={normal:1,emphasis:1};A(n,function(i,s){!r[s]&&!ve(o,s)&&(o[s]=i)}),t.label&&!ve(n,"emphasis")&&(n.emphasis=t.label,delete t.label)}function ve(e,a){return e.hasOwnProperty(a)}function Ji(e){e.registerComponentModel($i),e.registerComponentView(Yi),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),qi(e),e.registerPreprocessor(Ki)}function We(){return`#${(Math.random()*16777215<<0).toString(16)}`}function Qi(e,a){const t=e.indexOf("open"),n=e.indexOf("close"),o=e.indexOf("high"),r=e.indexOf("low");let i;return a.map((s,l)=>{const u=s.slice(),d=l===0?(u[t]+u[n])/2:(i[t]+i[n])/2,c=(u[t]+u[o]+u[r]+u[n])/4,h=Math.max(u[o],u[t],u[n]),g=Math.min(u[r],u[t],u[n]);return u[t]=d,u[n]=c,u[o]=h,u[r]=g,i=u.slice(),u})}const es=2,ts=3;function at(e,a,t=ts){const n=a%e;return a-n+(t===es?e:0)}function Sa(e,a){var t,n;return`${e.is_short?"Short":"Long"} ${a}  ${La(e.profit_ratio)} 
Enter-tag: ${(t=e.enter_tag)!=null?t:""} 
Exit-Tag: ${(n=e.exit_reason)!=null?n:""}`}function as(e,a){var t,n;return`${e.is_short?"Short":"Long"} adjustment
    ${a.ft_order_side==="buy"?"+":"-"}${xn(a.cost,(t=e.quote_currency)!=null?t:"")}
Enter-tag: ${(n=e.enter_tag)!=null?n:""}`}const ns="path://m 52.444161,104.1909 8.386653,25.34314 8.386651,25.34313 -16.731501,0.0422 -16.731501,0.0422 8.344848,-25.38539 z m 0.08656,-48.368126 8.386652,25.343139 8.386652,25.343137 -16.731501,0.0422 -16.731502,0.0422 8.344848,-25.385389 z",wa="path://m 102.20764,19.885384 h 24.1454 v 41.928829 h -24.1454 z m 12.17344,36.423813 8.38665,25.343139 8.38666,25.343134 -16.7315,0.0422 -16.731507,0.0422 8.344847,-25.385386 z",nt="#AD00FF",ot="#0066FF";function os(e,a){var n,o,r;const t=[];for(let i=0,s=a.length;i<s;i+=1){const l=a[i];if(l.open_timestamp>=e.data_start_ts&&l.open_timestamp<=e.data_stop_ts&&l.orders)for(let u=0;u<l.orders.length;u++){const d=l.orders[u];d.order_filled_timestamp&&d.order_filled_timestamp<=e.data_stop_ts&&d.order_filled_timestamp>e.data_start_ts&&(u===0?t.push([at((n=e.timeframe_ms)!=null?n:0,l.open_timestamp),d.safe_price,wa,d.ft_order_side=="sell"?180:0,l.is_short?nt:ot,l.is_short?"Short":"Long",Sa(l,"entry")]):u===l.orders.length-1&&l.close_timestamp?l.close_timestamp<=e.data_stop_ts&&l.close_timestamp>e.data_start_ts&&l.is_open===!1&&t.push([at((o=e.timeframe_ms)!=null?o:0,l.close_timestamp),d.safe_price,wa,l.is_short?0:180,l.is_short?nt:ot,La(l.profit_ratio,2),Sa(l,"exit")]):t.push([at((r=e.timeframe_ms)!=null?r:0,d.order_filled_timestamp),d.safe_price,ns,d.ft_order_side=="sell"?180:0,l.is_short?nt:ot,"",as(l,d)]))}}return{tradeData:t}}Ct([xo,Yr,Co,Ro,$o,So,Ji,wo,Ni,Ao,Eo,Fo,Fr,Wo,Zo,Qo,To]);const rt="5.5%",it="1%",Aa=55,ke=8,rs="#26A69A",is="#26A69A",ss="#EF5350",ls="#EF5350",us="#00ff26",ds="#00ff26",cs="#faba25",hs="#faba25",ps=He({name:"CandleChart",components:{"v-chart":bo},props:{trades:{required:!1,default:()=>[],type:Array},dataset:{required:!0,type:Object},heikinAshi:{required:!1,default:!1,type:Boolean},useUTC:{required:!1,default:!0,type:Boolean},plotConfig:{required:!0,type:Object},theme:{default:"dark",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(e){const a=$(),t=$([]),n=$([]),o=$({}),r=E(()=>e.dataset?e.dataset.strategy:""),i=E(()=>e.dataset?e.dataset.pair:""),s=E(()=>e.dataset?e.dataset.timeframe:""),l=E(()=>e.dataset?e.dataset.columns:[]),u=E(()=>e.dataset!==null&&typeof e.dataset=="object"),d=E(()=>e.trades.filter(p=>p.pair===i.value)),c=E(()=>`${r.value} - ${i.value} - ${s.value}`),h=(p=!1)=>{var ye,se,H,V;if(!u.value)return;(ye=o.value)!=null&&ye.title&&(o.value.title[0].text=c.value);const v=e.dataset.columns.findIndex(C=>C==="__date_ts"),y=e.dataset.columns.findIndex(C=>C==="open"),_=e.dataset.columns.findIndex(C=>C==="high"),b=e.dataset.columns.findIndex(C=>C==="low"),m=e.dataset.columns.findIndex(C=>C==="close"),S=e.dataset.columns.findIndex(C=>C==="volume"),x=e.dataset.columns.findIndex(C=>C==="_buy_signal_close"||C==="_enter_long_signal_close"),w=e.dataset.columns.findIndex(C=>C==="_sell_signal_close"||C==="_exit_long_signal_close"),M=e.dataset.columns.findIndex(C=>C==="_enter_short_signal_close"),L=e.dataset.columns.findIndex(C=>C==="_exit_short_signal_close"),O="subplots"in e.plotConfig?Object.keys(e.plotConfig.subplots).length+1:1;if(Array.isArray((se=o.value)==null?void 0:se.dataZoom))if(p){const C=(1-250/e.dataset.length)*100;o.value.dataZoom.forEach((Z,j)=>{o.value&&o.value.dataZoom&&(o.value.dataZoom[j].start=C)})}else o.value.dataZoom.forEach((C,Z)=>{o.value&&o.value.dataZoom&&(delete o.value.dataZoom[Z].start,delete o.value.dataZoom[Z].end)});const k=e.heikinAshi?Qi(l.value,e.dataset.data):e.dataset.data.slice(),D=Array(k[k.length-2].length);D[v]=k[k.length-1][v]+e.dataset.timeframe_ms*3,k.push(D);const U={dataset:{source:k},grid:[{left:rt,right:it,bottom:`${O*ke+2}%`},{left:rt,right:it,bottom:`${O*ke}%`,height:`${ke}%`}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:rs,color0:ss,borderColor:is,borderColor0:ls},encode:{x:v,y:[y,m,b,_]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:v,y:S}},{name:"Entry",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:us},encode:{x:v,y:x}}]};if(w>=0&&Array.isArray(U.series)&&U.series.push({name:"Exit",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:cs},encode:{x:v,y:w}}),Array.isArray(U.series)&&(M>=0&&U.series.push({name:"Entry",type:"scatter",symbol:"triangle",symbolRotate:180,symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:ds},tooltip:{},encode:{x:v,y:M}}),L>=0&&U.series.push({name:"Exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:hs},tooltip:{},encode:{x:v,y:L}})),Object.assign(o.value,U),"main_plot"in e.plotConfig&&Object.entries(e.plotConfig.main_plot).forEach(([C,Z])=>{var Te,Q,Pe,De,Oe;const j=e.dataset.columns.findIndex(pe=>pe===C);if(j>1){!Array.isArray((Te=o.value)==null?void 0:Te.legend)&&((Pe=(Q=o.value)==null?void 0:Q.legend)==null?void 0:Pe.data)&&o.value.legend.data.push(C);const pe={name:C,type:Z.type||"line",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Z.color},encode:{x:v,y:j},showSymbol:!1};Array.isArray((De=o.value)==null?void 0:De.series)&&((Oe=o.value)==null||Oe.series.push(pe))}else console.log(`element ${C} for main plot not found in columns.`)}),"subplots"in e.plotConfig){let C=2;Object.entries(e.plotConfig.subplots).forEach(([Z,j])=>{const Te=C;Array.isArray(o.value.yAxis)&&o.value.yAxis.length<=C&&o.value.yAxis.push({scale:!0,gridIndex:Te,name:Z,nameLocation:"middle",nameGap:Aa,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(o.value.xAxis)&&o.value.xAxis.length<=C&&o.value.xAxis.push({type:"time",scale:!0,gridIndex:Te,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(o.value.dataZoom)&&o.value.dataZoom.forEach(Q=>Q.xAxisIndex&&Array.isArray(Q.xAxisIndex)?Q.xAxisIndex.push(C):null),o.value.grid&&Array.isArray(o.value.grid)&&o.value.grid.push({left:rt,right:it,bottom:`${(O-C+1)*ke}%`,height:`${ke}%`}),Object.entries(j).forEach(([Q,Pe])=>{var Oe;const De=e.dataset.columns.findIndex(pe=>pe===Q);if(De>0){!Array.isArray(o.value.legend)&&((Oe=o.value.legend)==null?void 0:Oe.data)&&o.value.legend.data.push(Q);const pe={name:Q,type:Pe.type||"line",xAxisIndex:C,yAxisIndex:C,itemStyle:{color:Pe.color||We()},encode:{x:v,y:De},showSymbol:!1};o.value.series&&Array.isArray(o.value.series)&&o.value.series.push(pe)}else console.log(`element ${Q} was not found in the columns.`)}),C+=1})}Array.isArray(o.value.grid)&&(o.value.grid[o.value.grid.length-1].bottom="50px",delete o.value.grid[o.value.grid.length-1].top);const{tradeData:q}=os(e.dataset,d.value),K="Trades";!Array.isArray(o.value.legend)&&((H=o.value.legend)==null?void 0:H.data)&&o.value.legend.data.push(K);const G={name:K,type:"scatter",xAxisIndex:0,yAxisIndex:0,encode:{x:0,y:1,label:5,tooltip:6},label:{show:!0,fontSize:12,backgroundColor:e.theme!=="dark"?"#fff":"#000",padding:2,color:e.theme==="dark"?"#fff":"#000"},labelLayout:{rotate:75,align:"left",dx:10},itemStyle:{color:C=>C.data[4],opacity:.9},symbol:C=>C[2],symbolRotate:C=>C[3],symbolSize:13,data:q};Array.isArray(o.value.series)&&o.value.series.push(G),(V=a.value)==null||V.setOption(o.value,{replaceMerge:["series","grid","yAxis","xAxis","legend"],noMerge:!p})},g=()=>{var p;(p=a.value)==null||p.setOption({},{noMerge:!0}),o.value={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:e.useUTC,animation:!1,legend:{data:["Candles","Volume","Entry","Exit"],right:"1%"},tooltip:{show:!0,trigger:"axis",renderMode:"richText",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position(v,y,_,b,m){const S={top:60};return S[["left","right"][+(v[0]<m.viewSize[0]/2)]]=5,S}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Aa,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:80,end:100}]},console.log("Initialized"),h(!0)},f=()=>{if(!e.sliderPosition)return;const p=Nt.format(e.sliderPosition.startValue-e.dataset.timeframe_ms*40,"yyyy-MM-dd HH:mm:ss"),v=Nt.format(e.sliderPosition.endValue?e.sliderPosition.endValue+e.dataset.timeframe_ms*40:e.sliderPosition.startValue+e.dataset.timeframe_ms*80,"yyyy-MM-dd HH:mm:ss");a.value&&a.value.dispatchAction({type:"dataZoom",dataZoomIndex:0,startValue:p,endValue:v})};return _t(()=>{g()}),ue(()=>e.useUTC,()=>g()),ue(()=>e.dataset,()=>h()),ue(()=>e.plotConfig,()=>g()),ue(()=>e.heikinAshi,()=>h()),ue(()=>e.sliderPosition,()=>f()),{candleChart:a,buyData:t,sellData:n,strategy:r,pair:i,timeframe:s,datasetColumns:l,hasData:u,filteredTrades:d,chartTitle:c}}}),fs={class:"d-flex flex-grow-1 chart-wrapper"};function vs(e,a,t,n,o,r){const i=R("v-chart");return P(),B("div",fs,[e.hasData?(P(),J(i,{key:0,ref:"candleChart",theme:e.theme,autoresize:"","manual-update":""},null,8,["theme"])):W("",!0)])}var gs=Ne(ps,[["render",vs],["__scopeId","data-v-60fc3b2f"]]);const gn="ft_custom_plot_config",mn="ft_selected_plot_config";function ms(){return localStorage.getItem(mn)||"default"}function yn(e){localStorage.setItem(mn,e)}function Bt(){return JSON.parse(localStorage.getItem(gn)||"{}")}function Ta(){return Object.keys(Bt())}function _n(e){const a=Bt();return e in a?a[e]:{...Ze}}function ys(e){const t={...Bt(),...e};localStorage.setItem(gn,JSON.stringify(t)),yn(Object.keys(e)[0])}const _s={name:"CloseCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},bs=["aria-hidden","aria-label"],xs=["fill","width","height"],Cs={d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z"},Ss={key:0};function ws(e,a,t,n,o,r){return P(),B("span",st(e.$attrs,{"aria-hidden":!t.title,"aria-label":t.title,class:"material-design-icon close-circle-outline-icon",role:"img",onClick:a[0]||(a[0]=i=>e.$emit("click",i))}),[(P(),B("svg",{fill:t.fillColor,class:"material-design-icon__svg",width:t.size,height:t.size,viewBox:"0 0 24 24"},[z("path",Cs,[t.title?(P(),B("title",Ss,re(t.title),1)):W("",!0)])],8,xs))],16,bs)}var As=Ne(_s,[["render",ws]]);const Ts=e=>(ka("data-v-0ff81b08"),e=e(),Ma(),e),Ps={key:0},Ds=Ts(()=>z("hr",null,null,-1)),Os={class:"d-flex d-flex-columns"},Is=He({__name:"PlotIndicator",props:{modelValue:{required:!0,type:Object},columns:{required:!0,type:Array},addNew:{required:!0,type:Boolean}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,n=$(We()),o=$(Fe.line),r=$(Object.keys(Fe)),i=$(""),s=$(""),l=$(!1),u=E(()=>t.columns.filter(f=>f.toLowerCase().includes(i.value.toLowerCase()))),d=()=>{n.value=We()},c=E(()=>l.value||!s.value?{}:{[s.value]:{color:n.value,type:o.value}}),h=()=>{a("update:modelValue",c.value)},g=()=>{l.value=!0,h()};return ue(()=>t.modelValue,()=>{[s.value]=Object.keys(t.modelValue),l.value=!1,s.value&&t.modelValue&&(n.value=t.modelValue[s.value].color||We(),o.value=t.modelValue[s.value].type||Fe.line)}),ue(n,()=>{t.addNew||h()}),(f,p)=>{const v=R("b-form-input"),y=R("b-input-group-append"),_=R("b-input-group"),b=R("b-form-select"),m=R("b-form-group"),S=R("b-input-group-prepend"),x=R("b-button");return P(),B("div",null,[e.addNew?(P(),B("div",Ps,[T(m,{label:"Add indicator","label-for":"indicatorSelector"},{default:I(()=>[T(_,{size:"sm"},{default:I(()=>[T(v,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=w=>i.value=w),placeholder:"Filter indicators"},null,8,["modelValue"]),T(y,null,{default:I(()=>[T(As,{class:"pointer align-self-center ms-1",size:18,onClick:p[1]||(p[1]=w=>i.value="")})]),_:1})]),_:1}),T(b,{id:"indicatorSelector",modelValue:s.value,"onUpdate:modelValue":p[2]||(p[2]=w=>s.value=w),options:fe(u),"select-size":4},null,8,["modelValue","options"])]),_:1})])):W("",!0),T(m,{label:"Type","label-for":"plotTypeSelector"},{default:I(()=>[T(b,{id:"plotTypeSelector",modelValue:o.value,"onUpdate:modelValue":p[3]||(p[3]=w=>o.value=w),size:"sm",options:r.value,onChange:p[4]||(p[4]=w=>h())},null,8,["modelValue","options"])]),_:1}),Ds,T(m,{label:"Color","label-for":"colsel",size:"sm"},{default:I(()=>[T(_,null,{default:I(()=>[T(S,null,{default:I(()=>[z("div",{style:Cn({"background-color":n.value}),class:"colorbox me-2"},null,4)]),_:1}),T(v,{id:"colsel",modelValue:n.value,"onUpdate:modelValue":p[5]||(p[5]=w=>n.value=w),size:"sm"},null,8,["modelValue"]),T(y,null,{default:I(()=>[T(x,{variant:"primary",size:"sm",onClick:d},{default:I(()=>[F("\u21BB")]),_:1})]),_:1})]),_:1})]),_:1}),z("div",Os,[e.addNew?(P(),J(x,{key:0,class:"flex-grow-1",variant:"primary",title:"Add ",size:"sm",onClick:h},{default:I(()=>[F(" Save indicator ")]),_:1})):W("",!0),e.addNew?(P(),J(x,{key:1,class:"ms-1 flex-grow-1",variant:"secondary",title:"Add ",size:"sm",onClick:g},{default:I(()=>[F(" Cancel ")]),_:1})):W("",!0)])])}}});var Ls=Ne(Is,[["__scopeId","data-v-0ff81b08"]]);const bn=Sn("plotConfig",{state:()=>({customPlotConfig:{},plotConfigName:ms(),availablePlotConfigNames:Ta(),plotConfig:{...Ze}}),getters:{},actions:{saveCustomPlotConfig(e){this.customPlotConfig=e,ys(e),this.availablePlotConfigNames=Ta()},setPlotConfigName(e){this.plotConfigName=e,yn(e)},plotConfigChanged(){console.log("plotConfigChanged"),this.plotConfig=_n(this.plotConfigName),this.setPlotConfigName(this.plotConfigName)},setPlotConfig(e){console.log("emit..."),this.plotConfig={...e}}}});const zt=e=>(ka("data-v-7aade157"),e=e(),Ma(),e),ks={key:0},Ms={class:"col-mb-3"},Bs=zt(()=>z("hr",null,null,-1)),zs=zt(()=>z("hr",null,null,-1)),Vs=zt(()=>z("hr",null,null,-1)),Ns={key:1,class:"col-mb-5 ms-1 mt-2"},Rs=He({__name:"PlotConfigurator",props:{columns:{required:!0,type:Array},asModal:{required:!1,default:!0,type:Boolean}},setup(e){const a=bn(),t=Ba(),n=$(Ze),o=$("default"),r=$(""),i=$(""),s=$(!1),l=$(!1),u=$("main_plot"),d=$(),c=$(!0),h=E(()=>u.value==="main_plot"),g=E(()=>h.value?n.value.main_plot:n.value.subplots[u.value]),f=E(()=>["main_plot",...Object.keys(n.value.subplots)]),p=E(()=>h.value?Object.keys(n.value.main_plot):u.value in n.value.subplots?Object.keys(n.value.subplots[u.value]):[]),v=k=>{console.log(n.value);const D=Object.keys(k)[0],U=k[D];h.value?(console.log(`Adding ${D} to MainPlot`),n.value.main_plot[D]={...U}):(console.log(`Adding ${D} to ${u.value}`),n.value.subplots[u.value][D]={...U}),n.value={...n.value},s.value=!1,a.setPlotConfig(n.value)},y=E({get(){return s.value?{}:i.value?{[i.value]:g.value[i.value]}:{}},set(k){Object.keys(k)[0]&&k?v(k):s.value=!1}}),_=E({get(){return JSON.stringify(n.value,null,2)},set(k){try{d.value=JSON.parse(k),c.value=!0}catch{c.value=!1}}}),b=()=>{console.log(n.value),h.value?(console.log(`Removing ${i.value} from MainPlot`),delete n.value.main_plot[i.value]):(console.log(`Removing ${i.value} from ${u.value}`),delete n.value.subplots[u.value][i.value]),n.value={...n.value},console.log(n.value),i.value="",a.setPlotConfig(n.value)},m=()=>{n.value.subplots={...n.value.subplots,[r.value]:{}},u.value=r.value,r.value="",a.setPlotConfig(n.value)},S=()=>{delete n.value.subplots[u.value],n.value.subplots={...n.value.subplots},u.value="",a.setPlotConfig(n.value)},x=()=>{n.value=_n(o.value),console.log(n.value),console.log("loading config"),a.setPlotConfig(n.value)},w=()=>{d.value!==void 0&&c.value&&(n.value=d.value,a.setPlotConfig(n.value))},M=()=>{n.value={...Ze}},L=async()=>{try{await t.activeBot.getStrategyPlotConfig(),t.activeBot.strategyPlotConfig&&(n.value=t.activeBot.strategyPlotConfig,a.setPlotConfig(n.value))}catch{wn("Failed to load Plot configuration from Strategy.")}},O=()=>{a.saveCustomPlotConfig({[o.value]:n.value})};return _t(()=>{n.value=a.plotConfig,o.value=a.plotConfigName}),(k,D)=>{const U=R("b-form-input"),q=R("b-form-group"),K=R("b-form-select"),G=R("b-button"),ye=R("b-input-group-append"),se=R("b-input-group"),H=R("b-form-textarea");return e.columns?(P(),B("div",ks,[T(q,{label:"Plot config name","label-for":"idPlotConfigName"},{default:I(()=>[T(U,{id:"idPlotConfigName",modelValue:o.value,"onUpdate:modelValue":D[0]||(D[0]=V=>o.value=V),size:"sm"},null,8,["modelValue"])]),_:1}),z("div",Ms,[Bs,T(q,{label:"Target","label-for":"FieldSel"},{default:I(()=>[T(K,{id:"FieldSel",modelValue:u.value,"onUpdate:modelValue":D[1]||(D[1]=V=>u.value=V),options:fe(f),"select-size":3},null,8,["modelValue","options"])]),_:1})]),T(q,{label:"Add new plot","label-for":"newSubPlot"},{default:I(()=>[T(se,{size:"sm"},{default:I(()=>[T(U,{id:"newSubPlot",modelValue:r.value,"onUpdate:modelValue":D[2]||(D[2]=V=>r.value=V),class:"addPlot"},null,8,["modelValue"]),T(ye,null,{default:I(()=>[T(G,{disabled:!r.value,onClick:m},{default:I(()=>[F("+")]),_:1},8,["disabled"]),u.value&&u.value!="main_plot"?(P(),J(G,{key:0,onClick:S},{default:I(()=>[F("-")]),_:1})):W("",!0)]),_:1})]),_:1})]),_:1}),zs,z("div",null,[T(q,{label:"Used indicators","label-for":"selectedIndicators"},{default:I(()=>[T(K,{id:"selectedIndicators",modelValue:i.value,"onUpdate:modelValue":D[3]||(D[3]=V=>i.value=V),options:fe(p),"select-size":4},null,8,["modelValue","options"])]),_:1})]),z("div",null,[T(G,{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:s.value,onClick:D[4]||(D[4]=V=>s.value=!s.value)},{default:I(()=>[F(" Add new indicator ")]),_:1},8,["disabled"]),T(G,{variant:"secondary",title:"Remove indicator to plot",size:"sm",disabled:!i.value,class:"ms-1",onClick:b},{default:I(()=>[F(" Remove indicator ")]),_:1},8,["disabled"])]),i.value||s.value?(P(),J(Ls,{key:0,modelValue:fe(y),"onUpdate:modelValue":D[5]||(D[5]=V=>Rt(y)?y.value=V:null),class:"mt-1",columns:e.columns,"add-new":s.value},null,8,["modelValue","columns","add-new"])):W("",!0),Vs,z("div",null,[T(G,{class:"ms-1",variant:"secondary",size:"sm",onClick:x},{default:I(()=>[F("Load")]),_:1}),T(G,{disabled:fe(t).activeBot.isWebserverMode||!fe(t).activeBot.isBotOnline,class:"ms-1",variant:"secondary",size:"sm",onClick:L},{default:I(()=>[F(" From strategy ")]),_:1},8,["disabled"]),T(G,{class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:M},{default:I(()=>[F("Reset")]),_:1}),T(G,{id:"showButton",class:"ms-1",variant:"secondary",size:"sm",title:"Show configuration for easy transfer to a strategy",onClick:D[6]||(D[6]=V=>l.value=!l.value)},{default:I(()=>[F("Show")]),_:1}),l.value?(P(),J(G,{key:0,class:"ms-1",variant:"secondary",size:"sm",title:"Load configuration from text box below",onClick:w},{default:I(()=>[F("Load from String")]),_:1})):W("",!0),T(G,{class:"ms-1",variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration",onClick:O},{default:I(()=>[F("Save")]),_:1})]),l.value?(P(),B("div",Ns,[T(H,{id:"TextArea",modelValue:fe(_),"onUpdate:modelValue":D[7]||(D[7]=V=>Rt(_)?_.value=V:null),class:"textArea",size:"sm",state:c.value},null,8,["modelValue","state"])])):W("",!0)])):W("",!0)}}});var $s=Ne(Rs,[["__scopeId","data-v-7aade157"]]),Es=Object.defineProperty,Fs=Object.defineProperties,Ws=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Zs=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,Da=(e,a,t)=>a in e?Es(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,_e=(e,a)=>{for(var t in a||(a={}))Zs.call(a,t)&&Da(e,t,a[t]);if(Pa)for(var t of Pa(a))Us.call(a,t)&&Da(e,t,a[t]);return e},Oa=(e,a)=>Fs(e,Ws(a));const Hs={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(e){this.autoscroll&&e&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var e;const a=((e=this.$refs.dropdownMenu)==null?void 0:e.children[this.typeAheadPointer])||!1;if(a){const t=this.getDropdownViewport(),{top:n,bottom:o,height:r}=a.getBoundingClientRect();if(n<t.top)return this.$refs.dropdownMenu.scrollTop=a.offsetTop;if(o>t.bottom)return this.$refs.dropdownMenu.scrollTop=a.offsetTop-(t.height-r)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},Gs={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open(e){e&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown(){for(let e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect(){const e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},js={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(e){this.mutableLoading=e}},methods:{toggleLoading(e=null){return e==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=e}}},Vt=(e,a)=>{const t=e.__vccOpts||e;for(const[n,o]of a)t[n]=o;return t},Ys={},qs={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},Ks=z("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),Xs=[Ks];function Js(e,a){return P(),B("svg",qs,Xs)}const Qs=Vt(Ys,[["render",Js]]),el={},tl={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},al=z("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),nl=[al];function ol(e,a){return P(),B("svg",tl,nl)}const rl=Vt(el,[["render",ol]]),Ia={Deselect:Qs,OpenIndicator:rl},il={mounted(e,{instance:a}){if(a.appendToBody){const{height:t,top:n,left:o,width:r}=a.$refs.toggle.getBoundingClientRect();let i=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset;e.unbindPosition=a.calculatePosition(e,a,{width:r+"px",left:i+o+"px",top:s+n+t+"px"}),document.body.appendChild(e)}},unmounted(e,{instance:a}){a.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}};function sl(e){const a={};return Object.keys(e).sort().forEach(t=>{a[t]=e[t]}),JSON.stringify(a)}let ll=0;function ul(){return++ll}const dl={components:_e({},Ia),directives:{appendToBody:il},mixins:[Hs,Gs,js],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0},getOptionLabel:{type:Function,default(e){return typeof e=="object"?e.hasOwnProperty(this.label)?e[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(e)}.
https://vue-select.org/api/props.html#getoptionlabel`):e}},getOptionKey:{type:Function,default(e){if(typeof e!="object")return e;try{return e.hasOwnProperty("id")?e.id:sl(e)}catch(a){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,e,a)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(e,a,t){return(a||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}},filter:{type:Function,default(e,a){return e.filter(t=>{let n=this.getOptionLabel(t);return typeof n=="number"&&(n=n.toString()),this.filterBy(t,n,a)})}},createOption:{type:Function,default(e){return typeof this.optionList[0]=="object"?{[this.label]:e}:e}},resetOnOptionsChange:{default:!1,validator:e=>["function","boolean"].includes(typeof e)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:e,multiple:a}){return e&&!a}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(e,a)=>e},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,a,{width:t,top:n,left:o}){e.style.top=n,e.style.left=o,e.style.width=t}},dropdownShouldOpen:{type:Function,default({noDrop:e,open:a,mutableLoading:t}){return e?!1:a&&!t}},uid:{type:[String,Number],default:()=>ul()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue=="undefined"||this.isReducingValues},selectedValue(){let e=this.modelValue;return this.isTrackingValues&&(e=this.$data._value),e!=null&&e!==""?[].concat(e):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const e={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:_e({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:a=>this.search=a.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:e,listFooter:e,header:Oa(_e({},e),{deselect:this.deselect}),footer:Oa(_e({},e),{deselect:this.deselect})}},childComponents(){return _e(_e({},Ia),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;const a=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){const t=this.createOption(this.search);this.optionExists(t)||a.unshift(t)}return a},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(e,a){const t=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(e,a,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&t()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple(){this.clearSelection()},open(e){this.$emit(e?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(e){Array.isArray(e)?this.$data._value=e.map(a=>this.findOptionFromReducedValue(a)):this.$data._value=this.findOptionFromReducedValue(e)},select(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&(this.$emit("option:created",e),this.pushTag(e)),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect(e){this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter(a=>!this.optionComparator(a,e))),this.$emit("option:deselected",e)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(e){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(e){typeof this.modelValue=="undefined"&&(this.$data._value=e),e!==null&&(Array.isArray(e)?e=e.map(a=>this.reduce(a)):e=this.reduce(e)),this.$emit("update:modelValue",e)},toggleDropdown(e){const a=e.target!==this.searchEl;a&&e.preventDefault();const t=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||t.filter(Boolean).some(n=>n.contains(e.target)||n===e.target)){e.preventDefault();return}this.open&&a?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(e){return this.selectedValue.some(a=>this.optionComparator(a,e))},isOptionDeselectable(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator(e,a){return this.getOptionKey(e)===this.getOptionKey(a)},findOptionFromReducedValue(e){const a=n=>JSON.stringify(this.reduce(n))===JSON.stringify(e),t=[...this.options,...this.pushedTags].filter(a);return t.length===1?t[0]:t.find(n=>this.optionComparator(n,this.$data._value))||e},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let e=null;this.multiple&&(e=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(e)}},optionExists(e){return this.optionList.some(a=>this.optionComparator(a,e))},normalizeOptionForSlot(e){return typeof e=="object"?e:{[this.label]:e}},pushTag(e){this.pushedTags.push(e)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:e,multiple:a}=this;this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:a})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(e){const a=o=>(o.preventDefault(),!this.isComposing&&this.typeAheadSelect()),t={8:o=>this.maybeDeleteValue(),9:o=>this.onTab(),27:o=>this.onEscape(),38:o=>(o.preventDefault(),this.typeAheadUp()),40:o=>(o.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(o=>t[o]=a);const n=this.mapKeydown(t,this);if(typeof n[e.keyCode]=="function")return n[e.keyCode](e)}}},cl=["dir"],hl=["id","aria-expanded","aria-owns"],pl={ref:"selectedOptions",class:"vs__selected-options"},fl=["disabled","title","aria-label","onClick"],vl={ref:"actions",class:"vs__actions"},gl=["disabled"],ml={class:"vs__spinner"},yl=["id"],_l=["id","aria-selected","onMouseover","onClick"],bl={key:0,class:"vs__no-options"},xl=F(" Sorry, no matching options. "),Cl=["id"];function Sl(e,a,t,n,o,r){const i=An("append-to-body");return P(),B("div",{dir:t.dir,class:Wt(["v-select",r.stateClasses])},[ee(e.$slots,"header",te(oe(r.scope.header))),z("div",{id:`vs${t.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":r.dropdownOpen.toString(),"aria-owns":`vs${t.uid}__listbox`,"aria-label":"Search for option",onMousedown:a[1]||(a[1]=s=>r.toggleDropdown(s))},[z("div",pl,[(P(!0),B($t,null,Et(r.selectedValue,(s,l)=>ee(e.$slots,"selected-option-container",{option:r.normalizeOptionForSlot(s),deselect:r.deselect,multiple:t.multiple,disabled:t.disabled},()=>[(P(),B("span",{key:t.getOptionKey(s),class:"vs__selected"},[ee(e.$slots,"selected-option",te(oe(r.normalizeOptionForSlot(s))),()=>[F(re(t.getOptionLabel(s)),1)]),t.multiple?(P(),B("button",{key:0,ref_for:!0,ref:u=>o.deselectButtons[l]=u,disabled:t.disabled,type:"button",class:"vs__deselect",title:`Deselect ${t.getOptionLabel(s)}`,"aria-label":`Deselect ${t.getOptionLabel(s)}`,onClick:u=>r.deselect(s)},[(P(),J(Ye(r.childComponents.Deselect)))],8,fl)):W("",!0)]))])),256)),ee(e.$slots,"search",te(oe(r.scope.search)),()=>[z("input",st({class:"vs__search"},r.scope.search.attributes,Tn(r.scope.search.events)),null,16)])],512),z("div",vl,[$e(z("button",{ref:"clearButton",disabled:t.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:a[0]||(a[0]=(...s)=>r.clearSelection&&r.clearSelection(...s))},[(P(),J(Ye(r.childComponents.Deselect)))],8,gl),[[lt,r.showClearButton]]),ee(e.$slots,"open-indicator",te(oe(r.scope.openIndicator)),()=>[t.noDrop?W("",!0):(P(),J(Ye(r.childComponents.OpenIndicator),te(st({key:0},r.scope.openIndicator.attributes)),null,16))]),ee(e.$slots,"spinner",te(oe(r.scope.spinner)),()=>[$e(z("div",ml,"Loading...",512),[[lt,e.mutableLoading]])])],512)],40,hl),T(za,{name:t.transition},{default:I(()=>[r.dropdownOpen?$e((P(),B("ul",{id:`vs${t.uid}__listbox`,ref:"dropdownMenu",key:`vs${t.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:a[2]||(a[2]=Ft((...s)=>r.onMousedown&&r.onMousedown(...s),["prevent"])),onMouseup:a[3]||(a[3]=(...s)=>r.onMouseUp&&r.onMouseUp(...s))},[ee(e.$slots,"list-header",te(oe(r.scope.listHeader))),(P(!0),B($t,null,Et(r.filteredOptions,(s,l)=>(P(),B("li",{id:`vs${t.uid}__option-${l}`,key:t.getOptionKey(s),role:"option",class:Wt(["vs__dropdown-option",{"vs__dropdown-option--deselect":r.isOptionDeselectable(s)&&l===e.typeAheadPointer,"vs__dropdown-option--selected":r.isOptionSelected(s),"vs__dropdown-option--highlight":l===e.typeAheadPointer,"vs__dropdown-option--disabled":!t.selectable(s)}]),"aria-selected":l===e.typeAheadPointer?!0:null,onMouseover:u=>t.selectable(s)?e.typeAheadPointer=l:null,onClick:Ft(u=>t.selectable(s)?r.select(s):null,["prevent","stop"])},[ee(e.$slots,"option",te(oe(r.normalizeOptionForSlot(s))),()=>[F(re(t.getOptionLabel(s)),1)])],42,_l))),128)),r.filteredOptions.length===0?(P(),B("li",bl,[ee(e.$slots,"no-options",te(oe(r.scope.noOptions)),()=>[xl])])):W("",!0),ee(e.$slots,"list-footer",te(oe(r.scope.listFooter)))],40,yl)),[[i]]):(P(),B("ul",{key:1,id:`vs${t.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Cl))]),_:3},8,["name"]),ee(e.$slots,"footer",te(oe(r.scope.footer)))],10,cl)}const wl=Vt(dl,[["render",Sl]]);const Al=He({name:"CandleChartContainer",components:{CandleChart:gs,PlotConfigurator:$s,vSelect:wl},props:{trades:{required:!1,default:()=>[],type:Array},availablePairs:{required:!0,type:Array},timeframe:{required:!0,type:String},historicView:{required:!1,default:!1,type:Boolean},plotConfigModal:{required:!1,default:!0,type:Boolean},timerange:{required:!1,default:"",type:String},strategy:{required:!1,default:"",type:String},sliderPosition:{required:!1,type:Object,default:()=>{}}},setup(e){const a=Pn(),t=Ba(),n=bn(),o=$(""),r=$(e.plotConfigModal),i=E(()=>{var p,v;return e.historicView?(p=t.activeBot.history[`${o.value}__${e.timeframe}`])==null?void 0:p.data:(v=t.activeBot.candleData[`${o.value}__${e.timeframe}`])==null?void 0:v.data}),s=E(()=>{var p;return e.strategy||((p=i.value)==null?void 0:p.strategy)||""}),l=E(()=>i.value?i.value.columns:[]),u=E(()=>!!i.value),d=E(()=>e.historicView?t.activeBot.historyStatus===Ie.loading:t.activeBot.candleDataStatus===Ie.loading),c=E(()=>{switch(e.historicView?t.activeBot.historyStatus:t.activeBot.candleDataStatus){case Ie.loading:return"Loading...";case Ie.success:return"No data available";case Ie.error:return"Failed to load data";default:return"Unknown"}}),h=$(!1),g=()=>{e.plotConfigModal?h.value=!h.value:r.value=!r.value},f=()=>{console.log("refresh",o.value,e.timeframe),o.value&&e.timeframe&&(e.historicView?t.activeBot.getPairHistory({pair:o.value,timeframe:e.timeframe,timerange:e.timerange,strategy:e.strategy}):t.activeBot.getPairCandles({pair:o.value,timeframe:e.timeframe,limit:500}))};return ue(()=>e.availablePairs,()=>{e.availablePairs.find(p=>p===o.value)||([o.value]=e.availablePairs,f())}),ue(()=>t.activeBot.selectedPair,()=>{o.value=t.activeBot.selectedPair,f()}),_t(()=>{t.activeBot.selectedPair?o.value=t.activeBot.selectedPair:e.availablePairs.length>0&&([o.value]=e.availablePairs),n.plotConfigChanged(),u||f()}),{botStore:t,settingsStore:a,plotStore:n,history,dataset:i,strategyName:s,datasetColumns:l,isLoadingDataset:d,noDatasetText:c,hasDataset:u,showPlotConfig:r,showConfigurator:g,refresh:f,pair:o,showPlotConfigModal:h}}}),Tl={class:"d-flex h-100"},Pl={class:"flex-fill w-100 flex-column align-items-stretch d-flex h-100"},Dl={class:"d-flex me-0"},Ol={class:"ms-2 d-flex flex-wrap flex-md-nowrap align-items-center w-auto"},Il={class:"ms-2 text-nowrap"},Ll={key:0,class:"ms-2 text-nowrap",title:"Long entry signals"},kl={key:1,class:"ms-2 text-nowrap",title:"Long exit signals"},Ml={key:2,class:"ms-2 text-nowrap"},Bl={key:3,class:"ms-2 text-nowrap"},zl={class:"ms-auto d-flex align-items-center w-auto"},Vl={class:"ms-2"},Nl={class:"ms-2 me-0 me-md-1"},Rl={class:"me-1 ms-1 h-100"},$l={key:1,class:"m-auto"},El={key:1,style:{"font-size":"1.5rem"}},Fl={key:0,class:"w-25 config-sidebar"};function Wl(e,a,t,n,o,r){const i=R("v-select"),s=R("b-button"),l=R("b-form-checkbox"),u=R("b-form-select"),d=R("CandleChart"),c=R("b-spinner"),h=R("PlotConfigurator"),g=R("b-modal");return P(),B("div",Tl,[z("div",Pl,[z("div",Dl,[z("div",Ol,[z("span",Il,re(e.strategyName)+" | "+re(e.timeframe||""),1),T(i,{modelValue:e.pair,"onUpdate:modelValue":a[0]||(a[0]=f=>e.pair=f),class:"ms-2",options:e.availablePairs,style:{"min-width":"7em"},size:"sm",clearable:!1,onInput:e.refresh},null,8,["modelValue","options","onInput"]),T(s,{class:"ms-2",disabled:!e.pair,size:"sm",onClick:e.refresh},{default:I(()=>[F("\u21BB")]),_:1},8,["disabled","onClick"]),e.dataset?(P(),B("small",Ll,"Long signals: "+re(e.dataset.enter_long_signals||e.dataset.buy_signals),1)):W("",!0),e.dataset?(P(),B("small",kl,"Long exit: "+re(e.dataset.exit_long_signals||e.dataset.sell_signals),1)):W("",!0),e.dataset&&e.dataset.enter_short_signals?(P(),B("small",Ml,"Short entries: "+re(e.dataset.enter_short_signals),1)):W("",!0),e.dataset&&e.dataset.exit_short_signals?(P(),B("small",Bl,"Short exits: "+re(e.dataset.exit_short_signals),1)):W("",!0)]),z("div",zl,[T(l,{modelValue:e.settingsStore.useHeikinAshiCandles,"onUpdate:modelValue":a[1]||(a[1]=f=>e.settingsStore.useHeikinAshiCandles=f)},{default:I(()=>[F("Heikin Ashi")]),_:1},8,["modelValue"]),z("div",Vl,[T(u,{modelValue:e.plotStore.plotConfigName,"onUpdate:modelValue":a[2]||(a[2]=f=>e.plotStore.plotConfigName=f),options:e.plotStore.availablePlotConfigNames,size:"sm",onChange:e.plotStore.plotConfigChanged},null,8,["modelValue","options","onChange"])]),z("div",Nl,[T(s,{size:"sm",title:"Plot configurator",onClick:e.showConfigurator},{default:I(()=>[F(" \u2699 ")]),_:1},8,["onClick"])])])]),z("div",Rl,[e.hasDataset?(P(),J(d,{key:0,dataset:e.dataset,trades:e.trades,"plot-config":e.plotStore.plotConfig,"heikin-ashi":e.settingsStore.useHeikinAshiCandles,"use-u-t-c":e.settingsStore.timezone==="UTC",theme:e.settingsStore.chartTheme,"slider-position":e.sliderPosition},null,8,["dataset","trades","plot-config","heikin-ashi","use-u-t-c","theme","slider-position"])):(P(),B("div",$l,[e.isLoadingDataset?(P(),J(c,{key:0,label:"Spinning"})):(P(),B("div",El,re(e.noDatasetText),1))]))])]),T(za,{name:"fade",mode:"in-out"},{default:I(()=>[e.plotConfigModal?W("",!0):$e((P(),B("div",Fl,[T(h,{columns:e.datasetColumns,"as-modal":!1},null,8,["columns"])],512)),[[lt,e.showPlotConfig]])]),_:1}),e.plotConfigModal?(P(),J(g,{key:0,id:"plotConfiguratorModal",modelValue:e.showPlotConfigModal,"onUpdate:modelValue":a[3]||(a[3]=f=>e.showPlotConfigModal=f),title:"Plot Configurator","ok-only":"","hide-backdrop":""},{default:I(()=>[T(h,{columns:e.datasetColumns},null,8,["columns"])]),_:1},8,["modelValue"])):W("",!0)])}var jl=Ne(Al,[["render",Wl],["__scopeId","data-v-faea7c82"]]);export{jl as C};
//# sourceMappingURL=CandleChartContainer.664f3653.js.map
